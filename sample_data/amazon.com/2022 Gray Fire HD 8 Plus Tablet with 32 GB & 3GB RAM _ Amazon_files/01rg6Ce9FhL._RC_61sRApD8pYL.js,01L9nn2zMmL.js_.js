(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageInstallmentCalculatorAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(t){var h=window.AmazonUIPageJS||window.P,u=h._namespace||h.attributeErrors,g=u?u("ABPricingFreeFormQuantityPickerAssets",""):h;g.guardFatal?g.guardFatal(t)(g,window):g.execute(function(){t(g,window)})})(function(t,h,u){t.when("jQuery","A","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_amazonAPIPriceFormatter").register("abPricingFfqp_amazonAPIClient",function(g,h,e,a,d){return h.createClass({inclusions:function(){return{priceV1:"buyingOptions[].price(product.price/v1)",
quantityPricingTableV1:"buyingOptions[].quantityPricingTable(product.quantity-pricing-table/v1)",availabilityV2:"buyingOptions[].availability(product.availability/v2)",packAsinRecommendationV1:"buyingOptions[].packAsinRecommendations(product.pack-asin-recommendations/v1)"}},init:function(a){this._baseEndpoint="https://"+a.endpoint;this._baseUrl=this._baseEndpoint+"/api/marketplaces/"+a.marketplaceId+"/";this._defaultHeaders={"Accept-Language":a.language,"x-api-csrf-token":a.csrfToken,"x-cc-currency-of-preference":a.currencyOfPreference,
"x-amzn-encrypted-slate-token":this._getSlateToken()};"object"===typeof a.priceFormatConfig&&(this._aapiPriceFormatter=new d(a.priceFormatConfig));a=this._getValidatedClientId(a.clientId);this._metricScopeName=e.METRIC_SCOPE_NAME.AAPI_CLIENT.replace(e.AAPI_CLIENT_ID_PLACEHOLDER,a);this._statusMetricNameTpl=e.COUNTER_METRIC.AAPI_REQUEST_STATUS.replace(e.AAPI_CLIENT_ID_PLACEHOLDER,a)},_constructHeader:function(a,d){return"application/vnd.com.amazon.api+json; "+(""===a?"":'type\x3d"'+a+'"; ')+(""===
d?"":'expand\x3d"'+d+'"; ')+'experiments\x3d"enableQuantityPricingTablePaginationField_dn2f4w34"'},productV2:function(a){var d=["products",a.asin],e={Accept:this._constructHeader("product/v2",a.subresources.join(","))};d=this._constructUrl(d,a.parameters);this._get(a.success,a.error,d,e)},productQPT:function(a){var d={Accept:this._constructHeader("product.quantity-pricing-table/v1","")};this._get(a.success,a.error,this._baseEndpoint+a.url,d)},_getValidatedClientId:function(a){return"string"===typeof a&&
0<a.length?a:e.UNSPECIFIED_CLIENT_ID},_get:function(d,p,h,k){var f=this;a.registerWidgetBodyBegin(this._metricScopeName);k=g.extend(this._defaultHeaders,k);g.ajax({url:h,type:"GET",headers:k,xhrFields:{withCredentials:!0},timeout:e.AAPI_CLIENT_TIMEOUT}).done(function(a,c){f._handleAjaxSuccess(a,c,d)}).fail(function(a,c,d){f._handleAjaxError(c,d,p,a.status)}).always(function(a,c){f._handleAjaxComplete(c)})},_constructUrl:function(a,d){d=d||{};d=g.map(d,function(a,d){return d.toString()+"\x3d"+a.toString()}).join("\x26");
return this._baseUrl+a.join("/")+(0<d.length?"?"+d:"")},_getSlateToken:function(){var a=document.querySelector('meta[name\x3d"encrypted-slate-token"]');if(a)return a.content},_handleAjaxSuccess:function(d,e,g){this._aapiPriceFormatter&&this._aapiPriceFormatter.formatPrices(d);a.registerWidgetCriticalFeature(this._metricScopeName);a.registerWidgetLoaded(this._metricScopeName);g&&g(d,e)},_handleAjaxError:function(d,e,g,h){a.registerWidgetLoaded(this._metricScopeName);g&&g(d,e,h);d=["Error during ajax request:",
h||"",d||"",e||""].join(" ");a.logError("ERROR",d)},_handleAjaxComplete:function(d){"string"!==typeof d&&(d=e.UNSPECIFIED_REQUEST_STATUS);d=this._statusMetricNameTpl.replace(e.AAPI_REQUEST_STATUS_PLACEHOLDER,d);a.registerCounter(d)}})});"use strict";t.when("A","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_priceFormatter").register("abPricingFfqp_amazonAPIPriceFormatter",function(g,h,e,a){return g.createClass({init:function(d){this._priceFormatter=new a(d)},formatPrices:function(a){e.registerWidgetBodyBegin(h.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER);
try{this._formatPricesRec(a),e.registerWidgetCriticalFeature(h.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER)}catch(l){throw l;}finally{e.registerWidgetLoaded(h.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER)}},_formatPricesRec:function(a){if(this._isPriceObject(a))a.displayString=this._formatPrice(a.amount,a.currencyCode,a.displayString);else if("object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&this._formatPricesRec(a[d])},_isPriceObject:function(a){return"object"===typeof a&&this._priceFormatter.isValidPrice(a.amount,
a.currencyCode)},_formatPrice:function(a,e,g){return"string"===typeof g&&0<g.length?g:this._priceFormatter.format(a,e)}})});"use strict";t.when("A","abPricingFfqp_constants","abPricingFfqp_metrics").register("abPricingFfqp_priceFormatter",function(g,h,e){return g.createClass({init:function(a){a=a||{};this._priceFormat=a.priceFormat;this._decimalSeparator=a.decimalSeparator;this._fractionDigits=parseInt(a.fractionDigits);this._groupingSeparator=a.groupingSeparator;this._groupingDigits=parseInt(a.groupingDigits);
this._secondaryGroupingDigits=parseInt(a.secondaryGroupingDigits);this._minGroupingDigits=parseInt(a.minGroupingDigits);this._currencyCode=a.currencyOfPreference;this._validateInput();0===this._secondaryGroupingDigits&&(this._secondaryGroupingDigits=this._groupingDigits)},format:function(a,d){a=parseFloat(a);isNaN(a)&&this._throwValidationError("amount");if(0>a)return"-"+this.format(-a,d);a=this._formatAmount(a);return this._currencyFormat(d).replace("{}",a)},isValidPrice:function(a,d){a=parseFloat(a);
return!isNaN(a)&&0<=a&&this._isValidCurrencyCode(d)},_validateInput:function(){this._validatePriceFormat();this._validateSeparator("decimalSeparator",this._decimalSeparator);this._validateSeparator("groupingSeparator",this._groupingSeparator);this._validateDigitsCount("fractionDigits",this._fractionDigits,0);this._validateDigitsCount("groupingDigits",this._groupingDigits,0);this._validateDigitsCount("secondaryGroupingDigits",this._secondaryGroupingDigits,0);this._validateDigitsCount("minGroupingDigits",
this._minGroupingDigits,1);this._validateCurrencyCode()},_validatePriceFormat:function(){"string"===typeof this._priceFormat&&-1!==this._priceFormat.indexOf("{}")||this._throwValidationError("priceFormat")},_validateSeparator:function(a,d){"string"===typeof d&&0!==d.length||this._throwValidationError(a)},_validateDigitsCount:function(a,d,e){("number"!==typeof d||isNaN(d)||d<e)&&this._throwValidationError(a)},_validateCurrencyCode:function(){this._isValidCurrencyCode(this._currencyCode)||this._throwValidationError("currencyOfPreference")},
_isValidCurrencyCode:function(a){return"string"===typeof a&&/^[A-Z]{3}$/.test(a)},_throwValidationError:function(a){throw Error("[abPricingFfqp_priceFormatter] Invalid value for "+a);},_formatAmount:function(a){var d=this._halfEvenRound(a,this._fractionDigits).toString().split(".");a=this._formatIntegerPart(d[0]);if(0===this._fractionDigits)return a;d=this._formatDecimalPart(2===d.length?d[1]:"");return[a,d].join(this._decimalSeparator)},_halfEvenRound:function(a,d){a*=Math.pow(10,d);var e=a%1;a=
.500001<=e||1E-6>Math.abs(e-.5)&&1===Math.floor(a)%2?Math.ceil(a):Math.floor(a);return a/Math.pow(10,d)},_formatIntegerPart:function(a){if(0===this._groupingDigits||a.length<this._groupingDigits+this._minGroupingDigits)return a;for(var d=a.length,e=!0,g=[];0<d;){var h=this._secondaryGroupingDigits;e&&(e=!1,h=this._groupingDigits);d<h?g.push(a.substr(0,d)):g.push(a.substr(d-h,h));d-=h}return g.reverse().join(this._groupingSeparator)},_formatDecimalPart:function(a){for(;a.length<this._fractionDigits;)a+=
"0";return a.substr(0,this._fractionDigits)},_currencyFormat:function(a){if(a===this._currencyCode)return this._priceFormat;this._isValidCurrencyCode(a)||this._throwValidationError("currencyCode");e.registerCounter(h.COUNTER_METRIC.FALLBACK_PRICE_FORMAT_USED);return a+" {}"}})});"use strict";t.register("abPricingFfqp_constants",function(){return{PACKAGE_PREFIX:"ABPricingFreeFormQuantityPicker",METRIC_SCOPE_NAME:{AAPI_PRICE_FORMATTER:"b2b-ffqp-aapi-price-formatter",AAPI_CLIENT:"b2b-ffqp-aapi-client-{clientId}",
AAPI_QPT:"b2b-ffqp-aapi-qpt",AAPI_PACK_ASIN:"b2b-ffqp-aapi-pack-asin",AAPI_SINGLE_QUANTITY:"b2b-ffqp-aapi-single-quantity",AUI_STATE_PARSING:"b2b-ffqp-aui-state-parsing",GET_QPT_REQUEST:"b2b-ffqp-get-qpt-request"},COUNTER_METRIC:{FALLBACK_PRICE_FORMAT_USED:"ABPricingFreeFormQuantityPicker.FallbackPriceFormatUsed",AAPI_REQUEST_STATUS:"ABPricingFreeFormQuantityPicker.AAPIClient.{clientId}.status.{status}",AAPI_SINGLE_QUANTITY_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPISingleQuantityBONotFound",
AAPI_SINGLE_QUANTITY_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPISingleQuantityBONotFoundExtractionFailed",AAPI_PACK_ASIN_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPIPackAsinExtractionFailed",AAPI_PACK_ASIN_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPIPackAsinBONotFound",AAPI_PACK_ASIN_MISSING:"ABPricingFreeFormQuantityPicker.AAPIPackAsinMissing",AAPI_PACK_ASIN_MISSING_BO:"ABPricingFreeFormQuantityPicker.AAPIPackAsinMissing.{bo}",AAPI_PACK_ASIN_ERROR:"ABPricingFreeFormQuantityPicker.AAPIPackAsinError",
AAPI_PACK_ASIN_ERROR_CODE:"ABPricingFreeFormQuantityPicker.AAPIPackAsinError.{code}",AAPI_PACK_ASIN_PRESENT:"ABPricingFreeFormQuantityPicker.AAPIPackAsinPresent",AAPI_QPT_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableBONotFound",AAPI_QPT_MISSING:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableMissing",AAPI_QPT_MISSING_BO:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableMissing.{bo}",AAPI_QPT_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableError",
AAPI_QPT_ERROR_CODE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableError.{code}",AAPI_QPT_PRESENT:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePresent",AAPI_QPT_PAGINATES:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginates",AAPI_QPT_FETCH_PAGE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableFetchPage",AAPI_QPT_PAGE_FETCHED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePageFetched",AAPI_QPT_PAGINATION_COMPLETE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationComplete",
AAPI_QPT_NEXT_PAGE_ONLY:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableNextPageOnly",AAPI_QPT_PAGE_MISSING:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationPageMissing",AAPI_QPT_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableExtractionFailed",AAPI_QPT_CONVERSION_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableConversionFailed",AAPI_QPT_PAGINATION_PAGE_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationPageError",
AAPI_QPT_PAGINATION_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationError",AAPI_QPT_PAGINATION_404_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePagination404Error",AAPI_QPT_PAGINATION_404_EXCEPTION:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePagination404Exception",AAPI_QPT_MAX_PAGINATION_DEPTH_REACHED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationDepthReached",AAPI_QPT_WEBLABS_TRIGGERING_EXCEPTION:"ABPricingFreeFormQuantityPicker.WeblabTriggeringException",
AAPI_SUBRESOURCE_WEBLABS_TRIGGERING_EXCEPTION:"ABPricingFreeFormQuantityPicker.SubresourceWeblabTriggeringException",AAPI_DATA_MGR_INIT_FAILED:"ABPricingFreeFormQuantityPicker.AAPIDataManagerInitializationFailed",PACK_ASIN_RECOMMENDATION_ERROR:"ABPricingFreeFormQuantityPicker.PackAsinRecommendationError",QUANTITY_REFRESH_CHECK_ERROR:"ABPricingFreeFormQuantityPicker.QuantityRefreshCheckError",PAGE_WILL_REFRESH:"ABPricingFreeFormQuantityPicker.PageWillRefresh",NO_PAGE_REFRESH_QTY_AVAILABLE:"ABPricingFreeFormQuantityPicker.NoPageRefreshQtyAvailable",
NO_PAGE_REFRESH_QTY_NOT_AVAILABLE:"ABPricingFreeFormQuantityPicker.NoPageRefreshQtyNotAvailable",AVAILABILITY_CHECK_QTY_AVAILABLE_SHOULD_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailableShouldRefresh",AVAILABILITY_CHECK_PAGE_WILL_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckPageWillRefresh",AVAILABILITY_CHECK_QTY_AVAILABLE_NO_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailableNoRefresh",AVAILABILITY_CHECK_QTY_AVAILABLE:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailable",
OPTIMIZER_POPOVER_DISPLAYED:"ABPricingFreeFormQuantityPicker.OptimizerPopoverDisplayed",OPTIMIZER_BOTTOM_SHEET_DISPLAYED:"ABPricingFreeFormQuantityPicker.OptimizerBottomSheetDisplayed",AVAILABILITY_CHECK_QTY_NOT_AVAILABLE:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyNotAvailable",AVAILABILITY_CHECK_ERROR:"ABPricingFreeFormQuantityPicker.AvailabilityCheckError",MISSING_AJAX_PARAMS:"ABPricingFreeFormQuantityPicker.MissingAjaxParams",SPLIT_OFFER_LINK_DISPLAYED:"SplitOfferLinkDisplayed"},ERROR:{AAPI_DATA_MGR_INIT_FAILED:"AAPIDataManager initialization failed",
MISSING_AJAX_PARAMS:"AAPIDataManager could not find the AJAX parameters"},AAPI_CLIENT_ID_PLACEHOLDER:"{clientId}",AAPI_METADATA_EXPERIMENTS:"x-api-exp-data",AAPI_REQUEST_STATUS_PLACEHOLDER:"{status}",AAPI_ERROR_CODE_PLACEHOLDER:"{code}",AAPI_BO_PLACEHOLDER:"{bo}",UNSPECIFIED_CLIENT_ID:"unspecified",UNSPECIFIED_REQUEST_STATUS:"unspecified",AAPI_CLIENT_TIMEOUT:6E3,AJAX_PARAMS_STATE_KEY:"quantityPickerAjaxParams",MAX_SUPPORTED_QTY:999,MAX_PAGINATION_DEPTH:10,ADD_TO_CART_QUANTITY_CHANGE_EVENT:"addToCartQuantityChange",
URL_PARAM_ID__BUYING_IN_BULK_QUANTITY:"quantity",URL_PARAM_ID__BUYING_IN_BULK_REFTAG:"ref_",URL_PARAM_ID__BUYING_IN_BULK_ASIN:"asin",URL_PARAM_VALUE__LIMITED_AVAILABILITY_REFTAG:"bbt_limit_order",WEBLAB_AUTOTRIGGER_ALLOWLIST:["AB_SAVINGS_STANDARDIZATION_EXPERIMENT_868536","B2BHAWKS_QPT_PAGE_LIMIT_DATAPATH_1033347"]}});"use strict";t.when("jQuery","abPricingFfqp_constants","ready").register("abPricingFfqp_metrics",function(g,m){function e(d){a.isEnabled&&h.ue&&h.ue.count&&h.ue.count(d,(h.ue.count(d)||
0)+1)}var a={isEnabled:!0};return{logError:function(a,e,g){h.ueLogError&&(a={logLevel:a,attribution:m.PACKAGE_PREFIX},g?a.message=e+" ":g={message:e},h.ueLogError(g,a))},register:function(a){a.counter&&e(a.counter)},registerCounter:e,registerWidgetBodyBegin:function(e){a.isEnabled&&h.uet&&h.uet("bb",e,{wb:1})},registerWidgetCriticalFeature:function(e){a.isEnabled&&h.uet&&h.uet("cf",e,{wb:1})},registerWidgetLoaded:function(e){a.isEnabled&&h.uex&&h.uex("ld",e,{wb:1})},triggerWeblabIfAllowlisted:function(a,
e){m.WEBLAB_AUTOTRIGGER_ALLOWLIST.includes(a)&&h.ue&&h.ue.trigger&&h.ue.trigger(a,e)}}});"use strict";t.when("jQuery","A","abPricingFfqp_utils","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_quantityPickerDataManager").register("abPricingFfqp_quantityManager",function(g,m,e,a,d,l){function p(){var c=x();1!==c&&(c={asin:e.getPageState().asin,quantity:c,success:function(a){q(a)},error:function(){d.registerCounter(a.COUNTER_METRIC.PACK_ASIN_RECOMMENDATION_ERROR)}},l.getInstance().getPackAsinRecommendationTiers(c))}
function q(a){a.forEach(function(a){setTimeout(function(){var c=f(a),b=c.totalQuantity,v=c.packConfiguration;c=(c=c.priceMessageFragment)&&c.money&&c.money.displayString;if("RECOMMENDED"===a.badgeType){var d={};d.qty=a.asinConfiguration.quantity;d.ref_="optimizer_redirect";var g=a.asinConfiguration.asin.resource.url.match(/\/([A-Z0-9]{10})$/);v='\x3ca class\x3d"a-link-normal"  href\x3d'+(h.location.protocol+"//"+h.location.host+(g&&2===g.length?"/dp/"+g[1]:"#")+w("",d))+"\x3e"+v+"\x3c/a\x3e";"desktop"===
e.getPageState().platform?(document.getElementById("numberOfUnitsSuggested").innerHTML=b,document.getElementById("packConfigurationSuggested").innerHTML=v,document.getElementById("priceSuggested").innerHTML=c,k("pack-optimizer-popover-new","pack-optimizer-popover-secondaryNew")):(document.getElementById("numberOfUnitsSuggestedMobile").innerHTML=b,document.getElementById("packConfigurationSuggestedMobile").innerHTML=v,document.getElementById("priceSuggestedMobile").innerHTML=c)}else"SECONDARY"!==a.badgeType&&
"mobile"===e.getPageState().platform&&(document.getElementById("numberOfUnitsCurrent").innerHTML=b,document.getElementById("packConfigurationCurrent").innerHTML=v,document.getElementById("priceCurrent").innerHTML=c,k("optimizer-bottom-sheet-new","optimizer-bottom-sheet-secondaryNew"))},500)})}function k(c,b){var f=document.getElementById(c);b=document.getElementById(b);var e=!1;f&&f.checkVisibility()?(f.click(),e=!0):b&&b.checkVisibility()&&(b.click(),e=!0);e&&(c=c.includes("popover")?a.COUNTER_METRIC.OPTIMIZER_POPOVER_DISPLAYED:
a.COUNTER_METRIC.OPTIMIZER_BOTTOM_SHEET_DISPLAYED,d.registerCounter(c))}function f(a){var c=a.totalQuantity.text,b=a.asinConfiguration.displayConfigurationString;a=a.priceMessage.fragments.find(function(a){if(a.money&&a.money.displayString)return a});return{totalQuantity:c,packConfiguration:b,priceMessageFragment:a}}function b(a,c){return(a=(new RegExp("(?:^|\\?|\x26)"+c+"\x3d(?:([^\x26#]*)|\x26|#|$)")).exec(a))?a[1]?decodeURIComponent(a[1].replace(/\+/g," ")):"":u}function c(a,c,b){var f=a.split("#");
a=f[0];a="?"===a[0]?a.substr(1):a;f=f[1];"undefined"!==typeof b&&null!==b?(b=c+"\x3d"+b,c=new RegExp("(^|\x26)("+c+"\x3d[^\x26]*)"),a=c.test(a)?a.replace(c,"$1"+b):a+((0!==a.length?"\x26":"")+b)):(c=new RegExp("(^|\x26)("+c+"\x3d[^\x26]*)"),c.test(a)&&(a=a.replace(c,""),"\x26"===a[0]&&(a=a.substr(1))));return"?"+a+("undefined"!==typeof f?"#"+f:"")}function w(a,b){for(var f in b)b.hasOwnProperty(f)&&(a=c(a,encodeURIComponent(f),encodeURIComponent(b[f])));return a}function y(a){return h.location.protocol+
"//"+h.location.host+h.location.pathname+w(h.location.search,a)}function x(){var c=parseInt(b(h.location.search,"qty"));return isNaN(c)||1>c||c>a.MAX_SUPPORTED_QTY?1:c}function n(){this._initialQuantity=this.currentQuantity=x();this.wireUpSelectorBasedEvents()}m.on("ready",function(){var a=h.location.search;a.includes("\x26bmsmSlotRedirect\x3d1")&&document.getElementById("qtyUpdatedTooltip").click();a.includes("qty")&&p()});n.prototype.getCurrentQuantity=function(){return this.currentQuantity};n.prototype.wireUpSelectorBasedEvents=
function(){var a=this;t.when("A","jQuery","quanityChangePriceUpdate").execute(function(c,b,f){a.quantityChangePriceUpdater=f;c.on("a:pageUpdate",function(){a.handleTwisterPageRefresh()})})};n.prototype.update3PPriceBlock=function(){if(!(this.leastMinimumOrderQuantity===u||1>=this.leastMinimumOrderQuantity)){var a=g(".price3P");a.hasClass("updatedPrice3P")||(a.addClass("updatedPrice3P"),this.quantityChangePriceUpdater.ajaxCall({qt:this.leastMinimumOrderQuantity,quantityPriceField:"quantity_price"}))}};
n.prototype.handleTwisterPageRefresh=function(){this.update3PPriceBlock()};n.prototype.reloadPageForQuantity=function(a,c){var b={},f="";b.qty=a;b.psc=1;a="";"undefined"!==typeof c&&("undefined"!==typeof c.refTag&&(b.ref_=c.refTag),"string"===typeof c.selectedBuyingOption&&0<c.selectedBuyingOption.length&&(b.sbo=c.selectedBuyingOption),"undefined"!==typeof c.merchantId&&(b.smid=c.merchantId),"undefined"!==typeof c.anchorToDiv&&(a=c.anchorToDiv),"undefined"!==typeof c.asinDetailPageUrl&&(f=h.location.protocol+
"//"+h.location.host+c.asinDetailPageUrl+w("",b)+"\x26bmsmSlotRedirect\x3d1"+a));0===f.length&&(f=y(b)+a);h.location.href=f};n.prototype.notifyQuantityTyped=function(c,b){this.quantityRefreshCheck({newQuantity:c,currentBuyBoxId:b.currentBuyBoxId,qdsForLockedMerchantEnabled:b.qdsForLockedMerchantEnabled,success:function(c,f){d.registerCounter(c?a.COUNTER_METRIC.AVAILABILITY_CHECK_QTY_AVAILABLE:a.COUNTER_METRIC.AVAILABILITY_CHECK_QTY_NOT_AVAILABLE);b.callback({hasAvailability:c})},error:function(){d.registerCounter(a.COUNTER_METRIC.AVAILABILITY_CHECK_ERROR);
b.callback({hasAvailability:!0})}})};n.prototype.buyboxRefreshCheck=function(c){var b=this;this.quantityRefreshCheck({newQuantity:c.newQuantity,currentBuyBoxId:c.currentBuyBoxId,qdsForLockedMerchantEnabled:c.qdsForLockedMerchantEnabled,startEvent:"quantityRefreshCheckStarted",success:function(f,e){c.newQuantity===b.currentQuantity&&(f&&e?(d.registerCounter(a.COUNTER_METRIC.PAGE_WILL_REFRESH),b.reloadPageForQuantity(c.newQuantity,{activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption})):
(d.registerCounter(f?a.COUNTER_METRIC.NO_PAGE_REFRESH_QTY_AVAILABLE:a.COUNTER_METRIC.NO_PAGE_REFRESH_QTY_NOT_AVAILABLE),c.callback({hasAvailability:f})),m.trigger("quantityRefreshCheckFinished"))},error:function(){d.registerCounter(a.COUNTER_METRIC.QUANTITY_REFRESH_CHECK_ERROR);c.newQuantity===b.currentQuantity&&b.reloadPageForQuantity(c.newQuantity,{activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption})}})};n.prototype.notifyQuantityChanged=function(a,c){a=parseInt(a);if(this.currentQuantity!==
a){this.currentQuantity=a;if(h.history!==u&&h.history.pushState!==u){var b={};b.qty=a;h.history.pushState({},"",y(b));p()}m.trigger("buyBoxQuantityChanged",c.senderId,a,{newQuantity:a,activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption});m.trigger("notifyBuyingInBulkOptionClicked",a)}};n.prototype.quantityRefreshCheck=function(a){if(!0!==a.preventRefreshCheck){var c={asin:e.getPageState().asin,initialQuantity:this._initialQuantity,quantity:a.newQuantity,currentBuyBoxId:a.currentBuyBoxId,
success:a.success,error:a.error};if(a.qdsForLockedMerchantEnabled){var f=b(h.location.search,"smid");"undefined"!==typeof f&&(c.merchantId=f)}"string"===typeof a.startEvent&&m.trigger(a.startEvent);l.getInstance().refreshCheck(c)}};n.prototype.fetchAllTiersForQuantityDiscountTable=function(a){var c=this.isQPTBuyBoxAwareEnabled(a),f={asin:e.getPageState().asin,enableQPTPagination:"true"};c&&(f.currentBuyBoxId=a.activeBuyBoxId);if(a.qdsForLockedMerchantEnabled){var d=b(h.location.search,"smid");"undefined"!==
typeof d&&(f.merchantId=d)}d=a.enableQuantityPricingTablePagination;"undefined"!==d&&(f.enableQPTPagination=!1===d?"false":"true");var w=this;this.triggerBuyBoxAwareEvent("fetchQuantityDiscountTableStarted",a);f.success=function(b){c?m.trigger("fetchQuantityDiscountTableCompleted",b,a.senderId):m.trigger("fetchQuantityDiscountTableCompleted",b)};f.error=function(){w.triggerBuyBoxAwareEvent("fetchQuantityDiscountTableError",a)};l.getInstance().getQuantityPricingTable(f)};n.prototype.isQPTBuyBoxAwareEnabled=
function(a){return a&&a.senderId&&a.activeBuyBoxId};n.prototype.triggerBuyBoxAwareEvent=function(a,c){this.isQPTBuyBoxAwareEnabled(c)?m.trigger(a,c.senderId):m.trigger(a)};n.prototype.notifyBuyingInBulkOptionClicked=function(a){m.trigger("notifyBuyingInBulkOptionClicked",a)};n.prototype.getLimitedAvailabilityUrl=function(c){var b={};b[a.URL_PARAM_ID__BUYING_IN_BULK_QUANTITY]=c;b[a.URL_PARAM_ID__BUYING_IN_BULK_ASIN]=e.getPageState().asin;b[a.URL_PARAM_ID__BUYING_IN_BULK_REFTAG]=a.URL_PARAM_VALUE__LIMITED_AVAILABILITY_REFTAG;
return"/ab/bulk-order/bebx/api/v2/fastForwardBasket"+w("?",b)};n.prototype.notifyQuantityUnavailableOptionClicked=function(a){a=h.location.protocol+"//"+h.location.host+this.getLimitedAvailabilityUrl(a);h.location.href=a};return{EVENT__BUY_BOX_QUANTITY_CHANGED:"buyBoxQuantityChanged",EVENT__QUANTITY_REFRESH_CHECK_STARTED:"quantityRefreshCheckStarted",EVENT__QUANTITY_REFRESH_CHECK_FINISHED:"quantityRefreshCheckFinished",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_STARTED:"fetchQuantityDiscountTableStarted",
EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_COMPLETED:"fetchQuantityDiscountTableCompleted",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_ERROR:"fetchQuantityDiscountTableError",EVENT__NOTIFY_BUYING_IN_BULK_OPTION_CLICKED:"notifyBuyingInBulkOptionClicked",getUrlParameter:b,replaceUrlParameter:c,replaceUrlQueryParameters:function(a,c){var b="?";a=a.split(b);2===a.length&&(b+=a[1]);c=w(b,c);"?"!==c&&(a[0]+=c);return a[0]},singleton:new n}});"use strict";t.when("A","jQuery","abPricingFfqp_constants","abPricingFfqp_metrics",
"abPricingFfqp_amazonAPIClient","abPricingFfqp_helpers","ready").register("abPricingFfqp_quantityPickerDataManager",function(g,h,e,a,d,l){var m=g.createClass({_buyboxIdToBOTypes:{customOffer:["CUSTOM_OFFER"],b2bRd:["B2B_RD"],default:["NEW","B2B_NEW"]},_buyboxIdToFallbackBOTypes:{customOffer:["NEW","B2B_NEW"]},init:function(a){this._aapiClient=new d(a);this._qptCache=this._getQPTCacheInstance();this._quantityDataCache=this._getQuantityDataCacheInstance()},getQuantityPricingTable:function(f){a.registerWidgetBodyBegin(e.METRIC_SCOPE_NAME.GET_QPT_REQUEST);
var b=this;this._qptCache.get(f,function(c){try{var d=b._extractQPT(c,f),g=b._extractPricingTiers(d);if(b._hasNextPage(d)){a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGINATES);a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_FETCH_PAGE);var h=b._extractNextPage(d);b._aapiQPTRequest({asin:f.asin,nextPageUrl:h,pricingTiersPages:[g],onSuccess:f.success,onError:f.error})}else{var l=b._convertToLegacyFormat(g);f.success(l)}}catch(v){a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_EXTRACTION_FAILED),a.logError("ERROR",
"Exception during requesting quantity pricing table:",v),f.error(v)}},f.error)},getPackAsinRecommendationTiers:function(f){var b=this;this._getPackAsinRecommendationResponse({asin:f.asin,quantity:f.quantity},function(c){try{var d=b._extractPackAsinResponse(c),g=b._extractRecommendedTiers(d);f.success(g)}catch(x){a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_EXTRACTION_FAILED),a.logError("ERROR","Exception during requesting quantity pricing table:",x),f.error(x)}},f.error)},refreshCheck:function(a){function b(c){e||
(e=!0,a.error(c))}var c=this,f={},e=!1;h.each([a.quantity,a.initialQuantity],function(e,d){c._getSingleQuantityData({asin:a.asin,merchantId:a.merchantId,quantity:d,currentBuyBoxId:a.currentBuyBoxId,success:function(c){f[d]=c;if(f[a.initialQuantity]&&f[a.quantity]){c=f[a.initialQuantity];var b=f[a.quantity];a.success(b.isAvailable,c.price!==b.price||c.buyingOptionId!==b.buyingOptionId)}},error:b})})},_aapiRequest:function(f){a.registerWidgetBodyBegin(f.metricScopeName);this._aapiClient.productV2({asin:f.asin,
subresources:f.subresources,parameters:f.parameters,success:function(b){a.registerWidgetCriticalFeature(f.metricScopeName);a.registerWidgetLoaded(f.metricScopeName);f.onSuccess(b)},error:function(b,c){a.registerWidgetLoaded(f.metricScopeName);f.onError(b,c)}})},_triggerSubResourceWeblabsIfAllowlisted:function(f){if(f.metadata&&f.metadata[e.AAPI_METADATA_EXPERIMENTS])try{f.metadata[e.AAPI_METADATA_EXPERIMENTS].split(",").forEach(function(b){b=b.split(":",2);a.triggerWeblabIfAllowlisted(b[0],b[1])})}catch(b){a.logError("ERROR",
"Could not trigger weblabs",b),a.registerCounter(e.COUNTER_METRIC.AAPI_SUBRESOURCE_WEBLABS_TRIGGERING_EXCEPTION)}},_aapiQPTRequest:function(f){var b=this;this._aapiClient.productQPT({asin:f.asin,url:f.nextPageUrl,success:function(c){try{var d=b._processQPTPage(c);f.pricingTiersPages.push(b._extractPricingTiers(d));a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGE_FETCHED);b._maxPaginationDepthGuardrail(f.pricingTiersPages.length);if(b._hasNextPage(d)){a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_FETCH_PAGE);
var g=b._extractNextPage(d);b._aapiQPTRequest({asin:f.asin,nextPageUrl:g,pricingTiersPages:f.pricingTiersPages,onSuccess:f.onSuccess,onError:f.onError})}else{var h=b._constructTiers(f.pricingTiersPages),l=b._convertToLegacyFormat(h);a.registerWidgetCriticalFeature(e.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerWidgetLoaded(e.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGINATION_COMPLETE);f.onSuccess(l)}}catch(v){a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGINATION_PAGE_ERROR),
a.logError("ERROR","Exception when processing next page",v),f.onError(v)}},error:function(c,d,g){if(404===g){a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGINATION_404_ERROR);try{var w=b._constructTiers(f.pricingTiersPages),h=b._convertToLegacyFormat(w);a.registerWidgetCriticalFeature(e.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerWidgetLoaded(e.METRIC_SCOPE_NAME.GET_QPT_REQUEST);f.onSuccess(h)}catch(v){a.registerWidgetLoaded(e.METRIC_SCOPE_NAME.GET_QPT_REQUEST),a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGINATION_404_EXCEPTION),
a.logError("ERROR","Exception when processing empty page",v),f.onError(v)}}else a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGINATION_ERROR),f.onError(c,d)}})},_maxPaginationDepthGuardrail:function(f){if(f>=this.getMaxPaginationDepth())throw a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_MAX_PAGINATION_DEPTH_REACHED),Error("Max pagination depth reached");},getMaxPaginationDepth:function(){return e.MAX_PAGINATION_DEPTH},_getQPTCacheInstance:function(){var a=this,b=[a._aapiClient.inclusions().quantityPricingTableV1];
return new l.AsyncCache({loader:function(c,f,d){var g={};"string"===typeof c.merchantId&&(g.merchantId=c.merchantId);g.enableQuantityPricingTablePagination=c.enableQPTPagination;a._aapiRequest({asin:c.asin,subresources:b,parameters:g,onSuccess:f,onError:d,metricScopeName:e.METRIC_SCOPE_NAME.AAPI_QPT})},keyGenerator:function(a){var c=a.asin;"string"===typeof a.merchantId&&(c+=a.merchantId);return c}})},_getPackAsinRecommendationResponse:function(a,b,c){var f=[this._aapiClient.inclusions().packAsinRecommendationV1];
a&&a.quantity&&this._aapiRequest({asin:a.asin,subresources:f,parameters:{itemQuantity:a.quantity},onSuccess:b,onError:c,metricScopeName:e.METRIC_SCOPE_NAME.AAPI_PACK_ASIN})},_getQuantityDataCacheInstance:function(){var a=this,b=[a._aapiClient.inclusions().priceV1,a._aapiClient.inclusions().availabilityV2];return new l.AsyncCache({loader:function(c,f,d){var g={itemQuantity:c.quantity};"string"===typeof c.merchantId&&(g.merchantId=c.merchantId);a._aapiRequest({asin:c.asin,subresources:b,parameters:g,
onSuccess:f,onError:d,metricScopeName:e.METRIC_SCOPE_NAME.AAPI_SINGLE_QUANTITY})},keyGenerator:function(a){var c=a.asin+a.quantity.toString();"string"===typeof a.merchantId&&(c+=a.merchantId);return c}})},_firstBuyingOption:function(a){return a.entity.buyingOptions[0]},_firstBuyingOptionByType:function(a,b){a=a.entity.buyingOptions;for(var c=0;c<a.length;c++){var f=a[c];if(-1!==b.indexOf(f.type))return f}},_firstBuyingOptionByBuyboxId:function(a,b){a=this._firstBuyingOptionByType(a,this._buyboxIdToBOTypes[b]||
this._buyboxIdToBOTypes.default);if("undefined"===typeof a)throw Error("Could not find an eligible buying option");return a},_firstBuyingOptionByBuyboxIdWithFallback:function(a,b){var c=this._buyboxIdToFallbackBOTypes[b];b=this._firstBuyingOptionByType(a,this._buyboxIdToBOTypes[b]||this._buyboxIdToBOTypes.default);"undefined"===typeof b&&"undefined"!==typeof c&&(b=this._firstBuyingOptionByType(a,c));if("undefined"===typeof b)throw Error("Could not find an eligible or fallback buying option");return b},
_extractQPT:function(f,b){try{var c=this._firstBuyingOptionByBuyboxId(f,b.currentBuyBoxId)}catch(w){a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_BO_NOT_FOUND);a.logError("ERROR","Exception when getting first BO",w);return}f=c.quantityPricingTable;if("undefined"===typeof f||"undefined"===typeof f.entity)a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_MISSING),"string"===typeof c.type&&a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_MISSING_BO.replace(e.AAPI_BO_PLACEHOLDER,c.type));else return this._triggerSubResourceWeblabsIfAllowlisted(f),
f},_extractPackAsinResponse:function(f){try{var b=this._firstBuyingOptionByType(f,this._buyboxIdToBOTypes.default);if("undefined"===typeof b)throw Error("Could not find an eligible buying option");}catch(c){a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_BO_NOT_FOUND);a.logError("ERROR","Exception when getting first BO",c);return}f=b.packAsinRecommendations;if("undefined"===typeof f||"undefined"===typeof f.entity)a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_MISSING),"string"===typeof b.type&&
a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_MISSING_BO.replace(e.AAPI_BO_PLACEHOLDER,b.type));else return this._triggerSubResourceWeblabsIfAllowlisted(f),f},_processQPTPage:function(f){if("undefined"===f.entity)a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PAGE_MISSING);else return f},_extractPricingTiers:function(f){if("undefined"===typeof f)return[];var b=f.entity.pricingTiers;if("undefined"===typeof b&&this._hasNextPage(f))return a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_NEXT_PAGE_ONLY),
[];if("undefined"===typeof b)throw a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_ERROR),f=f.entity.code,"string"===typeof f&&a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_ERROR_CODE.replace(e.AAPI_ERROR_CODE_PLACEHOLDER,f)),Error("Error in the QPT sub-resource");a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_PRESENT);return b},_extractRecommendedTiers:function(f){if("undefined"===typeof f)return[];var b=f.entity.recommendedTiers;if("undefined"===typeof b)throw a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_ERROR),
f=f.entity.code,"string"===typeof f&&a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_ERROR_CODE.replace(e.AAPI_ERROR_CODE_PLACEHOLDER,f)),Error("Error in the Pack Asin sub-resource");a.registerCounter(e.COUNTER_METRIC.AAPI_PACK_ASIN_PRESENT);return b},_hasNextPage:function(a){return"undefined"!==typeof a&&"undefined"!==typeof a.entity.nextPage},_extractNextPage:function(a){return a.entity.nextPage.resource.url},_constructTiers:function(a){for(var b=0,c=[],f=0;f<a.length;f++)for(var e=0;e<a[f].length;e++){var d=
a[f][e],g=d.minimumQuantity;g!==b&&(b=g,c.push(d))}return c},_convertToLegacyFormat:function(f){var b=[];try{for(var c=0;c<f.length;c++){var d=f[c],g={quantity:d.minimumQuantity,quantityPickerPriceText:l.richContentHelper.toText(d.priceMessage),isUncompetitive:d.hidden,isLowestAvailablePrice:d.lowestAvailablePrice};d.savingsMessage&&(g.savingsMessage=l.richContentHelper.toText(d.savingsMessage));d.availabilityMessage&&(g.availabilityMessage=l.richContentHelper.toText(d.availabilityMessage));d.program&&
(g.program=d.program);d.buyingInBulk&&"undefined"!==typeof d.buyingInBulk.fragments&&1<=d.buyingInBulk.fragments.length&&(g.buyingInBulkLink=l.richContentHelper.toText(d.buyingInBulk.fragments[0]),g.buyingInBulkMessage=l.richContentHelper.toText({fragments:d.buyingInBulk.fragments.slice(1)}));b.push(g)}}catch(x){throw a.registerCounter(e.COUNTER_METRIC.AAPI_QPT_CONVERSION_ERROR),x;}return b},_extractSingleQuantityData:function(f,b){var c={isAvailable:!1,buyingOptionId:"",price:""};try{var d=this._firstBuyingOptionByBuyboxIdWithFallback(f,
b)}catch(y){return a.registerCounter(e.COUNTER_METRIC.AAPI_SINGLE_QUANTITY_BO_NOT_FOUND),c}try{return{isAvailable:"OUT_OF_STOCK"!==d.availability.entity.type,buyingOptionId:d.availability.resource.url,price:d.price.entity.priceToPay.moneyValueOrRange.value.displayString}}catch(y){return a.registerCounter(e.COUNTER_METRIC.AAPI_SINGLE_QUANTITY_EXTRACTION_FAILED),a.logError("ERROR","Exception during extracting single quantity data:",y),c}},_getSingleQuantityData:function(a){var b=this;b._quantityDataCache.get({asin:a.asin,
merchantId:a.merchantId,quantity:a.quantity},function(c){a.success(b._extractSingleQuantityData(c,a.currentBuyBoxId))},a.error)}}),q=g.createClass({init:function(a){this._errorMessage=a},getQuantityPricingTable:function(a){a.error&&a.error(this._errorMessage)},refreshCheck:function(a){a.error&&a.error(this._errorMessage)},getPackAsinRecommendationTiers:function(a){a.error&&a.error(this._errorMessage)}}),k;return{getInstance:function(){if("undefined"!==typeof k)return k;var d=g.state(e.AJAX_PARAMS_STATE_KEY);
"undefined"===typeof d&&(a.registerWidgetBodyBegin(e.METRIC_SCOPE_NAME.AUI_STATE_PARSING),g.state.parse(),a.registerWidgetLoaded(e.METRIC_SCOPE_NAME.AUI_STATE_PARSING),d=g.state(e.AJAX_PARAMS_STATE_KEY));if("undefined"!==typeof d){d.priceFormatConfig=d;d.clientId="dpx";try{k=new m(d)}catch(b){a.registerCounter(e.COUNTER_METRIC.AAPI_DATA_MGR_INIT_FAILED),k=new q(e.ERROR.AAPI_DATA_MGR_INIT_FAILED)}}else return a.registerCounter(e.COUNTER_METRIC.MISSING_AJAX_PARAMS),new q(e.ERROR.MISSING_AJAX_PARAMS);
return k}}});"use strict";t.when("A").register("abPricingFfqp_helpers",function(g){var h=g.createClass({_listeners:{},addListeners:function(e,a,d){this._listeners.hasOwnProperty(e)||(this._listeners[e]=[]);this._listeners[e].push({success:a,error:d})},triggerSuccess:function(e,a){this._triggerListeners(e,"success",a)},triggerError:function(e,a){this._triggerListeners(e,"error",a)},_triggerListeners:function(e,a,d){if(this._listeners.hasOwnProperty(e))for(e=this._listeners[e];0<e.length;){var g=e.pop();
if(g[a])g[a](d)}}});return{AsyncCache:g.createClass({_requestStatus:{IN_PROGRESS:1,READY:2,ERROR:3},_status:{},_cache:{},init:function(e){this._eventHandler=new h;this._loader=e.loader;this._keyGenerator=e.keyGenerator},_getKey:function(e){return this._keyGenerator?this._keyGenerator(e):e},get:function(e,a,d){var g=this._getKey(e);this._status[g]===this._requestStatus.READY?a(this._cache[g]):(this._eventHandler.addListeners(g,a,d),this._load(e,g))},_load:function(e,a){var d=this;d._status[a]!==d._requestStatus.IN_PROGRESS&&
(d._status[a]=d._requestStatus.IN_PROGRESS,d._loader(e,function(e){d._cache[a]=e;d._status[a]=d._requestStatus.READY;d._eventHandler.triggerSuccess(a,e)},function(e){d._status[a]=d._requestStatus.ERROR;d._eventHandler.triggerError(a,e)}))}}),richContentHelper:{toText:function d(a){if(a.money)return a.money.displayString;if(a.text)return a.text;if(a.link)return d(a.link.content);if(a.fragments){for(var g=[],h=0;h<a.fragments.length;h++)g.push(d(a.fragments[h]));return g.join("")}return a.semanticContent?
d(a.semanticContent.content):""}}}});"use strict";t.when("jQuery","A","a-dropdown","a-button","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics","abPricingFfqp_constants").register("abPricingFfqp_quantityPickerLogic",function(g,h,e,a,d,l,p,q){function k(a){return a.prop("selectedIndex")+1===a.prop("length")}function f(a,b){if(!d.dropdownContainsQuantity(a,b)){var c=document.createElement("option");c.value=b;c.text=b.toString();a.append(c)}}function b(a){this.id=a.id;this.buyBoxId=
a.buyBoxId;this.buyingOptionStereotype=a.buyingOptionStereotype?a.buyingOptionStereotype:"";this.quantityHiddenFieldSelector=a.quantityHiddenFieldSelector;this.leastMinimumOrderQuantity=a.leastMinimumOrderQuantity;this.predefinedQuantitiesDropdownSelector=a.predefinedQuantitiesDropdownSelector;this.predefinedQuantitiesDropdownContainerSelector=a.predefinedQuantitiesDropdownContainerSelector;this.freeQuantityTextInputSelector=a.freeQuantityTextInputSelector;this.freeQuantityTextInputOuterSelector=
a.freeQuantityTextInputOuterSelector;this.updateButtonSelector=a.updateButtonSelector;this.addToCartButtonSelector=a.addToCartButtonSelector;this.buyingOptionPosition=a.buyingOptionPosition;this.limitedAvailabilityMessageSelector=a.limitedAvailabilityMessageSelector;this.splitOfferLinkSelector=a.splitOfferLinkSelector;this.splitOfferSectionSelector=a.splitOfferSectionSelector;this.amazonDevicesLinkEnabled=a.amazonDevicesLinkEnabled;this.buyingInBulkBaseUrl=a.buyingInBulkBaseUrl;this.initializeQuantityHiddenField();
this.wireUpSelectorBasedEvents()}b.prototype.wireUpSelectorBasedEvents=function(){var a=this,b=g(this.predefinedQuantitiesDropdownSelector);h.on("a:dropdown:"+b[0].id+":select",function(c){a.handleDropdownOptionClicked(c.value)});h.on(l.EVENT__BUY_BOX_QUANTITY_CHANGED,function(c,b,d){a.handleQuantityChangedOnOtherBuyBox(c,b,d)});h.on(l.EVENT__QUANTITY_REFRESH_CHECK_STARTED,function(){a.handleQuantityRefreshCheckStarted()});h.on(l.EVENT__QUANTITY_REFRESH_CHECK_FINISHED,function(){a.handleQuantityRefreshCheckFinished()})};
b.prototype.wireUpReferenceBasedEvents=function(){var a=this,b=g(this.freeQuantityTextInputSelector),d=g(this.updateButtonSelector);b.keydown(function(b){a.handleTextInputKeyDown(b)});b.keyup(function(b){a.handleTextInputKeyUp(b)});b.focus(function(){a.handleTextInputFocused()});d.click(function(){a.handleButtonClick()})};b.prototype.attachToDOM=function(){this.wireUpReferenceBasedEvents();k(g(this.predefinedQuantitiesDropdownSelector))?this.switchToFreeQuantityUI():this.switchToPredefinedQuantitiesUI();
this.enableUI();this.lastSelectedQuantity=this.getCurrentQuantity();l.singleton.leastMinimumOrderQuantity=this.leastMinimumOrderQuantity};b.prototype.getCurrentQuantity=function(){if(this.isTextInputVisible()){var a=g(this.freeQuantityTextInputSelector);return parseInt(a.val())}return this.isDropdownVisible()?(a=g(this.predefinedQuantitiesDropdownSelector),parseInt(a.find(":selected").val())):u};b.prototype.handleQuantityRefreshCheckStarted=function(){this.doesDOMExist()&&this.disableUI()};b.prototype.handleQuantityRefreshCheckFinished=
function(){this.doesDOMExist()&&this.enableUI()};b.prototype.handleDropdownOptionClicked=function(a){var b=g(this.predefinedQuantitiesDropdownSelector);k(b)?(a=g(this.freeQuantityTextInputSelector),a.val(this.lastSelectedQuantity.toString()),this.switchToFreeQuantityUI(),a.focus(),d.incrementMetricByOne("freeFormQtyPickerMaxQtySelected")):(this.lastSelectedQuantity=a=parseInt(a),this.updateQuantityHiddenField(a),l.singleton.notifyQuantityChanged(a,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype}))};
b.prototype.handleTextInputFocused=function(){g(this.freeQuantityTextInputSelector).select()};b.prototype.handleTextInputKeyUp=function(b){13!==b.keyCode&&a(this.updateButtonSelector).show()};b.prototype.handleTextInputKeyDown=function(a){13===a.keyCode&&(a.preventDefault(),g(this.updateButtonSelector).click(),this._findWithinPickerAccordionRow(this.addToCartButtonSelector).focus())};b.prototype.clampQuantity=function(a){999<a&&(a=999);this.leastMinimumOrderQuantity!==u&&a<this.leastMinimumOrderQuantity&&
(a=this.leastMinimumOrderQuantity);return a};b.prototype.handleButtonClick=function(){var b=g(this.predefinedQuantitiesDropdownSelector),f=e.getSelect(b[0]),h=g(this.freeQuantityTextInputSelector),k=h.val(),n=parseInt,m=k.match(/[1-9][0-9]*/);n=n(null===m?"1":m[0]);n=this.clampQuantity(n);d.dropdownContainsQuantity(b,n)?(this.switchToPredefinedQuantitiesUI(),f.setValue(n.toString()),this.handleDropdownOptionClicked(n)):(b=n.toString(),b!==k&&h.val(b),a(this.updateButtonSelector).hide(),this.updateQuantityHiddenField(n),
l.singleton.notifyQuantityChanged(n,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype}))};b.prototype.doesDOMExist=function(){return 0<g(this.predefinedQuantitiesDropdownSelector).length&&0<g(this.freeQuantityTextInputSelector).length&&0<g(this.updateButtonSelector).length};b.prototype.handleQuantityChangedOnOtherBuyBox=function(a,b,d){if(this.doesDOMExist()){a!==this.id&&this.getCurrentQuantity()!==b&&this._updateSelectedQuantity(b);var c=this;l.singleton.buyboxRefreshCheck({newQuantity:b,
activeBuyBoxId:d.activeBuyBoxId,selectedBuyingOption:d.selectedBuyingOption,currentBuyBoxId:this.buyBoxId,callback:function(a){c.updateLimitedAvailabilityMessageVisibility(a.hasAvailability)}})}};b.prototype._updateSelectedQuantity=function(a){var b=g(this.predefinedQuantitiesDropdownSelector),c=e.getSelect(b[0]);d.dropdownContainsQuantity(b,a)?(c.setValue(a.toString()),this.lastSelectedQuantity=a,this.switchToPredefinedQuantitiesUI()):(g(this.freeQuantityTextInputSelector).val(a.toString()),this.switchToFreeQuantityUI());
this.updateQuantityHiddenField(a)};b.prototype.showDropdown=function(){g(this.predefinedQuantitiesDropdownContainerSelector).removeClass("aok-hidden")};b.prototype.hideDropdown=function(){g(this.predefinedQuantitiesDropdownContainerSelector).addClass("aok-hidden")};b.prototype.isDropdownVisible=function(){return!g(this.predefinedQuantitiesDropdownContainerSelector).hasClass("aok-hidden")};b.prototype.showTextInput=function(){"mobile"===d.getPageState().platform?g(this.freeQuantityTextInputOuterSelector).removeClass("aok-hidden"):
g(this.freeQuantityTextInputSelector).removeClass("aok-hidden")};b.prototype.hideTextInput=function(){"mobile"===d.getPageState().platform?g(this.freeQuantityTextInputOuterSelector).addClass("aok-hidden"):g(this.freeQuantityTextInputSelector).addClass("aok-hidden")};b.prototype.isTextInputVisible=function(){return"mobile"===d.getPageState().platform?!g(this.freeQuantityTextInputOuterSelector).hasClass("aok-hidden"):!g(this.freeQuantityTextInputSelector).hasClass("aok-hidden")};b.prototype.disableTextInput=
function(){if("mobile"===d.getPageState().platform){var a=g(this.freeQuantityTextInputSelector),b=g(this.freeQuantityTextInputOuterSelector);a.prop("disabled","disabled");b.addClass("a-form-disabled")}else a=g(this.freeQuantityTextInputSelector),a.prop("disabled","disabled"),a.addClass("a-form-disabled")};b.prototype.enableTextInput=function(){if("mobile"===d.getPageState().platform){var a=g(this.freeQuantityTextInputSelector),b=g(this.freeQuantityTextInputOuterSelector);a.removeProp("disabled");
b.removeClass("a-form-disabled")}else a=g(this.freeQuantityTextInputSelector),a.removeProp("disabled"),a.removeClass("a-form-disabled")};b.prototype.switchToFreeQuantityUI=function(){this.hideDropdown();this.showTextInput();a(this.updateButtonSelector).hide()};b.prototype.switchToPredefinedQuantitiesUI=function(){this.showDropdown();this.hideTextInput();a(this.updateButtonSelector).hide()};b.prototype.disableUI=function(){var b=e.getSelect(this.predefinedQuantitiesDropdownSelector),d=a(this.updateButtonSelector);
b.update({status:"disabled"});this.disableTextInput();d.disable()};b.prototype.enableUI=function(){var b=e.getSelect(this.predefinedQuantitiesDropdownSelector),d=a(this.updateButtonSelector);b.update({status:"normal"});this.enableTextInput();d.enable()};b.prototype._isMobileQuantityHiddenFieldSelector=function(){return"string"===typeof this.quantityHiddenFieldSelector&&-1<this.quantityHiddenFieldSelector.indexOf("select#mobileQuantityDropDown")};b.prototype._mobileQuantityHiddenFieldSelector=function(){return this.quantityHiddenFieldSelector.replace("input#quantity",
"select#mobileQuantityDropDown")};b.prototype.updateQuantityHiddenField=function(a){var b=this._findWithinPickerAccordionRow(this.quantityHiddenFieldSelector).first();b.is("select")?(f(b,a),e.getSelect(b).val(a)):b.val(a.toString());h.trigger(q.ADD_TO_CART_QUANTITY_CHANGE_EVENT,{nativeItemNode:b[0],value:a.toString()});"mobile"!==d.getPageState().platform||this._isMobileQuantityHiddenFieldSelector()||(b=this._findWithinPickerAccordionRow(this._mobileQuantityHiddenFieldSelector()))&&b.is("select")&&
(f(b,a),e.getSelect(b).val(a),b.val(a.toString()))};b.prototype.updateLimitedAvailabilityMessageVisibility=function(b){var c=this._findWithinPickerAccordionRow(this.addToCartButtonSelector).closest(".a-button"),d=a(c);c=this._findWithinPickerAccordionRow(this.splitOfferSectionSelector);b?(g(this.limitedAvailabilityMessageSelector).addClass("aok-hidden"),d.enable(),c.addClass("aok-hidden")):(g(this.limitedAvailabilityMessageSelector).removeClass("aok-hidden"),d.disable(),b=this.getCurrentQuantity(),
d=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:l.singleton.getLimitedAvailabilityUrl(b),this._findWithinPickerAccordionRow(this.splitOfferLinkSelector).attr("href",d),1<b?(p.registerCounter(q.COUNTER_METRIC.SPLIT_OFFER_LINK_DISPLAYED),c.removeClass("aok-hidden")):c.addClass("aok-hidden"))};b.prototype._findWithinPickerAccordionRow=function(a){return d.findWithinPickerAccordionRow(this.id,a)};b.prototype.initializeQuantityHiddenField=function(){var a=l.singleton.currentQuantity,b=parseInt(this.leastMinimumOrderQuantity);
b&&b>a&&(a=b);this.updateQuantityHiddenField(a)};return{QuantityPickerLogic:b}});"use strict";t.when("jQuery","A","a-dropdown","a-modal","a-button","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics","abPricingFfqp_constants").register("abPricingFfqpV2_quantityPickerLogic",function(g,m,e,a,d,l,p,q,k){function f(a,b){if(!l.dropdownContainsQuantity(a,b)){var r=document.createElement("option");r.value=b;r.text=b.toString();a.append(r)}}function b(a){this.id=a.id;this.buyBoxId=
a.buyBoxId;this.buyingOptionStereotype=a.buyingOptionStereotype?a.buyingOptionStereotype:"";this.quantityHiddenFieldSelector=a.quantityHiddenFieldSelector;this.leastMinimumOrderQuantity=a.leastMinimumOrderQuantity;this.quantityPickerSelector=a.quantityPickerSelector;this.quantityDiscountTableSelector=this.quantityPickerSelector+" .quantity-discount-table";this.quantityTextInputLabelSelector=this.quantityPickerSelector+" .quantity-text-input-label";this.buyboxAccordionContainerSelector=a.buyboxAccordionContainerSelector;
this.loadMoreMessage=a.loadMoreMessage;this.fetchTheBestPricesMessage=a.fetchTheBestPricesMessage;this.qdtErrorMessage=a.qdtErrorMessage;this.includeRfqdLinkInNewPicker=a.includeRfqdLinkInNewPicker;this.requestForQuantityDiscountModalSelector=a.requestForQuantityDiscountModalSelector;this.requestForQuantityDiscountMessage=a.requestForQuantityDiscountMessage;this.requestForQuoteLinkEnabled=a.requestForQuoteLinkEnabled;this.bbtLinkSelector=a.bbtLinkSelector;this.addToCartButtonSelector=a.addToCartButtonSelector;
this.limitedAvailabilityMessageSelector=a.limitedAvailabilityMessageSelector;this.fetchQuantityDiscountTableCompleted=this.fetchQuantityDiscountTableStarted=this.isLoadMoreButtonClicked=!1;this.quantityTextInputSelector=this.quantityPickerSelector;this.quantityTextInputSelector+=" .quantity-text-input-with-label";this.loadMoreButtonForUncompetitiveTiersPresence=this.hasError=!1;this.quantityPricingTableSummaryEnabled=a.quantityPricingTableSummaryEnabled;this.qdsForLockedMerchantEnabled=a.qdsForLockedMerchantEnabled;
this.isAODLinkEnabled=!0===a.isAODLinkEnabled;this.quantityPickerUnavailabilityMessage=a.quantityPickerUnavailabilityMessage;this.quantityPickerUnavailabilityLink=a.quantityPickerUnavailabilityLink;this.splitOfferLinkSelector=a.splitOfferLinkSelector;this.splitOfferSectionSelector=a.splitOfferSectionSelector;this.amazonDevicesLinkEnabled=a.amazonDevicesLinkEnabled;this.buyingInBulkBaseUrl=a.buyingInBulkBaseUrl;this.initializeQuantityAvailabilityVariables();this.wireUpSelectorBasedEvents();this.initializeQuantityHiddenField()}
var c=k.PACKAGE_PREFIX+".PriceTableLoadError",w=k.PACKAGE_PREFIX+".QuantityPriceTableRender",t=k.PACKAGE_PREFIX+".QuantityPriceTableView",x=k.PACKAGE_PREFIX+".QuantityPriceTableRenderWithLockedMerchant",n=k.PACKAGE_PREFIX+".QuantityPriceTableViewWithLockedMerchant",v=k.PACKAGE_PREFIX+".QuantityPriceTableRenderWithUncompetitiveTiers",z=k.PACKAGE_PREFIX+".QuantityPriceTableViewWithUncompetitiveTiers",A=k.PACKAGE_PREFIX+".QuantityPriceTableLoadMoreButtonClicked",B=k.PACKAGE_PREFIX+".QuantityPriceTableLoadMoreButtonClickedWithUncompetitiveTiers",
C=k.PACKAGE_PREFIX+".QuantityPriceTableBBTLinkRender",D=k.PACKAGE_PREFIX+".QuantityPriceTableBBTLinkClick",E=k.PACKAGE_PREFIX+".QuantityPriceTableQuantityUnavailableLinkRender",F=k.PACKAGE_PREFIX+".QuantityPriceTableQuantityUnavailableLinkClick",G=k.PACKAGE_PREFIX+".QuantityPriceTableRFQDBBTLinkClick",H=k.PACKAGE_PREFIX+".QuantityPriceTableAvailabilityMessageRender",I=k.PACKAGE_PREFIX+".QuantityPriceTableAvailabilityMessageView",J=k.PACKAGE_PREFIX+".QuantityPriceTablePerceivedError";b.prototype.initializeQuantityAvailabilityVariables=
function(){this.hasAvailability=!0};b.prototype.wireUpSelectorBasedEvents=function(){var a=this;m.on(p.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_STARTED,function(b){b&&b!==a.id||a.handleFetchQuantityDiscountTableStarted()});m.on(p.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_COMPLETED,function(b,r){r&&r!==a.id||a.handleFetchQuantityDiscountTableCompleted(b)});m.on(p.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_ERROR,function(b){b&&b!==a.id||a.handleFetchQuantityDiscountTableError()});m.on(p.EVENT__BUY_BOX_QUANTITY_CHANGED,
function(b,r,c){a.handleQuantityChangedOnOtherBuyBox(b,r,c)});m.on(p.EVENT__QUANTITY_REFRESH_CHECK_STARTED,function(){a.handleQuantityRefreshCheckStarted()});m.on(p.EVENT__QUANTITY_REFRESH_CHECK_FINISHED,function(){a.handleQuantityRefreshCheckFinished()})};b.prototype.initializeQuantityHiddenField=function(){var a=p.singleton.currentQuantity,b=parseInt(this.leastMinimumOrderQuantity);b&&b>a&&(a=b);this.updateQuantityHiddenField(a)};b.prototype.handleFetchQuantityDiscountTableCompleted=function(a){this.wireUpQuantityDiscountTableData(a);
this.generateQuantityDiscountTable();this.fetchQuantityDiscountTableCompleted=!0};b.prototype.handleFetchQuantityDiscountTableStarted=function(){this.fetchQuantityDiscountTableStarted=!0};b.prototype.wireUpQuantityDiscountTableData=function(a){this.priceTiers=a;this.buildQptRenderMetrics();this.buildQptForLockedMerchantMetrics(x);this.buildQptUncompetitiveTiersMetrics(v);this.buildAvailabilityMessageMetrics(H)};b.prototype.handleFetchQuantityDiscountTableError=function(){l.incrementMetricByOne(c);
this.fetchQuantityDiscountTableStarted=!1;this.hasError=!0;this.generateQuantityDiscountTable()};b.prototype.wireUpReferenceBasedEvents=function(){var a=this,b=g(this.quantityTextInputSelector),c=g(this.quantityTextInputLabelSelector);c.click(function(){b.focus();b.click()});b.focus(function(){c.hide();"1"===this.value&&(this.value="");a.showQuantityDiscountTable()});b.blur(function(){""===this.value&&(this.value=p.singleton.currentQuantity);a.updateQuantityAndHideQuantityDiscountTable();c.show()});
b.live("keypress input",function(b){a.isValidQuantityTextInputKeyCode(b);this.value=this.value.replace(/[^0-9]/g,"")});b.live("input",m.throttle(function(b){a.quantityAvailabilityCheckStart()},500));b.live("keydown",function(b){a.isValidQuantityTextPressKeyCode(b)});b.live("click change paste keyup",function(){a.clampQuantity(b.val());a.generateQuantityDiscountTable()})};b.prototype.quantityAvailabilityCheckStart=function(){this.initializeQuantityAvailabilityVariables();var a=this.getCurrentQuantity(),
b=this;p.singleton.notifyQuantityTyped(a,{currentBuyBoxId:this.buyBoxId,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled,callback:function(c){a===b.getCurrentQuantity()&&b.updateLimitedAvailabilityMessageVisibility(c.hasAvailability)}})};b.prototype.attachToDOM=function(){this.wireUpReferenceBasedEvents();this.enableUI();p.singleton.leastMinimumOrderQuantity=this.leastMinimumOrderQuantity};b.prototype.isValidQuantityTextPressKeyCode=
function(a){var b={left:37,up:38,right:39,down:40},c=h.event?a.keyCode:a.which,r;for(r in b)b[r]===c&&a.preventDefault()};b.prototype.isValidQuantityTextInputKeyCode=function(a){var b=h.event?a.keyCode:a.which;8!==b&&46!==b&&(13===b?(this.updateQuantityAndHideQuantityDiscountTable(),a.preventDefault()):(b=String.fromCharCode(b),/\d/.test(b)||a.preventDefault()))};b.prototype.getCurrentQuantity=function(){var a=g(this.quantityTextInputSelector);return this.clampQuantity(a.val())};b.prototype.handleQuantityRefreshCheckStarted=
function(){this.doesDOMExist()&&this.disableUI()};b.prototype.handleQuantityRefreshCheckFinished=function(){this.doesDOMExist()&&this.enableUI()};b.prototype.clampQuantity=function(a){var b=a;999<a&&(b=999);this.leastMinimumOrderQuantity!==u&&a<this.leastMinimumOrderQuantity&&(b=this.leastMinimumOrderQuantity);return b};b.prototype.doesDOMExist=function(){return 0<g(this.quantityTextInputSelector).length};b.prototype.handleQuantityChangedOnOtherBuyBox=function(a,b,c){if(this.doesDOMExist()){a!==this.id&&
parseInt(this.getCurrentQuantity())!==b&&(g(this.quantityTextInputSelector).val(b),this.updateQuantityHiddenField(b));var d=this;p.singleton.buyboxRefreshCheck({newQuantity:b,activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption,currentBuyBoxId:this.buyBoxId,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled,callback:function(a){d.updateLimitedAvailabilityMessageVisibility(a.hasAvailability)}})}};b.prototype.showQuantityDiscountTable=function(){this.buildQptViewMetrics();
this.hasError&&q.registerCounter(J);this.fetchQuantityDiscountTableCompleted&&(this.buildQptForLockedMerchantMetrics(n),this.buildQptUncompetitiveTiersMetrics(z,this.getStartIndexOfQuantityDiscountTierTable(),3),this.buildAvailabilityMessageMetrics(I));var a=l.findAccordionRow(this.id);0<a.length&&(a.get(0).setAttribute("style","overflow:visible"),a=a.find(".a-accordion-inner.accordion-row-content"),0<a.length&&a.get(0).setAttribute("style","overflow:visible"));a=g(this.buyboxAccordionContainerSelector);
0<a.length&&(a.get(0).setAttribute("style","overflow:visible"),a=a.find(".a-accordion-inner"),0<a.length&&a.get(0).setAttribute("style","overflow:visible"));g(this.quantityPickerSelector).addClass("open")};b.prototype.hideQuantityDiscountTable=function(){g(this.quantityPickerSelector).removeClass("open")};b.prototype.updateQuantityAndHideQuantityDiscountTable=function(){var a=g(this.quantityDiscountTableSelector),b=g(this.quantityTextInputSelector),c=this.clampQuantity(b.val());b.val(c);this.updateQuantityHiddenField(c);
p.singleton.notifyQuantityChanged(c,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled});this.isLoadMoreButtonClicked=!1;this.hideQuantityDiscountTable();a.empty()};b.prototype.disableUI=function(){var a=g(this.quantityTextInputSelector),b=g(this.quantityDiscountTableSelector);a.attr("disabled",!0);a.addClass("quantity-text-input-disabled");b.attr("disabled",!0)};b.prototype.enableUI=function(){var a=
g(this.quantityTextInputSelector),b=g(this.quantityDiscountTableSelector);a.attr("disabled",!1);a.removeClass("quantity-text-input-disabled");b.attr("disabled",!1);this.hideQuantityDiscountTable()};b.prototype._isMobileQuantityHiddenFieldSelector=function(){return"string"===typeof this.quantityHiddenFieldSelector&&-1<this.quantityHiddenFieldSelector.indexOf("select#mobileQuantityDropDown")};b.prototype._mobileQuantityHiddenFieldSelector=function(){return this.quantityHiddenFieldSelector.replace("input#quantity",
"select#mobileQuantityDropDown")};b.prototype.updateQuantityHiddenField=function(a){var b=this._findWithinPickerAccordionRow(this.quantityHiddenFieldSelector).first();b.is("select")&&(f(b,a),e.getSelect(b).val(a));b.val(a.toString());m.trigger(k.ADD_TO_CART_QUANTITY_CHANGE_EVENT,{nativeItemNode:b[0],value:a.toString()});"mobile"!==l.getPageState().platform||this._isMobileQuantityHiddenFieldSelector()||(b=this._findWithinPickerAccordionRow(this._mobileQuantityHiddenFieldSelector()))&&b.is("select")&&
(f(b,a),e.getSelect(b).val(a),b.val(a.toString()))};b.prototype.generateVisibleTiersList=function(a,b){for(var c=[],d=0,e=!1;b<this.priceTiers.length&&(this.isLoadMoreButtonClicked||3>d);){var r=this.priceTiers[b],f=!this.shouldHideFirstTier()&&0===d,g=r.isLowestAvailablePrice||e||2!==d;if(this.isLoadMoreButtonClicked||f||!r.isUncompetitive&&g)c.push({quantity:Math.max(a,r.quantity),savingsMessage:r.savingsMessage,availabilityMessage:r.availabilityMessage,quantityPickerPriceText:r.quantityPickerPriceText,
isDiscountUnlocked:0===d?0===b&&"BUSINESS_VOLUME_AWARE_PRICING"===r.program:!1,isFirstTier:f}),e=e||r.isLowestAvailablePrice,d++;b++}return c};b.prototype.findStartIndexOfQuantityDiscountTierTable=function(a){for(var b=0,c=this.priceTiers.length-1;b<=c;){var d=parseInt((b+c)/2);var e=this.priceTiers[d].quantity;e=0===e.length?0:parseInt(e);if(e===a)return d;e>a?c=d-1:b=d+1}return Math.max(0,c)};b.prototype.getStartIndexOfQuantityDiscountTierTable=function(){var a=this.getCurrentQuantity();a=this.findStartIndexOfQuantityDiscountTierTable(a);
return this.shouldHideFirstTier()&&1<this.priceTiers.length?a+1:a};b.prototype.shouldHideFirstTier=function(){var a=p.singleton.currentQuantity,b=g(this.quantityTextInputSelector);return!this.isAvailabilityMessagePresent()&&1===a&&""===b.val()};b.prototype.generateQuantityDiscountTable=function(){this.cleanOutQuantityDiscountTable();var a=g(this.quantityDiscountTableSelector);this.hasError?a.append(this.generateSingleTierDiscountTableUnorderedList(this.generateQdtErrorMessage())):this.hasAvailability?
this.priceTiers===u?a.append(this.generateFetchInProcessTableUnorderedList()):0===this.priceTiers.length?a.append(this.generateSingleTierDiscountTableUnorderedList()):a.append(this.generateQuantityDiscountTableUnorderedList()):a.append(this.generateQuantityUnavailableTableUnorderedList())};b.prototype.cleanOutQuantityDiscountTable=function(){g(this.quantityDiscountTableSelector).empty()};b.prototype.areUncompetitiveTiersPresent=function(a,b){var c=!1;if("undefined"!==typeof this.priceTiers)for("undefined"===
typeof a&&(a=0),b="undefined"===typeof b?this.priceTiers.length:Math.min(a+b,this.priceTiers.length),a+=1;a<b;a++)if(this.priceTiers[a].isUncompetitive){c=!0;break}return c};b.prototype.isAvailabilityMessagePresent=function(){return"undefined"!==typeof this.priceTiers&&0<this.priceTiers.length&&"undefined"!==typeof this.priceTiers[0].availabilityMessage};b.prototype.showLoadMoreButton=function(a){this.loadMoreButtonForUncompetitiveTiersPresence=this.areUncompetitiveTiersPresent(a);return!this.isLoadMoreButtonClicked&&
(3<this.priceTiers.length-a||this.loadMoreButtonForUncompetitiveTiersPresence)};b.prototype.showBuyingInBulkLink=function(a){return"undefined"!==typeof this.priceTiers[a].buyingInBulkLink};b.prototype.generateQuantityDiscountTableUnorderedList=function(){var a=this.getCurrentQuantity(),b=this.getStartIndexOfQuantityDiscountTierTable();a=this.generateVisibleTiersList(a,b);var c=document.createElement("ul");c.setAttribute("class","qdt-ul");for(var d=g(c),e=0;e<a.length;e++)d.append(this.generateQuantityDiscountTierOption(a[e]));
this.showLoadMoreButton(b)?d.append(this.generateLoadMoreOption()):!this.showBuyingInBulkLink(b)||!0!==this.includeRfqdLinkInNewPicker&&"true"!==this.includeRfqdLinkInNewPicker?!0!==this.includeRfqdLinkInNewPicker&&"true"!==this.includeRfqdLinkInNewPicker||d.append(this.generateRequestForQuantityDiscountOption()):d.append(this.generateBuyingInBulkOption(b));return c};b.prototype.generateSingleTierDiscountTableUnorderedList=function(a){var b=this.getCurrentQuantity();b=this.generateSingleTierQuantityList(b);
var c=document.createElement("ul");c.setAttribute("class","qdt-ul");for(var d=g(c),e=0;e<b.length;e++)d.append(this.generateQuantityDiscountTierOption(b[e]));a&&d.append(a);return c};b.prototype.generateQuantityUnavailableTableUnorderedList=function(){var a=document.createElement("ul");a.setAttribute("class","qdt-ul");g(a).append(this.generateQuantityUnavailableOption());return a};b.prototype.generateSingleTierQuantityList=function(a){var b=[];b.push({quantity:Math.max(a,1),savingsMessage:null,availabilityMessage:null,
quantityPickerPriceText:"",isDiscountUnlocked:!1,isFirstTier:!0});return b};b.prototype.generateFetchInProcessTableUnorderedList=function(){var a=document.createElement("ul");a.setAttribute("class","qdt-ul");g(a).append(this.generateFetchInProcessOption());return a};b.prototype._removeINRSymbol=function(a){a=a.split("\x3e");return a[a.length-1]};b.prototype._populateOptionPriceContent=function(a,b){if("string"===typeof a.quantityPickerPriceText&&-1!==a.quantityPickerPriceText.search("currencyINR")){var c=
document.createElement("span");c.setAttribute("class","currencyINR");c.textContent="  ";b.appendChild(c);a=this._removeINRSymbol(a.quantityPickerPriceText);b.appendChild(document.createTextNode(a))}else b.textContent=a.quantityPickerPriceText};b.prototype.generateQuantityDiscountTierOption=function(a){var b=this,c=document.createElement("li"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div");a.isFirstTier?(e.textContent=a.quantity,c.setAttribute("class",
"qdt-dropdown-item qdt-active")):(e.textContent=a.quantity+"+",c.setAttribute("class","qdt-dropdown-item"));b._populateOptionPriceContent(a,f);e.setAttribute("class","option-tier");f.setAttribute("class","option-price");a.availabilityMessage!==u?this.generateTierWithAvailabilityMessageContent(d,e,f,a.availabilityMessage):a.savingsMessage!==u?this.generateTierWithSavingsMessageContent(d,e,f,a):(d.setAttribute("class","qdt-dropdown-option-no-saving-message"),d.appendChild(e),d.appendChild(f));c.appendChild(d);
c.addEventListener("mousedown",function(){b.handleQuantityDiscountTableOptionClicked(a.quantity)});return c};b.prototype.generateTierWithAvailabilityMessageContent=function(a,b,c,d){var e=document.createElement("div");e.textContent=d;e.setAttribute("class","option-availability-message");this.generateTierWithMessageContent(a,b,c,e)};b.prototype.generateTierWithSavingsMessageContent=function(a,b,c,d){var e=document.createElement("div");e.textContent=d.savingsMessage;d.isDiscountUnlocked?(d=document.createElement("div"),
d.setAttribute("class","option-unlocked-saving-message-icon"),g(e).prepend(d),e.setAttribute("class","option-unlocked-saving-message")):e.setAttribute("class","a-color-tertiary option-saving-message");this.generateTierWithMessageContent(a,b,c,e)};b.prototype.generateTierWithMessageContent=function(a,b,c,d){var e=document.createElement("div");a.setAttribute("class","qdt-dropdown-option-regular");e.setAttribute("class","option-price-and-message");e.appendChild(c);e.appendChild(d);a.appendChild(b);a.appendChild(e)};
b.prototype.generateLoadMoreOption=function(){var a=this,b=document.createElement("li"),c=document.createElement("div");c.textContent=this.loadMoreMessage;b.setAttribute("class","qdt-dropdown-item");c.setAttribute("class","qdt-dropdown-option-load-more");b.setAttribute("id","qdt-dropdown-load-more");b.appendChild(c);b.addEventListener("mousedown",function(b){a.handleLoadMoreOptionClicked(b)});return b};b.prototype.generateRequestForQuantityDiscountOption=function(){var a=this,b=document.createElement("a");
b.textContent=this.requestForQuantityDiscountMessage;b.setAttribute("class","a-link-normal qdt-dropdown-request-for-quantity-discount");b.addEventListener("mousedown",function(b){a.handleRequestForQuantityDiscountOptionClicked(b)});return this.generateLinkOption(b)};b.prototype.generateBuyingInBulkOption=function(a){var b=this;a={container:{element:document.createElement("div"),class:"qdt-dropdown-buying-in-bulk"},link:{element:document.createElement("a"),class:"a-link-normal qdt-dropdown-buying-in-bulk-link",
text:b.priceTiers[a].buyingInBulkLink},message:{element:document.createElement("div"),class:"qdt-dropdown-buying-in-bulk-message",text:b.priceTiers[a].buyingInBulkMessage}};for(var c in a)a.hasOwnProperty(c)&&(a[c].element.setAttribute("class",a[c].class),"undefined"!==typeof a[c].text&&(a[c].element.textContent=a[c].text));a.container.element.appendChild(a.link.element);a.container.element.appendChild(a.message.element);a.link.element.addEventListener("mousedown",function(a){b.handleBuyingInBulkOptionClicked(b.bbtLinkSelector,
D,a)});q.registerCounter(C);return this.generateLinkOption(a.container.element)};b.prototype.generateQuantityUnavailableOption=function(){var a=this,b=document.createElement("div"),c=document.createElement("div");c.innerHTML=this.quantityPickerUnavailabilityMessage;b.setAttribute("class","a-link-normal qdt-dropdown-quantity-unavailable");c.setAttribute("class","qdt-dropdown-quantity-unavailable-message");b.appendChild(c);0<this._findWithinPickerAccordionRow(this.splitOfferSectionSelector).length&&
(c=document.createElement("a"),c.textContent=this.quantityPickerUnavailabilityLink,c.setAttribute("class","a-link-normal qdt-dropdown-quantity-unavailable-link"),b.appendChild(c),c.addEventListener("mousedown",function(b){a.handleQuantityUnavailableOptionClicked(b)}));q.registerCounter(E);return this.generateLinkOption(b)};b.prototype.generateLinkOption=function(a){var b=document.createElement("li"),c=document.createElement("div");b.setAttribute("class","qdt-dropdown-item qdt-inactive");c.setAttribute("class",
"qdt-dropdown-option-link");c.appendChild(a);b.appendChild(c);return b};b.prototype.generateFetchInProcessOption=function(){var a=document.createElement("li"),b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("img");e.src="https://m.media-amazon.com/images/G/01/AmazonBusiness/vapLoading3._CB1556651073_.gif";c.textContent=this.fetchTheBestPricesMessage;e.setAttribute("class","fetching-in-progress-img");a.setAttribute("class","qdt-dropdown-item qdt-inactive");
b.setAttribute("class","qdt-dropdown-option-fetch-in-progress");d.appendChild(e);b.appendChild(d);b.appendChild(c);a.setAttribute("id","qdt-dropdown-fetch-in-progress");a.appendChild(b);return a};b.prototype.generateQdtErrorMessage=function(){var a=document.createElement("li"),b=document.createElement("div");if(this.isAODLinkEnabled){var c=document.createElement("span");c.setAttribute("class","a-declarative");c.setAttribute("data-action","show-all-offers-display");c.setAttribute("data-show-all-offers-display",
"{}");c.innerHTML=this.qdtErrorMessage;b.appendChild(c)}else b.innerHTML=this.qdtErrorMessage;a.setAttribute("class","qdt-dropdown-item qdt-inactive");b.setAttribute("class","qdt-dropdown-option-request-for-olp");a.setAttribute("id","qdt-dropdown-error-message");a.appendChild(b);var d=b.getElementsByTagName("a")[0];d.addEventListener("mousedown",function(a){d.click()});return a};b.prototype.handleLoadMoreOptionClicked=function(a){this.isLoadMoreButtonClicked=!0;this.buildLoadMoreButtonMetrics();this.generateQuantityDiscountTable();
a.preventDefault()};b.prototype.handleQuantityDiscountTableOptionClicked=function(a){g(this.quantityTextInputSelector).val(a);this.updateQuantityAndHideQuantityDiscountTable();g(this.quantityTextInputLabelSelector).show()};b.prototype.handleRequestForQuantityDiscountOptionClicked=function(b){var c=g(this.requestForQuantityDiscountModalSelector).find(".a-declarative");(c=a.get(c))&&c.show();this.handleBuyingInBulkOptionClicked(this.requestForQuantityDiscountModalSelector,G,b)};b.prototype.handleBuyingInBulkOptionClicked=
function(a,b,c){var d=this.getCurrentQuantity();if(this.amazonDevicesLinkEnabled&&!this.requestForQuoteLinkEnabled)q.registerCounter(b),p.singleton.notifyBuyingInBulkOptionClicked(d),h.location.href=this.buyingInBulkBaseUrl;else if(a=document.querySelector(a+" .a-link-normal"))q.registerCounter(b),p.singleton.notifyBuyingInBulkOptionClicked(d),a.click();c.preventDefault()};b.prototype.handleQuantityUnavailableOptionClicked=function(a){q.registerCounter(F);var b=this.getCurrentQuantity();this.quantityUnavailableOptionClicked(b);
a.preventDefault()};b.prototype.quantityUnavailableOptionClicked=function(a){a=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:h.location.protocol+"//"+h.location.host+p.singleton.getLimitedAvailabilityUrl(a);h.location.href=a};b.prototype.updateLimitedAvailabilityMessageVisibility=function(a){this.hasAvailability=a;this.generateQuantityDiscountTable();this.updateBuyboxLimitedAvailabilityMessageVisibility()};b.prototype.updateBuyboxLimitedAvailabilityMessageVisibility=function(){var a=this._findWithinPickerAccordionRow(this.addToCartButtonSelector).closest(".a-button"),
b=d(a);a=this._findWithinPickerAccordionRow(this.splitOfferSectionSelector);if(this.hasAvailability)g(this.limitedAvailabilityMessageSelector).addClass("aok-hidden"),b.enable(),a.addClass("aok-hidden");else{g(this.limitedAvailabilityMessageSelector).removeClass("aok-hidden");b.disable();b=this.getCurrentQuantity();var c=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:p.singleton.getLimitedAvailabilityUrl(b);this._findWithinPickerAccordionRow(this.splitOfferLinkSelector).attr("href",c);1<b?
(q.registerCounter(k.COUNTER_METRIC.SPLIT_OFFER_LINK_DISPLAYED),a.removeClass("aok-hidden")):a.addClass("aok-hidden")}};b.prototype.buildQptRenderMetrics=function(){var a={};a.counter=w+(this.quantityPricingTableSummaryEnabled?".QPTS":"");q.register(a)};b.prototype.buildQptViewMetrics=function(){var a={};a.counter=t+(this.quantityPricingTableSummaryEnabled?".QPTS":"");q.register(a)};b.prototype.buildQptForLockedMerchantMetrics=function(a){this.qdsForLockedMerchantEnabled&&q.registerCounter(a)};b.prototype.buildQptUncompetitiveTiersMetrics=
function(a,b,c){this.areUncompetitiveTiersPresent(b,c)&&q.registerCounter(a)};b.prototype.buildLoadMoreButtonMetrics=function(){this.loadMoreButtonForUncompetitiveTiersPresence?q.registerCounter(B):q.registerCounter(A)};b.prototype.buildAvailabilityMessageMetrics=function(a){this.isAvailabilityMessagePresent()&&q.registerCounter(a)};b.prototype._findWithinPickerAccordionRow=function(a){return l.findWithinPickerAccordionRow(this.id,a)};return{QuantityPickerLogicV2:b}});"use strict";t.when("jQuery",
"A","abPricingFfqp_constants","ready").execute(function(g,m,e){function a(a){h.ue!==u&&h.ue.count!==u&&h.ue.count(a,(h.ue.count(a)||0)+1)}function d(a,b,d){null===d&&(d="");var c=new RegExp("\\b("+b+"\x3d).*?(\x26|#|$)");if(0<=a.search(c))return a.replace(c,"$1"+d+"$2");a=a.replace(/[?#]$/,"");return a+(0<a.indexOf("?")?"\x26":"?")+b+"\x3d"+d}function l(){return m.state(e.PACKAGE_PREFIX)}function p(a,b){return 0!==a.find('option[value\x3d"'+b.toString()+'"]').length}function q(a){return g("[id^\x3d"+
a+"]").closest("[data-a-accordion-row-name]")}function k(a,b){a=q(a);return 0<a.length?a.find(b):g(b)}function f(){b||l()===u||(b=!0,t.register("abPricingFfqp_utils",function(){return{getPageState:l,incrementMetricByOne:a,replaceUrlParam:d,dropdownContainsQuantity:p,findAccordionRow:q,findWithinPickerAccordionRow:k}}))}var b=!1;f();t.register("abPricingFfqp_lazyInitializer",function(){return{tryInitialize:f}})})});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors,a=f?f("ABPricingQuantityPricingTableSummaryAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,f){c.when("A","jQuery","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics").execute(function(a,c,d,f,g){a.declarative("b2bhawks-quantity-pricing-table-summary-click","click",function(b){var a=b.data.selectedQuantity,e="",c=b.data.deviceType,d=b.data.bestTier,
k=b.data.recommendedTier,h=b.data.asinDetailPageUrl;if(!b.data.tierSelected){d&&k?g.registerCounter("AB_QR_QPTS_RECOMMENDED_AND_BEST_TIER"):k?g.registerCounter("AB_QR_QPTS_RECOMMENDED_TIER"):d?g.registerCounter("AB_QR_QPTS_BEST_TIER"):g.registerCounter("AB_QR_QPTS_DEFAULT_TIER");if("mobile"===c||"mobileApp"===c)e+="#b2bhawks-quantity-pricing-table-summary";e={anchorToDiv:e};e.selectedBuyingOption="undefined"!==typeof b.data.selectedBuyingOption&&0<b.data.selectedBuyingOption.length?b.data.selectedBuyingOption:
"RZvfv//HxDF+O5021pAnSA\x3d\x3d";h&&0!=h.length&&(e.asinDetailPageUrl=h,e.refTag="bmsm_slot_redirect");f.singleton.reloadPageForQuantity(a,e)}})})});
/* ******** */
