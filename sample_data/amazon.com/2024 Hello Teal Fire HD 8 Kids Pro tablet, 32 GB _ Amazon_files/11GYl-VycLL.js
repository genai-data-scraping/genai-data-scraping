(function(e){var c=window.AmazonUIPageJS||window.P,m=c._namespace||c.attributeErrors,k=m?m("MarsUtilityAssets",""):c;k.guardFatal?k.guardFatal(e)(k,window):k.execute(function(){e(k,window)})})(function(e,c,m){function k(l,f,b){b||(b=f,f=l,l=[]);var a=c.AmazonUIPageJS||c.P||e;a.now(f).execute("Registrant",function(d){if(!d)try{a.when.apply(a,l).register(f,b)}catch(h){a.log(f+" error: "+h,"WARN")}})}k([],"MarsSafeRegister",function(){return{safeRegister:k}});"use strict";e.when("MarsSafeRegister").execute("marsCsmCounter.js",
function(l){l.safeRegister(["A"],"marsCsmCounter",function(f){var b=f.$;return{register:function(a,d,h){a&&d&&h&&b(a).bind(d,b.proxy(this.increment,this,h))},increment:function(a){a&&c.ue.count(a,(c.ue.count(a)||0)+1)},update:function(a,b){a&&"number"===typeof b&&c.ue.count(a,b)}}})});"use strict";e.when("MarsSafeRegister").execute("marsCsmLogger.js",function(l){l.safeRegister([],"marsCsmLogger",function(){function f(b,a,d){c.ueLogError(b,{logLevel:a,attribution:d})}return{logError:f,logCustomError:function(b,
a,d){f({message:b},a,d)}}})});"use strict";e.when("MarsSafeRegister").execute("marsRefTagEmitter.js",function(c){c.safeRegister(["A","marsCsmCounter"],"marsRefTagEmitter",function(c,b){return{send:function(a,c){if(!a)throw b.increment("odsRefTagUtils_reftag_undefined"),Error("refTag is not defined");b.increment(a);b.increment("odsRefTagUtils_csm_counter")}}})});"use strict";e.when("MarsSafeRegister").execute("marsAjaxWithRetry.js",function(c){c.safeRegister(["A","3p-promise"],"marsAjaxWithRetry",
function(c,b){function a(c,n,g){return new b(function(b,h){d.ajax(c).done(function(c){b(c)}).fail(function(d){g&&n<=g.retryLimit?setTimeout(function(){a(c,n+1,g).then(b).catch(h)},g.exponentialBackoff?Math.pow(2,n)*g.retryDelay:g.retryDelay):h(d)})})}var d=c.$;return{retry:function(c,b){var h={retryLimit:2,retryDelay:1E3,exponentialBackoff:!1};b&&(h=Object.assign(h,b));return a(c,0,h)}}})});"use strict";e.when("MarsSafeRegister").execute("marsCsaLogger.js",function(e){e.safeRegister(["A","marsCsmLogger"],
"marsCsaLogger",function(e,b){function a(b){var a=new Date,d=c.opts||{},g=c.ue||{},e=c.fwcimData||{};e=d.customerId||e.customerId||"";d=d.marketId?parseInt(d.marketId):null;var f=g.sid||"";g=g.rid||"";var k=a.toISOString();a=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")+"T"+String(a.getHours()).padStart(2,"0")+":"+String(a.getMinutes()).padStart(2,"0")+":"+String(a.getSeconds()).padStart(2,"0");return{schemaId:"buda.CSAMetrics.8",refMarker:b,userCustomerId:e,
marketplaceId:d,sessionId:f,requestId:g,hitHourUtc:k,endTimeLocal:a,pageAsin:c.ue_pti||""}}return{send:function(d,e,f){var g=f=f||{};if(!d||"string"!==typeof d)throw b.logCustomError("refTag must be a non-empty string","ERROR","MarsCsaLogger"),Error("refTag must be a non-empty string");if(!e||"string"!==typeof e)throw b.logCustomError("producerId must be a non-empty string","ERROR","MarsCsaLogger"),Error("producerId must be a non-empty string");if(g.schemaBuilder&&"function"!==typeof g.schemaBuilder)throw b.logCustomError("schemaBuilder must be a function",
"ERROR","MarsCsaLogger"),new TypeError("schemaBuilder must be a function");if(!c.csa)throw b.logCustomError("CSA is not available","ERROR","MarsCsaLogger"),Error("CSA is not available");try{c.csa("Events",{producerId:e})("log",(f.schemaBuilder||a)(d),{ent:"all"})}catch(p){throw b.logCustomError("Failed to log CSA event: "+p.message,"ERROR","MarsCsaLogger"),Error("Failed to log CSA event: "+p.message);}}}})})});