(function(f){var w=window.AmazonUIPageJS||window.P,p=w._namespace||w.attributeErrors,e=p?p("MarsPickAVersionWidgetAssets",""):w;e.guardFatal?e.guardFatal(f)(e,window):e.execute(function(){f(e,window)})})(function(f,w,p){f.when("MarsSafeRegister").execute("marsCsmCounter.js",function(e){e.safeRegister(["A","a-carousel-framework","a-carousel-constants","PickAVersionCommon.Controller"],"PickAVersion.Controller",function(a,e,f,n){function g(b){var d=b.getAttr(f.PAGE_NUMBER),c=b.getAttr(f.TOTAL_PAGES),
a=b.dom.$container.find(".a-carousel-goto-prevpage");b=b.dom.$container.find(".a-carousel-goto-nextpage");a.css("visibility",1===d?"hidden":"visible");b.css("visibility",d>=c?"hidden":"visible");a.css("top","");b.css("top","")}var k,q=n.extend({init:function(b){e.onInit("pav-carousel",function(b){g(b);a.on("a:carousel:pav-carousel:change:pageNumber",function(c){g(c.carousel)});a.on("a:carousel:pav-carousel:repaint",function(c){g(c.carousel)})});this._super(b)}});return{getInstance:function(b){k?b&&
k.reset(b):k=new q(b);return k}}})});"use strict";f.when("MarsSafeRegister","dp-latency-marker").execute("PickAVersionAjax.Controller",function(e){e.safeRegister(["A","marsCsmCounter","dp-latency-marker"],"PickAVersionAjax.Controller",function(a,e){function g(k){a.get(k.url,{withCredentials:!0,headers:{"Accept-Language":k.language},success:function(a){n(a)},error:function(a,b,d,c){e.increment("mars-pav-ajax-failure");l("#mars-pav-widget-placeholder").remove();f.log("makeAjaxCall failed with url: "+
a+" - status: "+b.http.status+" - errorThrown: "+c,"FATAL","MarsPickAVersionWidgetAssets")}})}function n(a){e.increment("mars-pav-ajax-success");var g=l("#mars-pav-widget-placeholder");g.length&&a?(g.html(a),f.when("a-carousel-framework").execute("update",function(b){b.createAll();b.initializeAll()})):(a||f.log("Error: returned HTML content is null","ERROR","MarsPickAVersionWidgetAssets"),g.length||f.log("Error: $container.length is null","ERROR","MarsPickAVersionWidgetAssets"))}var l=a.$;return{init:function(a){var e=
{url:a.url,language:a.language};f.when("dp-latency-marker").execute("mars-pav-load-deferred",function(){g(e)})}}})});"use strict";f.when("A","PickAVersion.Metrics","dp-latency-marker").register("PickAVersionCommon.Controller",function(e,a){return e.createClass({init:function(e){this._metrics=new a(e);this._metrics.emitWidgetLoadedMetric();this._bindEventsOnce()},reset:function(a){"object"===typeof a&&(this._metrics.init(a),this._metrics.emitWidgetLoadedMetric())},_bindEventsOnce:function(){e.on("a:pageUpdate",
this._handlePageUpdate.bind(this));e.on("a:popover:beforeShow:pav-secview",this._seeTheDifferencesClicked.bind(this))},_handlePageUpdate:function(){this.reset()},_seeTheDifferencesClicked:function(){this._metrics.emitSecondaryViewMetric()}})});"use strict";f.when("A","odsRefTagUtils").register("PickAVersion.Metrics",function(e,a){return e.createClass({init:function(a){this._refSuffix=a.refSuffix?"_"+a.refSuffix:"";this._currentPageAsin=a.currentPageAsin},emitWidgetLoadedMetric:function(){a.send("pav_loaded_"+
this._currentPageAsin+this._refSuffix)},emitSecondaryViewMetric:function(){a.send("pav_secondary_view_"+this._currentPageAsin+this._refSuffix)}})});"use strict";f.when("A","a-carousel-constants","a-carousel-transition-slide","m-carousel-marsvariablewidth-transition-constants").register("m-carousel-marsvariablewidth-transition",function(e,a,g,f){function n(b,d,c,h){c?(b.setAttr(a.CURRENTLY_WRAPPING,!0),d.callback=c,d.easingFunction=d.easingFunction||b.getAttr(a.WRAP_EASING),d.animationSpeed=1.3*(e.isFiniteNumber(d.animationSpeed)?
d.animationSpeed:b.getAttr(a.ANIMATION_SPEED))):d.callback=h}function l(b,d){(d.animationDuration===p||0<d.animationDuration)&&!d.silent&&b.setAttr(a.ANIMATING,!0)}function k(b,d){var c=b.getAttr("itemsPerPage"),h=c.length,x=b.getAttr(a.PAGE_NUMBER),e=b.getAttr(a.SET_SIZE),m=b.getAttr("pageForItemMap")[d];d===e-c[c.length-1]+1&&m!==x&&(m=h);m!==x&&0<m&&m<=h&&b.setAttr(a.PAGE_NUMBER,m)}function q(a,d,c,h){var b=0;for(--d;d<h;d++)b+=a.getDimensions().items[d].outerWidth;return c-b+f.RIGHT_MARGIN_OFFSET}
g=e.copy(g);g.gotoPage=function(b,d,c){var h=b.getAttr("itemsPerPage"),e=h.length,y=b.getAttr(a.CIRCULAR),m=h[d-1],g=b.getAttr(a.SET_SIZE),k=1;b.setAttr(a.PAGE_SIZE,h[d-1]);b.setAttr(a.TOTAL_PAGES,h.length);for(var f=0;f<d-1;f++)k+=h[f];c=c||{};l(b,c);0<d&&d<=e&&b.setAttr(a.PAGE_NUMBER,d);!y&&1>d?(d=1,c.animationDuration=NaN):!y&&d>e&&(d=e,c.animationDuration=Math.pow(b.getAttr(a.ANIMATION_SPEED),b.getAttr(a.SPRINGINESS)));d===e&&(k=Math.min(k,g-m+1));this.gotoIndex(b,k,c)};g.gotoIndex=function(b,
d,c){var e=b.getAttr(a.PAGE_NUMBER),x=b.getAttr(a.TOTAL_PAGES),y="true"===b.getAttr(a.CIRCULAR)&&"false"===b.getAttr(a.CURRENTLY_WRAPPING),m=c.callback,g=this,f=null,r=b.getViewportWidth(),p=b.getAttr(a.SET_SIZE),u=0;c=c||{};l(b,c);k(b,d);b.setAttr(a.FIRST_VISIBLE_ITEM,d);if(1>d){if(y){f=-r;var t=function(){m&&m();g.wrapToLast(b)}}}else d>p?y?(f=b.getAttr(a.CURRENT_PIXEL)+r,t=function(){m&&m();g.wrapToFirst(b)}):(1!==x&&(u=q(b,d-1,r,p)),f=b.getItemOffset(d-1)-u):(e===x&&1!==e&&(u=q(b,d,r,p)),f=b.getItemOffset(d)-
u);n(b,c,t,m);null===f||isNaN(f)||this.gotoPixel(b,f,c)};return g});f.when("A","a-carousel-framework","m-carousel-marsvariablewidth-transition").execute("m-register-mars-variable-width-transition-strategy",function(e,a,f){a.registerStrategy("transition","marsvariablewidthtransition",f)});"use strict";f.when("dp-latency-marker").register("m-carousel-marsvariablewidth-transition-constants",function(){return{RIGHT_MARGIN_OFFSET:9}});"use strict";f.when("jQuery","a-carousel-framework","m-carousel-marsvariablewidth-display-common").register("m-carousel-marsvariablewidth-display",
function(e,a,f){function g(f){f.each(function(a,d){e(d).find(".pav-card-container").css("height","")});var g=a.getCarouselByName("pav-carousel").dom.$viewport.css("height");g=g.substring(0,g.length-2)-2;f.each(function(a,d){e(d).find(".pav-card-container").css("height",g+"px")})}function n(a){var f=e("#mars-pav-widget").outerWidth(),b=e("#mars-pav-widget .pav-default-view"),d=e("#pav-carousel .a-carousel-row"),c=e("#mars-pav-widget .pav-desktop-condensed-view");a=a.dom.$carousel.children("li");310>=
f?(c.css("display","block"),b.css("display","none"),d.css("display","none"),l=!0):l&&(c.css("display","none"),b.css("display","block"),d.css("display","block"),g(a),l=!1)}var l=!1;return{repaint:f.repaint,init:function(a){f.init(a);n(a)},resize:function(a,e){!l&&e.viewport&&e.viewport.width!==p&&f.repaint(a);n(a)}}});"use strict";f.when("jQuery","a-carousel-constants","dp-latency-marker").register("m-carousel-marsvariablewidth-display-common",function(e,a){function f(c){c=c.getBoundingClientRect();
return c.width?c.width:c.right-c.left}function w(c){var a=[],b,d;c.each(function(c,h){b=f(h);d=e(h).outerWidth(!0);a.push({width:b,outerWidth:d})});return a}function n(c){var a=0;c.forEach(function(c){a+=c.outerWidth});return a}function l(a,b){for(var c=0,d=b.size()-1,e=f(b.get(d));0<=d&&0<a-e;)d--,c++,a-=e,0<=d&&(e=f(b.get(d)));return c}function k(a){var c=a.dom.$carousel.children("li");a=a.getDimensions().viewport.width;for(var b=0,d=[],e,g=c.size(),k=a,r=0;r<g;r++)e=f(c.get(r)),0<k-e?(b++,k-=e+
10):(0===b&&(b=1),d.push(b),b=1,k=a-e);0<b&&(b=l(a,c),0<b&&d.push(b));return d}function q(a){var c=a.getAttr("itemsPerPage"),b=[],d=1,e=a.dom.$carousel.children("li").length;c.map(function(a,c){for(var f=0;f<a&&d<=e;f++)b[d]=c+1,d++});return b}function b(c,b,d){var f=c.getAttr(a.TOTAL_PAGES),g=c.getAttr(a.PAGE_NUMBER),h=c.getAttr(a.FIRST_VISIBLE_ITEM),x=c.getAttr(a.SET_SIZE),r=c.dom.$container,n=c.dom.$carousel.children("li"),u=k(c),t=u[g-1],w=(g-1)*t+1,v=0,q=0;c.setAttr(a.PAGE_SIZE,t);if(t===p){t=
u[0];for(q;q<u.length&&v<h;q++)v+=u[q];v=q;c.setAttr(a.PAGE_NUMBER,v);h=v===u.length-1?x-l(b,n)+1:(v-1)*t+1;c.setAttr(a.FIRST_VISIBLE_ITEM,h)}else g>f?(h=(f-1)*t+1,c.setAttr(a.PAGE_NUMBER,f),c.setAttr(a.FIRST_VISIBLE_ITEM,h)):h!==w&&(v=Math.ceil(h/t),h=(v-1)*t+1,c.setAttr(a.PAGE_NUMBER,v),c.setAttr(a.FIRST_VISIBLE_ITEM,h));n.each(function(a,c){e(c).find(".pav-card-container").css("height",d-2+"px")});r.css("visibility","visible");return h}function d(c){var d=c.getDimensions(),e=d.viewport.width,f=
d.viewport.height;d=c.dom.$carousel.children("li");d=w(d);f=b(c,e,f);var g=c.dom.$carousel,l=g.children("li").length,p=c.getAttr(a.PAGE_SIZE),r=c.getAttr(a.SET_SIZE);e=p>=r?e:n(d);g.css("width",e+"px");e={carousel:{width:e,outerWidth:g.outerWidth()},items:[]};for(g=0;g<l;g++)e.items.push({width:d[g].width,outerWidth:d[g].outerWidth});c.updateDimensionsCache(e);c.setAttr("itemsPerPage",k(c));c.setAttr("pageForItemMap",q(c));c.gotoIndex(f,{animationDuration:0,ignorePause:!0});c.triggerEvent("repaint")}
return{repaint:d,init:function(c){var b=c.getAttr(a.FIRST_VISIBLE_ITEM);c.setAttr(a.MIN_GUTTER,0);c.setAttr("currentGutter",0);d(c);1<b&&(b=Math.ceil(b/c.getAttr(a.PAGE_SIZE)),c.gotoPage(b))}}});"use strict";f.when("a-carousel-framework","m-carousel-marsvariablewidth-display").execute("m-register-mars-variable-width-display-strategy",function(e,a){e.registerStrategy("display","marsvariablewidthdisplay",a)})});