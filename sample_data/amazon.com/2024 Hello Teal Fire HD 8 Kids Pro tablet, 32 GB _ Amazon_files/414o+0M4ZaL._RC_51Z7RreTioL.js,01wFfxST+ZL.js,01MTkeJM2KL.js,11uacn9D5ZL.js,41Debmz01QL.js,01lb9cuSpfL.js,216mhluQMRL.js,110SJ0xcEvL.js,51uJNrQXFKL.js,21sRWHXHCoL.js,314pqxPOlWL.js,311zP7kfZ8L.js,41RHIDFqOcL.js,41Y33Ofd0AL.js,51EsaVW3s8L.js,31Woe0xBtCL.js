(function(h){var m=window.AmazonUIPageJS||window.P,q=m._namespace||m.attributeErrors,f=q?q("AmazonDevicesDetailPageUtilityAssets",""):m;f.guardFatal?f.guardFatal(h)(f,window):f.execute(function(){h(f,window)})})(function(h,m,q){h.when("A").execute(function(f){f.declarative("popup-window","click",function(d){var c=d.data.windowName||"popupWindow",a=d.data.windowOptions||"width\x3d600,height\x3d400,scrollbars\x3dyes";d.$event.preventDefault();m.open(d.$target.prop("href"),c,a)})});"use strict";h.when("dp-latency-marker").register("ods-url-utils",
function(){return{getUrlParam:function(f){for(var d=null,c=m.location.search.substr(1).split("\x26"),a=0;a<c.length;a++){var b=c[a].split("\x3d");b[0]===f&&(d=b[1])}return d}}});"use strict";h.when("A").register("csmCounter",function(f){var d=f.$;return{register:function(c,a,b){c&&a&&b&&d(c).bind(a,d.proxy(this.increment,this,b))},increment:function(c){c&&m.ue.count(c,(m.ue.count(c)||0)+1)},update:function(c,a){c&&"number"===typeof a&&m.ue.count(c,a)}}});"use strict";h.register("function-utils",function(){return{throttle:function(f,
d,c){var a,b,e,k=null,g=0;c||(c={});var n=function(){g=!1===c.leading?0:(new Date).getTime();k=null;e=f.apply(a,b);k||(a=b=null)};return function(){var t=(new Date).getTime();g||!1!==c.leading||(g=t);var h=d-(t-g);a=this;b=arguments;0>=h||h>d?(k&&(clearTimeout(k),k=null),g=t,e=f.apply(a,b),k||(a=b=null)):k||!1===c.trailing||(k=setTimeout(n,h));return e}},debounce:function(f,d,c){var a;return function(){var b=this,e=arguments;clearTimeout(a);a=setTimeout(function(){a=null;c||f.apply(b,e)},d);c&&!a&&
f.apply(b,e)}},memoize:function(f,d){var c={};return function(){for(var a=0<arguments.length?"":"%NO_ARGUMENTS%",b=0;b<arguments.length;b++)a&&(a+="-"),a+="object"===typeof arguments[b]?JSON.stringify(arguments[b]):arguments[b];c.hasOwnProperty(a)||(c[a]=d.apply(f,arguments));return c[a]}}}});"use strict";h.when("A","csmCounter").register("odsRefTagUtils",function(f,d){var c=f.$;return{send:function(a,b){if(!a)throw d.increment("odsRefTagUtils_reftag_undefined"),Error("refTag is not defined");c.get((b||
"/hctp/log/refMarker")+"?ref_\x3d"+a);d.increment("odsRefTagUtils_csm_counter")}}});"use strict";h.when("A","dp-latency-marker").register("ods-image-utilities",function(f){function d(a,b){var e=new Image;e.onload=function(){b.resolve(a)};e.onerror=function(){b.reject(a)};e.src=a}var c=f.$;return{preloadImage:function(a,b){var e=c.Deferred();d(a,e);if(b&&f.capabilities.hires){var k=c.Deferred();d(b,k)}return{image:e.promise(),hiResImage:k?k.promise():q}},preloadImages:function(a){for(var b=[],e=0;e<
a.length;e++){var k=c.Deferred();d(a[e],k);b.push(k.promise())}return b}}});"use strict";h.when("A","dp-latency-marker").register("ODSEventDispatcher",function(f){return f.createClass({init:function(){this._callbacks={}},registerCallback:function(d,c){var a=this._callbacks[d]||[];-1===a.indexOf(c)&&a.push(c);this._callbacks[d]=a},unregisterCallback:function(d,c){if(d=this._callbacks[d])c=d.indexOf(c),-1<c&&d.splice(c,1)},dispatch:function(d){var c=this._callbacks[d];if(c)for(var a=0;a<c.length;a++)c[a].apply(this,
Array.prototype.slice.call(arguments,1))}})});"use strict";h.when("A","jQuery","dp-latency-marker").register("BuyboxManagerFactory",function(f,d){function c(b,a,c,g){var e=f.copy(c);d.each(e,function(e){-1===["initialize","reset"].indexOf(e)&&(b[e]=g?d.proxy(a,null,e):d.proxy(c,e))})}function a(b,a,k,g){var e=function(n){if(!h&&(g?(g.initialize(),c(f,e,g,!1)):p=new k,h=new a(p),d.each(b,function(b,a){f[a]=d.proxy(h,a)}),"string"===typeof n))return f[n].apply(h,Array.prototype.slice.call(arguments,
1))},f={reset:function(){h?(g&&g.reset(),p&&p.reset(),h.reset()):e()},initialize:e},h,p;g&&c(f,e,g,!0);d.each(b,function(a,b){f[b]=d.proxy(e,null,b)});return f}return{create:function(b,e,c){return a(b,e,c)},extend:function(b,e,c){return a(b,e,null,c)}}});"use strict";h.when("jQuery","BuyboxManagerViewHelper").register("BuyboxManagerFormHelper",function(f,d){function c(b,a){return'\x3cinput type\x3d"hidden" name\x3d"'+b+'" value\x3d"'+a+'" /\x3e'}function a(b){return 0<=b.attr("id").search("buyNow")}
function b(b){return 0<=b.attr("id").search("addToCart")||0<=b.attr("id").search("mobile-installments")}function e(b,a){return f.map(b,function(b){return f(b).attr(a)})}'input[name\x3d"%NAME%"]'.replace("%NAME%","verificationSessionID");var k='input[name\x3d"%NAME%"]'.replace("%NAME%","a"),g='input[name\x3d"%NAME%"]'.replace("%NAME%","oid"),n='input[name\x3d"%NAME%"]'.replace("%NAME%","quantity"),h='input[name\x3d"%NAME%"]'.replace("%NAME%","asin"),r='input[name\x3d"%NAME%"]'.replace("%NAME%","offeringID"),
p='input[name\x3d"%NAME%"]'.replace("%NAME%","quantity"),m=[k,g,n].concat([h,r,p]).join(", ");return{removeAllFormFields:function(b){b.find(m).remove()},getHiddenInputHTML:c,isFormBuyNow:a,isFormAddToCart:b,createMobileAppFormInputs:function(b){var a=b[0];if(a){var e=a.asin;var k=a.offerId;var g=a.quantity}for(a=1;a<b.length;a++)e+="|"+b[a].asin,k+="|"+b[a].offerId,g+="|"+b[a].quantity;return""+(c("asin",e)+c("offeringID",k)+c("quantity",g))},getViewData:function(c){if(a(c)){var f=e(c.find(h),"value")[0].split("|"),
l=e(c.find(r),"value")[0].split("|");c=e(c.find(p),"value")[0].split("|");return d.buildRawData(f,l,c)}if(b(c))return f=e(c.find(k),"value"),l=e(c.find(g),"value"),c=e(c.find(n),"value"),d.buildRawData(f,l,c);throw Error("Add to order button not handled in buyBoxManagerFormHelper");},updateMobileAppFormInputsWithSubscriptionData:function(b,a,e){if(!f.isEmptyObject(b._digitalSubscriptionAsinMap)){var k=[],g=b._digitalSubscriptionAsinMap,d;for(d in g)if(g.hasOwnProperty(d)){var l=g[d],n=l.name;l=l.value;
k.push('input[name\x3d"%NAME%"]'.replace("%NAME%",n));k.push('input[name\x3d"%NAME%"]'.replace("%NAME%",l));delete g[d]}n=k.join(",");e.find(n).remove();b._digitalSubscriptionAsinMap=g}e="";for(g=1;g<a.length;g++)a[g].customAttribute&&(n="custom-name.%INDEX.1".replace("%INDEX",g),l="custom-value.%INDEX.1".replace("%INDEX",g),k=a[g],e+=c(n,k.customAttribute.name)+c(l,k.customAttribute.value),b._digitalSubscriptionAsinMap||(b._digitalSubscriptionAsinMap={}),b._digitalSubscriptionAsinMap[k.asin]={index:g,
name:n,value:l});return e}}});"use strict";h.when("A","jQuery","BuyboxManagerViewBase").register("BuyboxManagerView",function(f,d,c){return c.extend({init:function(){this._super()},moveFieldsToContainer:function(a,b){for(var e=1,c=[],g;g===q||0<g.length;)g=a.find(this.getHiddenSelector("ASIN."+e)),0<g.length&&c.push(g.get(0),a.find(this.getHiddenSelector("offerListingID."+e)).get(0),a.find(this.getHiddenSelector("quantity."+e)).get(0)),e++;b.append(c)},render:function(a){this._super(a);var b=this;
this.$forms.each(function(e){var c=d(this),g=c.find('input[type\x3d"hidden"][name^\x3d"ASIN."]'),f=d.isArray(a)?a.length:0,h=b.$fieldsContainers.get(e);g.each(function(){var a=d(this);if(!a.parent().is(h)){var e=b._getAsinIndex(a);f++;a.prop("name","ASIN."+f);c.find('input[type\x3d"hidden"][name\x3d"offerListingID.'+e+'"]').prop("name","offerListingID."+f);c.find('input[type\x3d"hidden"][name\x3d"quantity.'+e+'"]').prop("name","quantity."+f)}})})},buildHTML:function(a,b){return this.getHiddenInputHTML("ASIN."+
b,a.asin)+this.getHiddenInputHTML("offerListingID."+b,a.offerId)+this.getHiddenInputHTML("quantity."+b,a.quantity)},getDataFromDOM:function(){var a=[],b=this.$fieldsContainers.first(),e=this;b.find('input[type\x3d"hidden"][name^\x3d"ASIN."]').each(function(){var c=d(this),g=e._getAsinIndex(c);a.push({asin:c.val(),offerId:b.find(e.getHiddenSelector("offerListingID."+g)).val(),quantity:parseInt(b.find(e.getHiddenSelector("quantity."+g)).val(),10)})});return a},_getAsinIndex:function(a){return parseInt(a.prop("name").substring(5),
10)}})});"use strict";h.when("A","BuyboxNatcMobileweb","jQuery").register("BuyboxManagerViewBase",function(f,d,c){return f.createClass({init:function(){this.reset()},registerAtcBtn:function(a){this.$atcBtns=this.$atcBtns.add(a)},registerForm:function(a){a="string"===typeof a?c(a):a;if(a instanceof c&&0<a.length&&0===this.$forms.has(a).length){this.$forms=this.$forms.add(a);var b=this.createFieldsContainer(a);this.moveFieldsToContainer(a,b)}},createFieldsContainer:function(a){var b=a.find(".buyboxManagerHiddenFieldsContainer");
0===b.length&&(b=c('\x3cdiv class\x3d"buyboxManagerHiddenFieldsContainer"\x3e'),a.append(b));0===this.$fieldsContainers.has(b).length&&(this.$fieldsContainers=this.$fieldsContainers.add(b));return b.first()},moveFieldsToContainer:function(a,b){throw Error("The view must override the moveFieldsToContainer function");},getHiddenSelector:function(a,b){var e='input[type\x3d"hidden"]';"string"===typeof a&&(e+='[name\x3d"'+a+'"]');"string"===typeof b&&(e+='[value\x3d"'+b+'"]');return e},getHiddenInputHTML:function(a,
b){return'\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+b+'" /\x3e'},render:function(a){this.appendFormData(a)},appendFormData:function(a,b){b=b||1;var e="";if(c.isArray(a))for(var k=0;k<a.length;k++)e+=this.buildHTML(a[k],b+k);this.$fieldsContainers.html(e)},appendFormDataNatc:function(a,b){var e="";b.find('input[type\x3d"hidden"].ATCFormUpsellAsinData').remove();if(c.isArray(a))for(var k=1;k<a.length;k++)e+=d.buildNatcHTML(a[k],k);b.append(e)},reset:function(){this.$forms=c();this.$fieldsContainers=
c();this.registerForm(c("#addToCart"));c("#mobile-installments")&&this.registerForm(c("#mobile-installments"));this.$atcBtns=c();this.registerAtcBtn(c("#add-to-cart-button"));this.registerAtcBtn(c("#bb_to_cfg_button"));this.registerAtcBtn(c("#buy-now-button"));c("#add-to-delivery-mobile-button").length&&this.registerAtcBtn(c("#add-to-delivery-mobile-button"));c("#installments-button").length&&this.registerAtcBtn(c("#installments-button"))}})});"use strict";h.when("jQuery","dp-latency-marker").register("BuyboxManagerViewHelper",
function(f){var d={FORM:"form",AW_MASH:"aw_mash",SHOW_HCTP_ATTACH:"show-hctp-attach",UNKNOWN:q};return{ViewType:d,getAtcBtnViewType:function(c){var a=d.UNKNOWN;c instanceof f||(c=f(c));var b=c.closest('.a-declarative[data-action\x3d"aw-mash"]'),e=c.closest('.a-declarative[data-action\x3d"show-hctp-attach"]');return 0<b.length?d.AW_MASH:0<c.closest("form").length?d.FORM:0<e.length?d.SHOW_HCTP_ATTACH:a},buildRawData:function(c,a,b){var e={},k=[];f.each(c,function(c,d){var g=a.length>c?a[c]:"";c=b.length>
c?parseInt(b[c],10):1;var f=d+":"+g;e.hasOwnProperty(f)?k[e[f]].quantity+=c:e[f]=k.push({asin:d,offerId:g,quantity:c})-1});return k}}});"use strict";h.when("A","jQuery","ODSEventDispatcher","ods-url-utils","BuyboxManagerViewBase").register("BuyboxManagerController",function(f,d,c,a,b){return f.createClass({init:function(a){if(!(a instanceof b))throw new TypeError("The view must inherits from BuyboxManagerViewBase");this._view=a;this._eventDispatcher=new c;this._enableEvents(!0);this.reset();var e=
this;f.on("a:dropdown:mobileQuantityDropDown:select",function(b){e.setPageAsinQuantity(parseInt(b.value,10))});this._isFreeFormQuantityPickerPresent()&&this._makeAwareOfFreeFormQuantity()},_enableEvents:function(b){d.each("UpsellAsinAdded UpsellAsinRemoved UpsellAsinChanged PageAsinAdded PageAsinReplaced PageAsinChanged".split(" "),d.proxy(function(a,e){b?(this["register"+e]=d.proxy(this._eventDispatcher,"registerCallback",e),this["unregister"+e]=d.proxy(this._eventDispatcher,"unregisterCallback",
e)):(delete this["register"+e],delete this["unregister"+e])},this))},_parseInitialAsins:function(){var b=this._view.getDataFromDOM();if(b)for(var a=0;a<b.length;a++)this[0===a?"setPageAsin":"setUpsellAsin"](b[a].asin,b[a].offerId,b[a].quantity)},_dispatchSetUpsellAsinEvents:function(b,a,c,d){d!==c&&(0===d&&0<c?this._eventDispatcher.dispatch("UpsellAsinAdded",b,a,c,d):0===c&&0<d&&this._eventDispatcher.dispatch("UpsellAsinRemoved",b,a,c,d),this._eventDispatcher.dispatch("UpsellAsinChanged",b,a,c,d))},
_indexOfAsin:function(b,a){a=a||"";for(var c=0;c<this._asinsData.length;c++)if(this._asinsData[c].asin===b&&this._asinsData[c].offerId===a)return c;return-1},_isFreeFormQuantityPickerPresent:function(){return 0<d('select[id$\x3d"-predefinedQuantitiesDropdown"]').length},_makeAwareOfFreeFormQuantity:function(){var b=this;f.on("buyBoxQuantityChanged",function(a,c){b.setPageAsinQuantity(c)});var c=parseInt(a.getUrlParam("qty"),10);c&&b.setPageAsinQuantity(c)},setUpsellAsin:function(b,a,c,d){if("string"!==
typeof b||0>=b.length)throw new TypeError("The asin argument is required");var e=this._indexOfAsin(b,a),k=0;a=a||"";c="number"===typeof c?Math.max(0,c):1;if(0===e)throw Error("To modify the pageAsin, use setPageAsin() instead.");if(0<e)d=this._asinsData[e],k=d.quantity,0>=c?this._asinsData.splice(e,1):d.quantity=c;else if(0<c)this._asinsData.push({asin:b,offerId:a,quantity:c,customAttribute:d});else return!1;this.render();this._dispatchSetUpsellAsinEvents(b,a,c,k,e);return!0},updateSelectedAsinsQuantity:function(b){if(1>
b)throw Error("New quantity for upsell asins must be greater than 0.");for(var a=1;a<this._asinsData.length;a++)this._asinsData[a].quantity=b;this.render()},registerForm:function(b){this._view.registerForm(b);this.render()},registerAtcBtn:function(b){this._view.registerAtcBtn(b);this.render()},setPageAsin:function(b,a,c){if("string"!==typeof b||0>=b.length)throw new TypeError("The asin argument is required");var e=this._indexOfAsin(b,a),d=0<this._asinsData.length?this._asinsData[0].quantity:0;a=a||
"";if(0>=c)throw new TypeError("The quantity of the page asin must be \x3e 0.");c="number"===typeof c?Math.max(1,c):1;if(0===e&&c===d)return!1;0<e&&this.setUpsellAsin(b,a,0);this._asinsData[0]={asin:b,offerId:a,quantity:c};this.render();-1<e?this._eventDispatcher.dispatch("PageAsinReplaced",b,a,c,d):this._eventDispatcher.dispatch("PageAsinAdded",b,a,c);this._eventDispatcher.dispatch("PageAsinChanged",b,a,c);return!0},setPageAsinQuantity:function(b){var a=this._asinsData&&this._asinsData.length&&this._asinsData[0];
a&&this.setPageAsin(a.asin,a.offerId,b)},addUpsellAsin:function(b,a,c){c=c||1;for(var e=0;e<this._asinsData.length;e++){var d=this._asinsData[e];if(d.asin===b){this.setUpsellAsin(b,a,d.quantity+c);return}}this.setUpsellAsin(b,a,c)},render:function(){this._view.render(this._asinsData)},getAsins:function(){return f.copy(this._asinsData)},getUpsellAsins:function(){var b=this.getAsins();b.splice(0,1);return b},resetUpsellAsins:function(){this._asinsData=[this._asinsData[0]];return f.copy(this._asinsData)},
getPageAsin:function(){return f.copy(this._asinsData[0])},getPageQuantityDropdown:function(){return d("#buybox").find('select[name\x3d"quantity"]')},reset:function(){this._asinsData=[];this._parseInitialAsins()}})});"use strict";h.when("BuyboxManagerController","BuyboxManagerView","BuyboxManagerFactory","jQuery").register("BuyboxManager",function(f,d,c,a){return c.create("getAsins getUpsellAsins setUpsellAsin resetUpsellAsins getPageAsin setPageAsin registerUpsellAsinChanged registerUpsellAsinAdded registerUpsellAsinRemoved registerPageAsinChanged registerPageAsinAdded registerPageAsinReplaced unregisterUpsellAsinChanged unregisterUpsellAsinRemoved unregisterUpsellAsinAdded unregisterPageAsinChanged unregisterPageAsinAdded unregisterPageAsinReplaced addUpsellAsin registerForm registerAtcBtn updateSelectedAsinsQuantity getPageQuantityDropdown".split(" "),
f,d)});"use strict";h.when("A","dp-latency-marker").register("BuyboxNatcMobileweb",function(f){return{buildNatcHTML:function(d,c){return""+(this.getHiddenInputHTMLNatc("items["+c+".upsell][asin]",d.asin)+this.getHiddenInputHTMLNatc("items["+c+".upsell][offerListingId]",d.offerId)+this.getHiddenInputHTMLNatc("items["+c+".upsell][quantity]",d.quantity))},getHiddenInputHTMLNatc:function(d,c){return'\x3cinput type\x3d"hidden" name\x3d"'+d+'" value\x3d"'+c+'" class\x3d"ATCFormUpsellAsinData"  /\x3e'}}});
"use strict";h.when("jQuery","dp-latency-marker").register("BuyboxNatcMobileapp",function(f){return{createInputs:function(d){var c={};f.each(d,function(a,b){0!==a&&(c["items["+a+".upsell][asin]"]=b.asin,c["items["+a+".upsell][offerListingId]"]=b.offerId,c["items["+a+".upsell][quantity]"]=b.quantity)});return c}}});"use strict";h.when("jQuery","BuyboxManagerViewHelper").register("BuyboxManagerMashHelper",function(f,d){return{createInputs:function(c){var a={a:[],oid:[],quantity:[]};f.each(c,function(b,
c){a.a.push(c.asin);a.oid.push(c.offerId);a.quantity.push(c.quantity)});a.a=a.a.join("|");a.oid=a.oid.join("|");a.quantity=a.quantity.join("|");return a},getViewData:function(c){var a=c.inputs.a.split("|"),b=c.inputs.oid.split("|");c=c.inputs.quantity.split("|");return d.buildRawData(a,b,c)},setDeclarativeMultiple:function(c){c.buttonID="add-multiple-to-cart"},getDeclarativeDataFromBtn:function(c){return c.closest('.a-declarative[data-action\x3d"aw-mash"]').data("awMash")},isAddToCart:function(c){return"add-to-cart"===
c.buttonID},updateInputWithSubscriptionData:function(c,a,b){if(!f.isEmptyObject(c._digitalSubscriptionAsinMap)){var e=c._digitalSubscriptionAsinMap,d;for(d in e)if(e.hasOwnProperty(d)){var g=e[d],h=g.index;if(b.length<=h||b[h].asin!==d)a[g.name]&&delete a[g.name],a[g.value]&&delete a[g.value],delete e[d]}c._digitalSubscriptionAsinMap=e}f.each(b,function(b,e){if(e.customAttribute){var d="custom-name."+(b+1)+".1",f="custom-value."+(b+1)+".1";a[d]=e.customAttribute.name;a[f]=e.customAttribute.value;
c._digitalSubscriptionAsinMap||(c._digitalSubscriptionAsinMap={});c._digitalSubscriptionAsinMap[e.asin]={index:b,name:d,value:f}}})}}});"use strict";h.when("ODSBuyboxManagerController","BuyboxManager","BuyboxManagerFactory","A","jQuery").register("ODSBuyboxManager",function(f,d,c,a,b){return c.extend(["addMetadata","getMetadata","getAsins","getPageAsin","getUpsellAsins"],f,d)});"use strict";h.when("BuyboxManager","ODSBuyboxAsinMetadata","A","jQuery").register("ODSBuyboxManagerController",function(f,
d,c,a){return c.createClass({init:function(){this.reset()},addMetadata:function(b){if(!(b instanceof d))throw Error("The argument metadata must be an instance of ODSBuyboxAsinMetadata");if(!b.isValid())throw Error("The metadata is NOT valid");this._metadatas[b.asin+":"+b.offerId]=b.clone()},getMetadata:function(b,a){return this._metadatas[b+":"+a]},getMetadatas:function(){return c.copy(this._metadatas)},enhanceAsinsData:function(b){if("undefined"!==typeof b&&null!==b&&0!==b.length){var c=this;a.isArray(b)?
b=a.map(b,function(b){return a.extend({},b,{metadata:c.getMetadata(b.asin,b.offerId)})}):b.metadata=c.getMetadata(b.asin,b.offerId)}return b},getPageAsin:function(){return this.enhanceAsinsData(f.getPageAsin())},getUpsellAsins:function(){return this.enhanceAsinsData(f.getUpsellAsins())},getAsins:function(){return this.enhanceAsinsData(f.getAsins())},reset:function(){this._metadatas={}}})});"use strict";h.when("A","jQuery","dp-latency-marker").register("ODSBuyboxAsinMetadata",function(f,d){var c=f.createClass({init:function(a,
b,c,d,f,h,m){this.asin=a;this.offerId=b;this.buyingPrice=c;this.listingPrice=d;this.title=f;this.imageUrl=h;this.availabilityMessage=m},isValid:function(){var a="string"===typeof this.asin&&0<this.asin.length;return"number"===typeof this.buyingPrice&&a},clone:function(){return new c(this.asin,this.offerId,this.buyingPrice,this.listingPrice,this.title)}});return c});"use strict";h.when("A","dp-latency-marker").register("MakoCommonCartHelper",function(f){var d=f.$,c=f.createClass({init:function(a,b,
c,d){this.sessionId=a||"";this.clientName=b||"";this.asinsData=c||[];this.additionalData=d||{};this.reftag;this.hasBeenPosted=!1},setSessionId:function(a){this.sessionId=a;return this},setClientName:function(a){this.clientName=a;return this},setAsinsData:function(a){if(Array.isArray(a))return this.asinsData=a,this},addAsinData:function(a,b,c){this.asinsData.push({asin:a,offerId:b,quantity:c});return this},setAdditionalData:function(a){this.additionalData=a;return this},setReftag:function(a){this.reftag=
a;return this},sendRequest:function(){if(this.hasBeenPosted)h.log("Request has already been sent.","WARN");else if(this._verifyRequest()){var a=this._buildRequestData();this.hasBeenPosted=!0;a=d.ajax({url:"/gp/add-to-cart/json/"+(this.reftag?"ref\x3d"+this.reftag:""),type:"POST",data:a});a.done(function(b){f.trigger("mako:common-cart-request:complete",b)});return a}},_verifyRequest:function(){var a=!0;this.sessionId&&""!==this.sessionId||(a=!1,h.log("SessionId is undefined or blank","WARN"));this.asinsData&&
this.asinsData.length||(a=!1,h.log("No asins data exist for cart handler request","WARN"));return a},_buildRequestData:function(){var a={};a.verificationSessionID=this.sessionId;a.clientName=this.clientName;for(var b=0;b<this.asinsData.length;b++){var c=this.asinsData[b];a["asin."+b]=c.asin;a["offeringID."+b]=c.offerId||c.offerListingID;a["quantity."+b]=c.quantity}if(this.additionalData)for(var d in this.additionalData)this.additionalData.hasOwnProperty(d)&&(a[d]=this.additionalData[d]);return a}});
return{createRequest:function(a,b){a||h.log("Cannot find session-id and attempting to add to cart without session-id","FATAL");return new c(a,b)}}});"use strict";h.when("A","dp-latency-marker").register("MakoAmazonApiAddToCartHelper",function(f){var d=f.$,c=["true","false"],a=f.createClass({init:function(b,a,c){this.csrfToken=b||"";this.marketplace=a||"";this.ajaxEndpoint=c||"";this.asinDataList=[];this.refTag=""},setAsinDataList:function(b){if(Array.isArray(b))return this.asinDataList=b,this},addSingleAsinData:function(b){if(b.asin&&
b.offerId&&b.quantity)return this.asinDataList.push(b),this;h.log("asin, offerListingId or quantity of single asinData is empty","FATAL")},setRefTag:function(b){this.refTag=b;return this},sendRequest:function(b,a){var c=this;this.asinDataList.length?d.ajax({url:this.constructAjaxUrl(),type:"POST",data:this.constructAddToCartRequest(this.asinDataList),xhrFields:{withCredentials:!0},headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',
"Accept-Language":"en-US","x-api-csrf-token":this.csrfToken,"x-amzn-encrypted-slate-token":d('meta[name\x3d"encrypted-slate-token"]').prop("content")},success:function(e){c.verifyCartApiResponse(e)?b(e):a()},error:a}):(h.log("Invalid request with an empty asin list to CartAPI","FATAL"),a())},verifyCartApiResponse:function(b){return"cart.add-items/v1"===b.type&&"items"in b.entity&&0<b.entity.items.length&&"id"in b.entity.items[0]&&this.isCartCountResponseValid(b.entity.count)},isCartCountResponseValid:function(b){return b&&
"cart.count/v1"===b.type&&"items"in b.entity},constructAjaxUrl:function(){var b="https://"+this.ajaxEndpoint+"/api/marketplaces/"+this.marketplace+"/cart/carts/retail/items";this.refTag&&(b+="?ref_\x3d"+this.refTag);return b},constructAddToCartRequest:function(b){for(var a=[],c=0;c<b.length;c++){var d=b[c],f={asin:d.asin,offerListingId:d.offerId,quantity:d.quantity};d=this.formatBooleanParams(d);d=this.constructAdditionalParameters(d);if(d.hasOwnProperty("giftOptions")||d.hasOwnProperty("devicePreregistration")||
d.hasOwnProperty("installments")||d.hasOwnProperty("incentivizedCart")||d.hasOwnProperty("paymentOfferInfo"))f.additionalParameters=d;a.push(f)}return JSON.stringify({items:a})},constructAdditionalParameters:function(b){var a={};b.hasOwnProperty("isToBeGiftWrapped")&&"boolean"===typeof b.isToBeGiftWrapped&&(a.giftOptions={includeGiftReceipt:b.isToBeGiftWrapped});b.hasOwnProperty("isDevicePreRegistered")&&"boolean"===typeof b.isDevicePreRegistered&&(a.devicePreregistration={selected:b.isDevicePreRegistered});
b.hasOwnProperty("programId")&&b.programId.length&&(a.installments={programId:b.programId});b.hasOwnProperty("incentivizedCart")&&b.incentivizedCart.length&&(a.incentivizedCart=b.incentivizedCart);b.hasOwnProperty("paymentOfferInfo")&&b.paymentOfferInfo.length&&(a.paymentOfferInfo=b.paymentOfferInfo);return a},formatBooleanParams:function(a){for(var b in a)if(a.hasOwnProperty(b)&&"string"===typeof a[b]){var d=a[b].toLowerCase();-1!==c.indexOf(d)&&(a[b]="true"===d)}return a}});return{createRequest:function(b,
c,d){return new a(b,c,d)}}});"use strict";h.when("dp-latency-marker").register("ExtraDataHelper",function(){function f(a,b){return a&&a.name&&0===a.name.indexOf(b)}function d(a,b){var c=Array.prototype.slice.call(a.elements);a=c.filter(function(a){return a&&a.tagName&&"input"===a.tagName.toLowerCase()&&f(a,["custom-name",b,""].join("."))});c=c.filter(function(a){return a&&a.tagName&&"input"===a.tagName.toLowerCase()&&f(a,["custom-value",b,""].join("."))});return{names:a,values:c}}function c(a,b){return a!==
q&&null!==a?a:b}function a(a,b,d){b=c(b,"([0-9]+)");d=c(d,"([0-9]+)");return new RegExp([a,b,d].join("."))}function b(a,b){var c=document.createElement("input");c.type="hidden";c.name=a;c.value=b;return c}function e(b,c,d,e){var f=a("custom-name",b);return c.reduce(function(a,c){var l=f.exec(c);if(l){l=l[1];var g=["custom-value",b,l].join(".");a[l]={name:d(c),value:e(g)}}return a},{})}function h(a,b,c,d){Object.keys(b).forEach(function(e){var f=b[e],l=["custom-name",a,e].join(".");e=["custom-value",
a,e].join(".");"object"===typeof f&&(c(l,f.name),d(e,f.value))})}function g(a,b){var c=Object.keys(a),d=function(b){return a[b]};return e(b,c,d,d)}function n(a,b,c){var d=function(b,c){a[b]=c};h(c,b,d,d)}function m(a,b){a=d(a,b);var c=a.names.map(function(a){return a.name}),f=function(a){return function(b){var c=a.filter(function(a){return a.name===b});return c.length?c[0].value:q}};return e(b,c,f(a.names),f(a.values))}function r(a,c,e){var f=d(a,e),g=function(c){return function(d,e){var f=c.filter(function(a){return a.name===
d});f.length?f.forEach(function(a){a.value=e}):a.appendChild(b(d,e))}};h(e,c,g(f.names),g(f.values))}function p(a){return Object.keys(a).reduce(function(b,c){c=a[c];b[c.name]=c.value;return b},{})}function u(a,b){var c=Object.keys(a).reduce(function(b,c){c=a[c];b[c.name]=c;return b},{});Object.keys(b).forEach(function(d){if(c[d])c[d].value=b[d];else{var e=w(a),f={name:d,value:b[d]};a[e]=f;c[d]=f}});return a}function v(a,b){return a-b}function w(a){a=Object.keys(a).map(function(a){return parseInt(a)}).sort(v);
if(a.length){if(1!==a[0])return 1;for(var b=1;b<a.length;b++)if(1!==a[b]-a[b-1])return a[b-1]+1;return a.length+1}return 1}return{getObjectExtraData:function(a,b){b=c(b,1);return p(g(a,b))},setObjectExtraData:function(a,b,d){d=c(d,1);b=u(g(a,d),b);n(a,b,d)},getFormExtraData:function(a,b){if(!a)return{};b=c(b,1);return p(m(a,b))},setFormExtraData:function(a,b,d){a&&(d=c(d,1),b=u(m(a,d),b),r(a,b,d))}}})});
/* ******** */
(function(l){var q=window.AmazonUIPageJS||window.P,y=q._namespace||q.attributeErrors,f=y?y("DetailPageAccessoryUpsellAssets",""):q;f.guardFatal?f.guardFatal(l)(f,window):f.execute(function(){l(f,window)})})(function(l,q,y){l.when("desktop-accessory-upsell-model","desktop-accessory-upsell-view","desktop-accessory-upsell-controller").register("desktop-accessory-upsell-factory",function(f,c,a){return{get:function(e,h){var p=new c(e);h=new f(h);return new a(e,p,h)}}});"use strict";l.when("A").register("desktop-accessory-upsell-model",
function(f){var c=f.$;return f.createClass({init:function(a){this._accessoryCampaignData=a.accessoriesCampaignSource;this._asinsData=a.asinsData;this._primaryAsin=a.primaryAsin;this._buildScheduledAsinCache(this._asinsData)},getAsinsData:function(){return this._asinsData},getAccessoryCampaignData:function(){return this._accessoryCampaignData},getPrimaryAsin:function(){return this._primaryAsin},getInterstitialAsinsData:function(){var a=c.extend({},this._asinsData);Object.keys(a).forEach(function(e){a[e][e]&&
(a[e][e].isInterstitial=!0)});return a},getScheduledAsinFromVariationAsin:function(a){return this._scheduledAsins[a]},getVariationAsinsFromScheduledAsin:function(a){return this._scheduledVariationsAsins[a]},_buildScheduledAsinCache:function(a){this._scheduledAsins={};this._scheduledVariationsAsins={};this._interstitialAsinsData={};for(var e in a)if(a.hasOwnProperty(e)){this._scheduledVariationsAsins[e]=[];for(var h in a[e])a[e].hasOwnProperty(h)&&(this._scheduledVariationsAsins[e].push(h),this._scheduledAsins[h]=
e,a[e][h].isInterstitial&&(this._interstitialAsinsData[e]=a[e]))}}})});"use strict";l.when("a-modal","A").register("desktop-accessory-upsell-view",function(f,c){return c.createClass({init:function(a){this.$el=a},_getOptionElement:function(a){return this.$el.find("#abb-option-"+a)},_updateOptionRow:function(a){var e=this._getOptionElement(a.optionAsin);e.find(".abb-selected-variation").html(a.variationText);e.find(".abb-option-list-price").html(a.listPriceString);e.find(".abb-option-list-price-label").html(a.listPriceLabel);
e.find(".abb-option-buying-price").html(a.buyingPriceString)},_toggleProduct:function(a){var e=this._getOptionElement(a.optionAsin).find(".abb-option-checkbox input[type\x3d'checkbox']");a.isProductSelected?e.attr("checked",!0):e.removeAttr("checked");this.$el.trigger("change")},_hidePopover:function(a){a=this.$el.find("#abb-popover-trigger-"+a.optionAsin);(a=f.get(a))&&a.hide()},render:function(a){this._toggleProduct(a);a.isProductSelected&&(this._updateOptionRow(a),this._hidePopover(a))},deselectAllProducts:function(){this.$el.find(".abb-option-checkbox input[type\x3d'checkbox']").removeProp("checked")}})});
"use strict";l.when("desktop-accessory-upsell-product-factory","desktop-accessory-upsell-interstitial-factory","desktop-accessory-upsell-ref-helper","accessory-upsell-dom-helper","accessory-upsell-buybox-helper","A").register("desktop-accessory-upsell-controller",function(f,c,a,e,h,p){var n=p.$;return p.createClass({init:function(k,b,d){this.$el=k;this._view=b;this._model=d;this._subControllers={};this._interstitialController;h.reset();e.processMarkupForDabb();h.parsePageAsin();k=0;b=this._model.getAsinsData();
h.registerAccessoryUpsellData(b);for(var g in b)b.hasOwnProperty(g)&&(b[g]&&b[g][g]?a.sendAsinScheduled(k,g,b[g][g].isAutomated):a.sendAsinScheduled(k,g,!1),d=f.get(g,b[g],k),d.setOnOrderUpdate(n.proxy(this._handleOrderUpdate,this)),this._subControllers[g]=d,k++);a.addCountMetric("DesktopMarsABBCount");g=this._model.getInterstitialAsinsData();this._interstitialController=c.get(g);this._bindEvents();this._updateDefaultCheckedAccessories()},_bindEvents:function(){var a=this;l.when("ready").execute("accessory-upsell-controller-bindEvents",
function(){a._loadSubControllerInitialImages.apply(a);a._interstitialController&&a._interstitialController.loadInitialImages();e.getPageQuantityDropdown().change(function(){var b=a._parseQuantity(n(this).val());h.updateSelectedAsinsQuantity(b)})});this._bindedFn={handleCheckboxChange:n.proxy(this._handleCheckboxChange,this),onBuyboxUpsellAsinsChanged:n.proxy(this._onBuyboxUpsellAsinsChanged,this)};this._enableEvents(!0);e.getGiftWrapUpdate().change(function(){h.updateGiftCheck()})},_enableEvents:function(a){a=
a?"":"un";h[a+"registerUpsellAsinRemoved"](this._bindedFn.onBuyboxUpsellAsinsChanged);h[a+"registerUpsellAsinAdded"](this._bindedFn.onBuyboxUpsellAsinsChanged);this.$el[a+"delegate"](".abb-option-checkbox input[type\x3d'checkbox']","change",this._bindedFn.handleCheckboxChange)},_addAsin:function(a,b,d){var g=this._model.getScheduledAsinFromVariationAsin(a);this._model.getVariationAsinsFromScheduledAsin(g);h.addUpsellAsin(a,b,d)},_onBuyboxUpsellAsinsChanged:function(a,b,d){b=this._model.getScheduledAsinFromVariationAsin(a);
var g=this._subControllers[b];d=0<d;g&&(g.setAddedToOrderState(d),d&&g.selectAsin(a),this._internalRender(b,g.getCurrentProduct(),d))},_handleCheckboxChange:function(c,b,d){b=b||n(c.currentTarget);c=b.parents(".abb-option").data("asin");var g=b.is(":checked");b=this._subControllers[c];var x=b.getIndex(),v=b.getCurrentProduct();b.setAddedToOrderState(g);g?(g=this._parseQuantity(e.getPageQuantityDropdown().val()),this._addAsin(v.asin,v.offerListingID,g),a.sendCheckboxSelected(x,v.asin,v.isAutomated)):
(h.removeUpsellAsin(v.asin,v.offerListingID),a.sendCheckboxDeselected(x,v.asin,v.isAutomated));d||!v.checkForInteraction||v.hasBeenInteractedWith||b.setHasBeenInteractedWith(c)},_handleOrderUpdate:function(a,b){a=this._parseQuantity(n('#addToCart select[name\x3d"quantity"]').val());this._addAsin(b.asin,b.offerListingID,a)},_internalRender:function(a,b,d){a=this._generateOptionViewModel(a,b,d);this._view.render(a)},_generateOptionViewModel:function(a,b,d){var g=!1,e="",h="",c="",m="";b&&(e=(g=b.showPriceStrikethrough)?
b.listPrice:"",b.showPriceStrikethrough&&b.listingPriceLabel&&(h=b.listingPriceLabel),c=b.buyingPrice,m=b.swatchValue);return{optionAsin:a,isProductSelected:d,isOnSale:g,listPriceString:e,listPriceLabel:h,buyingPriceString:c,variationText:m}},_loadSubControllerInitialImages:function(){for(var a in this._subControllers)this._subControllers.hasOwnProperty(a)&&this._subControllers[a].loadInitialImages()},_updateDefaultCheckedAccessories:function(){var a=this;a.$el.find(".abb-option-checkbox input[type\x3d'checkbox']:checked").each(function(){a._handleCheckboxChange(null,
n(this),!0)})},_parseQuantity:function(a){a=parseInt(a,10);return isNaN(a)?1:a}})});"use strict";l.when("desktop-accessory-upsell-product-model","desktop-accessory-upsell-product-controller","desktop-accessory-upsell-product-view","A").register("desktop-accessory-upsell-product-factory",function(f,c,a,e){return{get:function(h,p,n){var k=e.$("#abb-product-view-"+h),b=new a(k);p=new f(p,h,n);return new c(k,h,b,p)}}});"use strict";l.when("A").register("desktop-accessory-upsell-product-model",function(f){return f.createClass({init:function(c,
a,e){this._products=c;this._index=e;this._isViewClosedByOrderUpdate=this._isAddedToOrder=this._preloadingComplete=!1;this._cachedAsin=null;this._isVisual=this._calculateIsVisual(a);this.setSelectedProduct(a)},_calculateIsVisual:function(c){return(c=this._products[c])?c.visualDimension:!1},cacheSelectedProduct:function(){var c=this.getSelectedProduct();"undefined"!==typeof c&&(this._cachedAsin=c.asin)},setSelectedProductFromCache:function(){this.setSelectedProduct(this._cachedAsin)},clearSelectedProductCache:function(){this._cachedAsin=
null},setSelectedProduct:function(c){if(c)for(var a in this._products)this._products.hasOwnProperty(a)&&(this._products[a].isSelected=a===c)},getSelectedProduct:function(){for(var c in this._products)if(this._products.hasOwnProperty(c)){var a=this._products[c];if(a.isSelected)return f.copy(a)}},getProduct:function(c){var a=null,e;for(e in this._products)if(this._products.hasOwnProperty(e)&&e===c){a=this._products[e];break}return a},isSelectedProduct:function(c){return(c=this._products[c])&&c.isSelected},
isVisual:function(){return this._isVisual},setAddedToOrderState:function(c){this._isAddedToOrder=c},isAddedToOrderState:function(){return this._isAddedToOrder},getAllLowResImages:function(){var c=[],a;for(a in this._products)this._products.hasOwnProperty(a)&&c.push(this._products[a].lowResImage.URL_);return c},isPreloadingComplete:function(){return this._preloadingComplete},completePreloading:function(){this._preloadingComplete=!0},getIndex:function(){return this._index},isViewClosedByOrderUpdate:function(){return this._isViewClosedByOrderUpdate},
setViewClosedByOrderUpdate:function(c){this._isViewClosedByOrderUpdate=c},setHasBeenInteractedWith:function(c){this._products.hasOwnProperty(c)&&(this._products[c].hasBeenInteractedWith=!0)}})});"use strict";l.when("A").register("desktop-accessory-upsell-product-view",function(f){var c=f.$;return f.createClass({init:function(a){this.$baseElement=a;this.$variations=this.$baseElement.find(".abb-variation")},updateTargetElement:function(a,e){this.$el=a;this.$el.find(".abb-product-view").toggleClass("abb-product-is-selected",
e)},_updateSelectedVariation:function(a){this.$variations.removeClass("a-button-selected");this.$variations.filter(".abb-variation-"+a).addClass("a-button-selected")},render:function(a){var e=this._buildFeatureBullets(a.featureBullets);this._updateElements(this.$el,a,e.clone());this._updateSelectedVariation(a.asin)},updateBase:function(a){var e=this._buildFeatureBullets(a.featureBullets);this._updateElements(this.$baseElement,a,e.clone());this.$baseElement.find(".abb-variation-"+a.asin).trigger("click")},
_updateElements:function(a,e,h){e.isDigitalSubscription||(a.find(".abb-product-title").html(e.title),a.find(".abb-product-buying-price").html(e.buyingPriceString),a.find(".abb-product-list-price").html(e.isOnSale?e.listPriceString:""),a.find(".abb-product-list-price-label").html(e.isOnSale?e.listingPriceLabel:""),a.find(".abb-product-merchant").text(e.merchant),a.find(".abb-variation-selected-dimension").text(e.swatchValue),a.find(".abb-product-feature-bullets").html(h),a.find(".abb-product-title").attr("href",
e.productURL))},_buildFeatureBullets:function(a){for(var e=c("\x3cul\x3e"),h=0;h<a.length;h++)c("\x3cli\x3e").html(a[h]).appendTo(e);return e},updateProductImage:function(a){setTimeout(function(){this.$el.find(".abb-product-image").attr("src",a);this.$baseElement.find(".abb-product-image").attr("src",a)}.bind(this),100)}})});"use strict";l.when("desktop-accessory-upsell-ref-helper","ods-image-utilities","A").register("desktop-accessory-upsell-product-controller",function(f,c,a){var e=a.$;return a.createClass({init:function(h,
c,f,k){this.$baseElement=h;this._scheduledAsin=c;this._view=f;this._model=k;this.$el;this.popoverInstance;a.on("a:button-group:abb-product-variations-"+this._scheduledAsin+":toggle",e.proxy(this._handleVariationSelection,this));a.on("a:popover:beforeShow:abb-product-view-"+this._scheduledAsin,e.proxy(this._preparePopover,this));a.on("a:popover:show:abb-product-view-"+this._scheduledAsin,e.proxy(this._bindEvents,this));a.on("a:popover:afterHide:abb-product-view-"+this._scheduledAsin,e.proxy(this._detachPopover,
this))},_preparePopover:function(a){this.$el=a.popover.$popover;this.popoverInstance=a.popover;this._model.cacheSelectedProduct();this._model.setViewClosedByOrderUpdate(!1);this._model.setHasBeenInteractedWith(this._scheduledAsin);this._view.updateTargetElement(this.$el,this._model.isAddedToOrderState());if(!this._model.isPreloadingComplete()){var p=this;a=c.preloadImages(this._model.getAllLowResImages());e.when.apply(e,a).done(function(){p._model.completePreloading()})}this.renderView();f.sendPopoverDisplayed(this._model.getIndex(),
this._model.getSelectedProduct().asin);f.addCountMetric("DesktopMarsABBProductViewCount")},_bindEvents:function(){this.$el.delegate(".abb-product-ato","click",e.proxy(this._handleAddToOrderClick,this))},_detachPopover:function(){this.$el&&this.$el.undelegate(".abb-product-ato","click",e.proxy(this._handleAddToOrderClick,this));this.popoverInstance=this.$el=y;this._model.isViewClosedByOrderUpdate()||(this._model.setSelectedProductFromCache(),f.sendPopoverCancelled(this._model.getIndex(),this._model.getSelectedProduct().asin));
this._model.clearSelectedProductCache()},_handleVariationSelection:function(a){var e;a.selectedButton&&(e=a.selectedButton.buttonName);e&&(this.selectAsin(e),this.renderView(),f.sendPopoverTwisted(this._model.getIndex(),e))},_handleAddToOrderClick:function(){var a=this._model.getSelectedProduct(),e=this._model.isAddedToOrderState();this._orderUpdateCallback&&this._orderUpdateCallback(this._scheduledAsin,a);this._model.setAddedToOrderState(!0);this._model.setViewClosedByOrderUpdate(!0);this._view.updateBase(this._generateViewModel(a));
e?f.sendUpdateClicked(this._model.getIndex(),a.asin):f.sendAddToOrderClicked(this._model.getIndex(),a.asin);this.$el.addClass("abb-product-is-selected");this.popoverInstance.hide()},_handleLowResImageLoaded:function(a,e){var c=this._model.getSelectedProduct();a&&a.isResolved()||c.lowResImage.URL_!==e||this._view.updateProductImage(e)},_handleHiResImageLoaded:function(a){this._model.getSelectedProduct().hiResImage.URL_===a&&this._view.updateProductImage(a)},_handleImageLoadFailure:function(a){throw Error("The image "+
a+" failed to load for accessory ASIN "+this._scheduledAsin);},_generateViewModel:function(a){return{asin:a.asin,title:a.title,merchant:a.merchantName,swatchValue:a.swatchValue,featureBullets:a.featureBullets,listPriceString:a.listPrice,listingPriceLabel:a.listingPriceLabel,buyingPriceString:a.buyingPrice,isOnSale:a.showPriceStrikethrough,isDigitalSubscription:a.isDigitalSubscription,productURL:"/dp/{0}/ref\x3dods_dabb_{0}_productInfo".replace("{0}",a.asin).replace("{0}",a.asin)}},_loadProductImage:function(a){a=
c.preloadImage(a.lowResImage.URL_,a.hiResImage.URL_);a.image.done(e.proxy(this._handleLowResImageLoaded,this,a.hiResImage)).fail(e.proxy(this._handleImageLoadFailure,this,a.hiResImage));a.hiResImage&&a.hiResImage.done(e.proxy(this._handleHiResImageLoaded,this)).fail(e.proxy(this._handleImageLoadFailure,this))},loadInitialImages:function(){a.loadDescendantImagesManually(this.$baseElement)},setOnOrderUpdate:function(a){this._orderUpdateCallback=a},getCurrentProduct:function(){return this._model.getSelectedProduct()},
setAddedToOrderState:function(a){this._model.setAddedToOrderState(a)},selectAsin:function(a){var e=this._model.getSelectedProduct();e&&e.asin!==a&&this._model.setSelectedProduct(a)},renderView:function(){var a=this._model.getSelectedProduct();this._model.isVisual()&&this._loadProductImage(a);this._view.render(this._generateViewModel(a))},getIndex:function(){return this._model.getIndex()},setHasBeenInteractedWith:function(a){this._model.setHasBeenInteractedWith(a)}})});"use strict";l.when("desktop-accessory-upsell-interstitial-model",
"desktop-accessory-upsell-interstitial-view","desktop-accessory-upsell-interstitial-controller","A").register("desktop-accessory-upsell-interstitial-factory",function(f,c,a,e){return{get:function(h){var p=e.$("#abb-interstitial"),n=new c(p);h=new f(h);return new a(p,n,h)}}});"use strict";l.when("A").register("desktop-accessory-upsell-interstitial-model",function(f){return f.createClass({init:function(c){this._interstitialAsinsData=c;this._scheduledAsins={};this._scheduledVariationsAsins={};this._interstitialProducts=
{};this._buildScheduledAsinCache(c)},getInterstitialAsinsData:function(){return this._interstitialAsinsData},getInterstitialProducts:function(){return this._interstitialProducts},getScheduledAsinFromVariationAsin:function(c){return this._scheduledAsins[c]},getVariationAsinsFromScheduledAsin:function(c){return this._scheduledVariationsAsins[c]},_buildScheduledAsinCache:function(c){this._scheduledAsins={};this._scheduledVariationsAsins={};this._interstitialProducts={};for(var a in c)if(c.hasOwnProperty(a)){this._scheduledVariationsAsins[a]=
[];this._interstitialProducts[a]=c[a][a];for(var e in c[a])c[a].hasOwnProperty(e)&&(this._scheduledVariationsAsins[a].push(e),this._scheduledAsins[e]=a)}}})});"use strict";l.when("a-modal","A").register("desktop-accessory-upsell-interstitial-view",function(f,c){return c.createClass({init:function(a){this.$baseElement=a;this.$productSections=this.$baseElement.find(".abb-intl-product-view,.abb-intl-product-terms")},render:function(a){this.$productSections.hide();a=a.asinsToShow;for(var e=0;e<a.length;e++)this._getProductSection(a[e]).show()},
getCheckedProductCheckboxes:function(){return this.$baseElement.find(".abb-intl-product-ato input[type\x3d'checkbox']:checked")},getAllVisibleProductCheckboxes:function(){return this.$baseElement.find(".abb-intl-product-ato input[type\x3d'checkbox']:visible")},getAllVisibleSelectedMessage:function(){return this.$baseElement.find(".abb-intl-product-selected-successful-message:visible")},getAllVisibleSelectButtons:function(){return this.$baseElement.find(".abb-intl-product-select-button:visible")},
getAllVisibleAddToCartButtons:function(){return this.$baseElement.find(".abb-intl-product-atc input[type\x3d'submit']:visible")},_getProductSection:function(a){return this.$baseElement.find("#abb-intl-product-view-"+a+","+("#abb-intl-product-terms-"+a))}})});"use strict";l.when("desktop-accessory-upsell-ref-helper","ods-image-utilities","accessory-upsell-dom-helper","accessory-upsell-buybox-helper","MakoAmazonApiAddToCartHelper","a-modal","A").register("desktop-accessory-upsell-interstitial-controller",
function(f,c,a,e,h,p,n){function k(a){a||(a=function(){});if(d&&e.getPageAsin()&&e.getPageAsin().asin){var b=e.getPageAsin().asin;d._handleLDAtcSubmit(a,b)}}var b=n.$,d=null;return n.createClass({init:function(a,b,e){this.$baseElement=a;this._view=b;this._model=e;d=this;this.popoverInstance=p.get("abb-interstitial");this.$el;this.$clickedSubmitButton;var c=this.wasInterstitialOfferAccepted=!1;this.asinsToShow=n.map(this._model.getInterstitialProducts(),function(a,g){a.checkForInteraction&&(c=!0);
return g});this.hasCheckForInteractionAsin=c;this._bindEvents()},_bindEvents:function(){var g=this;l.when("ready").execute("accessory-upsell-interstitial-controller-bindEvents",function(){a.getSubmitButtons().forEach(function(a){0<=a.selector.indexOf("input#add-to-cart-button")||0<=a.selector.indexOf("input#one-click-button")&&g.hasCheckForInteractionAsin||0<=a.selector.indexOf("input#buy-now-button")&&g.hasCheckForInteractionAsin?a.bind("click",b.proxy(g._handleAtcSubmit,g)):0<=a.selector.indexOf("#LDBuybox *[id^\x3dgb_atc_]")&&
(n.off("deals_claimDealSuccess",k),n.on("deals_claimDealSuccess",k))})})},_handleAtcSubmit:function(a){if(b("#abb-interstitial").length){this.$clickedSubmitButton=b(a.target);var d=this._getInterstitialAsinsToShow();if(0<d.length){a.preventDefault();this.$clickedSubmitButton.unbind("click",b.proxy(this._handleAtcSubmit,this));for(var c=0;c<d.length;c++)f.sendInterstitialDisplayed(-1,d[c]),0===b("#abb-product-better-together-message-"+d[c]).length&&d[c]!==e.getPageAsin().asin&&f.sendInterstitialBetterTogetherMessageNotAvailable(-1,
d[c]);b("#abb-intl-product-select-button").length?this._displaySelectButtonOrATCButton(a,!1):this._displayCheckBoxOrATCButtons(a,!1);this._showIntlPopover.apply(this)}}else l.log("Interstitial popover PreloadContent is not found in regular buybox","FATAL")},_handleLDAtcSubmit:function(g,d){if(d!==a.parsePageAsinData().asin)l.log("ASIN added to cart and Page ASIN are different.","WARN");else if(b("#abb-interstitial").length){d=this._getInterstitialAsinsToShow();if(0<d.length){for(var c=0;c<d.length;c++)f.sendInterstitialDisplayed(-1,
d[c]);b("#abb-intl-product-select-button").length?this._displaySelectButtonOrATCButton(g,!0):this._displayCheckBoxOrATCButtons(g,!0);this._showIntlPopover.apply(this)}var k=e.getUpsellAsins();if(k.length){try{var m=n.state("abbCartAPIParametersMap"),p=h.createRequest(m.csrfToken,m.marketplaceId,m.aapiAjaxEndpoint);p.setAsinDataList(k);p.setRefTag("mars_ajax_dabb_atc");p.sendRequest(function(b){for(var g=0;g<k.length;g++){var d=e.getProductData(k[g].asin);f.sendLightningDealsABBAddToCartSuccessful(-1,
d.asin,d.isAutomated)}a.updateCartQuantity(b.entity.count.entity.items);f.sendCartAPIRequestSuccessful(-1,"");b=a.getLightningDealElements();a.getDomElements().abbContainer.find(".abb-option-checkbox input").prop("checked",!1);b.successMessageCount.text(k.length);1<k.length?b.successMessageMultiple.removeClass("aok-hidden"):b.successMessageSingle.removeClass("aok-hidden");b.successMessageContainer.removeClass("aok-hidden")},function(){l.log("An error has occurred with Cart API","FATAL");f.sendCartAPIRequestFailure(-1,
"")})}catch(r){l.log("Adding accessories to cart failed from ABB on Deals ASIN","FATAL")}e.resetUpsellData()}}else l.log("Interstitial popover PreloadContent is not found in LD buybox","FATAL")},_getInterstitialAsinsToShow:function(){for(var a=[],b=e.getUpsellAsins(),b=this.getParentAsins(b),d=0;d<this.asinsToShow.length;d++){var c=this.asinsToShow[d],k=this._model.getScheduledAsinFromVariationAsin(c),f=this._model.getInterstitialAsinsData()[k][c];f.checkForInteraction?f.hasBeenInteractedWith||(a.push(c),
this.autoCheckInterstitial=!0):-1===b.indexOf(k)&&a.push(c)}return this.asinsToShow=a},_showIntlPopover:function(){n.off("a:popover:beforeShow:abb-interstitial");n.off("a:popover:show:abb-interstitial");n.off("a:popover:hide:abb-interstitial");n.on("a:popover:beforeShow:abb-interstitial",b.proxy(this._popoverBeforeShow,this));n.on("a:popover:show:abb-interstitial",b.proxy(this._popoverOnShow,this));n.on("a:popover:hide:abb-interstitial",b.proxy(this._popoverOnHide,this));this.popoverInstance.show();
f.addCountMetric("DesktopMarsABBInterstitialCount")},_popoverBeforeShow:function(a){this._lazyLoadImages();this._resetInterstitalInteractedElements();this.renderView()},_popoverOnShow:function(a){this.$el=a.popover.$popover;b("#abb-intl-product-select-button").length?this.$el.delegate(".abb-intl-ato","click",b.proxy(this._handleIntlSelectCXAddToOrderClick,this)):this.$el.delegate(".abb-intl-ato","click",b.proxy(this._handleIntlAddToOrderClick,this));this.$el.delegate(".abb-intl-decline","click",b.proxy(this._handleIntlDeclineClick,
this));this.$el.delegate(".abb-intl-continue","click",b.proxy(this._handleIntlDeclineClick,this));this.$el.delegate(".a-button-close","click",b.proxy(this._handleIntCloseButtonClick,this));this.$el.delegate(".abb-intl-product-ato input[type\x3d'checkbox']","change",b.proxy(this._handleSelectedItemsChange,this));this.$el.delegate(".abb-intl-product-atc","click",b.proxy(this._handleAccessoryAddToCartClick,this));this.$el.delegate(".abb-intl-product-atc-try-again","click",b.proxy(this._handleAccessoryAddToCartClick,
this));this.$el.delegate(".abb-product-subscription-see-more-link","click",b.proxy(this._onSeeMoreClick,this));this.$el.delegate(".abb-product-subscription-see-less-link","click",b.proxy(this._onSeeLessClick,this));this.$el.delegate("#abb-intl-product-select-button","click",b.proxy(this._onSelectClick,this));this.$el.delegate(".abb-intl-product-delete","click",b.proxy(this._onDeleteClick,this));1==this._getInterstitialAsinsToShow().length&&this.autoCheckInterstitial&&this.$el.find(".abb-intl-product-ato input[type\x3d'checkbox']").prop("checked",
!0);this._updateItemCounters();b(".abb-intl-product-view:visible").length||l.log("Will show an empty popover Interstitial","FATAL")},_popoverOnHide:function(a){this._view.getAllVisibleAddToCartButtons().each(function(){var a=b(this).data("asin");f.sendInterstitialItemUnchecked(-1,a)});this.wasInterstitialOfferAccepted||f.sendInterstitialOfferDeclined(-1,"");this.$clickedSubmitButton&&this.$clickedSubmitButton.click()},_lazyLoadImages:function(){b(".abb-sources").length&&(b(".abb-product-view-image-container").each(function(){var a=
b(this).find(".abb-product-image"),d=b(this).find(".abb-sources"),e=b(d).attr("data-normalres")||b(d).attr("data-normalRes"),d=b(d).attr("data-highres")||b(d).attr("data-highRes");a.attr("src",e);a.attr("data-a-hires",d)}),n.loadHiResImage(b(".abb-product-image")))},_resetInterstitalInteractedElements:function(){b(".abb-intl-atc-spinner").hide();b(".abb-intl-atc-successfully").hide();b(".abb-intl-product-inCart-message").hide();b(".abb-intl-atc-successfully-icon").hide();b(".abb-intl-atc-error").hide();
b(".abb-intl-product-atc-try-again").hide();b(".abb-intl-atc-successfully-quantity").remove();var g=a.getInterstitialCTAButtons();g.continueButton.hide();g.addSelectedButton.hide();g.declineButton.show()},_handleIntCloseButtonClick:function(a){f.sendInterstitialCloseButtonClicked(-1,"")},_handleSelectedItemsChange:function(b){this.wasInterstitialOfferAccepted=0<this._view.getCheckedProductCheckboxes().length;b=a.getInterstitialCTAButtons();this.wasInterstitialOfferAccepted?(b.addSelectedButton.css("display",
"inline-block"),b.declineButton.hide()):(b.addSelectedButton.hide(),b.declineButton.css("display","inline-block"))},_handleIntlAddToOrderClick:function(g){g=this._view.getAllVisibleProductCheckboxes();var d=parseInt(a.getPageQuantityDropdown().val()||1,10);g.each(function(a,g){a=b(this).closest(".abb-intl-product-ato").data("asin");g=e.getProductData(a);if(!g)return!0;b(this).is(":checked")?(e.addUpsellAsin(a,g.offerListingID,d),f.sendInterstitialItemAdded(-1,a,g.isAutomated)):(e.removeUpsellAsin(a,
g.offerListingID),f.sendInterstitialItemUnchecked(-1,a,g.isAutomated))});this.popoverInstance.hide()},_handleIntlSelectCXAddToOrderClick:function(g){g=this._view.getAllVisibleSelectedMessage();var d=this._view.getAllVisibleSelectButtons(),c=parseInt(a.getPageQuantityDropdown().val()||1,10);g.each(function(a,g){a=b(this).closest(".abb-intl-product-selected-successful-message").data("asin");g=e.getProductData(a);if(!g)return!0;e.addUpsellAsin(a,g.offerListingID,c);f.sendInterstitialItemAdded(-1,a,g.isAutomated)});
d.each(function(a,g){a=b(this).closest("#abb-intl-product-select-button").data("asin");g=e.getProductData(a);if(!g)return!0;e.removeUpsellAsin(a,g.offerListingID);f.sendInterstitialItemUnchecked(-1,a,g.isAutomated)});this.popoverInstance.hide()},_showContinue:function(b){b=a.getInterstitialCTAButtons();b.continueButton.css("display","inline-block");b.declineButton.hide()},_handleAccessoryAddToCartClick:function(a){var d=this,c=b("input[name\x3d'gift-wrap']").is(":checked");b(a.currentTarget).hide();
b(a.target).closest(".a-section").find(".abb-intl-atc-error").hide();b(a.target).closest(".a-section").find(".abb-intl-product-atc-try-again").hide();b(a.target).closest(".a-section").find(".abb-intl-atc-successfully-icon").hide();b(a.target).closest(".a-section").find(".abb-intl-product-inCart-message").hide();b(a.target).closest(".a-section").find(".abb-intl-product-atc").hide();b(a.target).closest(".a-section").find(".abb-intl-atc-successfully-quantity").hide();b(a.target).closest(".a-section").find(".abb-intl-atc-successfully-quantity").remove();
b(a.target).closest(".a-row").find(".abb-intl-atc-spinner").css("display","inline-block");var k=a.currentTarget.firstChild.firstChild.dataset.asin,f=e.getProductData(k),c={asin:k,offerId:f.offerListingID,quantity:1,isToBeGiftWrapped:c.toString()};try{var p=n.state("abbCartAPIParametersMap"),r=h.createRequest(p.csrfToken,p.marketplaceId,p.aapiAjaxEndpoint);r.addSingleAsinData(c);r.setRefTag("mars_ajax_intl_atc");q.setTimeout(function(){d._onSendingCartRequest(a,r,f,k)},2E3)}catch(u){l.log("An exception occurred when fetching parameters for cart API"+
u,"ERROR"),d._onAccessoryAddFailure(a,k)}},_onSendingCartRequest:function(a,b,d,e){var c=this;b.sendRequest(function(b){f.sendCartAPIRequestSuccessful(-1,"");c._onAccessoryAddSuccess(a,b,d);c._showContinue(a)},function(){f.sendCartAPIRequestFailure(-1,"");c._onAccessoryAddFailure(a,e)})},_onSeeMoreClick:function(a){b(a.target).closest(".a-section").find("#abb-product-terms-conditions-short-terms-conditions").hide();b(a.target).closest(".a-section").find("#abb-product-terms-conditions-long-terms-conditions").css("display",
"inline-block")},_onSeeLessClick:function(a){b(a.target).closest(".a-section").find("#abb-product-terms-conditions-long-terms-conditions").hide();b(a.target).closest(".a-section").find("#abb-product-terms-conditions-short-terms-conditions").css("display","inline-block")},_onSelectClick:function(a){b(a.target).closest(".a-section").find("#abb-intl-product-select-button").hide();b(a.target).closest(".a-section").find(".abb-intl-product-select-button-clicked").css("display","inline-block");this._handleSelectDeleteChange()},
_onDeleteClick:function(a){b(a.target).closest(".a-section").find(".abb-intl-product-select-button-clicked").hide();b(a.target).closest(".a-section").find("#abb-intl-product-select-button").css("display","inline-block");this._handleSelectDeleteChange()},_handleSelectDeleteChange:function(b){this.wasInterstitialOfferAccepted=0<this._view.getAllVisibleSelectedMessage().length;b=a.getInterstitialCTAButtons();this.wasInterstitialOfferAccepted?(b.addSelectedButton.css("display","inline-block"),b.declineButton.hide()):
(b.addSelectedButton.hide(),b.declineButton.css("display","inline-block"))},_onAccessoryAddSuccess:function(d,e,c){this.wasInterstitialOfferAccepted=!0;var k=e.entity.items[0].quantity,h=c.maxOrderQuantity;b(d.target).closest(".a-row").find(".abb-intl-atc-spinner").hide();b(d.target).closest(".a-row").find(".abb-intl-atc-successfully-icon").css("display","inline-block");b(d.target).closest(".a-section").find(".abb-intl-atc-successfully-quantity").remove();if(h){if(0!=h){var n='\x3cdiv class \x3d "abb-intl-atc-successfully-quantity "\x3e'+
k+"\x3c/div\x3e";b(d.target).closest(".a-row").find(".abb-intl-product-inCart-message").before(n)}b(d.target).closest(".a-row").find(".abb-intl-product-inCart-message").css("display","inline-block");k<h&&b(d.target).closest(".a-row").find(".abb-intl-product-atc").css("display","inline-block")}else b(d.target).closest(".a-row").find(".abb-intl-product-inCart-message").before('\x3cdiv class \x3d "abb-intl-atc-successfully-quantity "\x3e1\x3c/div\x3e'),b(d.target).closest(".a-row").find(".abb-intl-product-inCart-message").css("display",
"inline-block");f.sendInterstitialAddToCartSuccessful(-1,c.asin,c.isAutomated);a.updateCartQuantity(e.entity.count.entity.items)},_onAccessoryAddFailure:function(a,d){b(a.target).closest(".a-row").find(".abb-intl-atc-spinner").hide();b(a.target).closest(".a-section").find(".abb-intl-atc-error").css("display","inline-block");b(a.target).closest(".a-section").find(".abb-intl-product-atc-try-again").css("display","inline-block");f.sendInterstitialAddToCartFailure(-1,d);l.log("Accessory add to cart failed in Interstitial",
"FATAL")},_displayCheckBoxOrATCButtons:function(b,d){b=a.getProductButtonsAndCheckboxes();d?(b.addToCart.css("display","inline-block"),b.checkbox.hide()):(b.checkbox.css("display","inline-block"),b.addToCart.hide())},_displaySelectButtonOrATCButton:function(b,d){b=a.getSelectAndATCButtons();d?(b.addToCart.css("display","inline-block"),b.selectButton.hide()):(b.selectButton.css("display","inline-block"),b.addToCart.hide())},_handleIntlDeclineClick:function(a){this.wasInterstitialOfferAccepted=!1;this.popoverInstance.hide()},
_generateViewModel:function(){return{asinsToShow:this.asinsToShow}},_updateItemCounters:function(){var a=b(".abb-intl-product-view:visible").length,d=b(".abb-interstitial").closest(".a-popover-wrapper").find(".a-popover-header-content").last();d.text(d.text().replace("$totalItems",a));b(".abb-product-total").text(a);b(".abb-intl-product-view:visible .abb-product-index").each(function(a){b(this).text(a+1)});b(".abb-intl-product-view:visible").eq(0).addClass("abb-intl-first-accessory")},loadInitialImages:function(){n.loadDescendantImagesManually(this.$baseElement)},
renderView:function(){this._view.render(this._generateViewModel())},getParentAsins:function(a){for(var b=[],d=0;d<a.length;d++){var c=this._model.getScheduledAsinFromVariationAsin(a[d].asin);b.push(c)}return b},_csmRegisterWeblab:function(a,b){var d=q.ue;d&&d.trigger(a,b)}})});"use strict";l.when("accessory-upsell-buybox-helper").register("desktop-accessory-upsell-ref-helper",function(f){function c(a){q.ue&&q.ue.count&&q.ue.count(a,1)}function a(a,b,d,g){try{if(null===a||-1>a||!Number.isInteger(a))throw Error(p.MISSING_CSA_LOGGING_PARAMETER_INDEX);
if(!b)throw Error(p.MISSING_CSA_LOGGING_PARAMETER_ACCESSORY_ASIN);if(!d)throw Error(p.MISSING_CSA_LOGGING_PARAMETER_ACTION);if(!h)throw Error(p.CSA_NOT_AVAILABLE);g=g?"_automated":"";var x=f.getPageAsin().asin;if(x){var v=e.LOG,t=n.PREFIX+x+n.SLOT+a+"_"+b+"_"+d+g;if(!t)throw Error(p.MISSING_CSA_SCHEMA_PARAMETER_REFTAG);if(!x)throw Error(p.MISSING_CSA_SCHEMA_PARAMETER_PAGE_ASIN);if(!q.ue)throw Error(p.NO_SESSION_REQUEST_DATA);var m=new Date,w=m.toISOString(),r;r=m.getFullYear()+"-"+String(m.getMonth()+
1).padStart(2,"0")+"-"+String(m.getDate()).padStart(2,"0")+"T"+String(m.getHours()).padStart(2,"0")+":"+String(m.getMinutes()).padStart(2,"0")+":"+String(m.getSeconds()).padStart(2,"0")+":"+String(m.getMilliseconds()).padStart(3,"0");var u=q.opts?q.opts.customerId:q.fwcimData?q.fwcimData.customerId:"",z=q.opts&&!isNaN(parseInt(q.opts.marketId))?parseInt(q.opts.marketId):null;h(v,{schemaId:e.SCHEMA_ID,refMarker:t,userCustomerId:u,marketplaceId:z,sessionId:q.ue.sid||"",requestId:q.ue.rid||"",hitHourUtc:w,
endTimeLocal:r,pageAsin:x},e.ENTITY_PARAMS)}}catch(A){c(e.ERROR_METRIC),l.log(A.message)}}var e={PRODUCER_ID:"buda",SCHEMA_ID:"buda.CSAMetrics.8",LOG:"log",ENTITY_PARAMS:{ent:"all"},ERROR_METRIC:"DesktopMarsABBCSAError"},h;h=q.csa?q.csa("Events",{producerId:e.PRODUCER_ID}):void 0;var p={CSA_NOT_AVAILABLE:"CSA is not available.",MISSING_CSA_SCHEMA_PARAMETER_REFTAG:"Missing Schema Parameter: 'refTag', it has to be a non-empty string.",MISSING_CSA_SCHEMA_PARAMETER_PAGE_ASIN:"Missing Schema Parameter: 'pageAsin', it has to be a non-empty string of 10 alpha-numeric characters.",
MISSING_CSA_LOGGING_PARAMETER_INDEX:"Missing CSA Logging Parameter: 'index', it has to be a integer equal to or greater than -1.",MISSING_CSA_LOGGING_PARAMETER_ACCESSORY_ASIN:"Missing CSA Logging Parameter: 'accessoryAsin', it has to be a non-empty string of 10 alpha-numeric characters.",MISSING_CSA_LOGGING_PARAMETER_ACTION:"Missing CSA Logging Parameter: 'action', it has to be a non-empty string.",NO_SESSION_REQUEST_DATA:"Session and Request Data is not available."},n={PREFIX:"ods_dabb_",SLOT:"_slot"};
return{sendAsinScheduled:function(c,b,d){a(c,b,"asinScheduled",d)},sendCheckboxSelected:function(c,b,d){a(c,b,"checkboxSelected",d)},sendCheckboxDeselected:function(c,b,d){a(c,b,"checkboxDeselected",d)},sendSecondaryViewDisplayed:function(c,b){a(c,b,"secondaryViewDisplayed")},sendSecondaryViewTwisted:function(c,b){a(c,b,"secondaryViewTwisted")},sendSecondaryViewCancelled:function(c,b){a(c,b,"secondaryViewCancelled")},sendPopoverDisplayed:function(c,b){a(c,b,"popoverDisplayed")},sendPopoverTwisted:function(c,
b){a(c,b,"popoverTwisted")},sendPopoverCancelled:function(c,b){a(c,b,"popoverCancelled")},sendAddToOrderClicked:function(c,b){a(c,b,"addToOrderClicked")},sendInterstitialDisplayed:function(c,b){a(c,b,"interstitialDisplayed")},sendInterstitialItemAdded:function(c,b,d){a(c,b,"interstitialItemAdded",d)},sendInterstitialItemUnchecked:function(c,b,d){a(c,b,"interstitialItemUnselected",d)},sendInterstitialOfferDeclined:function(c,b){a(c,b,"interstitialOfferDeclined")},sendInterstitialCloseButtonClicked:function(c,
b){a(c,b,"interstitialCloseButtonClicked")},sendUpdateClicked:function(c,b){a(c,b,"updateClicked")},sendInterstitialAddToCartSuccessful:function(c,b,d){a(c,b,"intATC",d)},sendLightningDealsABBAddToCartSuccessful:function(c,b,d){a(c,b,"intLdATC",d)},sendInterstitialAddToCartFailure:function(c,b){a(c,b,"intATCFail")},sendInterstitialBetterTogetherMessageNotAvailable:function(c,b){a(c,b,"interstitialBetterTogetherNotAvailable")},sendCartAPIRequestSuccessful:function(c,b){a(c,b,"cartApiAddItemsRequestSuccess")},
sendCartAPIRequestFailure:function(c,b){a(c,b,"cartApiAddItemsRequestFailure")},addCountMetric:c}});"use strict";l.when("A").register("accessory-upsell-dom-helper",function(f){var c=f.$;return new function(){function a(a){a.each(function(){var a=c(this);a.find(".buyboxHelperHiddenFieldsContainer").length||a.append(c("\x3cdiv\x3e").addClass("buyboxHelperHiddenFieldsContainer"))});return a.find(".buyboxHelperHiddenFieldsContainer")}function e(a,b){return c("\x3cinput\x3e").attr({type:"hidden",name:a,
value:b})}function f(a,b){return c("\x3cinput\x3e").attr({type:"hidden",name:a,value:b,"class":"ATCFormUpsellAsinData"})}function p(a){a.each(function(){var a=c(this),b=a.parent("form").find('input[name\x3d"itemCount"]');d.itemCount.length&&!b.length&&a.append(d.itemCount.clone())});return a}function n(a){for(var b=document.getElementById("giftCheckBoxInput"),d=0;d<a.length;d++)c("form#addToCart").find('input[name\x3d"items['+d+'.upsell][additionalParameters][giftOptions][includeGiftReceipt]"]').remove();
if(b&&b.value)for(d=0;d<a.length;d++){var e="items["+d+".upsell][additionalParameters][giftOptions][includeGiftReceipt]";c("form#addToCart").append(f(e,b.value)[0])}}function k(a,b,d){if(b){var c=1,f;for(f in b)a.appendChild(e("custom-name."+d+"."+c,f)[0]),a.appendChild(e("custom-value."+d+"."+c,b[f])[0]),c+=1}}function b(){d.hiddenFieldsContainers.empty()}var d={};return{processMarkupForDabb:function(){var a=c("#accessory-upsell");a.find(".abb-option-checkbox input[type\x3d'checkbox']").removeAttr("name").removeAttr("value");
a.find('input[name^\x3d"asin."]').remove();a.find('input[name^\x3d"offeringID."]').remove();a.find('input[name^\x3d"quantity."]').remove()},parsePageAsinData:function(){d.abbContainer=c("#accessory-upsell");d.itemCount=d.abbContainer.find('input[name\x3d"itemCount"]');d.buyboxForm=c("form#addToCart");d.atcForms=c('#buybox form:has(input[name\x3d"ASIN"])');d.formSessionIdInput=d.buyboxForm.find("input#session-id");d.formSessionIdInput.length||(d.formSessionIdInput=c("#verificationSessionID"));d.submitButton=
d.buyboxForm.find('input#add-to-cart-button[name\x3d"submit.add-to-cart"]');d.installmentsSubmitButton=d.buyboxForm.find('input#installments-button[name\x3d"submit.installments"]');d.oneClickSubmitButton=d.buyboxForm.find('input#one-click-button[name\x3d"submit.one-click-order.x"]');d.buyNowSubmitButton=d.buyboxForm.find('input#buy-now-button[name\x3d"submit.buy-now"]');d.lightningDealSubmitButton=d.buyboxForm.find("#LDBuybox *[id^\x3dgb_atc_]");d.pageAsinInput=d.buyboxForm.find('input[type\x3d"hidden"][name\x3d"ASIN"]');
d.pageOfferIdInput=d.buyboxForm.find('input[type\x3d"hidden"][name\x3d"offerListingID"]');d.pageQuantityDropdown=d.buyboxForm.find('select[name\x3d"quantity"]');d.giftCheck=d.buyboxForm.find('input[name\x3d"gift-wrap"]');d.ldAddSuccessMessageContainer=d.buyboxForm.find("#abb-add-success-message");d.ldAddSuccessCount=d.buyboxForm.find("#abb-add-success-message-count");d.ldAddSuccessSingleMessage=d.buyboxForm.find("#abb-add-single-message");d.ldAddSuccessMultipleMessage=d.buyboxForm.find("#abb-add-multiple-message");
d.ldWaitlistMessage=d.buyboxForm.find("#abb-waitlist-message");d.hiddenFieldsContainers=a(d.atcForms);d.intlAtoSubmitButon=c(".abb-intl-ato");d.intlDeclineButton=c(".abb-intl-decline");d.productCheckbox=c(".abb-intl-product-ato");d.addSelectedButton=c(".abb-intl-add-selected");d.productSelectButton=c(".abb-intl-product-select-button");d.productAddToCart=c(".abb-intl-product-atc");d.continueButton=c(".abb-intl-continue");d.cartQuantity=c(".nav-cart-count");var b=d.pageAsinInput.val(),e=d.pageOfferIdInput.val(),
f=d.pageQuantityDropdown.val()&&d.pageQuantityDropdown.val().trim()?parseInt(d.pageQuantityDropdown.val().trim(),10):1;return{asin:b,offerId:e,quantity:f}},getSubmitButtons:function(){return[d.submitButton,d.oneClickSubmitButton,d.buyNowSubmitButton,d.lightningDealSubmitButton]},getPageQuantityDropdown:function(){return d.pageQuantityDropdown},renderUpsellAsinsHiddenInputs:function(a){if(d.hiddenFieldsContainers.length){b();var f=c('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').closest("form"),
h=f.find('input[type\x3d"hidden"][name^\x3d"offeringID"]').length,n=new Set;0<h&&f.find('input[type\x3d"hidden"][name^\x3d"offeringID"]').each(function(){var a=c(this).attr("name");a&&(a=a.slice(11),n.add(parseInt(a)))});for(var m=document.createDocumentFragment(),f=!1,l=0;l<a.length;l++){var r=a[l],u=l+1;if(n.has(u)||f)u=h+l+1,f=!0,l===a.length-1&&(u=h+l+2);m.appendChild(e("asin."+u,r.asin)[0]);m.appendChild(e("offeringID."+u,r.offerId)[0]);m.appendChild(e("quantity."+u,r.quantity)[0]);if(r.isDigitalSubscription){var z=
r.fixedCustomCartAttribute?u:u+1;m.appendChild(e("custom-name."+z+".1",r.customAttributeName)[0]);m.appendChild(e("custom-value."+z+".1",r.customAttributeValue)[0])}k(m,r.productLineItemCustomKeyValuePair,"1");k(m,r.upsellLineItemCustomKeyValuePair,u+1)}d.hiddenFieldsContainers.each(function(){c(this).append(m.cloneNode(!0))});p(d.hiddenFieldsContainers)}},removeUpsellAsinsHiddenInputs:b,updateUpsellAsinsQuantityInputs:function(a){d.hiddenFieldsContainers.find('input[type\x3d"hidden"][name^\x3d"quantity."]').each(function(b,
d){c(d).val(a)})},getDomElements:function(){return d},getHiddenFieldsContainer:function(){return d.hiddenFieldsContainers},getBuyboxFormSessionID:function(){return d.formSessionIdInput},getLightningDealElements:function(){return{waitlistMessage:d.ldWaitlistMessage,successMessageContainer:d.ldAddSuccessMessageContainer,successMessageContainerSelector:"#abb-add-success-message",successMessageSingle:d.ldAddSuccessSingleMessage,successMessageMultiple:d.ldAddSuccessMultipleMessage,successMessageCount:d.ldAddSuccessCount}},
reset:function(){d={}},getInterstitialCTAButtons:function(){return{atoButton:d.intlAtoSubmitButon,declineButton:d.intlDeclineButton,continueButton:d.continueButton,addSelectedButton:d.addSelectedButton}},getProductButtonsAndCheckboxes:function(){return{checkbox:d.productCheckbox,addToCart:d.productAddToCart}},getSelectAndATCButtons:function(){return{selectButton:d.productSelectButton,addToCart:d.productAddToCart}},updateCartQuantity:function(a){d.cartQuantity.text(a)},renderNatcUpsellAsinHiddenInputs:function(a){c(".ATCFormUpsellAsinData").remove();
for(var b=document.createDocumentFragment(),e=0;e<a.length;e++){var k=a[e];b.appendChild(f("items["+e+".upsell][asin]",k.asin)[0]);b.appendChild(f("items["+e+".upsell][offerListingId]",k.offerId)[0]);b.appendChild(f("items["+e+".upsell][quantity]",k.quantity)[0])}d.buyboxForm.append(b);n(a)},updateSelectedAsinsGiftCheck:n,getGiftWrapUpdate:function(){return d.giftCheck}}}});"use strict";l.when("A","ODSEventDispatcher","accessory-upsell-dom-helper").register("accessory-upsell-buybox-helper",function(f,
c,a){var e=f.$;return new function(){function h(a){return l[q[a]]}function p(a){var b=q[a];return b?g[b][a]:y}function n(a,b,d){if("string"!==typeof a||0===a.length)throw new TypeError('The "asin" argument must be defined.');d="number"===typeof d?Math.max(1,d):1;var c=!t||f.objectIsEmpty(t);t={asin:a,offerId:b,quantity:d||1};w.dispatch(c?"PageAsinAdded":"PageAsinChanged",a,b,d)}function k(a,b,d){var c;a:{if(!t||t.asin!==a)for(c=0;c<m.length;c++)if(m[c].asin===a&&(!b||m[c].offerId===b))break a;c=-1}if(0<=
c){var e=m[c],f=e.quantity;if(f===d)return!1;0===d?(m.splice(c,1),w.dispatch("UpsellAsinRemoved",a,b,d,f)):(e.quantity=d,w.dispatch("UpsellAsinChanged",a,b,d,f))}else-1===c&&0<d&&(c=p(a),m.push({asin:a,offerId:b,quantity:d,fixedCustomCartAttribute:c.isDigitalSubscription?c.fixedCustomCartAttribute:null,customAttributeValue:c.isDigitalSubscription?c.customAttributeValue:null,customAttributeName:c.isDigitalSubscription?c.customAttributeName:null,isDigitalSubscription:c.isDigitalSubscription,productLineItemCustomKeyValuePair:c.productLineItemCustomKeyValuePair,
upsellLineItemCustomKeyValuePair:c.upsellLineItemCustomKeyValuePair}),w.dispatch("UpsellAsinAdded",a,b,d))}function b(){return f.copy(t)}function d(){return f.copy(m)}var g,l={},q={},t={},m=[],w=new c;(function(){e.each(["PageAsinAdded","PageAsinChanged","UpsellAsinAdded","UpsellAsinChanged","UpsellAsinRemoved"],e.proxy(function(a,b){this["register"+b]=e.proxy(w,"registerCallback",b);this["unregister"+b]=e.proxy(w,"unregisterCallback",b)},this))}).apply(this);this.registerAccessoryUpsellData=function(a){g=
a;for(var b in g)if(g.hasOwnProperty(b)){a=g[b];l[b]=[];for(var c in a)a.hasOwnProperty(c)&&(l[b].push(c),q[c]=b)}};this.getParentAsin=function(a){return q[a]};this.getChildAsins=h;this.getProductData=p;this.parsePageAsin=function(){var b=a.parsePageAsinData();n(b.asin,b.offerId,b.quantity)};this.setPageAsin=n;this.addUpsellAsin=function(b,c,d){if("string"!==typeof b||0===b.length)throw new TypeError('The "asin" argument must be defined.');if(t&&t.asin===b)throw Error("Can not modify page asin.");
d="number"===typeof d?Math.max(1,d):1;for(var e=h(b),f=0;f<e.length;f++){var g=e[f];g!==b&&k(g,"",0)}k(b,c||"",d);a.renderUpsellAsinsHiddenInputs(m);a.renderNatcUpsellAsinHiddenInputs(m)};this.removeUpsellAsin=function(b,c){k(b,c||"",0);a.renderUpsellAsinsHiddenInputs(m);a.renderNatcUpsellAsinHiddenInputs(m)};this.getPageAsin=b;this.getUpsellAsins=d;this.getAsins=function(){var a=b(),c=d();return[a].concat(c)};this.updateSelectedAsinsQuantity=function(b){if(isNaN(b)||1>b)throw Error("New quantity for upsell asins must be greater than 0.");
t.quantity=b;for(var c=0;c<m.length;c++)m[c].quantity=b;a.updateUpsellAsinsQuantityInputs(b);a.renderNatcUpsellAsinHiddenInputs(m)};this.reset=function(){l={};q={};t={};m=[];a.reset()};this.resetUpsellData=function(){m=[]};this.updateGiftCheck=function(){a.updateSelectedAsinsGiftCheck(m)}}});"use strict";l.when("A","odsRefTagUtils").register("upsell-ref",function(f,c){var a=f.$;return f.createClass({init:function(e){e.delegate("input[type\x3dcheckbox]","change",function(){var e=a(this),f=e.is(":checked")?
"checkboxSelected":"checkboxDeselected",e=e.parents(".a-checkbox").data("ref");c.send(e+"_"+f)})}})});"use strict";l.when("A").register("ld-upsell",function(f){var c=f.$;return f.createClass({init:function(a){a.find("input[type\x3dcheckbox]").is(":checked")&&this.addToCart(a)},addToCart:function(a){var e={clientName:"AmazonDevices",verificationSessionID:c("#session-id").val()},f=0;a.find("input[type\x3dcheckbox]:checked").each(function(a){var k=c(this).closest(".abbListItem");if(k){var b=k.find('input[name^\x3d"asin."]').val(),
d=k.find('input[name^\x3d"offeringID."]').val(),k=k.find('input[name^\x3d"quantity."]').val();e["ASIN."+a]=b;e["offerListingID."+a]=d;e["quantity."+a]=k;f+=1;c("#selected-itemCount").val(f)}});var l=c.ajax({url:"/gp/add-to-cart/json/ref\x3dldabb",type:"POST",data:e});l.done(function(e){e=c("#ld-success-msg");e.find("#ld-count").html(f);1<f?e.find("#ld-accessories").removeClass("aok-hidden"):e.find("#ld-accessory").removeClass("aok-hidden");e.removeClass("aok-hidden");c(a).find("fieldset").hide()});
l.fail(function(a,e){c("#ld-error-msg").show()})}})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DetailPageJumpLinksAssets",""):d;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,d,e){b.when("A","ready").execute("jump-links",function(a){var f=a.$,b=!1;f("#jump-links a").each(function(){if(!f(this.hash).length)return b=!0,!1});if(!b){f("body").addClass("jump-links-targets-exist");var e=d.ue;a.declarative("jump-links-click","click",function(c){var a=c.$target[0].hash,
b=f(a).offset().top;c="jump-links-count_"+c.$target[0].id;var g=e.count(c)||0;e.count(c,g+1);d.history.pushState?d.history.pushState(null,null,a):(c=f(a),g=c.attr("id"),c.removeAttr("id"),d.location.hash=a,c.attr("id",g));f("html, body").stop().animate({scrollTop:b},500)})}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageGiftingOptionAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var a=window.AmazonUIPageJS||window.P,e=a._namespace||a.attributeErrors,d=e?e("MakoCommonMetricAssets",""):a;d.guardFatal?d.guardFatal(c)(d,window):d.execute(function(){c(d,window)})})(function(c,a,e){c.now("mako-metric-logger").execute("MakoMetricLoggerEmpty",function(a){a||c.when("A").register("mako-metric-logger",function(a){function b(){}return{increment:b,update:b,counter:b,timer:b,suffixed:b}})});"use strict";c.now("mako-reftag-logger").execute("ReftagLoggerExecute",function(a){a||
c.when("A").register("mako-reftag-logger",function(a){function b(){}function c(a){if(!a)throw Error("refTag is not defined");d.post("/gp/digital/fiona/ajax/log.html/ref\x3d"+a)}var d=a.$;return{increment:c,update:b,counter:function(a){return function(){c(a)}},timer:b,suffixed:function(a,b){return function(c){return a(b+":"+c)}}}})});"use strict";c.now("mako-csm-logger").execute("MakoCsmLoggerExecute",function(d){d||c.when("A").register("mako-csm-logger",function(c){function b(){}function d(){return a.ue&&
"function"===typeof a.ue.count?a.ue.count:b}function e(a){if(a){var b=d();b(a,(b(a)||0)+1)}}function g(a,b){a&&"number"===typeof b&&d()(a,b)}function h(a){var b=d();return function(c){b(a,c)}}function k(b){var c=function(){return{stop:function(){}}};if(a.performance&&"function"===typeof a.performance.now){var l=d();c=function(){var c=a.performance.now();return{stop:function(){var d=a.performance.now()-c;l(b,d)}}}}return{start:c}}function f(a,b){return function(c){return a(b+":"+c)}}return a.ue&&"function"===
typeof a.ue.count?{increment:e,update:g,counter:h,timer:k,suffixed:f}:{increment:b,update:b,counter:b,timer:b,suffixed:b}})});"use strict";c.now("mako-csa-logger").execute("MakoCsaLoggerExecute",function(d){d||c.when("A").register("mako-csa-logger",function(c){function b(){}function d(a,b){f("recordMetric",a,b)}function e(a){f("recordMetric",a,1)}function g(a){return function(b){d(a,b)}}function h(a,b){return function(c){return a(b+":"+c)}}function k(b){var c=function(){return{stop:function(){}}};
a.performance&&"function"===typeof a.performance.now&&(c=function(){var c=a.performance.now();return{stop:function(){var e=a.performance.now()-c;d(b,e)}}});return{start:c}}if(a.csa&&"function"===typeof a.csa){var f=a.csa("Metrics",{producerId:"mako-ml"});if("function"===typeof a.csa)return{increment:e,update:d,counter:g,timer:k,suffixed:h}}f=b;return{increment:b,update:b,counter:b,timer:b,suffixed:b}})})});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,g=n?n("DetailPagePreRegistrationAssets",""):m;g.guardFatal?g.guardFatal(l)(g,window):g.execute(function(){l(g,window)})})(function(l,m,n){l.when("A","a-checkbox","a-dropdown","ExtraDataHelper").register("PreRegistration.View",function(g,f,d,a){var e=g.$,k={},h=g.createClass({init:function(c,b){this.selectors={};this._setupSelectors(c,b);this.reset()},reset:function(){this._giftingCheckbox=f(this.selectors.GIFTING_CHECKBOX_SELECTOR);
this._giftingCheckboxElement=e(this.selectors.GIFTING_CHECKBOX_SELECTOR);this._accountLinkingCheckbox=f(this.selectors.ACCOUNT_LINKING_CHECKBOX_SELECTOR);this._accountLinkingCheckboxes=f(this.selectors.ALL_ACCOUNT_LINKING_CHECKBOX_SELECTOR);this._desktopQuantityDropdown=d.getSelect(this.selectors.DESKTOP_QUANTITY_DROPDOWN_SELECTOR);this._mobileQuantityDropdown=d.getSelect(this.selectors.MOBILE_QUANTITY_DROPDOWN_SELECTOR);this._quantityAlert=e(this.selectors.QUANTITY_ALERT_SELECTOR);this._giftingAlert=
e(this.selectors.GIFTING_ALERT_SELECTOR);this._mainGiftingAlert=e(this.selectors.MAIN_GIFTING_ALERT_SELECTOR);this._declaratives=e(this.selectors.DECLARATIVES_SELECTOR);this._forms=e(this.selectors.FORMS_SELECTOR);this._atcforms=e(this.selectors.ATC_FORM_SELECTOR);this._quantityAlert.length&&(this._quantityAlertFormatString=this._quantityAlert.html())},_setupSelectors:function(c,b){this.selectors.ACCOUNT_LINKING_ATTRIBUTE_NAME="isDevicePreRegistered";this.selectors.MAX_QUANTITY_LIMIT_FORMAT_SPECIFIER=
"$PREREG_MAX_QUANTITY";this.selectors.AUI_HIDDEN_CLASS="aok-hidden";this.selectors.AUI_COLOR_TERTIARY="a-color-tertiary";this.selectors.GIFTING_CHECKBOX_SELECTOR="#gift-wrap"+c;this.selectors.ACCOUNT_LINKING_CHECKBOX_SELECTOR="#account-linking"+c;this.selectors.ALL_ACCOUNT_LINKING_CHECKBOX_SELECTOR=".pre-reg-checkbox-option";this.selectors.DESKTOP_QUANTITY_DROPDOWN_SELECTOR=b[c].desktopQuantityDropdown;this.selectors.MOBILE_QUANTITY_DROPDOWN_SELECTOR=b[c].mobileQuantityDropdown;this.selectors.QUANTITY_ALERT_SELECTOR=
"#preregistrationQuantityAlert"+c;this.selectors.GIFTING_ALERT_SELECTOR="#preregistrationGiftingAlert"+c;this.selectors.MAIN_GIFTING_ALERT_SELECTOR="#preregistrationGiftingAlert";this.selectors.ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR="#preRegCheckboxText"+c;this.selectors.ALL_ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR=".mako-pre-reg-checkbox-text";this.selectors.DECLARATIVES_SELECTOR="#atc-declarative, #buyNow .a-declarative";this.selectors.FORMS_SELECTOR="form#addToCart, form#mobile-installments, form#buyNow, form#buyNowCheckout, form#oneClickBuy, form#buyNowOneClickCheckout";
this.selectors.ATC_FORM_SELECTOR="#addToCart"},updateQuantityLimit:function(c){this._quantityAlert.length&&this._quantityAlertFormatString&&(c=this._quantityAlertFormatString.replace(this.selectors.MAX_QUANTITY_LIMIT_FORMAT_SPECIFIER,c),this._quantityAlert.html(c))},_setDeclarativeExtraData:function(c){this._declaratives.each(function(){var b=e(this),f=b.data("action");f&&(b=b.data(f))&&b.inputs&&a.setObjectExtraData(b.inputs,c)})},_setFormHiddenInput:function(c){for(var b=document.querySelectorAll(this.selectors.ATC_FORM_SELECTOR),
a=0;a<b.length;a++){var f=b[a],g="accountLinking"+a,d=e("[id\x3d"+g+"]");d&&d.length&&d.remove();d=document.createElement("input");d.type="hidden";d.name="items[0.base][additionalParameters][devicePreregistration][selected]";d.value=c;d.id=g;f.appendChild(d)}},_setFormExtraData:function(c){this._forms.each(function(){a.setFormExtraData(this,c)})},setAccountLinkingAttributeValue:function(c){var b={};b[this.selectors.ACCOUNT_LINKING_ATTRIBUTE_NAME]=c;this._setDeclarativeExtraData(b);this._setFormExtraData(b);
this._setFormHiddenInput(c)},_isCheckboxPresent:function(c){return!c.isEmpty()},_isCheckboxChecked:function(c){return!c.isEmpty()&&c.isChecked()},isGiftingChecked:function(){return this._isCheckboxChecked(this._giftingCheckbox)},isGiftingPresent:function(){return this._isCheckboxPresent(this._giftingCheckbox)},uncheckGiftingbox:function(){f(this.selectors.GIFTING_CHECKBOX_SELECTOR).uncheck();this._hide(this._mainGiftingAlert)},isAccountLinkingChecked:function(){return this._isCheckboxChecked(this._accountLinkingCheckbox)},
isAccountLinkingPresent:function(){return this._isCheckboxPresent(this._accountLinkingCheckbox)},getQuantity:function(){return this._desktopQuantityDropdown?this._desktopQuantityDropdown.val():this._mobileQuantityDropdown?this._mobileQuantityDropdown.val():1},scrollGiftingIntoView:function(){this._giftingCheckboxElement.length&&!g.onScreen(this._giftingCheckboxElement,5)&&this._giftingCheckboxElement[0].scrollIntoView()},_hide:function(c){c.addClass(this.selectors.AUI_HIDDEN_CLASS)},_show:function(c){c.removeClass(this.selectors.AUI_HIDDEN_CLASS)},
_isHidden:function(c){return c.hasClass(this.selectors.AUI_HIDDEN_CLASS)},showGiftingAlert:function(){this._show(this._giftingAlert)},hideGiftingAlert:function(){this._hide(this._giftingAlert)},showQuantityAlert:function(){this._show(this._quantityAlert)},hideQuantityAlert:function(){this._hide(this._quantityAlert)},isGiftingAlertHidden:function(){return this._isHidden(this._giftingAlert)},enableAccountLinkingCheckboxes:function(c){this._accountLinkingCheckboxes.enable();e(this.selectors.ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR).removeClass(this.selectors.AUI_COLOR_TERTIARY);
e(this.selectors.ALL_ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR).removeClass(this.selectors.AUI_COLOR_TERTIARY);c?this._accountLinkingCheckboxes.check():this._accountLinkingCheckboxes.uncheck()},enableInstanceAccountLinkingCheckbox:function(c){this._accountLinkingCheckbox.enable();e(this.selectors.ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR).removeClass(this.selectors.AUI_COLOR_TERTIARY);e(this.selectors.ALL_ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR).removeClass(this.selectors.AUI_COLOR_TERTIARY);c?this._accountLinkingCheckbox.check():
this._accountLinkingCheckbox.uncheck()},disableAccountLinkingCheckbox:function(){this._accountLinkingCheckboxes.uncheck();this._accountLinkingCheckbox.disable();e(this.selectors.ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR).addClass(this.selectors.AUI_COLOR_TERTIARY)},disableAccountLinkingCheckboxForQuantityCheck:function(){this._accountLinkingCheckbox.uncheck();this._accountLinkingCheckbox.disable();e(this.selectors.ACCOUNT_LINKING_CHECKBOX_TEXT_SELECTOR).addClass(this.selectors.AUI_COLOR_TERTIARY)},isAccountLinkingCheckboxEnabled:function(){return this._accountLinkingCheckbox.isEnabled()},
allAccountLinkingCheckboxEnabled:function(){return this._accountLinkingCheckboxes.isEnabled()},updateAccountLinkingCheckboxes:function(c){c?this._accountLinkingCheckboxes.check():this._accountLinkingCheckboxes.uncheck()},openPopup:function(c){m.open(c,"popupWindow","width\x3d600,height\x3d400,scrollbars\x3dyes")}});return{getInstance:function(c,b){var a=""==c?"default":c;k[a]||(k[a]=new h(c,b));return k[a]}}});l.when("A","PreRegistration.View","PreRegistration.Metrics").register("PreRegistration.Controller",
function(g,f,d){var a=g.$,e={},k={"":{quantityChangeEvent:"a:dropdown:selected:quantity",mobileQuantityDropdown:"#quantity",desktopQuantityDropdown:"#mobileQuantityDropDown"},"-installment":{quantityChangeEvent:"a:dropdown:selected:installmentsQuantityDropdown",mobileQuantityDropdown:"#installmentsQuantityDropdown",desktopQuantityDropdown:"#installmentsQuantityDropdown"},"-deals":{quantityChangeEvent:"a:dropdown:dealOrderQuantityDropdown:select",mobileQuantityDropdown:"#dealOrderQuantityDropdown",
desktopQuantityDropdown:"#dealOrderQuantityDropdown"}},h,c=g.createClass({init:function(b,a){this.selectors={};this._data=b;this._view=f.getInstance(a,k);this._metrics=new d;this._suffix=a;this.reset(b);this._bindEventsOnce()},reset:function(b){this._setupSelectors(this._suffix);this._view.reset();this._view.uncheckGiftingbox();this._bindEventsDOM();"object"===typeof b?(this._showStatus=b.showStatus,this._maxQuantityLimit=b.maxQuantity,this._defaultValue=b.defaultValue,this._status=b.status,this._asin=
b.asin,h=h===n?this._defaultValue:h,this._view.updateQuantityLimit(this._maxQuantityLimit),this._view.setAccountLinkingAttributeValue(this._defaultValue),this._reenableALC(),this._showStatus?this._metrics.emitGiftingAndAccountLinkingLoadedMetric(this._asin):this._metrics.emitGiftingLoadedMetric(this._asin)):this._view.setAccountLinkingAttributeValue("false")},_setupSelectors:function(b){this.selectors.QUANTITY_CHANGE_EVENT=k[b].quantityChangeEvent;this.selectors.DETAIL_PAGE_GIFTING_DECLARATIVE_NAME=
"detail-page-gifting-declarative"+b;this.selectors.DESKTOP_GIFTING_DECLARATIVE_NAME="mako-gifting-declarative"+b;this.selectors.MOBILE_POPOVER_TRIGGER_EVENT="a:popover:beforeSlide:preRegistration-secview"+b;this.selectors.MOBILE_GIFTING_DECLARATIVE_NAME="mako-gifting-declarative-mobile";this.selectors.ACCOUNT_LINKING_DECLARATIVE_NAME="mako-preReg-declarative"+b;this.selectors.POPUP_DECLARATIVE_NAME="preReg-popup-window"+b;this.selectors.INSTALLMENT_ATC_SELECTOR="#installments-button";this.selectors.ADD_TO_CART_SELECTOR=
"#add-to-cart-button";this.selectors.BUY_NOW_BUTTON_SELECTOR="#buy-now-button";this.selectors.BUY_NOW_CLICK_EVENT="click.makoPreRegistration";this.selectors.ONE_CLICK_BUTTON_SELECTOR="#one-click-button";this.selectors.TWISTER_PLUS_AFTER_BUYBOX_UPDATE_EVENT="twisterPlus:selection:afterBuyBox:update"},_reenableALC:function(){this._view.isGiftingChecked()||(this._enableAccountLinkingCheckbox(h),this._view.hideGiftingAlert())},_giftingCheckboxChecked:function(){this._view.hideQuantityAlert();this._view.showGiftingAlert();
this._view.isAccountLinkingChecked()&&this._metrics.emitALForceUncheckedGiftingSelected(this._asin);this._disableAccountLinkingCheckbox()},_giftingCheckboxUnchecked:function(){this._view.hideGiftingAlert();this._enableAccountLinkingCheckbox()},_enableAccountLinkingCheckbox:function(){this._view.enableInstanceAccountLinkingCheckbox(h);this._view.setAccountLinkingAttributeValue(h?"true":"false")},_disableAccountLinkingCheckbox:function(){this._view.disableAccountLinkingCheckbox();h=this._view.isAccountLinkingChecked();
this._view.setAccountLinkingAttributeValue("false")},_bindEventsOnce:function(){g.on(this.selectors.MOBILE_POPOVER_TRIGGER_EVENT,this._handlePopupClickMobile.bind(this));g.declarative(this.selectors.DETAIL_PAGE_GIFTING_DECLARATIVE_NAME,"click",this._handleGiftingClick.bind(this));g.declarative(this.selectors.DESKTOP_GIFTING_DECLARATIVE_NAME,"click",this._handleGiftingClick.bind(this));g.declarative(this.selectors.MOBILE_GIFTING_DECLARATIVE_NAME,"click",this._handleGiftingClick.bind(this));g.declarative(this.selectors.ACCOUNT_LINKING_DECLARATIVE_NAME,
"click",this._handleAccountLinkingClick.bind(this));g.declarative(this.selectors.POPUP_DECLARATIVE_NAME,"click",this._handlePopupClick.bind(this));g.declarative(this.selectors.POPUP_DECLARATIVE_NAME,"mouseenter",this._handlePopupHover.bind(this));g.on(this.selectors.TWISTER_PLUS_AFTER_BUYBOX_UPDATE_EVENT,this._handleTwisterPlusUpdate.bind(this))},_bindEventsDOM:function(){a(this.selectors.INSTALLMENT_ATC_SELECTOR).click(this._handleATC.bind(this,"ATC"));a(this.selectors.ADD_TO_CART_SELECTOR).click(this._handleATC.bind(this,
"ATC"));a(this.selectors.BUY_NOW_BUTTON_SELECTOR).bind(this.selectors.BUY_NOW_CLICK_EVENT,this._handleATC.bind(this,"BUYNOW"));a(this.selectors.ONE_CLICK_BUTTON_SELECTOR).click(this._handleATC.bind(this,"ONECLICK"))},_handleGiftingClick:function(b){(this._isInputEvent(b)||this._isDefaultInstance())&&this._view.isGiftingPresent()&&(this._view.isGiftingChecked()?(this._giftingCheckboxChecked(),this._metrics.emitGiftingCheckedMetric(this._asin)):(this._giftingCheckboxUnchecked(),this._metrics.emitGiftingUncheckedMetric(this._asin)))},
_handleAccountLinkingClick:function(b){if(this._isInputEvent(b)&&this._view.isAccountLinkingPresent()){var a=this._view.isAccountLinkingChecked();a?(this._view.uncheckGiftingbox(),this._handleGiftingClick(b),this._metrics.emitALCheckedMetric(this._asin)):this._metrics.emitALUncheckedMetric(this._asin);h=a;this._view.updateAccountLinkingCheckboxes(a);this._view.setAccountLinkingAttributeValue(a?"true":"false")}},_handleTwisterPlusUpdate:function(){if(this._view.isAccountLinkingPresent()){var b=this._view.isAccountLinkingChecked();
this._view.setAccountLinkingAttributeValue(b?"true":"false")}},_handlePopupClick:function(b){b.$event.preventDefault();b=b.$target.prop("href");this._view.openPopup(b);this._metrics.emitWhyIsThisImportantClickedMetric(this._asin)},_handlePopupClickMobile:function(b){this._metrics.emitWhyIsThisImportantClickedMetric(this._asin)},_handlePopupHover:function(b){this._metrics.emitPopupHoverMetric(this._asin)},_handleATC:function(b){this._metrics.emitATCGiftingALSelectionMetric(this._asin,b,this._view.isGiftingChecked(),
this._view.isAccountLinkingChecked())},_isInputEvent:function(b){return"input"===b.targetTag.toLowerCase()},_isStatusAllowedConditional:function(){return"ALLOWED_CONDITIONAL"===this._status},_isDefaultInstance:function(){return""===this._suffix},getInstanceData:function(){return this._data},emitInitializationMetrics:function(b){this._metrics.emitALCheckboxBuyboxInitializedMetric(this._data.asin,b);this._metrics.emitALCheckboxInitializedMetric(this._data.asin)}});return{getInstance:function(b,a){a=
"undefined"===typeof a?"":a;var d=""===a?"default":a;e[d]?b&&e[d].reset(b):e[d]=new c(b,a);e[d].emitInitializationMetrics(d);return e[d]},reset:function(){Object.keys(e).forEach(function(a){var c=e[a].getInstanceData();e[a].reset(c)})}}});l.when("A","odsRefTagUtils","mako-csm-logger").register("PreRegistration.Metrics",function(g,f,d){return g.createClass({emitGiftingAndAccountLinkingLoadedMetric:function(a){d.increment("PREREGISTRATION_GIFTING_AL_LOADED");f.send("PREREGISTRATION_"+a+"_GIFTING_AL_LOADED")},
emitALCheckboxInitializedMetric:function(a){d.increment("PREREGISTRATION_AL_ASSETS_INITIALIZED");f.send("PREREGISTRATION_"+a+"_AL_ASSETS_INITIALIZED")},emitALCheckboxBuyboxInitializedMetric:function(a,e){e&&0<e.length&&(e=e.replace("-","").toUpperCase(),d.increment("PREREGISTRATION_"+e+"_AL_ASSETS_INITIALIZED"),f.send("PREREGISTRATION_"+a+"_"+e+"_AL_ASSETS_INITIALIZED"))},emitGiftingLoadedMetric:function(a){d.increment("PREREGISTRATION_ONLY_GIFTING_LOADED");f.send("PREREGISTRATION_"+a+"_ONLY_GIFTING_LOADED")},
emitALForceUncheckedQuantityHigh:function(a){d.increment("PREREGISTRATION_AL_FORCE_UNCHECKED_QUANTITYHIGH");f.send("PREREGISTRATION_"+a+"_AL_FORCE_UNCHECKED_QUANTITYHIGH")},emitALForceUncheckedGiftingSelected:function(a){d.increment("PREREGISTRATION_AL_FORCE_UNCHECKED_GIFTINGSELECTED");f.send("PREREGISTRATION_"+a+"_AL_FORCE_UNCHECKED_GIFTINGSELECTED")},emitGiftingCheckedMetric:function(a){d.increment("PREREGISTRATION_GIFTING_CHECKED");f.send("PREREGISTRATION_"+a+"_GIFTING_CHECKED")},emitGiftingUncheckedMetric:function(a){d.increment("PREREGISTRATION_GIFTING_UNCHECKED");
f.send("PREREGISTRATION_"+a+"_GIFTING_UNCHECKED")},emitALCheckedMetric:function(a){d.increment("PREREGISTRATION_AL_CHECKED");f.send("PREREGISTRATION_"+a+"_AL_CHECKED")},emitALUncheckedMetric:function(a){d.increment("PREREGISTRATION_AL_UNCHECKED");f.send("PREREGISTRATION_"+a+"_AL_UNCHECKED")},emitWhyIsThisImportantClickedMetric:function(a){d.increment("PREREGISTRATION_WHY_IS_THIS_IMPORTANT_CLICKED");f.send("PREREGISTRATION_"+a+"_WHY_IS_THIS_IMPORTANT_CLICKED")},emitPopupHoverMetric:function(a){d.increment("PREREGISTRATION_WHY_IS_THIS_IMPORTANT_HOVER");
f.send("PREREGISTRATION_"+a+"_WHY_IS_THIS_IMPORTANT_HOVER")},emitATCGiftingALSelectionMetric:function(a,e,g,h){g?(d.increment("PREREGISTRATION_"+e+"_GIFTING_CHECKED"),f.send("PREREGISTRATION_"+a+"_"+e+"_GIFTING_CHECKED")):(d.increment("PREREGISTRATION_"+e+"_GIFTING_UNCHECKED"),f.send("PREREGISTRATION_"+a+"_"+e+"_GIFTING_UNCHECKED"));h?(d.increment("PREREGISTRATION_"+e+"_AL_CHECKED"),f.send("PREREGISTRATION_"+a+"_"+e+"_AL_CHECKED")):(d.increment("PREREGISTRATION_"+e+"_AL_UNCHECKED"),f.send("PREREGISTRATION_"+
a+"_"+e+"_AL_UNCHECKED"))}})});l.when("A","PreRegistration.Controller").execute(function(g,f){g.on("a:accordion:buybox_accordion:select",function(d){f.reset()});g.on("a:accordion:buybox-accordion:select",function(d){f.reset()})});"use strict";l.when("a-checkbox","add-to-cart-parameter-name","add-to-cart-constants").register("mobile-app-account-linking",function(g,f,d){return{updateData:function(a){var e=f.constructParameterName(d.ITEM_TYPES.BASE,0,d.PARAMETER_PATHS.DEVICEPREREGISTRATION),k=g("#account-linking");
0<k.size()&&k.isChecked()?a.inputs[e]="true":a.inputs[e]="false";return a}}})});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,h=d._namespace||d.attributeErrors,a=h?h("DetailPageQRMAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,h){c.when("singletonPopupModal","a-dropdown","jQuery","csm-counter").register("quantity-restriction-messaging",function(a,d,k,l){return{quantityModal:function(e){var c=k("#quantity"),g=k("#cspQuantity"),f=function(){var b={};return"lastQuantityOption"===c.find("option:selected").attr("data-a-id")?
(b.id=c,b.dropdown="quantity",b.popoverTitle=e.popoverTitle,b.message=e.message,b.plusOne=e.moq,b):"lastQuantityOption"===g.find("option:selected").attr("data-a-id")?(b.id=g,b.dropdown="cspQuantity",b.popoverTitle=e.popoverTitle,b.message=e.cspMessage,b.plusOne=e.cspMOQ,b):null},m=function(){var b=f();null!==b&&b.message&&(a.show({width:502,position:"triggerRight",header:b.popoverTitle,inlineContent:b.message.replace(/MAX_QUANTITY_PLUS_ONE/g,b.plusOne)},!0),b.id.selectedIndex=0,(b=d.getSelect(b.dropdown))&&
b.getOption(0).update({selected:!0}),l.increment("last-quantity-option-click-count"))};c.change(m);g.change(m);m()}}});"use strict";c.when("A").register("csm-counter",function(a){var c=a.$;return{register:function(k,a,e){k&&a&&e&&c(k).bind(a,c.proxy(this.increment,this,e))},increment:function(a){a&&d.ue.count(a,(d.ue.count(a)||0)+1)},update:function(a,c){a&&"number"===typeof c&&d.ue.count(a,c)}}});"use strict";c.when("A","jQuery","a-modal").register("singletonPopupModal",function(a,c,d){function l(a){null===
f?(g=h.appendTo(c("body")),f=d.create(g,a)):f.update(a);f.show()}function e(){f&&f.hide()}var h=c('\x3cdiv style\x3d"display:none"\x3e'),g=null,f=null;a.declarative("cfg-singleton-modal-close","click",e);a.declarative("cfg-singleton-modal-open","click",function(a){l({inlineContent:a.data.inlineContent,header:a.data.header,width:a.data.width||"502",position:"triggerRight"},!0)});return{show:l,hide:e,destroy:function(){f&&(d.remove(f),f=null)}}})});
/* ******** */
(function(c){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,d=p?p("MakoShadowCartAssets",""):l;d.guardFatal?d.guardFatal(c)(d,window):d.execute(function(){c(d,window)})})(function(c,l,p){c.declare("Mako.ShadowCart.Experiments",{EventCycleOrderEnforcement:!0});c.when("A").register("Mako.ShadowCart.Helpers",function(d){function e(b){return[].slice.call(b)}function h(b,d){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);
return b.matches(d)}return{arrayFrom:e,elementMatches:h,keysAsEnum:function(){function b(a,b){a[b]=b;return a}for(var g=e(arguments),a=0,f={};a<g.length;a++)f=d.reduce(Object.keys(g[a]),b,f);return f},selectorMapReducer:function(b,d){return function(a,f){b.hasOwnProperty(f)&&h(d,b[f])&&(a=f);return a}}}});c.declare("Mako.ShadowCart.Selectors",{AddToCartButton:"#add-to-cart-button",BuyBox:"#buybox",BuyNowButton:"#buy-now-button",DesktopRightColumn:"#rightCol",DesktopBuybox:"#desktop_buybox",InstallmentButton:"#installments-button",
LightningDealButton:"#goldboxBuyBox button",MobileAppBuybox:"#mobileapp_buybox_feature_div",MobileWebBuybox:"#mobile_buybox_feature_div",PreOwnedCrossSellButton:"span#preOwnedCrossSellCertRefurb-addToCart input",UsedDesktopButton:"#add-to-cart-button-ubb",UsedMobileButton:"#add-to-cart-button-ubb-mobile"});c.declare("Mako.ShadowCart.EventNames",{AtcIntention:"shadowcart:atc:intention",AtcSubmitted:"shadowcart:atc:submitted",AuiMashAtc:"dpx:add-to-cart:success",MakoCommonCartRequestComplete:"mako:common-cart-request:complete"});
c.when("A","Mako.ShadowCart.Selectors","Mako.ShadowCart.Helpers").register("Mako.ShadowCart.Checkout",function(d,e,h){var b={BuyNow:e.BuyNowButton,AddToCart:e.AddToCartButton,Installment:e.InstallmentButton,UsedDesktop:e.UsedDesktopButton,UsedMobile:e.UsedMobileButton,PreOwnedCrossSell:e.PreOwnedCrossSellButton,LightningDeal:e.LightningDealButton};return{Types:h.keysAsEnum(b,{Unknown:"Unknown"}),getTypeByClickTarget:function(e){return e?d.reduce(Object.keys(b),h.selectorMapReducer(b,e),"Unknown"):
"Unknown"}}});c.when("A","Mako.ShadowCart.Selectors","Mako.ShadowCart.Helpers").register("Mako.ShadowCart.Cbb",function(d,e,h){var b,g={MobileWebBuybox:e.MobileWebBuybox,MobileAppBuybox:e.MobileAppBuybox,DesktopBuybox:e.DesktopBuybox};return{Types:h.keysAsEnum(g,{Unknown:"Unknown"}),getType:function(){var a;(a=b)||(a=(a=document.querySelector(e.BuyBox))&&a.parentElement?d.reduce(Object.keys(g),h.selectorMapReducer(g,a.parentElement),"Unknown"):"Unknown");return b=a}}});c.register("Mako.ShadowCart.MetricsVars",
function(){return{UeCountIncrement:1,Suffixes:{ForBeginKey:":bb",ForEndKey:":be",ForPerformanceMeasureKey:":performance"},Keys:{AtcIntention:"shadowcart:atc-intention",AtcSubmitted:"shadowcart:atc-submitted",PreAtcEventQueue:"shadowcart:pre-atc-events",PostAtcEventQueue:"shadowcart:post-atc-events",IntentionToSubmission:"shadowcart:atc-intention-submitted"}}});c.when("Mako.ShadowCart.MetricsVars").register("Mako.ShadowCart.Metrics",function(d){function e(a,b){return"string"===typeof a?a.replace(b,
"")+b:null}function h(a,b){b=b||d.UeCountIncrement;l.ue&&l.ue.count&&l.ue.count(a,b)}var b=l.performance,g=!!(b&&b.mark&&b.measure&&b.getEntriesByName);return{markCount:h,markPerformanceBegin:function(a){(a=e(a,d.Suffixes.ForBeginKey))&&g&&b.mark(a)},markPerformanceEnd:function(a){var f=e(a,d.Suffixes.ForEndKey);if(f&&g){b.mark(f);var c=e(a,d.Suffixes.ForBeginKey);a=e(a,d.Suffixes.ForPerformanceMeasureKey);c&&f&&a&&(b.measure(a,c,f),f=b.getEntriesByName(a),0<f.length&&(f=f.pop())&&h(a,f.duration))}}}});
c.when("A","Mako.ShadowCart.Cbb","Mako.ShadowCart.Checkout","Mako.ShadowCart.EventNames","Mako.ShadowCart.Experiments","Mako.ShadowCart.Metrics","Mako.ShadowCart.MetricsVars").register("Mako.ShadowCart.CaptureAtcIntention",function(d,e,h,b,g,a,f){function c(r){return function(c){if(g.EventCycleOrderEnforcement){r.stopListening();var n=c.target,k=c.currentTarget}else n=c.target||null,k=c.currentTarget||null;if(n&&k){var q=h.getTypeByClickTarget(n);if(q!==h.Types.Unknown){a.markPerformanceBegin(f.Keys.IntentionToSubmission);
a.markCount(f.Keys.AtcIntention);a.markCount(f.Keys.AtcIntention+":"+q.toLowerCase());if(g.EventCycleOrderEnforcement)k=d.$(n).closest("form"),k=k.length?k[0]:null;else a:{for(var m=n.parentElement;m&&m!==k;m=m.parentElement)if("form"===m.nodeName.toLowerCase()){k=m;break a}k=null}m=e.getType();c={captureInstance:r,cbbType:m,checkoutButton:n,checkoutType:q,event:c,form:k};l(c,k,[b.AuiMashAtc,b.MakoCommonCartRequestComplete]);d.trigger(b.AtcIntention,c)}}}}function l(c,e,h){var k=function(){a.markPerformanceEnd(f.Keys.IntentionToSubmission);
a.markCount(f.Keys.AtcSubmitted);a.markCount(f.Keys.AtcSubmitted+":"+c.checkoutType.toLowerCase());d.trigger(b.AtcSubmitted,c);e&&e.removeEventListener("submit",k);d.each(h,function(a){d.off(a,k)});g.EventCycleOrderEnforcement&&c.captureInstance.startListening()};e&&e.addEventListener("submit",k);d.each(h,function(a){d.on(a,k)})}return function(a){var b=c(this);this.startListening=function(){a&&a.addEventListener("click",b,!0)};this.stopListening=function(){a&&b&&a.removeEventListener("click",b,!0)}}});
c.when("A","Mako.ShadowCart.CaptureAtcIntention","Mako.ShadowCart.EventNames","Mako.ShadowCart.Metrics","Mako.ShadowCart.MetricsVars","Mako.ShadowCart.Selectors").register("Mako.ShadowCart",function(d,e,c,b,g,a){function f(a){b.markPerformanceBegin(g.Keys.PreAtcEventQueue);b.markPerformanceEnd(g.Keys.PreAtcEventQueue)}function l(){b.markPerformanceBegin(g.Keys.PostAtcEventQueue);b.markPerformanceEnd(g.Keys.PostAtcEventQueue)}if(a=document.querySelector(a.DesktopRightColumn)||document.querySelector(a.BuyBox)||
null)d.on(c.AtcIntention,f),d.on(c.AtcSubmitted,l),(new e(a)).startListening()})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,a=g?g("AmazonDevicesDetailPageAssets",""):f;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,f,g){e.when("A").register("installments-checkbox-module",function(a){var c=a.$,e,d,b;return a.createClass({init:function(a){a.undelegate("#installments-payment-checkbox","change",c.proxy(this._handleChange,this));a.delegate("#installments-payment-checkbox","change",c.proxy(this._handleChange,
this));e=c("#addToCart");d=c("\x3cinput\x3e").attr({type:"hidden",name:"installments-check",id:"installments-check"});b=c("#OneClickBox");c("#installments-payment-checkbox").removeAttr("disabled");c("#installments-payment-checkbox").prop("checked")&&this._checkedHandler()},_handleChange:function(a){c("#installments-payment-checkbox").prop("checked")?this._checkedHandler():this._uncheckedHandler()},_checkedHandler:function(){e.prepend(d);b&&(b.find(".a-button-stack").addClass("aok-hidden"),b.find("#installmentsQuantity").removeClass("aok-hidden"),
b.find("#diodeQuantityDropdown").addClass("aok-hidden"))},_uncheckedHandler:function(){d.remove();b&&(b.find(".a-button-stack").removeClass("aok-hidden"),b.find("#installmentsQuantity").addClass("aok-hidden"),b.find("#diodeQuantityDropdown").removeClass("aok-hidden"))}})});"use strict";e.when("A","a-carousel-framework","ready").register("family-stripe",function(a,c){function e(a,c){g.each(function(){this.id!==a+"_carousel"&&d(this).toggleClass("invisible-family-stripe",c)})}var d=a.$,b=d("#dpx-subnav_div"),
f=d("#familyStripe_feature_div"),g=f.find(".family");f.insertAfter(b);(function(){d("#mako-subnav-helper .fs-content-links").each(function(){var a=this.id;d("#"+a+"_carousel").length&&d("#"+a+"_caret_wrapper").addClass("active")})})();a.declarative("family-stripe-hover","mouseenter mouseleave",function(a){var b=a.data.code;a="mouseenter"===a.type;var g=d("#"+b+"_carousel"),h=d("#"+b+" span");h.toggleClass("a-color-state",a);h.toggleClass("a-color-base",!a);g.length&&(f.toggleClass("active-family-stripe",
a),d("#"+b).toggleClass("active-family-stripe",a),g.toggleClass("active-family-stripe",a),e(b,a));c.createAll();c.initializeAll()})});"use strict";e.when("A","odsRefTagUtils","ready").execute(function(a,c){a=a.$;0<a("[name\x3d'submit.bundlebuilder']").length&&(a="mako_bb_button_is_present_"+a("#ASIN")[0].value,c.send(a,""))})});
/* ******** */
(function(k){var f=window.AmazonUIPageJS||window.P,u=f._namespace||f.attributeErrors,d=u?u("TradeInInstantSavingsAssets@launcher","TradeInInstantSavingsAssets"):f;d.guardFatal?d.guardFatal(k)(d,window):d.execute(function(){k(d,window)})})(function(k,f,u){k.when("A").register("trade-in-constants",function(d){return{unauthorizedCode:401,maxTradeInItemQuantityStatusCode:204,autoCompleteUrl:"https://completion.amazon.com/api/2017/suggestions?",autoCompleteUrlSuffix:"/api/2017/suggestions?",tradeInRouteBase:"/tradein/hzw/",
appraisalInputName:"appraisal",customerIpPreferenceInputName:"instantPaymentPreference",appraisalReturn:"RETURN_WORSE",appraisalAccept:"ACCEPT_WORSE",itemSelectEligibleContext:"eligible",itemSelectSearchContext:"search",maximumTradeInItemsCount:5,tradeInSearchAlias:"ereaders",tradeInSearchPageSize:20,tanookiV2DesktopRowSize:3,tanookiV2MobileRowSize:2,tanookiV2DesktopSearchPageSize:15,tanookiV2MobileSearchPageSize:10,tradeInSearchResultsLoadContext:"onLoad",tradeInSearchResultsScrollContext:"onScroll",
sessionStorageAccessErrorMsg:"Session storage access blocked",AUTH_PORTAL_ASSOC_HANDLE:{com:"amzn_tradein_horizonte_us",uk:"amzn_tradein_horizonte_uk",de:"amzn_tradein_horizonte_de"},tradeInSecondaryViewName:"tradeInSecondaryView",tradeInModalName:"tradeInModal",tradeInSideSheetName:"tradeInSideSheet",csrfKeyMap:"csrfKeyMap",csrfQueryParam:"requestToken",csrfSearchRequestKey:"searchRequestKey",csrfReviewRequestKey:"reviewRequestKey",csrfRemoveRequestKey:"removeItemRequestKey",csrfSubmitRequestKey:"submitRequestKey",
csrfSaveGradedItemKey:"saveGradedItemRequestKey",csrfSearchAsinCategoryItemKey:"searchAsinCategoryRequestKey",validConditions:"N/A;Neutral;New;LikeNew;VeryGood;Good;Working;Acceptable;Damaged;NonFunctional;Unacceptable;Ruined;Wrong Item".split(";"),resetAllElementsEvent:"resetAllElementsEvent",priceBlockSessionStorageKey:"launchTradeInPriceBlock",tanookiSessionStorageKey:"launchTradeIn",tanookiV2SessionStorageKey:"launchAsinCategoryTradeIn",priceBlockTanookiV2SessionStorageKey:"launchAsinCategoryTradeInPriceBlock",
priceBlockIngressType:"tradein-price-block",recycleAndSaveIngressType:"tradein-recycle-save",tanookiBuyboxMetric:"tanooki_launch_buy_box",tanookiBuyboxMobileMetric:"tanooki_launch_buy_box_mobile",tanookiPriceblockMetric:"tanooki_launch_price_block",tanookiPriceblockMobileMetric:"tannoki_launch_price_block_mobile",tanookiV2PastPurchaseSelectedMetric:"tv2_past_purchase_item_selected",refTagPrefix:"dp_trdv2_is_",refTagPrefixMobile:"dp_trdv2_is_m_",refTagPriceBlockPrefix:"dp_price_block_",refTagPriceBlockPrefixMobile:"dp_price_block_m_",
refTagRecycleAndSaveTanookiPrefix:"dp_recycle_save_tanooki_ingress_",refTagRecycleAndSaveTanookiPrefixMobile:"dp_recycle_save_tanooki_ingress_m",refTagListItemsView:"list_items_view",refTagSearchItemsView:"search_items_view",refTagConditionView:"condition_view",refTagConfirmationView:"confirmation_view",refTagSuccessfulView:"success_view",refTagSearchTermRequest:"search_term_request_",refTagSearchItemRemoveClick:"search_remove_click",refTagBackClick:"back_click",refTagListItemsContinueClick:"list_items_continue_click",
refTagGradedConditionClick:"graded_condition_",refTagAppraisalAccept:"appraisal_accept",refTagAppraisalReturn:"appraisal_return",refTagConditionContinueClick:"condition_continue_click",refTagReviewInstantPaymentView:"review_ip_view",refTagReviewNonInstantPaymentView:"review_nip_view",refTagReviewMixedBagPaymentView:"review_mb_view",refTagChangeConditionClick:"change_condition_click",refTagDeleteClick:"delete_click",refTagReturnAddressUpdateRequest:"return_address_update_request",refTagReturnAddressUpdateView:"return_address_update_view",
refTagTradeInMoreItems:"trade_more_items",refTagReturnToShopping:"return_to_shopping_click",refTagLogInPrompt:"log_in_prompt",refTagWeWantYouToKnow:"we_want_you_to_know_expanded",refTagPromotionInformationPopoverView:"promotion_information_panel_view",refTagAppraisalLearnMorePopoverView:"appraisal_learn_more_panel_view",refTagRegisteredDevicesLearnMorePopoverView:"registered_devices_learn_more_panel_view",refTagViewDropOffLocations:"view_drop_off_locations",refTagViewUBIFLocations:"view_ubif_locations",
refTagButtonExperimentPreFix:"tanooki_",refTagTanookiLaunchedWithBlue:"lwbl",refTagTanookiLaunchedWithBorder:"lwbo",refTagTermsAndConditions:"select_terms_and_conditions",refTagHowToLink:"select_how_to_link",refTagPrintShippingLabel:"tv2_print_shipping_label",refTagNearbyProcessorsMobile:"nearby_processors_m",refTagNearbyProcessorsDesktop:"nearby_processors",refTagStorefront:"sf",refTagDetailPage:"detail_page",refTagTv2:"tv2_",refTagPriceBlockIngress:"pb_",refTagAuthRequired:"AuthReq",refTagAuthCompleted:"AuthComp",
refTagBackButton:"Back_",refTagExit:"Exit_",refTagEnd:"End",refTagChangeCondition:"ChgCond",refTagRemoveCartItem:"RmvItm",refTagHazmatError:"HazmatError",refTagIPDowngrade:"IPDowngrade",refTagIPUpgrade:"IPUpgrade",refTagMFAFailure:"_mfaFailure",refTagMFASuccess:"_mfaSuccess",BIFURCATION_REF_TAG:["tradein-manufacturer","tradein-vg-type"],VIEW_REF_TAG:{manufacturer:"Man",model:"Mod","model-family":"ModFam","storage-size":"Stor","product-category":"product_category",carrier:"Carr","Console-Generation":"ConGen",
"Console-generation":"ConGen",Games:"Games",Accessories:"Access",platform:"Plat","trade-in-item-type":"IT",".refinement-search-view":"Search","#conditionViewTemplate":"Cond",".submit-trade-in-content":"Review",".tradein-cart-view":"Cart","#tradeinReviewYourOrderNextStepTemplate":"NxtStp"},PRODUCT_GROUP_REF_TAG:{gl_wireless:"Wir",gl_electronics:"Elec",gl_video_games:"VG",gl_digital_video_games:"VG",gl_digital_products_3:"AUCC"},PRODUCT_GROUP_SHORT_REF_TAG:{gl_wireless:"WL",gl_electronics:"WL",gl_video_games:"VG",
gl_digital_video_games:"VG",gl_digital_text:"eink",gl_digital_text_2:"tablet",gl_digital_products_3:"efd",gl_digital_devices_4:"smp",gl_digital_products_9_accessory:"vicc_rg",gl_vdo_devices:"vicc_bl",gl_digital_products_22_accessory:"eero",gl_digital_products_18_accessory:"health"},APPRAISAL_REF_TAG:{ACCEPT_WORSE:"Accpt",RETURN_WORSE:"Dcln"},eligibleListViewClass:".tradein-eligible-list-view",searchResultsListViewClass:".tradein-search-results-list-view",selectedItemConditionViewClass:".tradein-selected-item-condition-view",
selectedItemsConfirmationViewClass:".tradein-selected-items-confirmation-view",successfulViewClass:".tradein-successful-view",tradeInWrapperClass:".tradein-wrapper",checkboxItemThumbTemplateId:"#checkboxItemThumbTemplate",eligibleItemTemplateId:"#eligibleItemTemplate",questionRadioButtonTemplateId:"#questionRadioButtonTemplate",questionRadioTemplateId:"#questionRadioTemplate",radioButtonTemplateId:"#radioButtonTemplate",itemConfirmationTemplateId:"#itemConfirmationTemplate",asinDetailsViewTemplateId:"#asinDetailsViewTemplate",
eligibleListViewTemplateId:"#eligibleListViewTemplate",pastPurchasedListViewTemplateId:"#pastPurchasedListViewTemplate",searchResultsListViewTemplateId:"#searchResultsListViewTemplate",searchResultItemTemplateId:"#searchResultItemTemplate",selectedItemConditionViewTemplateId:"#selectedItemConditionViewTemplate",selectedItemsConfirmationViewTemplateId:"#selectedItemsConfirmationViewTemplate",successfulTradeInViewTemplateId:"#successfulTradeInViewTemplate",radioButtonRestrictionSelectionTemplateId:"#radioButtonRefinementSelectorViewTemplate",
cardItemRestrictionSelectionViewTemplateId:"#searchRestrictionCardItemSelectionTemplate",conditionViewTemplateId:"#conditionViewTemplate",tradeinHeaderViewTemplateId:"#tradeinHeaderViewTemplate",tradeinCartHeaderTemplateId:"#tradeInCartHeaderTemplate",tradeinCartSubmitViewHeaderTemplateId:"#tradeInCartHeaderTemplateSubmitView",tradeInCartPromosTemplateId:"#tradeInCartPromosTemplate",tradeInPromoPreviewViewTemplate:"#tradeInPromoPreviewViewTemplate",verticalComplexCardViewTemplateId:"#verticalComplexCardViewTemplate",
appraisalSelectionComponentViewId:"#appraisalSelectionComponentView",promotionInformationComponentId:"#promotionInformationComponent",appraisalWrapperClass:".appraisal-wrapper",conditionAppraisalMaxTivClass:".appraisal-max-tiv",appraisalTivHeaderClass:".appraisal-tiv-header",appraisalTivPriceClass:".appraisal-tiv",termsAndAgreementViewTemplateId:"#termsAndAgreementViewTemplate",multiItemTermsAndAgreementViewTemplateId:"#additionalItemTermsAndAgreementViewTemplate",multiItemTermsAndAgreementViewTemplateDevicesId:"#additionalItemTermsAndAgreementViewTemplateDevices",
tradeinReviewYourOrderNextStepTemplateId:"#tradeinReviewYourOrderNextStepTemplate",mixedOfferNextStepsTemplateId:"#mixedOfferNextStepsTemplate",multiItemConfirmationOrderDetailsViewComponentClass:".multiItemConfirmationOrderDetailsViewComponent",wirelessHowToViewTemplateId:"#wirelessHowToViewTemplate",howToLinkHelperTitleId:"#categoryHelperTitle",tradeinFooterComponentId:"#tradeinFooterComponent",successfulTradeInBannerComponentViewId:"#successfulTradeInBannerComponentView",restrictionSelectionViewTemplateId:"#restrictionSelectionViewTemplate",
tradeInSubmitConditionButtonTemplateId:"#tradeInSubmitConditionButtonTemplate",conditionQuestionnaireListClass:".questionnaires-list",conditionQuestionContainerClass:".condition-question-container",conditionQuestionButtonSelectorClass:".question-selector-button",conditionPageEstimatedTivComponentsSelector:"#tradeinEstimateOfferComponent .estimate-component",conditionPageFinalTivComponentsSelector:"#tradeinEstimateOfferComponent .final-component",conditionPageHeaderTivSelector:"#tradeinEstimateOfferComponent #tradeInValue",
binaryQuestionnaireListViewTemplateId:"#binaryQuestionnaireListViewTemplate",searchRefinementItemSelectionTemplateId:"#searchRefinementItemSelectionTemplate",refinementSearchViewTemplateId:"#refinementSearchViewTemplate",refinementSearchInputSelector:".refinement-search-input",refinementSearchInputMobileSelector:".refinement-search-input input",refinementSearchAllOffersCountId:"#searchAllOffersCount",refinementSearchOnlyOffersCountId:"#searchOnlyOffersCount",refinementSearchResultSelector:".refinement-selection-content .refinement-column",
shipmentDetailViewComponentId:"#shipmentDetailViewComponent",dropOffBannerNoLinkComponentId:"#dropOffBannerNoLinkComponent",dropOffBannerNoLinkTemplateId:"#dropOffBannerNoLinkTemplate",dropOffLocationExpanderId:"#dropOffLocationExpander",dropOffLocationsTemplateId:"#dropOffLocationsTemplate",dropOffLocationListTemplateId:"#dropOffLocationListTemplate",offlineMessageSectionClass:".offline-message-section",tradeInOfferOverviewTemplateId:"#tradeInOfferOverviewTemplate",categoryRefinementSelectionItemComponentId:"#categoryRefinementSelectionItemComponent",
tradeinCartItemComponentId:"#tradeInCartItemComponent",shipmentDetailsHeaderComponentClass:".shipment-details-header-component",tradeinSubmitButtonComponentClass:".tradein-submit-button-container",tradeinSubmitWrapperComponentId:"#tradeinSubmitWrapper",refinementSelectionViewWrapperClass:".refinement-selection-view",refinementContentWrapperClass:".refinement-content-wrapper",refinementSearchViewClass:".refinement-search-view",submitTradeInWrapperClass:".submit-trade-in-content",searchRestrictionWrapperClass:".search-restriction-wrapper",
searchLoadMoreResultsWrapperClass:".load-more-results-wrapper",cardItemRestrictionSelectionViewClass:".restriction-selection-view",wirelessTradeInReviewYourOrderViewClass:".wireless-tradein-review-your-order-view",tradeInCartViewClass:".tradein-cart-view",tradeInCartTemplateId:"#tradeInCartViewTemplate",tradeinCartTotalTivElement:".cart-total-tiv",tradeinCartGCValueIpElement:"#gcValueIp",tradeinCartGCValueNonIpElement:"#gcValueNonIp",tradeinCartIpItemsSection:".tradein-cart-view-ip-items",tradeinCartNonIpItemsSection:".tradein-cart-view-nip-items",
tradeinCartIpItemsList:".tradein-cart-item-list-ip",tradeinCartNonIpItemsList:".tradein-cart-item-list-nip",continueConditionButtonViewClass:".continue-trigger",submitButtonViewClass:".handle-submit-your-tradein",reviewButtonViewClass:".handle-review-your-tradein",tradeInMoreItemsButtonViewClass:".handle-trade-in-more-items",agreementCheckboxTarget:".agreement-checkbox-target",tradeInMoreItemsButtonContainerClass:".tradein-more-items-button-container",searchInputClass:".search-input",searchInputClassMobile:".search-input input",
searchFormClass:".search-form",searchSuggestionsClass:".tradein-autocomplete-dropdown-menu",eligibleItemsCountId:"#eligibleItemsCount",dateRegisteredClass:".registered-date",eligibleItemListClass:".tradein-eligible-item-list",eligibleItemListWrapper:".tradein-eligible-item-list-wrapper",searchResultListClass:".tradein-search-result-list",reviewTradeInItemsSubmitId:"#reviewTradeInItemsSubmit",customerPastDevicesPurchasesCarouselContainerId:"#customerPastDevicesPurchasesCarouselContainer",currentSelectedItemIndexId:"#currentSelectedItemIndex",
selectedItemTotalCountId:"#selectedItemTotalCount",backButtonClass:".back-button",continueButtonClass:".continue-button",alertMaxItemQuantityClass:".tradein-error-quantity-limit",alertMaxItemsWarningClass:".tradein-warning-max-items",alertMaxItemsWarningClassMobile:".tradein-mobile-warning-max-items",alertMaxGCValueWarningClass:".tradein-warning-max-gc-value",alertMaxGCValueWarningClassMobile:".tradein-mobile-warning-max-gc-value",alertPromptLoginClass:".tradein-prompt-log-in",alertItemAcceptableClass:".tradein-info-unacceptable-error",
alertItemAcceptableClassMobile:".tradein-mobile-info-unacceptable-error",alertMaxItemQuantityBannerClass:".tradein-max-quantity-error",loadingSpinnerClass:".tradein-loading-spinner",loadingSideSheetSpinnerClass:".asin-selection-tradein-loading-spinner",searchLoadingSpinnerClass:".tradein-search-loading-spinner",tradeinCartHeaderItemsSingularClass:".tradein-cart-header-items-singular",tradeinCartHeaderItemsPluralClass:".tradein-cart-header-items-plural",tradeInQuantityExceededErrorSelector:".tradein-templates .tradein-info-quantity-exceeded-error",
tradeInAmountExceededErrorSelector:".tradein-templates .tradein-info-amount-exceeded-error",tradeInErrorExitButtonSelector:".tradein-templates .tradein-error-exit-button",tradeInMixHazmatErrorSelector:".tradein-templates .tradein-info-mix-hazmat-error",tradeInMixHazmatCartItemErrorSelector:".tradein-templates .tradein-info-mix-hazmat-error-cart-item",tradeInHazmatItemList:".hazmat-item-list",tradeInHazmatListItemTemplate:".hazmat-asin-list-item-template",tradeInNonTradeableErrorSelector:".tradein-templates .tradein-info-non-tradeable-error",
complexCardRefinementSelectionViewType:"COMPLEX_CARD_VIEW",simpleCardRefinementSelectionViewType:"SIMPLE_CARD_VIEW",containedButtonRefinementSelectionViewType:"CONTAINED_BUTTON_VIEW",searchRefinementViewType:"SEARCH_CARD_VIEW",tradeInItemTypeEcho:"US_Echo",tradeInEchoGl:"gl_digital_products_3",tradeInWirelessGl:"gl_wireless",tradeInVGGl:"gl_video_games",tradeInDigitalVGGL:"gl_digital_video_games",tradeInElectronicsGL:"gl_electronics",tradeInVGProductGroups:["gl_video_games","gl_digital_video_games"],
wirelessVgProductGroups:["gl_wireless","gl_video_games","gl_digital_video_games","gl_electronics"],tradeInCCCardEligibleGls:["gl_wireless"],tradeInLaunchButtonDeclarativeActionSelector:"#tradeInLaunchAction",instantPaymentPreferenceInputName:"instantPaymentPreference",instantPaymentNow:"PAID_NOW",instantPaymentLater:"PAID_LATER"}});"use strict";k.when("A","trade-in-constants","tanooki-ingress-button-treatment").register("trade-in-common-utils",function(d,e,b){var c=d.$,g={locale:null,currencyCode:null,
productGroup:null,deviceType:null,asin:null,selectedAsin:null,modalTitle:null,isStorefront:!1,refTagPrefix:null,refTagPrefixMobile:null,priceBlockEnabled:null,buyingPriceUpgradeAsin:null,promoDiscount:null,autoSearchTerm:"",captureTradeInContext:function(){var a=c("#tanookiWidgetState").data("tanookiWidgetState");a?(a.hasOwnProperty("productGroup")?this.productGroup=a.productGroup:this.recordMetric("productGroupMissing"),a.hasOwnProperty("deviceType")?this.deviceType=a.deviceType:this.recordMetric("deviceTypeMissing"),
a.hasOwnProperty("recycleAndSaveTitle")?this.modalTitle=a.recycleAndSaveTitle:a.hasOwnProperty("tanookiTitle")?this.modalTitle=a.tanookiTitle:this.recordMetric("deviceModalHeaderMissing"),a.hasOwnProperty("asin")&&(this.asin=a.asin),a.hasOwnProperty("buyingPrice")&&(this.buyingPriceUpgradeAsin=a.buyingPrice),a.hasOwnProperty("selectedAsin")&&(this.selectedAsin=a.selectedAsin),a.hasOwnProperty("autoSearchTerm")&&(this.autoSearchTerm=a.autoSearchTerm)):this.recordMetric("widgetContextMissing")},updateTradeInContext:function(a){var b=
c("#tanookiWidgetState").data("tanookiWidgetState");b.hasOwnProperty("productGroup")&&a.hasOwnProperty("productGroup")&&(b.productGroup=a.productGroup);b.hasOwnProperty("deviceType")&&a.hasOwnProperty("deviceType")&&(b.deviceType=a.deviceType);b.hasOwnProperty("tanookiTitle")&&a.hasOwnProperty("tanookiTitle")&&(b.tanookiTitle=a.tanookiTitle);b.hasOwnProperty("asin")&&a.hasOwnProperty("asin")&&(b.asin=a.asin);b.hasOwnProperty("buyingPrice")&&a.hasOwnProperty("buyingPrice")&&(b.buyingPrice=a.buyingPrice);
a.hasOwnProperty("selectedAsin")&&(b.selectedAsin=a.selectedAsin);a.hasOwnProperty("autoSearchTerm")&&(b.autoSearchTerm=a.autoSearchTerm);document.getElementById("tanookiWidgetState").dataset.tanookiWidgetState=JSON.stringify(b);this.captureTradeInContext()},setProductGroup:function(a){this.productGroup=a},getProductGroup:function(){return this.productGroup},setRefTagPrefix:function(a){this.refTagPrefix=a},getRefTagPrefix:function(){return this.refTagPrefix?this.refTagPrefix:e.refTagPrefix},getUpgradeAsinBuyingPrice:function(){return this.buyingPriceUpgradeAsin},
setRefTagPrefixMobile:function(a){this.refTagPrefixMobile=a},getRefTagPrefixMobile:function(){return this.refTagPrefixMobile?this.refTagPrefixMobile:e.refTagPrefixMobile},getCurrentAsin:function(){return this.asin},getSelectedAsin:function(){return this.selectedAsin},getDeviceType:function(){return this.deviceType},getModalTitle:function(){return this.modalTitle||""},getIsStoreFront:function(){return this.isStorefront},setIsStoreFront:function(a){this.isStorefront=a},setLocale:function(a){this.locale=
a},setPriceBlockEnabled:function(a){this.priceBlockEnabled=a},isPriceBlockEnabled:function(){return this.priceBlockEnabled},setPromoDiscount:function(a){this.promoDiscount=a},getPromoDiscount:function(){return this.promoDiscount},setCurrencyCode:function(a){this.currencyCode=a},formatCurrency:function(a,b){this.currencyCode||this.recordError("Missing currency code","trade-in-common-utils");var e={style:"currency",currency:this.currencyCode};b&&c.extend(e,b);a=parseFloat(a);return a.toLocaleString(this.locale.replace("_",
"-"),e)},formatDate:function(a){if(!a)return"";a=a.split(" ");return a[0]+" "+a[1]+" "+a[2]},getRedirectAuthUrl:function(a){var b=f.location,c="https://"+b.host;b=b.pathname+b.search+b.hash;var e=c;-1<c.indexOf("aka.corp.amazon.com")&&(e="https://development.amazon.com");return e+"/ap/signin?_encoding\x3dUTF8\x26openid.assoc_handle\x3d"+a+"\x26openid.claimed_id\x3dhttp://specs.openid.net/auth/2.0/identifier_select\x26openid.identity\x3dhttp://specs.openid.net/auth/2.0/identifier_select\x26openid.mode\x3dcheckid_setup\x26openid.ns\x3dhttp://specs.openid.net/auth/2.0\x26openid.return_to\x3d"+
encodeURIComponent(c+b)},redirectToAuth:function(a,b){a=this.getRedirectAuthUrl(a);try{f.sessionStorage&&!this.hasStorefrontAutoLaunchParams()&&sessionStorage.setItem(b,!0)}catch(p){this.recordSessionStorageBlockedError(p)}f.location.href=a},redirectToMFA:function(a){var b="https://"+f.location.host;-1<b.indexOf("aka.corp.amazon.com")&&(b="https://development.amazon.com");f.location.href=encodeURI(b+a)},getAuthPortalHandleFromHostname:function(){var a=f.location.hostname.match(/^(?:(?:(?:(\w\w)-)?pre-prod)|(?:(?:(\w\w)-)?development)|(?:.+))\.amazon.(?:(\w\w)|(com)|(?:co\.(?:(\w\w))))?$/);
if(a)for(var b=1;b<a.length;b++)if(a[b])return e.AUTH_PORTAL_ASSOC_HANDLE[a[b]];return e.AUTH_PORTAL_ASSOC_HANDLE.com},recordError:function(a,b){f.ueLogError&&f.ueLogError({message:a,logLevel:"ERROR",attribution:"tradein: "+b})},recordSessionStorageBlockedError:function(a){f.ueLogError&&f.ueLogError({message:a,logLevel:"WARN",attribution:"tradein: "+e.sessionStorageAccessErrorMsg})},recordMetric:function(a){f.ue&&f.ue.count&&(a="tradeIn_"+a,f.ue.count(a,(f.ue.count(a)||0)+1))},findMinMaxTivInContainer:function(a){var b,
c;Object.keys(a).forEach(function(e,d){e=a[e];0===d?c=b=e.tiv:(d=e.tiv,b=d<b?d:b,c=d>c?d:c)});return[b,c]},getMashModalUrl:function(a){var b="https://"+f.location.host,c="\x26cb\x3d"+Math.round((new Date).getTime()/1E3);return b+a+c},getCsrfTokenByKey:function(a,b){return b.hasOwnProperty(e.csrfKeyMap)&&b[e.csrfKeyMap][a]?b[e.csrfKeyMap][a]:""},updateCsrfTokenByKey:function(a,b,c){b.hasOwnProperty(a)&&c.hasOwnProperty(e.csrfKeyMap)&&(c[e.csrfKeyMap][a]=b[a])},recordRefTag:function(a,b,c,e){a=b+c+
this.getIngressPageRefTag()+"_"+a;e=a+"_"+this.deviceType+"_"+this.getProductGroupShortReftag(e);this.doRecordRefTag(a);this.doRecordRefTag(e)},recordTv2RefTag:function(a,b,c){var e="";Array.isArray(c)&&0<c.length&&(e=c.join("_")+"_");a=b+this.getTv2RefTagPrefix()+"_"+e+a+"_"+this.getTv2RefTagPostfix();this.doRecordRefTag(a)},doRecordRefTag:function(a){d.get(a,{error:c.proxy(function(a,b,c){this.recordError(b+"::"+c,"Error encountered during refTag record request")},this)})},getIngressButtonRefTag:function(){return c(".tradein-price-block.blue").length?
e.refTagTanookiLaunchedWithBlue:e.refTagTanookiLaunchedWithBorder},getIngressPageRefTag:function(){return this.isStorefront?e.refTagStorefront:e.refTagDetailPage},getIngressTypeRefTag:function(){return this.isPriceBlockEnabled()?e.refTagPriceBlockIngress:""},getDRAMIngressRefTag:function(){var a=this.getRefTagPrefix(),b=c('input[name\x3d"tanookiPainterRefTag"]'),e=c('input[name\x3d"tanookiPainterSlotId"]');return a=b.length&&""!==b.val()?a+(b.val()+"_tile_launch"):e.length&&""!==e.val()?a+(e.val()+
"_tile_launch"):a+"tile_launch"},isMobileVariant:function(a){return 0<=["mobile","mobileApp","mobileWeb"].indexOf(a)},getTanookiV2RowSize:function(a){return this.isMobileVariant(a)?e.tanookiV2MobileRowSize:e.tanookiV2DesktopRowSize},getTanookiV2SearchPageSize:function(a){return this.isMobileVariant(a)?e.tanookiV2MobileSearchPageSize:e.tanookiV2DesktopSearchPageSize},isWirelessVgProductGroup:function(a){return-1!==e.wirelessVgProductGroups.indexOf(a)},isVGProductGroup:function(a){return-1!==e.tradeInVGProductGroups.indexOf(a)},
shouldLaunchTanookiOnPageLoad:function(a){try{if(f.sessionStorage){var b=sessionStorage.getItem(a);this.updateWidgetStateFromSessionStorage();return b?(sessionStorage.removeItem(a),this.resetSessionStorage(),!0):!1}}catch(p){return this.recordSessionStorageBlockedError(p),!1}},resetSessionStorage:function(){try{f.sessionStorage&&(sessionStorage.removeItem("storefront-product-group"),sessionStorage.removeItem("storefront-device-type"),sessionStorage.removeItem("storefront-modal-title"),sessionStorage.removeItem("is-storefront"))}catch(a){this.recordSessionStorageBlockedError(a)}},
updateWidgetStateFromSessionStorage:function(){try{if(f.sessionStorage){var a={productGroup:sessionStorage.getItem("storefront-product-group"),deviceType:sessionStorage.getItem("storefront-device-type"),tanookiTitle:sessionStorage.getItem("storefront-modal-title")};a.productGroup&&this.updateTradeInContext(a)}}catch(r){this.recordSessionStorageBlockedError(r)}},hasStorefrontAutoLaunchParams:function(){var a=f.location.href;return-1!==a.indexOf("tipg\x3d")||-1!==a.indexOf("selectedAsin\x3d")?!0:!1},
getStorefrontSessionStorage:function(){try{f.sessionStorage&&sessionStorage.getItem("is-storefront")&&(this.isStorefront=!0)}catch(a){this.recordSessionStorageBlockedError(a)}return this.getIsStoreFront()},setStorefrontSessionStorage:function(a){try{f.sessionStorage&&(a&&sessionStorage.setItem("is-storefront",!0),sessionStorage.setItem("storefront-product-group",g.getProductGroup()),sessionStorage.setItem("storefront-device-type",g.getDeviceType()),sessionStorage.setItem("storefront-modal-title",
g.getModalTitle()))}catch(r){this.recordSessionStorageBlockedError(r)}},getSortedConditionTradeInValues:function(a){var b=[],d=a.conditionOfferMap,g=e.validConditions,f;for(f in d)if(d.hasOwnProperty(f))if(-1===c.inArray(f,g))this.recordError("Invalid condition",f+" was not found in validConditions array for type: "+a.tradeInItemType);else{var l=d[f];l.hasOwnProperty("tiv")&&b.push(l.tiv)}b.sort(function(a,b){return a-b});return b},getProductGroupShortReftag:function(a){return e.PRODUCT_GROUP_SHORT_REF_TAG[a]},
getTv2RefTagPrefix:function(){return e.refTagTv2+this.getIngressPageRefTag()+"_"+this.getIngressTypeRefTag()+this.getProductGroupShortReftag(this.productGroup)},getTv2RefTagPostfix:function(){return("web"===this.deviceType?"D_":"M_")+e.PRODUCT_GROUP_REF_TAG[this.productGroup]},generatePrettyTitle:function(a){return a.split("(Trade")[0]},getIngressTypeFromActionParams:function(a){return a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("ingressType")?a.data.ingressType:null},isGlEligibleForPastPurchases:function(a){return a===
e.tradeInEchoGl},isGlEligibleForPromotions:function(a){return a===e.tradeInEchoGl},isCETechGl:function(a){return a===e.tradeInWirelessGl||a===e.tradeInDigitalVGGL||a===e.tradeInVGGl||a===e.tradeInElectronicsGL},isTradeInLaunchedFromWisper:function(a){return["launch-tanooki-wireless","redirect-to-login-wireless"].includes(a)},isGlEligibleForCCCard:function(a){return e.tradeInCCCardEligibleGls.includes(a)},createNearbyProcessorsList:function(a,b,e){b.empty();c.each(a,c.proxy(function(a,d){a=c("\x3cdiv/\x3e");
var l=c("\x3cdiv/\x3e"),g=c("\x3cdiv/\x3e"),h=c("\x3cdiv/\x3e"),f=d.processorAddress.line1+" "+d.processorAddress.line2,m=d.processorAddress.city+" "+d.processorAddress.state+" "+d.processorAddress.postalCode+" "+d.processorAddress.countryCode;a.html(d.processorAddress.fullName).addClass("a-text-bold a-spacing-top-medium");l.html(f);g.html(m);b.append(a).append(l).append(g).append(h);e.append(b)},this))},renderPriceBlockRecommendationMessages:function(a,b,c){var e=g.getUpgradeAsinBuyingPrice();e=
parseFloat(e);a.find("#selectedItemTotalCount").html(b);b=g.getPromoDiscount()?g.getPromoDiscount():0;c=e-(e*b+c);0<=c?(a.find("#finalPriceLowTiv").html(g.formatCurrency(c)),a.find("#buyingPrice").html(g.formatCurrency(e)).wrap("\x3cs\x3e"),a.find(".low-tiv").show(),a.find(".high-tiv").hide()):(a.find("#finalPriceHighTiv").html(g.formatCurrency(0)),a.find("#buyingPrice").html(g.formatCurrency(e)).wrap("\x3cs\x3e"),a.find("#gcAmount").html(g.formatCurrency(-1*c)),a.find(".low-tiv").hide(),a.find(".high-tiv").show());
a.show()}};d.on("a:tradein:record:reftag",function(a){g.doRecordRefTag(e.tradeInRouteBase+"recordRefTag?ref_\x3d"+a.refTag)});d.on("a:pageUpdate",function(){d.state.parse();g.captureTradeInContext()});return g});"use strict";k.when("A","a-modal","trade-in-constants","trade-in-common-utils","tradein-desktop-side-sheet","tanooki-rebates-cx-launcher","recycle-and-save-helper","ready").execute(function(d,e,b,c,g,a,k){function p(a){-1<a.indexOf(b.refTagPriceBlockPrefix)&&c.setRefTagPrefix(b.refTagPriceBlockPrefix);
if(!c.getIsStoreFront()){var d=b.tradeInRouteBase+"recordRefTag?deviceType\x3d"+c.getDeviceType()+"\x26ref_\x3d",m=c.getIngressButtonRefTag();c.recordRefTag(m,d,b.refTagButtonExperimentPreFix,c.getProductGroup())}(d=c.getProductGroup())?(a=a+"_"+d,a={deviceType:c.getDeviceType(),currentAsin:c.getCurrentAsin(),buyingPrice:c.getUpgradeAsinBuyingPrice(),selectedAsin:c.getSelectedAsin(),productGroup:d,ref_:a},""!==c.autoSearchTerm&&(a.autoSearchTerm=c.autoSearchTerm,m=l("#tanookiWidgetState").data("tanookiWidgetState"),
m.autoSearchTerm="",c.updateTradeInContext(m)),a=b.tradeInRouteBase+"getCustomerItems?"+l.param(a)):a=b.tradeInRouteBase+"generalerror?ref_\x3d"+(a+"_pg_missing");(d=e.get(b.tradeInModalName+"_"+d))||(d=e.create(l("\x3cdiv /\x3e"),{url:a,name:b.tradeInModalName,header:c.getModalTitle(),width:700,cache:!1,padding:"none",timeout:3E4}));d.show()}function r(){m||c.recordTv2RefTag(b.refTagAuthRequired,n);var a=c.getAuthPortalHandleFromHostname();c.isPriceBlockEnabled()?c.redirectToAuth(a,b.priceBlockTanookiV2SessionStorageKey):
c.redirectToAuth(a,b.tanookiV2SessionStorageKey);c.setStorefrontSessionStorage(h)}function q(a){var e=c.getIngressButtonRefTag();c.recordTv2RefTag(e,n);a=b.refTagTv2+a;var d=c.getProductGroup(),w=c.getCurrentAsin();d?(e=a+"_"+d,e={deviceType:c.getDeviceType(),productGroup:d,ref_:e,currentAsin:w,buyingPrice:c.getUpgradeAsinBuyingPrice()},e=l.param(e),e=b.tradeInRouteBase+"wirelessTradeInSearchRefinements?"+e):e=b.tradeInRouteBase+"generalerror?ref_\x3d"+(a+"_pg_missing");t=l.get(e);g.initialize();
l("body").addClass("scroll-disabled");g.show(t,function(){m=!0;0<l("#tradein-desktop-side-sheet").find(".tradein-logged-out-view").length?c.recordTv2RefTag(b.refTagAuthRequired,n):0<=a.indexOf("auth_launch")&&c.recordTv2RefTag(b.refTagAuthCompleted,n)})}var l=d.$,t,h=c.getIsStoreFront(),n=b.tradeInRouteBase+"recordRefTag?deviceType\x3d"+c.getDeviceType()+"\x26ref_\x3d",m=!1,x=null;c.captureTradeInContext();h=c.getStorefrontSessionStorage();c.shouldLaunchTanookiOnPageLoad(b.tanookiV2SessionStorageKey)?
q(b.refTagPrefix+"auth_launch"):c.shouldLaunchTanookiOnPageLoad(b.priceBlockTanookiV2SessionStorageKey)&&(c.setPriceBlockEnabled(!0),q(b.refTagPrefix+"auth_launch"));d.on("a:popover:afterHide:tradeInModal",function(){x&&x.focus()});d.on("a:tradein:tanooki:launch",function(a){c.setIsStoreFront(!0);c.updateTradeInContext(a.widgetState);d.trigger("a:tradein:productgroup:update");var b=a.refTag?a.refTag:c.getDRAMIngressRefTag();c.isWirelessVgProductGroup(a.widgetState.productGroup)?q(b):p(b)});d.declarative("launch-tanooki-wireless",
"click",function(){q("launch")});d.declarative("launch-tanooki-v2","click",function(a){c.getIngressTypeFromActionParams(a)===b.priceBlockIngressType&&c.setPriceBlockEnabled(!0);q("launch")});d.declarative("launch-tanooki-v2-storefront","click",function(a){c.setIsStoreFront(!0);c.updateTradeInContext(a.data);q("launch")});d.declarative("redirect-to-login-wireless","click",function(){r()});d.declarative("redirect-to-login-v2","click",function(a){c.getIngressTypeFromActionParams(a)===b.priceBlockIngressType&&
c.setPriceBlockEnabled(!0);r()});d.declarative("launch-tanooki","click",function(a){var e=c.getIngressTypeFromActionParams(a),d=b.refTagPrefix,m=b.tanookiBuyboxMetric;x=a.$target;e===b.priceBlockIngressType?(d=b.refTagPriceBlockPrefix,m=b.tanookiPriceblockMetric):e===b.recycleAndSaveIngressType&&(d=b.refTagRecycleAndSaveTanookiPrefix);c.setRefTagPrefix(d);p(d+"launch");c.recordMetric(m)});d.declarative("redirect-to-login","click",function(a){a=c.getIngressTypeFromActionParams(a);var e=c.getAuthPortalHandleFromHostname();
c.getIsStoreFront()&&c.setStorefrontSessionStorage(!0);var d=b.tanookiSessionStorageKey;a===b.priceBlockIngressType&&(d=b.priceBlockSessionStorageKey);c.redirectToAuth(e,d)});try{f.sessionStorage&&(c.shouldLaunchTanookiOnPageLoad(b.tanookiSessionStorageKey)&&p(b.refTagPrefix+"auth_launch"),sessionStorage.getItem(b.priceBlockSessionStorageKey)&&("launch-recycle-and-save"===l(b.tradeInLaunchButtonDeclarativeActionSelector).data("action")?k.launchRecycleAndSaveWeb(e,"_auth_launch"):p(b.refTagPriceBlockPrefix+
"auth_launch"),sessionStorage.removeItem(b.priceBlockSessionStorageKey)))}catch(w){c.recordSessionStorageBlockedError(w)}d.trigger("a:tradein:tanooki:launcher:loaded")});"use strict";k.when("A","ready").register("tradein-desktop-side-sheet",function(d){var e,b=d.$,c,g,a;return{initialize:function(){c=b("\x3cdiv id\x3d'a-popover-lgtbox' class\x3d'a-declarative attach-popover tradein-lgtbox' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e");c.hide();c.appendTo(document.body);c.click(this.close);
a=b('\x3cdiv id\x3d"tradein-desktop-side-sheet" class\x3d"a-section"\x3e\x3c/div\x3e');a.addClass("aok-hidden");b('\x3cdiv class\x3d"a-spinner-wrapper sidesheet-spinner"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/div\x3e').appendTo(a);a.appendTo(document.body);b(document).unbind("keydown",this.onKeyDown);b(document).keydown(this.onKeyDown);e=this.close},onKeyDown:function(a){27===a.which&&e()},close:function(){d.trigger("tanooki-trade-in-desktop-side-sheet-close");c.hide();
b(a).animate({right:g},{duration:500,complete:function(){b(a).remove();b(c).remove();b("body").removeClass("scroll-disabled")}})},show:function(e,d){b(a).removeClass("aok-hidden");b(a).animate({right:"0"},500,"linear");b(a).find(".sidesheet-spinner").addClass("active");c.show();b.when(e).done(function(c){b(a).find(".sidesheet-spinner").remove("active");b("#tradein-desktop-side-sheet").html(c);d&&"function"===typeof d&&d()});g=b(a).css("right")}}});"use strict";k.when("trade-in-cc-device").register("trade-in-cc-constants",
function(d){return{featureName:"tradeInInstantSavingsCC",featureAttribution:"Website/CETech/WirelessPlans",actions:{expand:"trade-in-cc-card:expanded",collapse:"trade-in-cc-card:collapse",atfRefresh:"PageRefresh:ATF",ingress:"trade-in-button:ingress",postTradeInExp:"trade-in-cc:postTradeInExp"},selectors:{expanderIcon:".trade-in-cc-header-icon",expanderContentWrapper:".trade-in-cc-expander-content-wrapper",expanderContent:".trade-in-cc-expander-content",expanderContentPre:".trade-in-cc-expander-content-pre",
tradeInCCCardTemplate:".trade-in-cc-card-template",successMessage:".trade-in-cc-card-template .trade-in-cc-success-message",tivMessage:".trade-in-cc-tiv-message",promoMessage:".trade-in-cc-promo-message",subtitleWrapper:".trade-in-cc-subtitle-wrapper",subtitle:".trade-in-cc-subtitle",submittedMessage:".trade-in-cc-submitted-message",ccCardTotalTiv:".cc-card-total-tiv",ccCardIpTiv:".cc-card-ip-tiv",promoTitle:".trade-in-cc-promo-title",promoSubtitle:".trade-in-cc-promo-subtitle",ipPromoSubtitle:".trade-in-cc-ip-promo-subtitle",
nipPromoSubtitle:".trade-in-cc-non-ip-promo-subtitle",promoTitleSingle:".trade-in-cc-promo-title-single",singlePromoTitle:".single-promo-title",promoTitleMultiple:".trade-in-cc-promo-title-multiple",lastPromoTitle:".last-promo-title",remainingPromoAmount:".remaining-promo-amount",ccPostTradeInMessageTemplate:".cc-post-trade-in-message-template",ccTiMessageContent:".cc-post-trade-in-message-content",ccIpTiMessage:".trade-in-cc-ip-ti-message",ccNipTiMessage:".trade-in-cc-non-ip-ti-message",ccMixedTiMessage:".trade-in-cc-mix-ti-message",
ccPromoMessageContent:".trade-in-cc-promo-message-content",defaultOptionSwatch:".tradein-twister-box-group-default-option",expandContentSuccessMessage:".trade-in-cc-expander-content .trade-in-cc-success-message"},classes:{hidden:"aok-hidden",rotate:"rotate",tradeInCCExpanded:"trade-in-cc-expander-content-wrapper-expanded",contentHidden:"content-hidden",selectedSwatch:"tradein-options-selected-box-group"}}});"use strict";k.when("A","trade-in-cc-constants").register("trade-in-cc-expander",function(d,
e){var b=d.$,c=e.selectors,g=e.classes;return{toggleCard:function(a){b(c.expanderIcon).toggleClass(g.rotate,a);b(c.subtitleWrapper).toggleClass(g.hidden,a);b(c.expanderContent).toggleClass(g.contentHidden,!a);return b(c.expanderContentWrapper).toggleClass(g.tradeInCCExpanded,a).hasClass(g.tradeInCCExpanded)}}});"use strict";k.when("A","cc-manager","trade-in-cc-constants").register("trade-in-cc-registration",function(d,e,b){var c={featureName:b.featureName,featureAttribution:b.featureAttribution};
d.on(b.actions.expand,function(){e.cardExpanded(b.featureName)});e.registerFeature(c,{init:function(){},validateInputParams:function(){return!0},cardCollapse:function(){d.trigger(b.actions.collapse)}})});"use strict";k.when("A","trade-in-cc-constants","trade-in-cc-expander","trade-in-cc-registration").execute(function(d,e,b){var c=d.$,g=e.actions,a=e.selectors,f=e.classes;d.declarative("toggle-trade-in-cc-card","click",function(){var e=!c(a.expanderContentWrapper).hasClass(f.tradeInCCExpanded);b.toggleCard(e);
e&&d.trigger(g.expand)});d.on(g.collapse,function(){b.toggleCard(!1)});d.on(g.atfRefresh,function(){b.toggleCard(!0)});b.toggleCard(!0)});"use strict";k.when("A","trade-in-cc-constants","trade-in-cc-registration").execute("trade-in-cc-metrics",function(d,e){var b=e.actions,c=function(){var b=f.ue;return{incrementCount:function(a){b&&b.count&&a&&(a="twisterPlus_tradeIn_"+a+"."+e.featureName,b.count(a,(b.count(a)||0)+1))}}}();d.declarative("launch-tanooki-v2",function(){d.trigger(b.ingress)});d.on(b.expand,
function(){c.incrementCount("ccExpanded")});d.on(b.ingress,function(){c.incrementCount("ccIngress")})});"use strict";k.register("trade-in-cc-device",function(){return{isMobile:!1}});"use strict";k.register("trade-in-cc-experiment-clean-up",function(){return{isEnabled:!0}});"use strict";k.register("tanooki-ingress-button-treatment",function(){return{isEnabled:!1}});"use strict";k.register("tanooki-rebates-cx-launcher",function(){return{isEnabled:!0}});"use strict";k.when("A","a-modal","trade-in-constants",
"trade-in-common-utils","recycle-and-save-constants","recycle-and-save-helper","ready").execute(function(d,e,b,c,g,a){function f(){var a=e.get("upgrader_claim_modal");a&&a.hide()}var k=d.$,v=null,q=!1;d.declarative("upgrader-claim","click",function(a){a=a.data;a.isClaimed=q;a.isMobile=!1;var b=k(".claim-spinner");b.first().removeClass("aok-hidden");d.post(g.recycleAndSaveRouteBase+g.upgraderClaimUrl,{params:a,success:k.proxy(function(a){e.create(k("\x3cdiv /\x3e"),{inlineContent:a.popoverContent,
name:"upgrader_claim_modal",header:a.popoverHeader.replace(/<[^>]*>/g,""),cache:!1,padding:"none",timeout:3E4}).show();q=a.isClaimed;b.first().addClass("aok-hidden");k(".upgrader-claim-button").first().addClass("aok-hidden");k(".upgrader-claimed-button").first().removeClass("aok-hidden")},this),error:k.proxy(function(){b.first().addClass("aok-hidden");d.trigger("a:upgrader:claim-error")},this)})});d.declarative("upgrader-terms","click",function(a){a=a.data;a.isMobile=!1;d.post(g.recycleAndSaveRouteBase+
g.upgraderTermsUrl,{params:a,success:k.proxy(function(a){e.create(k("\x3cdiv /\x3e"),{inlineContent:a.popoverContent,name:"upgrader_terms_modal",header:a.popoverHeader.replace(/<[^>]*>/g,""),cache:!1,padding:"none",timeout:3E4}).show()},this)})});d.declarative("upgrader-claim-close","click",function(a){a.$event.preventDefault();f()});d.declarative("launch-recycle-and-save-banyan","click",function(b){v=b.$target;b=b.data;var d=b.ingressProductGroup?b.ingressProductGroup:"gl_digital_products_3",g=b.ingressPriceSurfaced?
b.ingressPriceSurfaced:"";a.setIngressAsin(b.ingressAsin?b.ingressAsin:"");a.setIsPageRenderTargetSPP(!0);a.setIsFixedPricePromo("FIXED"===b.promoDiscountType);a.setIngressPriceSurfaced(g);c.setProductGroup(d);c.deviceType="web";a.launchRecycleAndSaveWeb(e)});d.declarative("launch-recycle-and-save","click",function(b){v=b.$target;a.setIngressAsin(a.getCurrentAsinFromDetailPage());a.setIngressPriceSurfaced(a.getIngressFppPriceSurfacedFromDetailPage());a.launchRecycleAndSaveWeb(e)});d.declarative("recycle-and-save-claim-promo",
"click",function(b){var c=e.get(g.recycleAndSaveModalName);a.claimRecycleAndSavePromo(b.data.csrfKey,c,!1)});d.declarative("recycle-and-save-redirect-tanooki","click",function(a){a&&a.hasOwnProperty("data")&&a.data.hasOwnProperty("fromOneClick")?f():(a=e.get(g.recycleAndSaveModalName))&&a.hide();d.delay(function(){d.trigger("a:tradein:tanooki:launch",{widgetState:{productGroup:c.getProductGroup()},refTag:b.refTagRecycleAndSaveTanookiPrefix})},100)});d.on("a:popover:afterHide:recycleAndSaveModal",
function(){v&&v.focus()})});k.when("recycle-and-save-helper","ready").execute(function(d){d.triggerRecycleAndSaveWeblab()});"use strict";k.when("A").register("recycle-and-save-constants",function(d){return{recycleAndSaveModalName:"recycleAndSaveModal",recycleAndSaveSecondaryViewName:"recycleAndSaveSecondaryView",recycleAndSaveRouteBase:"/tradein/hzw/",recycleAndSaveRecordRefTagUrl:"/tradein/hzw/recordRefTag?ref_\x3d",recycleAndSavePrefix:"recycleAndSave/",recycleAndSaveViewUrl:"getView?",upgraderClaimUrl:"/upgrader/claimPromo",
upgraderTermsUrl:"/upgrader/terms",recycleAndSaveClaimPromoUrl:"claimPromo?",recycleAndSavePriceblockMetric:"recycle_and_save_launch_price_block",recycleAndSavePriceblockMobileMetric:"recycle_and_save_launch_price_block_mobile",recycleAndSavePromoAccessErrorMetric:"recycle_and_save_promo_access_error",recycleAndSaveFixedPromoAccessErrorMetric:"rs_fpp_promo_access_error",refTagRecycleAndSavePrefix:"dp_recycle_save_price_block_",refTagRecycleAndSaveMobilePrefix:"dp_recycle_save_price_block_m_",refTagRecycleAndSaveReftagLaunch:"dp_rs_pb_launch",
refTagRecycleAndSaveReftagMobileLaunch:"dp_rs_pb_launch_m",refTagRecycleAndSaveOnSPPLaunch:"spp_recycle_save_upgrader_launch",refTagRecycleAndSaveOnSPPMobileLaunch:"spp_recycle_save_upgrader_launch_m",refTagRecycleAndSaveClaimPromo:"dp_recycle_save_price_claim_promo_",refTagRecycleAndSaveFixedClaimPromo:"dp_rs_pb_fpp_claim_promo_",refTagRecycleAndSaveSPPClaimPromo:"spp_recycle_save_price_claim_promo_",refTagRecycleAndSaveSPPFixedClaimPromo:"spp_rs_pb_fpp_claim_promo_",refTagRecycleAndSaveShortPrefixLaunch:"rs_la_",
refTagRecycleAndSaveShortPrefixClaimPromo:"rs_cl_",refTagMobile:"m_",refTagFixedPromoSuffix:"_fpp",refTagPreFixDetailPage:"dp",refTagPreFixSppBanyan:"by",refTagPreFixEchoCategory:"ec",refTagPreFixFireTVCategory:"ftvc",refTagPreFixUnknown:"unknown",promoAccessAvailable:"available",promoAccessClaimed:"claimed",promoAlreadyClaimed:"ALREADY_CLAIMED",fixedPromoDiscountType:"FIXED"}});"use strict";k.when("A","trade-in-common-utils","recycle-and-save-constants","ready").register("recycle-and-save-helper",
function(d,e,b){function c(a,c){var d=e.getProductGroup(),m=n.getIngressAsin(),f=n.getIngressPageType();return d?(e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+a+"_"+f),m.length&&g(b.refTagRecycleAndSaveShortPrefixLaunch,c,f,m),a={deviceType:c?"mobile":e.getDeviceType(),productGroup:d,ref_:a,pageRenderTarget:n.getIsPageRenderTargetSPP()?"spp":"dp",pageIngressType:f,ips:n.getIngressPriceSurfaced(),currentAsin:m},b.recycleAndSaveRouteBase+b.recycleAndSavePrefix+b.recycleAndSaveViewUrl+h.param(a)):
b.recycleAndSaveRouteBase+"generalerror?ref_\x3d"+(a+"_pg_missing")}function g(a,c,d,f){a+=c?b.refTagMobile:"";a=a+(d+"_")+(n.getIsFixedPricePromo()?"fpp_":"");a+=e.getProductGroup()+"_"+f;e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+a)}function a(){h(".recycleSaveErrorAlert").each(function(){h(this).removeClass("aok-hidden")})}function k(){h(".recycleSaveClaimAlert").each(function(){h(this).removeClass("aok-hidden")})}function p(){h("#recycleSaveClaimPromoDeclarAct").removeClass("a-declarative");
h(".recycle-save-redeem-button").each(function(){h(this).removeClass("a-button-normal").addClass("a-button-disabled")})}function v(a){d.declarative.remove(h("#launch-recycle-and-save"),"launchRecycleAndSave");var b=h(".tradein-instant-savings-launch-button"),c=h(a?".recycle-and-save-wrapper-mobile":".recycle-and-save-wrapper").find("#successfulRecycleAndSaveButtonText").first();h.each(b,function(){h(this).replaceWith(c.clone())});h(".tradein-price-block").each(function(){h(this).html(c.clone())});
a=h(".tradein-price-block.blue");a.length&&a.removeClass("blue").addClass("green")}function q(a){h(a?".recycle-and-save-spp-ingress-fixed .ucw-cards-upgrader-btn-text":".recycle-and-save-spp-ingress-percent .ucw-cards-upgrader-btn-text").each(function(){var a=h(this).clone().addClass("aok-hidden");h(this).replaceWith(a)});h(a?".recycle-and-save-spp-ingress-fixed #ucw-upgrader-offer-claimed-text":".recycle-and-save-spp-ingress-percent #ucw-upgrader-offer-claimed-text").each(function(){var a=h(this).clone().removeClass("aok-hidden").addClass("recycle-and-save-spp-ingress-success");
h(this).replaceWith(a)})}function l(){var a=document.getElementById("recycleAndSavePromoData");if(a&&a.dataset)return a.dataset}function t(a){var c=l();return c&&c.promoDiscountType&&b.fixedPromoDiscountType===c.promoDiscountType?(n.setIsFixedPricePromo(!0),a+b.refTagFixedPromoSuffix):a}var h=d.$,n={isPageRenderTargetSPP:!1,isFixedPricePromo:!1,ingressAsin:"",ingressPriceSurfaced:"",setIsPageRenderTargetSPP:function(a){this.isPageRenderTargetSPP=a},getIsPageRenderTargetSPP:function(){return this.isPageRenderTargetSPP},
setIsFixedPricePromo:function(a){this.isFixedPricePromo=a},getIsFixedPricePromo:function(){return this.isFixedPricePromo},setIngressAsin:function(a){this.ingressAsin=a},getIngressAsin:function(){return this.ingressAsin},setIngressPriceSurfaced:function(a){this.ingressPriceSurfaced=a},getIngressPriceSurfaced:function(){return this.ingressPriceSurfaced},launchRecycleAndSaveWeb:function(a,d){d=d||"";e.setRefTagPrefix(b.refTagRecycleAndSavePrefix);var f=this.getIsPageRenderTargetSPP()?b.refTagRecycleAndSaveOnSPPLaunch:
b.refTagRecycleAndSaveReftagLaunch;f=t(f);d=f+"_"+e.getProductGroup()+d;d=c(d,!1);a.create(h("\x3cdiv /\x3e"),{url:d,name:b.recycleAndSaveModalName,header:e.getModalTitle(),width:929,cache:!1,padding:"none",timeout:3E4}).show();e.recordMetric(b.recycleAndSavePriceblockMetric)},launchRecycleAndSaveMobile:function(a,d){d=d||"";e.setRefTagPrefix(b.refTagRecycleAndSaveMobilePrefix);var f=this.getIsPageRenderTargetSPP()?b.refTagRecycleAndSaveOnSPPMobileLaunch:b.refTagRecycleAndSaveReftagMobileLaunch;f=
t(f);d=f+"_"+e.getProductGroup()+d;d=c(d,!0);a.create(h("\x3cdiv /\x3e"),{url:d,name:b.recycleAndSaveSecondaryViewName,cache:!1,backButtonText:"Close",padding:"none",timeout:3E4}).show();e.recordMetric(b.recycleAndSavePriceblockMobileMetric)},triggerRecycleAndSaveWeblab:function(){var a=h("input[id^\x3d'recycleAndSaveWeblabToTrigger']");a&&a.length&&a.each(function(){var a=h(this).data("weblabname"),b=h(this).data("weblabtreatment");a&&a.length&&b&&b.length&&f.ue&&f.ue.trigger&&f.ue.trigger(a,b)})},
getClaimRecycleAndSavePromoRefTagPrefix:function(a){return this.getIsPageRenderTargetSPP()?a?b.refTagRecycleAndSaveSPPFixedClaimPromo:b.refTagRecycleAndSaveSPPClaimPromo:a?b.refTagRecycleAndSaveFixedClaimPromo:b.refTagRecycleAndSaveClaimPromo},claimRecycleAndSavePromo:function(c,f,l){var m=e.getProductGroup(),n=l?b.refTagMobile:"",r=this.getIsFixedPricePromo(),t=this.getIngressPageType();n=this.getClaimRecycleAndSavePromoRefTagPrefix(r)+n+m;e.doRecordRefTag(b.recycleAndSaveRecordRefTagUrl+n+"_"+t);
var u=this.getIngressAsin();u.length&&g(b.refTagRecycleAndSaveShortPrefixClaimPromo,l,t,u);c={productGroup:m,requestToken:c,ref_:n,currentAsin:this.getIngressAsin(),pageIngressType:t};c=b.recycleAndSaveRouteBase+b.recycleAndSavePrefix+b.recycleAndSaveClaimPromoUrl+h.param(c);d.post(c,{success:h.proxy(function(c){c.claimPromoSuccess?(f.hide(),this.getIsPageRenderTargetSPP()?q(r):v(l)):(c.claimPromoFailureReason&&c.claimPromoFailureReason===b.promoAlreadyClaimed?k():a(),p())},this),error:h.proxy(function(){e.recordMetric(r?
b.recycleAndSaveFixedPromoAccessErrorMetric:b.recycleAndSavePromoAccessErrorMetric);a();p()},this),async:!1})},getIngressFppPriceSurfacedFromDetailPage:function(){var a=l();return a&&a.ips?a.ips:""},getCurrentAsinFromDetailPage:function(){var a=l();return a&&a.ingressAsin?a.ingressAsin:""},getIngressPageType:function(){var a=f.location.href;return-1<a.indexOf("B0CXRRF584")||-1<a.indexOf("B0DCCNHWV5")?b.refTagPreFixSppBanyan:-1<a.indexOf("9818047011")?b.refTagPreFixEchoCategory:-1<a.indexOf("8521791011")?
b.refTagPreFixFireTVCategory:-1<a.indexOf("/dp/")&&!this.getIsPageRenderTargetSPP()?b.refTagPreFixDetailPage:b.refTagPreFixUnknown}};return n})});
/* ******** */
(function(d){var f=window.AmazonUIPageJS||window.P,k=f._namespace||f.attributeErrors,a=k?k("ListsCommonUtilityAssets",""):f;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,f,k){d.when("A").register("al-ajax-response-state-parser",function(a){var b=a.$;return{getState:function(c){c=b(c).filter("#listsAjaxResponseStateSection");var e=b("#listsAjaxResponseStateSection");e&&0<=e.length&&e.remove();b(c).appendTo("body");a.state.parse();c=a.state("listsAjaxResponseState")||
{};return{hasError:c.hasError,authRequired:c.authRequired,authUrl:c.authUrl,error:c.error}}}});"use strict";d.when("A","al-bottomsheet-with-fallback","iphone-x-detector").register("bottom-sheet-utils",function(a,b,c){var e=a.$;a.declarative("al-sheet-with-fallback","click",function(e){e.$event.preventDefault();var a=e.data;e=b.create(b.buildComponentParams(a.componentName,a.showCloseButton,c.getAdjustedHeightPx(a.bottomsheetHeight),a.popoverHeight,a.popoverWidth,a.headerForPopover,a.viewLabel,a.viewDescription?
a.viewDescription:a.viewLabel,a.paddingForPopover,a.closeMessage),e.$target);b.show(e)});return{raiseBottomsheet:function(b){b=e(b).parents(".a-sheet-web-container");b.css("z-index",1E4);b.siblings(".a-sheet-lightbox").css("z-index",8E3)}}});"use strict";d.when("A").register("al-bottomsheet-with-fallback",function(a){function b(b){f.ueLogError&&f.ueLogError({logLevel:"ERROR",message:b})}var c,e;d.when("a-sheet").execute(function(b){c=b});d.when("a-modal").execute(function(b){e=b});var g=function(a){if(a)return c?
c.get(a.name):e.get(a.name);b("No ComponentParams specified. Please generate componentParams using .create(component)")},n={IS_POPOVER_LABEL:"IS_POPOVER",IS_BOTTOMSHEET_LABEL:"IS_BOTTOMSHEET"};return{create:function(a,p){if(a)return c?c.create(a):e.create(p,a),a;b("No ComponentParams specified. Please generate componentParams using .create(component)")},show:function(a){(a=g(a))?a.show():b("No View Created. Please create a view first by calling .create(component)")},hide:function(a){(a=g(a))?a.hide():
b("No View Created. Please create a view first by calling .create(component)")},changeHeight:function(a,e,d){var l=g(a);l?c?(l.changeHeight({height:e,duration:d}),a.bottomsheetHeight=e):(l.update({height:e}),a.popoverHeight=e):b("No View Found. Please create a view first by calling .create(component)")},remove:function(a){(a=g(a))?a.$container.remove():b("No View Created. Please create a view first by calling .create(component)")},exists:function(a){return g(a)?!0:!1},onCloseExecute:function(e,d,
g){if("function"!==typeof d)b("Expected onCloseFunction to be of type function");else if(e)a.on((c?"a:sheet":"a:popover")+":"+(g?"beforeHide":"afterHide")+":"+e.name,d);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},onOpenExecute:function(e,d,g){if("function"!==typeof d)b("Expected onOpenFunction to be of type function");else if(e)a.on((c?"a:sheet":"a:popover")+":"+(g?"beforeShow":"afterShow")+":"+e.name,d);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},
buildComponentParams:function(a,b,e,d,g,f,u,v,w,x){var l=c!==k,h={viewTypeLabel:l?n.IS_BOTTOMSHEET_LABEL:n.IS_POPOVER_LABEL,name:a};l?(h.closeType=b?"icon":x?"message":k,h.closeMessage=x,h.height=e,h.sheetLabel=u,h.sheetDescription=v,h.preloadDomId=a):(h.closeButton=b,h.height=d,h.width=g,h.dataStrategy="preload",h.header=f,h.hideHeader=f===k,h.padding=w!==k?w:"none",h.popoverLabel=u);return h},VIEW_TYPE_LABELS:n}});"use strict";d.when("A").register("lists-dpx-common-utils",function(a){return{urlParamValue:function(a){for(var b=
f.location.search.substring(1).split("\x26"),e=0;e<b.length;e++){var d=b[e].split("\x3d");if(d[0]===a)return d[1]}}}});"use strict";d.when("A").register("iphone-x-detector",function(){function a(){try{var a=b();c.forEach(function(b){if(-1<a.indexOf(b))return!0})}catch(g){}return!1}function b(){try{a:{for(var a=document.cookie.split(";"),b=0;b<a.length;b++){for(var c=a[b];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("amzn-app-ctxt\x3d")){var d=c.substring(14,c.length);break a}}d=null}if(d){var f=
d.match(/"v":.*%2C*/);if(f)return f.toString().toLowerCase()}}catch(m){}return""}var c=["iphone10","iphone11"];return{isIphoneX:a,getDeviceType:b,getAdjustedHeightPx:function(b){try{if(b=parseInt(b,10),a())return b+40}catch(g){}return b}}});"use strict";d.when("A","lists-metric-logger").register("amazon-lists-csrf-utils",function(a,b){var c=a.$;return{addCsrfToken:function(a){0!==c('meta[id\x3d"lists-sp-csrf-meta-token"]').length?a["anti-csrftoken-a2z"]=c('meta[id\x3d"lists-sp-csrf-meta-token"]').attr("content"):
0!==c('input[id\x3d"lists-sp-csrf-form-token"]').length?a["anti-csrftoken-a2z"]=c('input[id\x3d"lists-sp-csrf-form-token"]').attr("value"):0!==c('input[id\x3d"lists-sp-csrf-input-token"]').length?a["anti-csrftoken-a2z"]=c('input[id\x3d"lists-sp-csrf-input-token"]').attr("value"):b.incrementMetricCountByOne("Lists:CSRF:UnableToRetrieveToken")},hasCsrfToken:function(a){a=a["anti-csrftoken-a2z"];return""!==a&&a!==k}}});"use strict";d.when("A","lists-metric-logger").register("idea-list-csrf-utils",function(a,
b){var c=a.$;return{addIdeaListCsrfToken:function(a){0!==c('input[id\x3d"creator-sp-csrf-form-token"]').length?a["anti-csrftoken-a2z"]=c('input[id\x3d"creator-sp-csrf-form-token"]').attr("value"):b.incrementMetricCountByOne("Lists:CSRF:UnableToRetrieveToken")}}});"use strict";d.when("A","amazon-lists-csrf-utils").register("lists-ajax-handler",function(a,b){function c(a){b.hasCsrfToken(a)||b.addCsrfToken(a)}function d(a,b){"function"===typeof a?a(b):r("callableFunction passed in is not callable: "+
a)}function g(a,b,c){m(a);c&&m(p(a,c));b&&m(p(a,b));b&&c&&m(p(a,b,c))}function n(a){m("lists_ajax_before_send");a&&m(p("lists_ajax_before_send",a))}function l(a){try{return a.replaceAll("/","_")}catch(v){r("Replace all failed for URL: "+a)}}function p(a,b,c){return[a,b,c].filter(function(a){return""!==a&&a!==k}).join(":")}function m(a){q&&q.count(a,(q.count(a)||0)+1)}function r(a){f.ueLogError(k,{logLevel:"ERROR",attribution:"ListsCommonUtilityAssets::ListsAjaxHandler",message:a})}var t=a.$,q=f.ue;
return{post:function(a){var b=a.headers||[];c(b);var e=l(a.url);n(e);return t.ajax({type:"POST",url:a.url,cache:a.isCached,headers:b,data:a.params,timeout:a.timeout,success:function(b,c){g("lists_ajax_success",e,c);d(a.successCallback,b)},error:function(b,c){g("lists_ajax_error",e,c);d(a.errorCallback)}})},get:function(a){var b=l(a.url);n(b);return t.ajax({type:"GET",url:a.url,headers:a.headers,cache:a.isCached,data:a.params,timeout:a.timeout,success:function(c,e){g("lists_ajax_success",b,e);d(a.successCallback,
c)},error:function(c,e){g("lists_ajax_error",b,e);d(a.errorCallback)}})}}});"use strict";d.when("A").register("lists-mash-overlay-helper",function(){function a(a){return b&&b.dispatchEvent&&"function"===typeof b.dispatchEvent?(b.dispatchEvent({type:a}),!0):!1}var b;d.when("mash").execute("amazon-lists-mash-api-registration",function(a){b=a});return{hideGLOWOverlay:function(){return a("appOverlays.Hide")},showGLOWOverlay:function(){return a("appOverlays.Show")}}});"use strict";d.when("A").register("al-client-side-widget-latency-helper",
function(){var a={wb:1};return{emitFeatureBegin:function(b){b&&"function"==typeof f.uet&&f.uet("bb",b,a)},emitFeatureLoaded:function(b){b&&"function"==typeof f.uet&&f.uet("cf",b,a);b&&"function"==typeof f.uex&&f.uex("ld",b,a)}}});"use strict";d.when("A").register("lists-update-cart-count",function(a){return{updateCartCount:function(a){d.when("mash").execute(function(b){b.cart.didUpdate({newCartQuantity:a,successCallback:function(){f.amazon.cordova.notification.vibrate(50)},failCallback:null})});d.when("nav.setCartCount").execute(function(b){b(a)})}}});
"use strict";d.register("lists-metric-logger",function(){return{incrementMetricCountByOne:function(a){var b=f.ue;b&&b.count(a,(b.count(a)||0)+1)}}})});
/* ******** */
(function(l){var k=window.AmazonUIPageJS||window.P,n=k._namespace||k.attributeErrors,d=n?n("ListsCreateAssets",""):k;d.guardFatal?d.guardFatal(l)(d,window):d.execute(function(){l(d,window)})})(function(l,k,n){l.when("A","al-bottomsheet-with-fallback","al-ajax-response-state-parser","create-new-list-hz","bottom-sheet-utils","lists-dpx-common-utils","lists-mash-overlay-helper").execute(function(d,e,r,q,C,x,z){function t(a){var c=a.data||{};"HEARTS_V2_SELECT_HEARTING_BOTTOMSHEET"===h()&&u&&f&&e.remove(f);
f=e.create(e.buildComponentParams(c.componentName,!0,v,430,400,n,c.viewName,c.viewDescription,n,c.closeMessage),a.$target);z.hideGLOWOverlay();e.show(f);"DETAIL_PAGE"===h()&&w&&(e.onOpenExecute(f,g),e.onCloseExecute(f,function(){z.showGLOWOverlay()},!1))}function g(){C.raiseBottomsheet("#create-list-form-wrapper");e.changeHeight(f,v,0)}function D(a){var c=k.ue?k.ue.rid:n;a={createIngressName:a.ingressName,isHearts:!1,sourceVendorId:a.sourceVendorId};c&&(a.relatedRequestID=c);"HEARTS_V2_SELECT_HEARTING_BOTTOMSHEET"===
h()&&u&&(a.isHearts=!0);m.ajax({type:"GET",url:"/hz/wishlist/create",data:a,success:E,error:function(a,c,b){A("Failed to fetch CreateList-Form. Status: "+c+"; Error: "+b)},timeout:2E4})}function E(a){var c=m(a).filter("#createlist-form-container");a=r.getState(a);a.authRequired&&a.authUrl?k.location.href=a.authUrl:a.hasError?A("CreateList form has error \x3d "+a.error):(c.find("#bottomSheetSize").length&&(v=c.find("#bottomSheetSize").val(),e.changeHeight(f,v,0)),m("#create-list-form-wrapper").html(c),
b("#create-list-form-spinner"),B("#create-list-form-wrapper"))}function b(a){m(a).addClass("aok-hidden")}function B(a){m(a).removeClass("aok-hidden")}function A(a){e.changeHeight(f,110);b("#create-list-form-spinner");b("#create-list-form-wrapper");B("#createlist-form-loading-error-section");k.ueLogError&&k.ueLogError({logLevel:"FATAL",message:a});if("DETAIL_PAGE"!==h()||!w)e.onCloseExecute(f,H,!1)}function H(){b("#createlist-form-loading-error-section");b("#create-list-form-wrapper");B("#create-list-form-spinner");
k.location.reload()}function I(a,c,b){A("List creation failed. Status: "+c+"; Error: "+b)}function p(a){a.hasError?A("List creation failed with Error: "+a.error):"YOUR_STUFF_LISTS_CAROUSEL"===h()&&F?(e.onCloseExecute(f,function(){F.bufferReloadOnBackNavigation();k.location="/hz/wishlist/ls/"+a.listExternalId},!1),e.hide(f)):(e.hide(f),k.location="/hz/wishlist/ls/"+a.listExternalId)}function h(){return(d.state("createListIngressState")||{}).ingressName}function y(){m("#createlist-list-name-textinput").parent("div").addClass("a-form-error");
m("#mobile-alert-list-name").removeClass("aok-hidden");m("#createlist-list-name-textinput").attr("aria-describedby","mobile-alert-list-name").attr("aria-invalid",!0).focus()}function G(){m("#createlist-list-name-textinput").parent("div").removeClass("a-form-error");m("#mobile-alert-list-name").addClass("aok-hidden");m("#createlist-list-name-textinput").removeAttr("aria-describedby").removeAttr("aria-invalid")}var m=d.$,v=325,w,u,F,f;d.declarative("awl-create-list-bottomsheet","click",function(a){var c=
a.data||{};d.state("createListIngressState",{ingressName:c.ingressName});var b=c.componentName;b&&"function"==typeof uet&&uet("bb",b,{wb:1});t(a);D(c);(a=c.componentName)&&"function"==typeof uet&&uet("cf",a,{wb:1});a&&"function"==typeof uex&&uex("ld",a,{wb:1})});d.declarative("list-name-toggle","click",function(a){if("input"===a.targetTag){var c=m("span[data-action\x3dcreate-list-bottomsheet-submit]")[0],b=JSON.parse(c.getAttribute("data-create-list-bottomsheet-submit")),d=document.getElementById("createlist-list-name-textinput");
b.persistence=a.data.persistence;c.setAttribute("data-create-list-bottomsheet-submit",JSON.stringify(b));d.value=a.data.name}});d.declarative("create-list-bottomsheet-submit","click",function(a){a=a.data||{};var c=k.ue?k.ue.rid:n;c&&(a.relatedRequestID=c);c=m("#createlist-list-name-textinput").val();c===n||0===c.length?y():(G(),b("#createlist-form-loading-error-section"),b("#create-list-form-wrapper"),B("#create-list-form-spinner"),a.listName=c,(c=x.urlParamValue("createAndAddAsin"))&&0<c.length&&
(a.asin=c),"DETAIL_PAGE"===h()&&w?((c=w.getAsin())&&0<c.length&&(a.asin=c),q(a,w.handleSuccess,w.handleError)):"HEARTS_V2_SELECT_HEARTING_BOTTOMSHEET"===h()&&u?(d.trigger("item-saved-different-list"),(c=u.getAsin())&&0<c.length&&(a.asin=c),e.hide(f),a.toastWeblabTrigger=!0,q(a,u.onCreateSuccess,u.onCreateError)):(c=d.state("atwl"),c!==n&&c.asin!==n&&0<c.asin.length&&(a.asin=m.trim(c.asin)),q(a,p,I)))});l.when("dp-create-list-handler").execute(function(a){w=a});l.when("hearts-v2-create-list-handler").execute(function(a){u=
a});l.when("lists-your-saves-refresh-utils").execute(function(a){F=a});d.on("a:expander:create-list-learn-more-popover:toggle:expand",function(){f.viewTypeLabel===e.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?e.changeHeight(f,v+165):e.changeHeight(f,580)});d.on("a:expander:create-list-learn-more-popover:toggle:collapse",function(){e.changeHeight(f,v);f.viewTypeLabel===e.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?e.changeHeight(f,v):e.changeHeight(f,430)});d.declarative("createlist-list-name-validation",["keyup"],
function(a){a=a.$target.context.value;0!==a.length&&m("#createlist-list-name-textinput").parent("div").hasClass("a-form-error")&&m("#mobile-alert-list-name").is(":visible")?G():0===a.length&&y()})});"use strict";l.when("A","create-new-list-hz","a-modal","a-toggle-button-group","lists-dpx-common-utils","create-list-state-util","lists-metric-logger").register("create-utils",function(d,e,r,l,C,x,z){function q(b){b&&"function"==typeof uet&&uet("cf",b,{wb:1});b&&"function"==typeof uex&&uex("ld",b,{wb:1})}
var g=d.$,D=function(b){b="#"+(b.formId||"addToCart");0===g(b).length&&(b="#atwl-form");return b};d.declarative("show-create-list",["click touchstart"],function(b){b.$event.preventDefault();var e=b.data;if(e.url||e.name)"function"==typeof uet&&uet("bb","create-list-dp-widget",{wb:1}),r.create(b.$target,e).show({padding:"none"}),q("create-list-dp-widget");d.on("a:popover:afterHide:create-list",function(){r.remove("create-list");e.url.includes("DESKTOP_DETAIL_PAGE")&&(l("#add-to-wishlist-button-group").setSelected("#wishListDropDown"),
g("#add-to-wishlist-button").focus())});d.on("a:popover:show:create-list",function(b){E(b.popover.$popover)});e.createAndAddAsin&&x.saveCreateAndAddAsin(e.createAndAddAsin)});d.declarative("list-name-validation",["keyup"],function(b){0!==b.$target.context.value.length&&g("#alert-list-name").is(":visible")&&(g("#alert-list-name").addClass("aok-hidden"),g("#alert-list-name").parent("div").find("input").each(function(){g(this).removeClass("a-form-error")}),g("#list-name").removeAttr("aria-describedby").removeAttr("aria-invalid"))});
var E=function(b){b.delegate("input:text","keypress",function(b){13===b.which&&b.preventDefault()})};return{submitCreate:function(b,l,r){b.$event.preventDefault();var q=g("#create-list-form").closest(".a-popover"),t=g("#list-name").val();if(""===t)g("#alert-list-name").removeClass("aok-hidden"),g("#alert-list-name").parent("div").find("input").each(function(){g(this).addClass("a-form-error")}),g("#list-name").attr("aria-describedby","#alert-list-name".replace("#","")).attr("aria-invalid",!0).focus();
else{g("#list-name").removeAttr("aria-describedby").removeAttr("aria-invalid");var p={},h=d.state("popoverState")||{};h=D(h);var y=C.urlParamValue("createAndAddAsin");y&&1<y.length&&(p.asin=y);"1"===g("#is-create-and-add").val()&&(h=g(h).find("#ASIN, [name^\x3d'ASIN'], [name\x3d'a'], [name\x3d'asin']").val(),""===h&&(h=d.state("atwl").asin,z.incrementMetricCountByOne("Lists:CreateListAndAddItem:FallbackToGiftingModuleASIN")),"undefined"!==h&&(p.asin=g.trim(h)));(h=x.getCreateAndAddAsin())&&"undefined"!==
h&&(p.asin=h);g("#create-list-loading").removeClass("aok-hidden");q.find("#popover-spinner .a-popover-loading").show();g("#create-list-form").addClass("aok-hidden");p.listName=t;p.sid=b.data.sessionId;p.vendorId=b.data.sourceVendorId;p.privacyStatus=b.data.privacyStatus;p.listType=b.data.listType;if(b=k.ue?k.ue.rid:n)p.relatedRequestID=b;e(p,l,r)}}}});"use strict";l.when("A","amazon-lists-csrf-utils").register("create-new-list-hz",function(d,e){var l=d.$;return function(d,r,x){var q=[];e.addCsrfToken(q);
var t=k.ue?k.ue.rid:n;t&&(d.relatedRequestID=t);d.isJson=!0;return l.ajax("/hz/wishlist/create/newlist",{type:"POST",headers:q,data:d,success:r,error:x,timeout:1E4})}});"use strict";l.when("A").register("create-list-state-util",function(d){var e=d.$;(function(){var d=e('\x3cinput type\x3d"hidden"\x3e');d.attr("id","lists-createlist-createAndAddAsin");d.appendTo("body")})();return{getCreateAndAddAsin:function(){return e("#lists-createlist-createAndAddAsin").val()},saveCreateAndAddAsin:function(d){e("#lists-createlist-createAndAddAsin").val(d)}}})});
/* ******** */
(function(f){var n=window.AmazonUIPageJS||window.P,p=n._namespace||n.attributeErrors,d=p?p("ListsDPXCommonAssets",""):n;d.guardFatal?d.guardFatal(f)(d,window):d.execute(function(){f(d,window)})})(function(f,n,p){f.when("A","a-dropdown","a-modal","legacy-create-utils").execute(function(d,u,b,h){var m=d.$;d.declarative("reg-create-change-privacy",["click"],function(b){h.changePrivacySetting(b)});d.declarative("list-privacy-toggle",["click"],function(b){h.togglePrivacy(b)});d.declarative("list-name-toggle",
["click"],function(b){h.toggleListName(b)});d.declarative("idea-list-toggle",["click"],function(b){h.toggleIdeaList(b)});d.on("a:popover:beforeShow:reg-create",function(b){m("#createCal").append(m("#popCal"))});d.on("a:popover:show:reg-create",function(b){h.onShow(b)});d.on("a:popover:ajaxContentLoaded:reg-create",function(b){b=b.popover.$popover;m("#createCal").append(m("#popCal"));b.hasClass("pop-create")||b.addClass("pop-create")});d.on("a:popover:beforeHide:reg-create",function(b){m("#createCalHolder").append(m("#popCal"))});
d.on("a:popover:hide:reg-create",function(b){h.onClose(b)});d.on("a:dropdown:select",function(b){h.onDropdownSelect(b)})});"use strict";f.when("A","create-new-list-hz").register("legacy-create-utils",function(d,u){var b=d.$;d.state.parse();d.state("pageInfo");d.state("createInfo");var h=d.state("popoverState")||{},m=0,f=function(a){a="#"+(a.formId||"addToCart");0===b(a).length&&(a="#atwl-form");return a},r=f(h),v=function(a){var c={};b.each(a.serializeArray(),function(a,b){b.name.match(/create-|next-/)&&
(c[b.name]=b.value)});return c},z=function(a){var c={},q={};c["create-sourceVendorId"]=a["create-sourceVendorId"];"undefined"!==typeof w("vendorId")&&(c["create-sourceVendorId"]=w("vendorId"));var k="wishlist";if(a["create-for"]){var e=a["create-for"];"friend"===e?k="giftlist":"child"===e&&(k="giftlist",c["create-isKidList_Registry"]=1)}h=d.state("popoverState")||{};r=f(h);"1"===b("#create-isCreateAndAdd").val()&&(c.isCreateAndAdd=!0,e=b(r).find("#ASIN, [name^\x3d'ASIN'], [name\x3d'a'], [name\x3d'asin']").val(),
c.asin=b.trim(e),e=d.state("wishlistDPState")||{},e.customizationToken&&(c.customizationToken=e.customizationToken));if("giftlist"!==k&&"1"===b("#create-isIdeaList").val())return e=b.trim(a["create-name-il"]),""!==e?c.name=e:q.list_name_il="empty",c.isIdeaList=!0,c.description=b.trim(a["create-description-il"]),{errors:q,userCreateArgs:c};c["create-registryType"]=k;if("wishlist"===k)e=b.trim(a["create-name"]),""!==e?c["create-name"]=e:q.list_name="empty";else{var g=b.trim(a["create-first-name"]),
l=b.trim(a["create-last-name"]);e=b.trim(a["create-participant_relationship"]);""!==g||""!==l?(c["create-participant2-givenName"]=g,c["create-participant2-surName"]=l,g=g+" "+l,c["create-participant2-name"]=g,c["create-name"]=g,c["create-participant2-relationship_Participant"]=e):q.recipient_name="empty"}e="N";g="wishlist"===k?"Y":"N";if(l=a["create-privacy"])"public"===l?("undefined"!==typeof a["create-recipient-name"]&&(c["create-recipient-name"]=b.trim(a["create-recipient-name"])),g="Y"):("hidden"!==
l&&(e="Y"),g="N");c["create-isPrivate"]=e;c["create-isSearchable"]=g;"wishlist"===k&&(c["create-persistence"]=b.trim(a["create-persistence"]));e=a["create-month"];g=a["create-day"];0<b("#popCal").length&&((l=b('[data-action\x3d"a-cal-input"]').val())?(e=l.split("/")[0],g=l.split("/")[1]):e=l="-1");e&&g&&("-1"!==e||"-1"!==g)&&(e=parseInt(e,10),g=parseInt(g,10),(l=new Date(1904,e-1,g),l.getMonth()+1===e)&&l.getDate()===g?(c["create-occasion1-fromDate_Month"]=e,c["create-occasion1-fromDate_Day"]=g,c["create-occasion1-fromDate_Year"]=
1904,"giftlist"===k&&(c["create-isKidList_Registry"]&&a["create-age"]&&"-1"!==a["create-age"]&&(c["create-occasion1-firstYear_Occasion"]=(new Date).getFullYear()-a["create-age"]),a["create-reminder"]&&(c["create-occasion1-reminderOffset_Occasion"]=a["create-reminder"]))):1<m||(q.occasion_date="invalid"));a["create-next"]&&(k=a["create-next"],c["next-action"]=k,"add"===k&&d.each(["asin","purchasedQty","requestedQty","purchaseDate","redirect"],function(b,e){b="next-"+b;a[b]&&(c[b]=a[b])}));return{errors:q,
userCreateArgs:c}},A=function(a){a.find("#WLNEW_error").addClass("a-hidden");a.find(".a-alert-inline").addClass("a-hidden");a.find(".a-form-error").removeClass("a-form-error");a.find(".reg-create-form").removeClass("a-hidden")},t=function(a){var b=a.find('select[name\x3d"create-month"]').val(),d=a.find('select[name\x3d"create-day"]').val();b&&"-1"!==b&&d&&"-1"!==d?a.find("#WLNEW_section_occAge").removeClass("a-hidden"):a.find("#WLNEW_section_occAge").addClass("a-hidden")},x=function(a,c){c.find("#WLNEW_input_privacy").val(a);
var d="";b("#a-popover-reg-create-privacy").find(".a-list-link li a").each(function(){b(this).removeClass("a-active");var c=b(this).data("reg-create-change-privacy");c&&c.type===a&&(d=c.triggerText,b(this).addClass("a-active"))});c.find('a[id^\x3d"WLNEW_privacy_"]').find("span").html(d)},y=function(a){"private"===a?(b(".reg-create-form").find("#private_blurb").removeClass("a-hidden"),b(".reg-create-form").find("#public_blurb").addClass("a-hidden"),b(".reg-create-form").find("#public_recipient").addClass("a-hidden")):
(b(".reg-create-form").find("#private_blurb").addClass("a-hidden"),b(".reg-create-form").find("#public_blurb").removeClass("a-hidden"),b(".reg-create-form").find("#public_recipient").removeClass("a-hidden"))},w=function(a){for(var b=n.location.search.substring(1).split("\x26"),d=0;d<b.length;d++){var k=b[d].split("\x3d");if(k[0]===a)return k[1]}},B=function(a){a.each(function(){b.data(this,"default",this.value)}).focus(function(){this.select();this.onmouseup=function(){this.onmouseup=null;return!1}}).keyup(function(){b.data(this,
"edited",""!==b.trim(this.value))}).change(function(){b.data(this,"edited",""!==b.trim(this.value))}).blur(function(){b.data(this,"edited")||(this.value=b.data(this,"default"))})},C=function(a){a.delegate("input:text","keypress",function(a){13===a.which&&a.preventDefault()})};return{changePrivacySetting:function(a){a.$event.preventDefault();var c=a.$target.closest(".a-popover");a=a.data;var d=a.type;c.hide();b("#a-popover-reg-create-privacy").find(".a-active").removeClass("a-active");b("#a-popover-reg-create-privacy").find("#WLNEW_link_"+
d).addClass("a-active");b(".reg-create-form").find("#WLNEW_input_privacy").val(d);b(".reg-create-form").find('a[id^\x3d"WLNEW_privacy_"]').find("span").html(a.triggerText);y(a.privacy)},togglePrivacy:function(a){a.$event.preventDefault();a=a.data;var c=a.privacy;b(".reg-create-form").find("#WLNEW_input_privacy").val(c);b(".reg-create-form").find('a[id^\x3d"WLNEW_privacy_"]').find("span").html(a.triggerText);y(c)},toggleListName:function(a){var c=a.data;a=c.name;var d=c.privacy,k=c.persistence,e=c.isReorderList===
p?!1:c.isReorderList;c=c.isReorderListView===p?!1:c.isReorderListView;b(".reg-create-form").find("#WLNEW_section_wlName").show();b(".reg-create-form").find("#create-isIdeaList").val("0");b(".reg-create-form").find("#WLNEW_section_ideaList").hide();b(".reg-create-form").find("#WLNEW_list_name").val(a);b(".reg-create-form").find("#WLNEW_privacy_"+d).click();b(".reg-create-form").find("#WLNEW_input_privacy").val(d);b(".pop-create").find("#WLNEW_list_persistence").prop("checked",c?e:"persistent"===k);
c&&b(".reg-create-form").find("#WLNEW_list_persistence").val(e?"persistent":"non-persistent")},toggleIdeaList:function(a){b(".reg-create-form").find("#WLNEW_section_wlName").hide();b(".reg-create-form").find("#create-isIdeaList").val("1");b(".reg-create-form").find("#WLNEW_section_ideaList").removeClass("a-hidden").show()},onShow:function(a){var c=a.popover;a=a.popover.$popover;c.data.first&&a.find("#WLNEW_section_wlFor").addClass("a-hidden");c.data.forFriend&&(a.find("#WLNEW_section_wlName, #WLNEW_section_occAge, #WLNEW_listfor_listtype_divider, #WLNEW_section_wlType, #WLNEW_section_wlFor, #WLNEW_listtype_listname_divider, #WLNEW_section_ideaList").addClass("a-hidden"),
a.find("#WLNEW_section_glName, #WLNEW_section_occDate, #WLNEW_section_occReminder, #WLNEW_privacy_gl").removeClass("a-hidden"),"child"===c.data.value&&t(a),b(".reg-create-form").find("#WLNEW_privacy_private").click(),b(".reg-create-form").find("#WLNEW_input_privacy").val("private"),a.find('select[name\x3d"create-for"]').val("friend"));c.data.sourceVendorId&&a.find('input[name\x3d"create-sourceVendorId"]').val(c.data.sourceVendorId);if(c.data.next){var h=c.data.next,k=a.find(".reg-create-form");k.find('input[name\x3d"create-next"]').val(h);
d.each(c.data,function(a,c){c.match(/^next-/)&&(a=b("\x3cinput/\x3e",{type:"hidden",name:c,value:a}),k.prepend(a))})}B(a.find("#WLNEW_list_name"));C(a)},onDropdownSelect:function(a){var c=b(a.selectNode).closest(".a-popover");if("create-for"===a.name){var d="public";if("self"===a.value)c.find("#WLNEW_section_glName, #WLNEW_section_occDate, #WLNEW_section_occAge, #WLNEW_section_occReminder, #WLNEW_privacy_gl").addClass("a-hidden"),c.find("#WLNEW_section_wlName, #WLNEW_listfor_listtype_divider, #WLNEW_section_wlType, #WLNEW_section_ideaList").removeClass("a-hidden"),
"1"===b("#create-isIdeaList").val()?c.find("#WLNEW_section_wlName").hide():c.find("#WLNEW_section_ideaList").hide();else if("friend"===a.value||"child"===a.value)c.find("#WLNEW_section_wlName, #WLNEW_section_occAge, #WLNEW_listfor_listtype_divider, #WLNEW_section_wlType, #WLNEW_section_ideaList").addClass("a-hidden"),c.find("#WLNEW_section_glName, #WLNEW_section_occDate, #WLNEW_section_occReminder, #WLNEW_privacy_gl").removeClass("a-hidden"),0===b("#popCal").length&&c.find("#WLNEW_occ_date").removeClass("a-hidden"),
"child"===a.value&&t(c),d="hidden",b(".reg-create-form").find("#WLNEW_privacy_private").click(),b(".reg-create-form").find("#WLNEW_input_privacy").val("private");x(d,c)}else"create-month"===a.name||"create-day"===a.name?(a=c.find('select[name\x3d"create-for"]').val())&&"child"===a&&t(c):"choose-relationship"===a.name&&(a=a.value,c.find("#create-participant_relationship").val(a))},onClose:function(a){x("public",a.popover.$popover);m=0},submitCreate:function(a,c,h,k,e){a.$event.preventDefault();var g=
a.$target.closest(".reg-create-form"),l=g.closest(".a-popover");A(g);m++;var f=v(g);f=z(f);var p=!1;d.each(f.errors,function(a,c){a=l.find("#WLNEW_alert_"+c);a.removeClass("a-hidden");a.parent("div").find("input").each(function(){b(this).addClass("a-form-error")});p=!0});p||(a={sid:a.data.sid,createListToken:a.data.createListToken},b.extend(a,f.userCreateArgs),l.find("#WLNEW_loading").removeClass("a-hidden"),l.find("#popover-spinner .a-popover-loading").show(),g.addClass("a-hidden"),f.userCreateArgs.isIdeaList?
(c="/hz/wishlist/ajax/createlist?ref\x3ddl_create_list_lv",f.userCreateArgs.isCreateAndAdd&&(c="/hz/wishlist/ajax/createlistandadditem?ref\x3ddl_create_list_dp"),b.ajax(c,{type:"POST",data:a,success:k,error:e})):(k="Y"===a["create-isPrivate"]?"private":"public",e={},e.sid=a.sid,"undefined"!==typeof a.createListToken&&(e.createListToken=a.createListToken),e.listType=a["create-registryType"],e.privacyStatus=k,"undefined"!==typeof a["create-name"]&&(e.listName=a["create-name"]),"undefined"!==typeof a["create-persistence"]&&
(e.persistence=a["create-persistence"]),"undefined"!==typeof a["create-sourceVendorId"]&&(e.vendorId=a["create-sourceVendorId"]),"undefined"!==typeof a["create-participant2-name"]&&(e.participantName=a["create-participant2-name"]),"undefined"!==typeof a["create-participant2-surName"]&&(e.participantGivenName=a["create-participant2-surName"]),"undefined"!==typeof a["create-participant2-givenName"]&&(e.participantSurName=a["create-participant2-givenName"]),"undefined"!==typeof a["create-participant2-relationship_Participant"]&&
(e.relationship=a["create-participant2-relationship_Participant"]),"undefined"!==typeof a["create-occasion1-fromDate_Day"]&&(e.occasionFromDate=a["create-occasion1-fromDate_Day"]),"undefined"!==typeof a["create-occasion1-fromDate_Month"]&&(e.occasionFromMonth=a["create-occasion1-fromDate_Month"]),"undefined"!==typeof a["create-occasion1-fromDate_Year"]&&(e.occasionFromYear=a["create-occasion1-fromDate_Year"]),"undefined"!==typeof a["create-occasion1-reminderOffset_Occasion"]&&(e.occasionReminderOffset=
a["create-occasion1-reminderOffset_Occasion"]),"undefined"!==typeof a.asin&&(e.asin=a.asin),"undefined"!==typeof a.customizationToken&&(e.customizationToken=a.customizationToken),"undefined"!==typeof a["create-recipient-name"]&&(e.recipientName=a["create-recipient-name"]),u(e,c,h)))}}});"use strict";f.register("mash-capabilities",function(){var d;return{isDispatchEventAvailable:function(){if(d!==p)return d;a:{var f=document.cookie.split(";");for(var b=0;b<f.length;b++){for(var h=f[b];" "===h.charAt(0);)h=
h.substring(1,h.length);if(0===h.indexOf("amzn-app-ctxt\x3d")){f=h.substring(14,h.length);break a}}f=null}b=0;if(null!==f)try{var m=f.match(/"cp":[0-9]*/);null===m&&(m=decodeURIComponent(f).match(/"cp":[0-9]*/));if(null!==m&&0<m.length){var n=m[0].split(/:/);if(null!==n&&2===n.length){var r=parseInt(n[1],10);b="number"===typeof r?r&2048:0}}}catch(v){}return d=0!==b}}});"use strict";f.when("A").register("weblab-trigger",function(d){var f=d.$;return function(b){f.ajax({url:"/hz/wishlist/triggerweblab?name\x3d"+
b,success:function(d){d||n.ueLogError(p,{logLevel:"FATAL",attribution:"ListsDPXCommonAssets::"+b,message:"failed To trigger weblab "+b})},timeout:2E4})}})});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,v=h._namespace||h.attributeErrors,b=v?v("RegistryDPAssets",""):h;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,h,v){g.when("A","b2b-lists-detail").execute(function(b,c){function e(){var a=b.$("#free-form-quantity-dropdown"),d=b.$("#quantity-update-text"),e=b.$("#quantity"),c=1;0<a.length&&a.is(":visible")?(c=a.val(),0===c.length&&(c=d.val())):0<d.length&&d.is(":visible")?c=d.val():0<e.length&&e.is(":visible")&&
(c=e.val());return c}c.isEnabled()&&(b.on("a:dropdown:selected:quantity",function(a){c.updateQuantity(a.value)}),b.on("a:dropdown:selected:free-form-quantity-dropdown",function(a){0<a.value.length?c.updateQuantity(a.value):c.updateQuantity(b.$("#quantity-update-text").val())}),b.$(document).delegate("#quantity-update-text","change",function(a){c.updateQuantity(a.target.value)}),b.on("a:pageUpdate",function(){var a=b.$("#ASIN").val();c.updateQuantityAndAsin(e(),a)}))});g.when("A","a-modal").register("b2b-lists-detail",
function(b,c){function e(){return c.get(b.$("#business-list-modal"))}function a(a,b,e){var d=new RegExp("([?\x26])"+b+"\x3d.*?(\x26|$)","i"),c=a;a.match(d)&&(c=a.replace(d,"$1"+b+"\x3d"+e+"$2"));return c}return{updateQuantityAndAsin:function(d,c){var r=(b.state("businessListPageState")||{}).businessListUrl;r&&(r=a(r,"quantity",d),d=r=a(r,"asin",c),e().update({url:d}))},updateQuantity:function(c){var d=(b.state("businessListPageState")||{}).businessListUrl;d&&(c=d=a(d,"quantity",c),e().update({url:c}))},
isEnabled:function(){return 0<b.$("#add-business-list-button").length}}});"use strict";g.when("A","a-popover","atwl-common-util","atwl-dropdown-util","atwl-util","atwl-inline-util","add-to-wish-list:plugin-registry","lists-ajax-handler","atwl-ready").register("add-to-wish-list",function(b,c,e,a,d,l,r,t){"undefined"!==typeof b.state.parse&&b.state.parse();var f=b.$;e.getState("atwl");var k=e.getState("popoverState");e.atwlFormSelector();var n=h.currentType;h.setRegistryId=e.setRegistryId;var q=[],
g=function(a){"undefined"!==typeof a&&a.preventDefault();p();var c=function(){var c=e.getState("wishlistDPState").isFirstCreate?"create":"add";"add"===c&&f("html").hasClass("a-lt-ie9")?(h.atwlLoaded=!1,atwlEarlyClick(a)):(n="wishlist",h.currentType=n,b.state("wishlistDPState",{action:c,type:n}),f("#add-wishlist-declarative").trigger("click"))},d=r.getPlugin();d&&d.addToList?d.addToList(c):c()};b.on("addFormSubmit",g);var p=function(){var a=e.getState("wishlistDPState");delete a.customizationToken;
delete a.customizedPrice;b.state.replace("wishlistDPState",a)};c=function(){(k.showWishListDropDown||k.showBabyRegDropdown||k.isAddToWishListDropDownAuiEnabled||k.showPopover)&&k.showPopover&&(f("#add-to-wishlist-button-submit").unbind("click").bind("click",g),b.declarative("add-wishlist-declarative",["click"],function(a){a=e.getState("wishlistDPState");d.parsePostData(a.action,a.type);(a=h.ue)&&a.count("lists:dp:addtolist:click",(a.count("lists:dp:addtolist:click")||0)+1)}))};c();b.on("atwl-trigger-onload-bindings",
c);return{setPostAddSuccess:function(a){q.push(a)}}});"use strict";g.when("A","a-popover","atwl-common-util").register("atwl-dropdown-util",function(b,c,e){var a=b.$;e.getState("popoverState");var d=0,l,r=e.CONST,t=e.ie8NoScroll,f=e.setAtwlState,k=function(){a("#wishListDropDown").removeClass("a-button-selected");a("#wishListMainButton").removeClass("a-button-selected")},n=function(){var a=e.getState("atwl"),b=a.activePopoverButtonId;return"undefined"!==b&&"add-to-baby-button-group"===b?a.babyDropDownHtml:
a.dropDownHtml},q=function(a){var b=e.getState("atwl").activePopoverButtonId;"undefined"!==b&&"add-to-baby-button-group"===b?f({babyDropDownHtml:a}):f({dropDownHtml:a})},g=function(){var b=a("#atwl-dd-ul").parent();if(b&&b.get(0)){var c=b.get(0).scrollHeight,d=b.height();b=2*parseInt(b.css("padding-top"),10);return c>d+b}return!1},p=function(c){0!==a(".atl-keyboard-a11y").length&&(c=c.find(".a-button-close"),a(".atl-keyboard-a11y").each(function(b){a(this).attr("tabindex","-1");a(this).find(".a-declarative").eq(0).attr("tabindex",
"0")}),c.show(),c.addClass("atwl-hz-button-close"),document.querySelectorAll('[id^\x3d"atwl-link-to-list"]').forEach(function(a){a.addEventListener("click",function(a){a=a.currentTarget.querySelector('span[data-action\x3d"atwl-dd"]');null!==a&&a.click()})}),c=document.querySelector('[data-action^\x3d"show-create-list"]'),null!==c&&(c.setAttribute("tabindex","0"),c.setAttribute("role","button"),c.addEventListener("keydown",function(a){if(a.which===b.constants.keycodes.ENTER||a.which===b.constants.keycodes.SPACE)a=
a.currentTarget.children[1],null!==a&&a.click()})))},w=function(c){c.find(".a-button-close").hide();c.find(".a-popover-content").css({"margin-right":"0px"});c.css({padding:"0"});c.find(".a-popover-inner").css({padding:"0"});p(c);setTimeout(function(){c.find(".a-arrow-border").addClass("aok-hidden");a("#atwl-rich-content").css({"margin-bottom":"0px",width:"auto"});var d=e.getState("atwl");if(d.hzPopover){var f=document.getElementById(d.activePopoverButtonId);if(null!==f&&"undefined"!==typeof f){var m=
f.getBoundingClientRect().left;b.capabilities.rtl&&(m=a(h).width()-f.getBoundingClientRect().right);c.css({left:m+"px"})}}a.browser.msie&&(m=a("#"+d.wishlistButtonSubmitId),d=m.offset(),f=m.height(),m=d.left,d=d.top+f,t()&&(m+=document.body.parentElement.scrollLeft,d+=document.body.parentElement.scrollTop),g()&&(m-=17),c.css({left:m+"px",top:d+"px"}))},50)},x=function(b){var c=t()?50:0;setTimeout(function(){var c=a("#atwl-popover-inner"),d=c.width(),f=e.getState("atwl"),m=document.getElementById(f.activePopoverButtonId);
f.hzPopover&&null!==m&&"undefined"!==typeof m?d=m.getBoundingClientRect().width:g()?d+=r.overflowWidth:a(".atwl-dd-list-name").each(function(b){b=a(this);b.width(b.width()+r.noOverflowWidth)});f=b.find("ul li a.a-active").first();f.css("margin-left","1px");f.parent().focus();c.width(d)},c)},u=function(){if(l){var a=c.get(l);a&&a.hide()}},m=function(b){var d=r.widthStaticPopovers;try{d=document.getElementById("add-to-wishlist-button-group").clientWidth}catch(F){}a("#"+b).children().first().width(d);
u();if(c){var f=c.get(l),m=e.getState("atwl");f=f?c.get(l):c.create(a("#"+m.activePopoverButtonId),{content:a("#"+b).html(),name:"atwl",skin:function(a){return a},activate:"onmouseclick",width:d,position:m.dropDownPosition||"triggerBottom",closeButtonLabel:m.closeButtonAriaLabel,popoverLabel:m.dropdownAriaLabel});f.update({width:d,content:a("#"+b).html()});l=f.id;f.show().updatePosition();w(f.$popover)}},y=function(){k();d++;u();m("atwl-dd-error-holder")},B=function(){var b=e.getState("atwl");return c.create(a("#"+
b.activePopoverButtonId),{content:n(),name:"atwl",skin:function(a){return a},activate:"onmouseclick",position:b.dropDownPosition||"triggerBottom",closeButtonLabel:b.closeButtonAriaLabel,popoverLabel:b.dropdownAriaLabel})},v=function(a){a.update({content:n(),width:"auto"});a.show();w(a.$popover);x(a.$popover)},C=function(){var d=c.get("atwl");d&&d.isActive()?d.hide():(d=B(),c.remove(d),d=B(),v(d),b.capabilities.touch&&setTimeout(function(){var b=a("#wishlistButtonStack"),c=b.clone(),d=b.parent();b.remove();
d.append(c)},300),"function"===typeof h.uet&&h.uet("cf","addToListDropdown",{wb:1}),"function"===typeof h.uex&&h.uex("ld","addToListDropdown",{wb:1}))},D=function(){var a=c.get("atwl");a&&a.isActive()&&a.hide()},z=function(a,b,c){a.append('\x3cinput type\x3d"hidden" id\x3d"'+b+'" name\x3d"'+b+'" value\x3d"'+c+'"\x3e')};return{makeDropDownArrowInactive:k,getDropDownHtml:n,setDropDownHtml:q,resetDropDownHtml:function(){q("")},resetAjaxFailCount:function(){this.ajaxFailCount=0},hideDropdown:D,hideError:function(){u();
var a=e.getState("atwl");return d>=a.maxAjaxFailureCount},showUnavail:function(){u();u();m("atwl-dd-unavail-holder")},showSpinner:function(){m("atwl-dd-spinner-holder")},parseAjaxResponse:function(c){k();u();if("object"===typeof c)var d=c;else try{d=b.parseJSON(c)}catch(E){y();return}"undefined"!==typeof d.html&&"undefined"!==d.css?(q(d.html),c=d.css,a("body").append(c),C()):y()},showError:y,showDropDown:C,removeDropdownButtonAriaControls:function(){a("#add-to-wishlist-button").removeAttr("aria-controls")},
setDropdownButtonAriaControls:function(){var b=c.get("atwl");b.$container&&b.$container[0]&&a("#add-to-wishlist-button").attr("aria-controls",b.$container[0].id)},setInputRegistryId:function(c,d){"undefined"===typeof d&&(d="wishlist");var m="pop_"+c+"_"+d,k=a(e.atwlFormSelector()),p=k.find(e.popCommandSelector);p.length?p.attr("value",m):z(k,"sourceCustomerOrgListID",m);m=k.find("[name\x3d'registryID']");m.length?m.attr("value",c):z(k,"registryID",c);c=k.find("[name\x3d'registryType']");c.length?
c.attr("value",d):z(k,"registryType",d);f({inSubmit:!0});d=k.find("[name\x3d'submit.add-to-registry.wishlist'],[name\x3d'submit.add-to-wishlist']").eq(0);d.length?d.click():b.trigger("addFormSubmit");D();return!1}}});"use strict";g.when("A","a-popover","atwl-dropdown-util","atwl-common-util","atwl-inline-util","kbp","idea-list-csrf-utils","add-to-list-modal-util","lists-ajax-handler","atwl-ready").execute("atwl-dropdown",function(b,c,e,a,d,l,r,t,f){var k=b.$,n=a.getState("popoverState"),q=a.getState("atwl"),
g=q.wireDeclaratives,p=function(){var a=k("#"+q.wishlistButtonId),c=k("#"+q.wishlistButtonSubmitId);b.on("wl-drop-down",function(a){x(a)});c.addClass("a-declarative");c.attr("data-action","atwl-splitbutton-main");k("#wishListMainButton").addClass("a-declarative").attr("data-action","add-wishlist-declarative");h.atwlEc&&setTimeout(function(){a.click();k("#atwl-dd-spinner-holder").addClass("a-hidden");h.atwlEc=!1},1);h.atwlLoaded=!0};b.on("a:pageUpdate",function(){k("#wishListMainButton").hasClass("a-declarative")||
(p(),b.trigger("atwl-trigger-onload-bindings"))});var w=function(){var a=h.atwlEc?"lists:dp:ech:early":"lists:dp:ech:late";var b=h.ue;b&&b.count(a,(b.count(a)||0)+1)},x=function(b){b.$event&&b.$event.originalEvent&&b.$event.originalEvent.acknowledge&&b.$event.originalEvent.acknowledge(b.$currentTarget.get(0));"function"===typeof h.uet&&h.uet("bb","addToListDropdown",{wb:1});w();a.setAtwlState({activePopoverButtonId:"add-to-wishlist-button-group"});b.$event?b.$event.preventDefault():b.preventDefault();
setTimeout(function(){e.makeDropDownArrowInactive()},0);if("not-allowed"===(b.$target?b.$target:k(b.target)).css("cursor"))return!1;if(e.hideError())return e.showUnavail(),!1;if((b=e.getDropDownHtml())&&b.length)e.showDropDown();else{e.showSpinner();b=a.getState("wishlistDPState");var c="website.wishlist.detail.add";"undefined"!==typeof b.vendorId&&(c=b.vendorId);b="/hz/wishlist/addtolist?"+k.param({sortMethod:q.sortMethod||0,type:"wishlist",useAll:q.showAllTypes||0,sourceVendorId:c});k.ajax({url:b,
cache:!1,success:e.parseAjaxResponse,error:e.showError})}return!1};if(n.showWishListDropDown||n.isAddToWishListDropDownAuiEnabled||n.showPopover)p(),a.setAtwlState({resetDropDownHtml:e.resetDropDownHtml}),g||(b.declarative("atwl-splitbutton-arrow","click",x),b.declarative("atwl-dd","click",function(c){c.$event.preventDefault();u();e.hideDropdown();var d=c.data;t.show(c.$target,{height:d.height,width:d.width,name:d.name,popoverLabel:d.header,closeButtonLabel:d.closeButtonLabel,header:d.header,padding:d.padding});
c={asin:a.getAsin(),vendorId:"website.wishlist.detail.add",listExternalId:d.listExternalId,listType:d.listType,isAjax:"1"};b.state.replace("atwl-huc-recommendation-state",{listId:c.listExternalId,listType:c.listType});f.post({url:"/hz/wishlist/additemtolist",params:c,successCallback:function(a){t.updateHtmlContent(a)},errorCallback:function(a){}})}),b.declarative("atwl-dd","keydown",function(a){var d=b.constants.keycodes,f=a.$event;f.which===d.ENTER||f.which===d.SPACE?(f.preventDefault(),a.$target.click()):
f.which===d.ESCAPE&&(f.preventDefault(),a=c.get("atwl").$container.find(".a-button-close"),a.focus(),a.eq(0).trigger("click"))}),b.declarative("atwl-dd-dl","click",function(c){c.$event.preventDefault();e.hideDropdown();d.showSpinner();var f=a.getAsin(),p=a.getSid();f=k.extend({},{asin:f,sid:p},c.data);p=[];r.addIdeaListCsrfToken(p);b.post("/create/api/addToList?ref\x3didea_dp_ai",{params:f,headers:p,success:function(a){a.registryName=c.data.listName;d.addItemResponseHandler(a)},error:d.showError,
abort:d.showError});return!1}),b.declarative("atwl-kbp-landing","click",function(b){b=b.data;var c=a.getAsin();h.open(b.url+("\x26asin\x3d"+c));return!1}),b.on("a:popover:hide:atwl",function(){e.removeDropdownButtonAriaControls()}),b.on("a:popover:show:atwl",function(){e.setDropdownButtonAriaControls()})),q&&"kbp"===q.sortMethod&&(b.state("atwl",{kbpPromo:{mouseOver:!1,countDown:!1}}),b.ajax("/gp/toys/birthday/atwl-dpx.html",{method:"get",cache:!1,params:{isAUI:1},success:l.showKbpPromoPopover,error:function(){}}),
g||(b.declarative("atwl-kbp-promo-mouseover","mouseleave",function(){var d=a.getState("atwl").kbpPromo;d.mouseOver=!1;if(d.countDown){var f=c.get("kbpPromoPopover");f&&(f.unlock().hide(),c.remove(f))}b.state("atwl",{kbpPromo:d})}),b.declarative("atwl-kbp-promo-mouseover","mouseenter",function(){var c=a.getState("atwl").kbpPromo;c.mouseOver=!0;b.state("atwl",{kbpPromo:c})}),b.on("a:popover:hide:kbpPromoPopover",function(){var a=c.get("kbpPromoPopover");a.unlock().hide();c.remove(a)}))),a.setAtwlState({wireDeclaratives:!0});
var u=function(){var a=h.ue;a&&a.count("lists:dp:addtolist:dropdownentry:click",(a.count("lists:dp:addtolist:dropdownentry:click")||0)+1)}});"use strict";(function(){var b=!1;g.when("cf").execute(function(){b||(b=!0,c())});g.when("atwl-cf").execute(function(){b||(b=!0,c())});var c=function(){g.now("cf-or-atwl-cf").execute(function(b){"undefined"===typeof b&&h.P.register("cf-or-atwl-cf")})}})();g.when("A","cf-or-atwl-cf").register("atwl-common-util",function(b){var c=b.$,e=function(){return"#"+(a("popoverState").formId||
"addToCart")+",#addToWL"},a=function(a){b.state.parse();return 0===c('script[data-a-state\x3d"{"key":"'+a+'"}"]').length?{}:b.state(a)||JSON.parse(c('script[data-a-state\x3d"{"key":"'+a+'"}"]').text())||{}};return{CONST:{widthStaticPopovers:230,overflowWidth:10,noOverflowWidth:10,scrollbarWidth:17},getAsin:function(){var b=c(e()).find("#ASIN").val();return"undefined"===typeof b?c(e()).find("[name^\x3d'ASIN'],[name^\x3d'ASIN.0']").val():""===b?a("atwl").asin:b},getSid:function(){var a=c(e()).find("#session-id").val();
"undefined"===typeof a&&(a=c(e()).find("[name\x3d'session-id']").val());return a},ie8NoScroll:function(){return 9>parseInt(c.browser.version,10)&&document.body&&document.body.parentElement?!(!document.body.parentElement.scrollLeft&&!document.body.parentElement.scrollTop):!1},setRegistryID:function(a){var b=c(e());b.find("[name\x3d'sourceCustomerOrgListID'],[name\x3d'colid'],[name\x3d'wlPopCommand']").attr("value",a);b.find("[name\x3d'submit.add-to-registry.wishlist'],[name\x3d'submit.add-to-wishlist']").eq(0).click();
return!1},setAtwlState:function(a){b.state("atwl",c.extend(b.state("atwl")||{},a))},getState:a,clearText:function(a){a.value===a.defaultValue&&(a.value="")},forceFormSubmit:function(a){var b=a.attr("name");a=a.parents("form");b=c('\x3cinput type\x3d"hidden" /\x3e').attr("name",b).val("1");a.append(c(b));a.submit()},clearPopCommandFields:function(){for(var a=["wlPopCommand","sourceCustomerOrgListID"],b=0;b<a.length;b++){var e=c('[name^\x3d"'+a[b]+'"]');e&&e.length&&e.val("")}},atwlFormSelector:e,popCommandSelector:"[name\x3d'sourceCustomerOrgListID'],[name\x3d'colid'],[name\x3d'wlPopCommand']"}});
"use strict";g.when("A","a-popover","atwl-common-util").register("kbp",function(b,c,e){var a=b.$,d=e.getState("atwl"),l=a("#"+d.wishlistButtonSubmitId);return{showKbpPromoPopover:function(a){if(a&&a.promoEnabled){var d=a.html;if(d){var f=c.create(l.parent(),{name:"kbpPromoPopover",content:d,position:"triggerBottom",width:a.width});f.show().lock();b.delay(function(){var a=e.getState("atwl").kbpPromo||{};a.mouseOver?a.countDown=!0:(f.unlock().hide(),c.remove(f));b.state("atwl",{kbpPromo:a})},1E4)}}}}});
"use strict";g.when("A","atwl-util","atwl-dropdown-util","atwl-common-util","lists-ajax-handler","atwl-ready").execute("atwl-huc",function(b,c,e,a,d){var l=b.$;e=a.getState("popoverState");var r=a.getState("createInfo")||{},t="addCreateToWishlist";r.isHorizonte&&(t="reg-create");if(e.showWishListDropDown||e.showBabyRegDropdown||e.isAddToWishListDropDownAuiEnabled||e.showPopover)b.on("a:popover:show:"+t,function(f){var e=f.popover,n=e.$popover;f=a.getState("wishlistDPState");var l=f.action;n.addClass("pop-huc-"+
l);var t=e.$trigger.closest(".a-button").find("input");n=f.type;t.closest(".a-button-selected").removeClass("a-button-selected");n=c.parsePostData(l,n);f.customizationToken&&(n.customizationToken=f.customizationToken);f=n.url;var p=n.streaming,g="ajax_"+p,x=new Date;h.ue&&h.uet("tc",g);var u=function(){e.hide();a.forceFormSubmit(t)},m=function(){e.$popover.find("#popover-spinner").addClass("a-hidden");a.clearPopCommandFields()};"create"!==l&&p?(f=c.buildAddItemToDefaultListParams(n),b.state.replace("atwl-huc-recommendation-state",
{listId:"",listType:f.listType}),d.post({url:"/hz/wishlist/additemtolist",params:f,successCallback:function(a){m();e.$popover.find("#WLHUC_result").html(a).removeClass("a-hidden");e.updatePosition()},errorCallback:u})):r.isHorizonte?b.ajax(f,{method:"get",success:function(a){e.$popover.find("#popover-spinner").addClass("a-hidden");e.$popover.find("#WLHUC_result").html(a).removeClass("a-hidden");e.updatePosition()},error:u}):b.ajax(f,{method:"post",params:n,success:function(b){b&&b.html?(h.ue&&(h.ues("id",
g,b.requestId),h.ues("t0",g,x),h.ues("ctb",g,"1")),b.status&&"no-asins"===b.status?u():(m(),"add"===l?e.$popover.find("#WLHUC_result").html(b.html).removeClass("a-hidden"):(e.$popover.find("#WLNEW_main").html(b.html).removeClass("a-hidden"),(b=a.getState("atwl"))&&b.resetDropDownHtml&&b.resetDropDownHtml()),e.updatePosition()),h.ue&&(h.uet("be",g),h.uex("ld",g))):("create"===l&&a.forceFormSubmit(t),e.hide())},error:u})}),b.on("a:popover:beforeShow:"+t,function(b){b=b.popover;var c=a.getState("wishlistDPState");
b.$popover.find("#popover-spinner").removeClass("a-hidden");b.$popover.find(".wlAddCreatePop").html("").addClass("a-hidden");var d=c.action,e=d+"Header";"create"===d&&c.isFirstCreate&&(e="first"+e);b.update({header:c[e]});"create"===d&&b.update({width:c[d+"Width"],height:c[d+"Height"]});b.updatePosition()}),b.on("a:popover:hide:"+t,function(b){l(".a-modal-scroller").css({visibility:"hidden"});a.clearPopCommandFields()})});"use strict";g.when("A","atwl-common-util","add-to-wish-list:plugin-registry").register("atwl-util",
function(b,c,e){var a=b.$;return{parsePostData:function(a,b){var d=c.getState("popoverState");d=document.getElementById(d.formId||"addToCart");if("undefined"===typeof d||null===d)d=document.getElementById("addToWL");var l=[];if("undefined"!==typeof d&&null!==d){var f=[];l=!1;var k=d.elements;k||(k=d.querySelectorAll("input"),l=!0);for(var g=0;g<k.length;g++){var h;if(!(h=l)){h=k[g];var v=/^(?:checkbox|radio)$/i,p=/^(?:submit|button|image|reset|file)$/i,w=/^(?:input|select|textarea|keygen)/i;if(h){var x=
h.type;h=h.name&&!h.disabled&&w.test(h.nodeName)&&!p.test(x)&&(h.checked||!v.test(x))}else h=!1}h&&f.push(k[g])}l=f}f={};k=c.getState("wishlistDPState");for(g=0;g<l.length;g++)"submit"!==l[g].type&&(f[l[g].name]=l[g].value);f.requestedQty=f.quantity=null!==d&&"undefined"!==typeof d.quantity?d.quantity.value:1;f.sid="undefined"!==typeof f["session-id"]?f["session-id"]:k.sid;f.cache=!1;f.url=k[a+"Url"];f.action=a;f.type=f.registryType||"wishlist";"add"===a?(f.type=f.registryType||b,f.caller="aui",f.streaming=
k.streaming,f.sourceVendorId="undefined"!==typeof k.vendorId?k.vendorId:"website.wishlist.detail.add"):"create"===a&&(f.create_sid=f.sid,f.create_type=f.registryType||b,f.create_nextAction="add",f.create_includeEmptyList=1,f.create_isFirst=k.isFirstCreate?1:0,f.caller="aui",f.create_sourceVendorId="undefined"!==typeof k.vendorId?k.vendorId:"website.wishlist.detail.add");(a=e.getPlugin())&&a.filterFormData&&a.filterFormData(f);return f},hideAddToListButtonStack:function(){a("#add-to-wishlist-button-group").hasClass("a-hidden")||
a("#add-to-wishlist-button-group").addClass("a-hidden")},showAddToListButtonStack:function(){a("#add-to-wishlist-button-group").hasClass("a-hidden")&&a("#add-to-wishlist-button-group").removeClass("a-hidden")},buildAddItemToDefaultListParams:function(a){return{asin:c.getAsin(),vendorId:"website.wishlist.detail.add",listType:a.type,isAjax:"1"}}}});"use strict";g.when("A","atwl-util","atwl-dropdown-util","cf").register("atwl-inline-util",function(b,c,e){var a=b.$,d=function(){a("#atwl-inline-spinner").addClass("a-hidden")},
l=function(){c.hideAddToListButtonStack();a("#atwl-inline-spinner").removeClass("a-hidden")},g=function(){d();a("#atwl-inline").addClass("a-hidden");c.showAddToListButtonStack();e.makeDropDownArrowInactive();a("#atwl-inline-error").removeClass("a-hidden")},h=function(b){a("#atwl-inline-error-msg").empty();a("#atwl-inline-error-msg").html(b)},f=function(b,c){b=c&&"giftlist"===c?"/gp/registry/giftlist/"+b+"/ref\x3dwl_inline_title":c&&"discoverlist"===c?"/create/collection?id\x3damzn1.ideas."+b+"\x26ref_\x3didea_dp_inline":
"/gp/registry/wishlist/"+b+"/ref\x3dwl_inline_title";a("#atwl-inline-link").attr("href",b)},k=function(b){a("#atwl-inline-link-text").empty();a("#atwl-inline-link-text").text(b)},n=function(){d();a("#atwl-inline-error").addClass("a-hidden");a("#atwl-inline").removeClass("a-hidden")},q=function(b){b&&b.message&&h(b.message);g();a(".reg-create-form").closest(".a-popover").find(".a-button-close").click()},A=function(b){l();a(".reg-create-form").closest(".a-popover").find(".a-button-close").click();k(b.listName)};
return{showSpinner:l,showError:g,showErrorClosePopover:q,parseParams:function(a,b){a=c.parsePostData(a,b);b=a.ASIN||a["ASIN.0"];var d=a["session-id"],e=a.sourceVendorId,f=a.type||"wishlist";var g="create"===a.action?"newsl":a.wlPopCommand?a.wlPopCommand.split("_")[1]:a.sourceCustomerOrgListID?a.sourceCustomerOrgListID.split("_")[1]:"default";return{asin:b,sid:d,sourceVendorId:e,type:f,registryID:g,pcomp:0,action:a.action}},addItemResponseHandler:function(a){try{typeof a!==v?1===a.isValid||!0===a.updateSuccessful?
(f(a.registryID,a.registryType),k(a.registryName),n()):typeof a.message!==v&&(h(a.message),g()):g()}catch(w){g()}},addItemResponseHandlerHZ:function(a){try{typeof a!==v&&!1===a.hasError?(A(a),f(a.listExternalId,a.listType),n()):g()}catch(w){g()}},addItemResponseHandlerHZIdeaList:function(a){try{typeof a!==v&&a.updateSuccessful?(A(a),f(a.listId,"discoverlist"),n()):q(a)}catch(w){q(a)}}}});"use strict";g.register("add-to-wish-list:plugin-registry",function(){var b=null;return{registerPlugin:function(c){if(null!==
b)throw Error("Only a single plugin can be registered.");b=c},getPlugin:function(){return b}}});"use strict";g.when("A","a-modal").register("add-to-list-modal-util",function(b,c){b.declarative("continue-shopping-submit","click",function(a){e("reg-create","hide");e("add-item-to-list-modal","remove")});var e=function(a,b){var d=c.get(a);d&&("hide"==b?d.hide():c.remove(a))};return{show:function(a,b){e("add-item-to-list-modal","remove");c.create(a,b).show()},updateHtmlContent:function(a){c.get("add-item-to-list-modal").update({content:a})}}});
"use strict";g.when("A","atwl-common-util","amazon-lists-csrf-utils").register("add-to-list-from-huc-recs",function(b,c,e){var a=b.$,d=function(a){var b=h.ue;b&&b.count(a,(b.count(a)||0)+1)};b.on("lists:widget:add_card_item_to_list_requested",function(g,h){var l=b.state("atwl-huc-recommendation-state");h={listId:l.listId,listType:l.listType,asin:g,sid:c.getSid(),tags:JSON.stringify(h)};var f=function(){d("lists:dp:card:addtolist:failed");b.trigger("lists:widget:add_card_item_to_list_failed",g)};l=
[];e.addCsrfToken(l);a.ajax({type:"POST",url:"/hz/wishlist/addasin",data:h,headers:l,success:function(a){a&&!1===a.hasError?(d("lists:dp:card:addtolist:succeeded"),b.trigger("lists:widget:add_card_item_to_list_succeeded",g)):f()},error:f})})});"use strict";g.when("A","legacy-create-utils","atwl-inline-util").execute(function(b,c,e){var a=b.$;b.state.parse();if((b.state("createInfo")||{}).isHorizonte){var d=function(){a("#WLNEW_error").removeClass("a-hidden")},g=function(b){try{if(typeof b!==v&&!1===
b.hasError){a("#WLNEW_loading").addClass("a-hidden");var c=a(".reg-create-form");c.addClass("a-hidden");b.htmlMessage?c.parent().append(b.htmlMessage):d()}else d()}catch(f){d()}};b.declarative("reg-create-submit",["click"],function(a){c.submitCreate(a,g,d,e.addItemResponseHandlerHZIdeaList,e.showErrorClosePopover)})}});"use strict";g.when("A","jQuery").execute(function(b,c){b.declarative("remaining-customizations-action","click",function(b){var a=b.$currentTarget.parent().find(".remaining_customization_info");
a.show();a.removeClass("aok-hidden");b.$currentTarget.hide();b.$event.preventDefault()})});"use strict";g.when("A","create-utils").execute(function(b,c){var e=b.$,a=function(a){e("#create-list-loading").addClass("aok-hidden");e("#create-list-error").removeClass("aok-hidden");a.message?e("#create-list-error").html(a.message):h.ueLogError&&h.ueLogError({message:"Redesigned Create List failed.",logLevel:"FATAL"})},d=function(b){b&&!b.hasError?b.htmlMessage?(e("#create-list-loading").addClass("aok-hidden"),
e("#create-list-form").parent().append(b.htmlMessage)):a():a()};b.declarative("create-list-submit",["click"],function(b){c.submitCreate(b,d,a)})})});
/* ******** */
(function(t){var k=window.AmazonUIPageJS||window.P,p=k._namespace||k.attributeErrors,y=p?p("GenericRegistryDPXAssets",""):k;y.guardFatal?y.guardFatal(t)(y,window):y.execute(function(){t(y,window)})})(function(t,k,p){"use strict";t.when("A","a-modal","a-popover","a-checkbox","a-dropdown","a-splitdropdown","ready").register("add-to-br-util",function(d,g,m,f,h){function r(){return encodeURIComponent(b("#ASIN").val())}function D(a){var e=d.state("atbrState"),u=e.hasBabyReg||!1,f="true"===b("#is-fully-selected-baby-reg").val()||
!1,g=r();g!==p&&f&&(f=encodeURIComponent(e.sessionId),u?c(e,"C",a):k.location.href="/baby-reg/signup/ref\x3ddp_create_br_desktop?asin\x3d"+g+"\x26sessionId\x3d"+f)}function c(a,e,c){var u=r();a=encodeURIComponent(a.sessionId);var g={};g.asin=u;g.sid=a;g.vendorId=c||"website.dpx.atbr";d.post("/baby-reg/button-action/atbr-dpx/ref\x3ddpx_atbr_dsk",{params:g,timeout:5E3,success:function(a){a!==p&&"failure"!==a.result?("duplicate"===a.result?(b("#br-dp-post-atbr-status-add-to-registry-success").addClass("a-hidden"),
b("#br-dp-post-atbr-status-add-to-registry-dup").removeClass("a-hidden")):(b("#br-dp-post-atbr-status-add-to-registry-dup").addClass("a-hidden"),b("#br-dp-post-atbr-status-add-to-registry-success").removeClass("a-hidden")),f("#br_dp_post_atbr_manage_must_have_item").hide(),f("#br_dp_post_atbr_manage_group_gifting_item").hide(),f("#br_dp_post_atbr_manage_private_item").hide(),document.getElementById("dp-br-post-atbr-header-checklist-text-circle").style.paddingLeft=460-b("#dp-br-post-atbr-header-text").width()+
"px",b("#br-dp-post-atbr-light-box").removeClass("a-hidden"),b("#br-dp-post-atbr-container").removeClass("a-hidden"),b("body").addClass("br-dp-post-atbr-no-scroll"),b("#br-dp-post-atbr-container").removeClass("br-dp-post-atbr-container-hide"),b("#br-dp-post-atbr-container").addClass("br-dp-post-atbr-container-show"),n(),H(e)):k.location.href="/baby-reg/ref\x3ddpx_atbr_dsk_hp?asin\x3d"+u},error:function(){k.location.href="/baby-reg/ref\x3ddpx_atbr_dsk_er?asin\x3d"+u}})}function H(a){b("#br-dp-post-atbr-recommadation").html("\x3cspan\x3e\x3c/span\x3e");
b("#br-dp-post-atbr-spinner").removeClass("a-hidden");a={asin:r(),treatment:a};d.get("/baby-reg/dp-post-atbr-recommendation",{params:a,success:function(e){b("#br-dp-post-atbr-spinner").addClass("a-hidden");b("#br-dp-post-atbr-recommadation").html(e)},failure:function(){}})}function n(){var a={asin:r()};d.get("/baby-reg/dp-post-atbr-status",{params:a,success:function(e){b("#br-dp-post-atbr-status-add-to-registry-item-img").attr("src",e.result.newAddedItemImgUrl);null!=e.result.checklistPercent&&(b("#dp-br-post-atbr-header-checklist-percent").html(e.result.checklistPercent+
'\x3cspan class\x3d"smaller"\x3e%\x3c/span\x3e'),b("#dp-br-post-atbr-header-checklist-pie").addClass("progress-"+e.result.checklistPercent),b("#dp-br-post-atbr-header-checklist-pie").removeClass("progress-0"),b("#dp-br-post-atbr-header-checklist-text-circle").removeClass("a-hidden"));b("#dp-br-post-atbr-header-checklist-link").attr("href",e.result.checklistLink);b("#dp-br-post-atbr-header-registry-link").attr("href",e.result.registryLink);if(e.result.hasMustHave){v=!0;var a=f("#br_dp_post_atbr_manage_must_have_item");
a.show();e.result.isMustHaveItem&&a.check()}e.result.hasGroupGifting&&(q=!0,a=f("#br_dp_post_atbr_manage_group_gifting_item"),a.show(),z=e.result.helpInfoLinkGroupGifting,e.result.isGroupGiftingItem&&a.check());e.result.hasPrivate&&(w=!0,a=f("#br_dp_post_atbr_manage_private_item"),a.show(),e.result.isPrivateItem&&a.check());e=e.result.itemRequestedCount;!Number.isInteger(e)||0>=e||(10<e?(e=h.getSelect("br-dp-post-atbr-header-registry-request").getOption("br-dp-post-atbr-dropdown-tenPlusOpt"),e.info()[0]===
p?h.getSelect("br-dp-post-atbr-header-registry-request").appendOption({text:"10+",value:"10+Opt",native_id:"br-dp-post-atbr-dropdown-tenPlusOpt",selected:"true",css_class:"br-dp-post-atbr-dropdown-option-disabled",native_css_class:"br-dp-post-atbr-dropdown-option-disabled"}):e.update({selected:"true",text:"10+"})):(h.getSelect("br-dp-post-atbr-header-registry-request").getOption(e-1).update({selected:"true",text:e}),l()))},error:function(){}})}function l(){h.getSelect("br-dp-post-atbr-header-registry-request").removeOption("br-dp-post-atbr-dropdown-tenPlusOpt")}
var b=d.$,q=!1,v=!1,w=!1,z="",x=(d.state("atbrState")||{}).token;d.declarative("dpx-add-to-baby-registry-action",["click"],function(a){D()});d.declarative("br_dp_post_atbr_close",["click"],function(a){document.getElementById("br-dp-post-atbr-container").classList.remove("br-dp-post-atbr-container-show");document.getElementById("br-dp-post-atbr-container").classList.add("br-dp-post-atbr-container-hide");document.getElementById("br-dp-post-atbr-light-box").classList.add("a-hidden");document.body.classList.remove("br-dp-post-atbr-no-scroll");
d.get("/baby-reg/dp-post-atbr-close/ref\x3dbr_dsk_dpx_patr_hdr_close",{})});d.declarative("br-dp-post-atbr-status-manage-info-popover",["click"],function(a){m.create(a.$target,{inlineContent:a.data.popoverContent,position:"triggerBottom",activate:"onclick"}).show();!1===v&&(b("#br-manage-popover-content-section-title-must-have").addClass("a-hidden"),b("#br-manage-popover-content-section-content-must-have").addClass("a-hidden"));!1===q?(b("#br-manage-popover-content-section-title-group").addClass("a-hidden"),
b("#br-manage-popover-content-section-content-group").addClass("a-hidden")):b("#br-manage-popover-content-section-content-group-link").attr("href",z);!1===w&&(b("#br-manage-popover-content-section-title-private").addClass("a-hidden"),b("#br-manage-popover-content-section-content-private").addClass("a-hidden"));d.get("/baby-reg/dp-post-atbr-manage-help-info/ref\x3dbr_dsk_dpx_patr_mgmt_info",{})});d.declarative("post-atbr-item-atbr-button-action",["click"],function(a){var e=a.data.reftag,c=a.data.asin;
a=a.data.sid;var f={};f.asin=c;f.sid=a;f.vendorId="website.dpx.post-atbr";d.post("/baby-reg/button-action/atbr-dpx/ref\x3d"+e,{params:f,timeout:5E3,success:function(a){a!==p&&"failure"!==a.result?(b("#post-atbr-item-atbr-success-"+c).removeClass("a-hidden"),b("#post-atbr-item-button-"+c).addClass("a-hidden"),b("#post-atbr-item-atbr-failure-"+c).addClass("a-hidden")):b("#post-atbr-item-atbr-failure-"+c).removeClass("a-hidden")},error:function(){b("#post-atbr-item-atbr-failure-"+c).removeClass("a-hidden")}})});
d.declarative("post-atbr-item-see-all-button-action",["click"],function(a){k.location.href=a.data.link});d.declarative("br_dp_post_atbr_manage_must_have_item_action","change",function(a){a.$event.preventDefault();a={isMustHaveItem:b("#br_dp_post_atbr_manage_must_have_item").is(":checked"),asin:r(),token:x};d.post("/baby-reg/dp-post-atbr-status-manage-must-have/ref\x3dbr_dsk_dpx_patr_mgmt_mh",{params:a,success:function(a){},error:function(a){}})});d.declarative("br_dp_post_atbr_manage_group_gifting_item_action",
"change",function(a){a.$event.preventDefault();a={isGroupGiftingItem:b("#br_dp_post_atbr_manage_group_gifting_item").is(":checked"),asin:r(),token:x};d.post("/baby-reg/dp-post-atbr-status-manage-group-gifting/ref\x3dbr_dsk_dpx_patr_mgmt_gg",{params:a,success:function(a){},error:function(a){}})});d.declarative("br_dp_post_atbr_manage_private_item_action","change",function(a){a={isPrivateItem:b("#br_dp_post_atbr_manage_private_item").is(":checked"),asin:r(),token:x};d.post("/baby-reg/dp-post-atbr-status-manage-private/ref\x3dbr_dsk_dpx_patr_mgmt_pvt",
{params:a,success:function(a){},error:function(a){}})});d.declarative("br_dp_post_atbr_manage_request_quantity_item_action","change",function(a){a={requestQuantity:b("#br-dp-post-atbr-header-registry-request").val(),asin:r(),token:x};d.post("/baby-reg/dp-post-atbr-status-manage-request-quantity/ref\x3dbr_dsk_dpx_patr_mgmt_qty",{params:a,success:function(a){l()},error:function(a){}})});return{addToBabyRegistryFromDPX:D}});"use strict";t.when("A","a-button","a-modal","ready").register("dpx-modal-add-to-wr-declarative-actions",
function(d,g,m){var f=d.$,h=d.state("modal-add-to-wedding-registry-status");if(h&&h.weddingButtonId&&f("#"+h.weddingButtonId).length){var r={name:"wr-modal-add-to-reg-wedding-registry",header:h.modalHeader,url:""};f(document).delegate("#"+h.weddingButtonId,"click",function(d){d.preventDefault();if(h.userSignedIn){var c=f("#quantity").val();c||(c=1);d=m.create(f("#"+h.weddingButtonId),r);var g=encodeURIComponent(f("#ASIN").val());c=encodeURIComponent(c);var n=h.token?"\x26token\x3d"+encodeURIComponent(h.token):
"";h.hasWeddingRegistry?(d.update({cache:!1,url:"/wedding/modal/external-add-to-registry?asin\x3d"+g+"\x26quantity\x3d"+c+n+"\x26ref_\x3dhit_wr_dp_dp_mdl_pop"}).show(),"undefined"!==typeof k.ue&&k.ue.count("wrAddToRegModalPopup",(k.ue.count("wrAddToRegModalPopup")||0)+1)):k.location.href="/wedding/new-registry?asin."+g+"\x3d"+c+"\x26vendorId\x3dgr-dpx-new-reg\x26associateId\x3d\x26associateSubId\x3d"}else k.location.href="/wedding/nosignin"});d.declarative("wr-modal-add-to-reg-rec-add-to-registry-action",
"click",function(h){var c=h.data;h=f("#wr-modal-add-to-reg-wrapper").data("token");var m=g("#wr-modal-add-to-reg-add-to-wr-"+c.recItemAsin);m.isEnabled()&&(m.disable(),!0===f("#wr-modal-add-to-reg-rec-product-card-"+c.recItemAsin).data("exist-in-registry")?(m.hide(),f("#wr-modal-add-to-reg-item-exist-message-"+c.recItemAsin).removeClass("aok-hidden")):(h={items:JSON.stringify([{asin:c.recItemAsin,requestedQuantity:1}]),token:h},d.post("/wedding/registry-items/addItems?ref_\x3dhit_wr_dp_dp_mdl_sa",
{params:h,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",success:function(d){m.hide();d.success?f("#wr-modal-add-to-reg-item-added-message-"+c.recItemAsin).removeClass("aok-hidden"):"ITEM_ALREADY_EXIST"===d.errorCode?f("#wr-modal-add-to-reg-item-exist-message-"+c.recItemAsin).removeClass("aok-hidden"):f("#wr-modal-add-to-reg-item-added-error-"+c.recItemAsin).removeClass("aok-hidden")},error:function(){f("#wr-modal-add-to-reg-item-added-error-"+c.recItemAsin).removeClass("aok-hidden");
"undefined"!==typeof k.ue&&k.ue.count("wrAddToRegModalAddFromSimilaritiesError",(k.ue.count("wrAddToRegModalAddFromSimilaritiesError")||0)+1)}})),"undefined"!==typeof k.ue&&k.ue.count("wrAddToRegModalAddFromSimilarities",(k.ue.count("wrAddToRegModalAddFromSimilarities")||0)+1))});d.on("a:popover:beforeHide:wr-modal-add-to-reg-wedding-registry",function(){"undefined"!==typeof k.ue&&k.ue.count("wrAddToRegModalDismissed",(k.ue.count("wrAddToRegModalDismissed")||0)+1)});d.declarative("wr-modal-add-to-reg-view-registry-action",
"click",function(d){"undefined"!==typeof k.ue&&k.ue.count("wrAddToRegModalViewRegistry",(k.ue.count("wrAddToRegModalViewRegistry")||0)+1);k.location.href="/wedding/organize-registry?ref_\x3dhit_wr_dp_dp_mdl_vr"})}});"use strict";var y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};t.when("A","a-button","a-modal","a-dropdown","a-splitdropdown",
"dpx-gift-tag-modal","add-to-br-util","ready").register("ggr-add-to-registry-desktop-util",function(d,g,m,f,h,r,D){function c(){null==F&&e.ajax({dataType:"json",url:"/registries/dpx/desktop/list-registry?"+e.param({asin:encodeURIComponent(e("#ASIN").val())}),cache:!1}).done(function(a){F=a;t(a)}).fail(b)}function t(c){c=n(c);if(null===c)b();else{var d=[];d.unshift({html_content:e(C.registryDropdownCreateRegistryTemplateId).html(),css_class:G.registryDropdownItemWrapper,native_id:A.newRegistryType,
value:JSON.stringify({regType:A.newRegistryType})});e.each(c,function(a,b){d.unshift({html_content:l(b),text:z(b.name),value:JSON.stringify({regType:b.type,regName:b.name,regId:b.id}),css_class:G.registryDropdownItemWrapper})});u.showOneClickSplitDropdown?a(h,B.oneClickSplitDropdownId,d):a(f,B.registryDropdownId,d)}}function n(a){var b=void 0;if("object"===("undefined"===typeof a?"undefined":y(a)))b=a.result;else try{b=d.parseJSON(a)}catch(J){b=null}return e.isArray(b)?b:null}function l(a){var b=
e(C.registryDropdownItemTemplateId).html();b=b.replace("{imgTag}",A.imgTag);var c={registryType:a.typeText,registryName:a.name,imgUrl:a.imageUrl};return b.replace(/\{([\w]*)\}/g,function(b,e){b=c[e];if("undefined"!==typeof b&&null!==b)a=b;else return"";return a})}function b(){e(C.registryDropdownSpinnerId).addClass("aok-hidden");q(C.registryDropdownErrorBoxId)}function q(a){e(a).removeClass("aok-hidden")}function v(a){var b=e("#quantity").val()||1,c=JSON.parse(a.value);if(c.regId||c.regType){a=c.regType;
var d=c.regId,f=c.regName;c=encodeURIComponent(e("#ASIN").val());b=encodeURIComponent(b);var g=encodeURIComponent(u.sessionId);x(E.dropdownItemClicked+":"+a.toLowerCase());a===A.newRegistryType?k.location.href="/registries?ref\x3ddpx_create_registry_desktop\x26sessionId\x3d"+g:"Wedding"===a?(f={name:p.popoverModalName,header:A.addToRegistryModalHeaderText,url:""},(g=m.get(f.name))||(g=m.create(e("#GR-DROPDOWN-MODAL-TRIGGER"),f)),g.update(w(a,f.header,d,c,b,u.token)).show()):"Baby"===a?D.addToBabyRegistryFromDPX(A.addToBabyRegistryVendorId):
(g={name:p.popoverModalName,header:A.addToRegistryModalHeaderText,url:""},I.includes(a)?((f=m.get(g.name))||(f=m.create(e("#GR-DROPDOWN-MODAL-TRIGGER"),g)),f.update(w(a,g.header,d,c,b,u.token)).show()):r.renderDPXGiftTagModal(a,d,f,c,b,u.token))}}function w(a,b,c,e,d,f){var g="Wedding"===a?a:"GGR";a={Wedding:"/wedding/modal/external-add-to-registry",GGR:"/registries/dpx-add-to-registry/"+a.toLowerCase()+"/"+c};f=f?"\x26token\x3d"+encodeURIComponent(f):"";e=a[g]+"?asin\x3d"+e+"\x26quantity\x3d"+d+
f+"\x26ref_\x3dhit_wr_dp_dp_mdl_pop";"Wedding"===g?e+="\x26sourceVendorId\x3damazon.wedding_registry.add.dpx.desktop":"GGR"===g&&(e+="\x26sourceid\x3damazon.ggr.add.dpx.desktop");return{header:b,cache:!1,url:e}}function z(a){var b=document.createElement("textarea");b.innerHTML=a;return b.value}function x(a){a=E.deviceType+":"+a;k.ue&&k.ue.count(a,(k.ue.count(a)||0)+1)}function a(a,b,c){var d=a.getSelect(b).getOptions().options.elements;e.each(d,function(c,e){a.getSelect(b).removeOption(e)});a.getSelect(b).getOption("defaultSpinnner").remove();
a.getSelect(b).addOptions(c);a.getSelect(b).setValue("");e("#"+b).click()}var e=d.$,u=d.state("modal-add-to-registry-dropdown-state"),F=null;if(u){var E={deviceType:"desktop",dropdownClicked:"dpx-ggr-dropdown-clicked",dropdownItemClicked:"dpx-ggr-dropdown-item-clicked",similarityClicked:"dpx-ggr-dropdown-similarity-clicked"},G={registryDropdownItemWrapper:"agr-add-to-registry-dropdown-item-wrapper"},B={registryDropdownId:"add-to-registry-dropdown",oneClickSplitDropdownId:"add-to-registry-one-click-dropdown"},
C={registryDropdownId:"#"+B.registryDropdownId,registryDropdownErrorBoxId:"#agr-registry-dropdown-error",registryDropdownSpinnerId:"#agr-registry-dropdown-spinner",oneClickSplitDropdownId:"#"+B.oneClickSplitDropdownId,registryDropdownItemTemplateId:"#agr-registry-dropdown-item-template",registryDropdownCreateRegistryTemplateId:"#agr-registry-dropdown-create-registry-template"},p={addToRegistrySuccessClass:".gr-add-success-message",addToRegistryErrorClass:".gr-add-error-message",addToRegistryDuplicateClass:".gr-already-exist-message",
popoverModalName:"wr-modal-add-to-reg-wedding-registry",splitDropdownAnnounce:"add-to-registry-one-click-dropdown-announce"},A={newRegistryType:"new",imgTag:'\x3cimg src\x3d"{imgUrl}" alt\x3d"{registryName}" class\x3d"agr-add-to-registry-dropdown-registry-icon" /\x3e',ariaPressedProperty:"aria-pressed",addToBabyRegistryVendorId:"amazon.ggr.baby.add.dpx.desktop",addToRegistryModalHeaderText:u.addToRegistryModalHeaderText},I=["Custom","Birthday","Pet","Off_to_college","Education"];d.on("a:dropdown:"+
B.registryDropdownId+":select",function(a){v(a);f.getSelect(B.registryDropdownId).setValue("")});d.on("a:splitdropdown:"+B.oneClickSplitDropdownId+":select",function(a){v(a)});e(document).delegate(".gr-modal-add-to-reg-rec-add-to-registry-action","click",function(a){var b=e(a.currentTarget);a=b.attr("data-asin");var c=g("#gr-modal-add-to-reg-add-to-wr-"+a);if(c.isEnabled()){c.disable();if(!0===b.data("exist"))c.hide(),q(b.find(p.addToRegistryDuplicateClass));else{var f=void 0,h=void 0;f=b.data("type");
h=e("#gr-modal-add-to-reg-wrapper").data("token");f&&"Wedding"!==f?(f={asin:a,desiredQuantity:1,registryId:b.data("id"),registryType:b.data("type"),itemType:"AMAZON_ITEM",vendorId:"amazon.ggr.add.dpx.desktop",token:h},h="/registries/registry-products/addProduct"):(f={token:h,items:JSON.stringify([{asin:a,requestedQuantity:1}])},h="/wedding/registry-items/addItems?ref_\x3dhit_wr_dp_dp_mdl_sa");d.post(h,{params:f,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",success:function(a){c.hide();
a.success?q(b.find(p.addToRegistrySuccessClass)):"ITEM_ALREADY_EXIST"===a.errorCode&&q(b.find(p.addToRegistryDuplicateClass))},error:function(){c.hide();q(b.find(p.addToRegistryErrorClass))}})}x(E.similarityClicked)}});(function(){u.showOneClickSplitDropdown?c():e(document).delegate(C.registryDropdownId,"click",function(a){c();x(E.dropdownClicked)})})();d.on("a:pageUpdate",function(){F=null;u.showOneClickSplitDropdown&&c()});d.declarative("gr-modal-add-to-reg-view-registry-action","click",function(a){k.location.href=
a.data&&a.data.type&&a.data.id?"/registries/gl/owner-view/"+a.data.id+"?ref_\x3dhit_gr_from_dpx":"/wedding/organize-registry?ref_\x3dhit_wr_dp_dp_mdl_vr"});d.declarative("wr-modal-add-to-reg-view-registry-action","click",function(a){k.location.href="/wedding/organize-registry?ref_\x3dhit_wr_dp_dp_mdl_vr"})}});"use strict";t.when("A","a-modal","a-button","a-alert","message-render","create-gift-tag-modal","ready").register("dpx-gift-tag-modal",function(d,g,k,f,h,r){function m(){n(q.giftTagErrorBoxId).removeClass("aok-hidden")}
function c(c){n(b.tagListWrapper).html("");n(b.tagListWrapper).html(c)}function p(b,c,a,e,d,f,g,h){b="/registries/dpx-add-to-registry/"+b.toLowerCase()+"/"+a;h=h?"\x26token\x3d"+encodeURIComponent(h):"";e=b+"?asin\x3d"+f+"\x26quantity\x3d"+g+"\x26tagId\x3d"+e+"\x26tagName\x3d"+encodeURIComponent(d)+h+"\x26ref_\x3dhit_wr_dp_dp_mdl_pop";return{header:c,cache:!1,url:e+"\x26sourceid\x3damazon.ggr.add.dpx.desktop"}}var n=d.$;if(d=d.state("modal-view-gift-tags-state")){var l={selectedRegistryType:"",selectedRegistryId:"",
selectedAsin:"",selectedQuantity:"",selectedToken:""},b={tagModalTrigger:".gr-dpx-tag-modal-trigger",tagModalContent:".gr-dpx-tag-modal",tagTextContent:"#gr-tag-modal-name-input",tagListContainer:".gr-dpx-tag-modal-your-tags-container",tooManyTagsAlert:"#gr-tag-modal-too-many-tags-alert",invalidInputAlert:"#gr-tag-modal-invalid-input-alert",hiddenClass:"aok-hidden",tagListWrapper:".gr-dpx-tag-modal-taglist-wrapper",tagModalChangeover:"#tagModalChangeover",tagHeading:".gr-tag-modal-your-tags-header",
closeButton:".gr-tag-modal-back-button",saveButton:".gr-dpx-tag-modal-save-wrapper"},q={registryTitleComponent:".gr-dpx-tag-modal-header-main",giftTagErrorBoxId:"#"+d.giftTagErrorBoxId,popoverModalName:"wr-modal-add-to-reg-wedding-registry"},v=d.addToHGLModalHeaderText,w=d.addToGiftListModalHeaderText;n(document).delegate(".gr-dpx-add-new-tag","click",function(b){r.renderCreateTagModal(l.selectedRegistryType,l.selectedRegistryId)});n(document).delegate(".gr-tag-modal-back-button","click",function(b){(b=
g.get("dpxTagModal"))&&b.show()});n(document).delegate(".gr-dpx-tag-modal-your-tags-wrapper","click",function(b){b=n(this).attr("tagid");var c=n(this).text(),a={name:q.popoverModalName,header:!0===l.internationalGiftTagsEnabled?w:v,url:""},e=g.get(a.name);e||(e=g.create(n("#GR-DROPDOWN-MODAL-TRIGGER"),a));e.update(p(l.selectedRegistryType,a.header,l.selectedRegistryId,b,c,l.selectedAsin,l.selectedQuantity,l.selectedToken)).show()});return{renderDPXGiftTagModal:function(d,f,a,e,k,r){l.selectedRegistryType=
d;l.selectedRegistryId=f;l.selectedAsin=e;l.selectedQuantity=k;l.selectedToken=r;d=g.get("dpxTagModal");d||(d=b.tagModalTrigger,f={name:"dpxTagModal",width:800,cache:!1,header:w,inlineContent:n(b.tagModalContent)},d=g.create(d,f));f=l.selectedRegistryType;a=l.selectedRegistryId;f&&a?n.ajax({url:"/registries/"+f+"/"+a+"/dpx-get-registry-tags",timeout:5E3}).done(c).fail(m):h.showChangeOver(b.tagModalChangeover,void 0);d.show()}}}});"use strict";t.when("A","a-modal","a-button","a-alert","message-render",
"ready").register("create-gift-tag-modal",function(d,g,k,f,h){function m(a,e){d.get("/registries/"+a+"/"+e+"/dpx-get-registry-tags",{cache:!1,success:function(a){c(b.renderModalTagListWrapper).html("");c(b.renderModalTagListWrapper).html(a)},error:function(){w(q.ADD_TAG_FAILURE)}})}function t(a,d){n=a;y=d;var e=g.get("tagModal");if(!e){e=b.tagModalTrigger;var f={name:"tagModal",width:800,cache:!1,hideHeader:!0,inlineContent:c(b.tagModalContent)};e=g.create(e,f)}z({updateType:v.render,token:l},a,d);
x();e.show()}var c=d.$,y="",n="",l=d.state("modal-add-to-registry-dropdown-state")?d.state("modal-add-to-registry-dropdown-state").token:p,b={tagModalTrigger:".gr-tag-modal-trigger",tagModalContent:".gr-tag-modal-container",tagModalMainContent:".gr-tag-modal",tagModalDeleteContent:".gr-tag-modal-delete-flow",tagTextContent:"#gr-tag-modal-name-input",tagListContainer:".gr-tag-modal-your-tags-container",tooManyTagsAlert:"#gr-tag-modal-too-many-tags-alert",invalidInputAlert:"#gr-tag-modal-invalid-input-alert",
hiddenClass:"aok-hidden",tagListWrapper:".gr-tag-modal-taglist-wrapper",tagModalChangeover:"#tagModalChangeover",deleteFlowReplacementSelector:".gr-tag-modal-delete-this-tag",deleteFlowButtonReplacementSelector:".gr-tag-modal-delete-this-button",deleteFlowDeleteButton:".gr-tag-modal-delete-confirm",onOwnerViewSelector:".gr-tag-summary-container-owner",productListExpander:".gr-product-list-expander",productListExpanderSection:"gr-product-list-expander-section",tagSectionTemplate:"#gr-product-list-section-template",
tagIdFinderSelector:".gr-tag-modal-your-tags-tag",renderModalTagListWrapper:".gr-dpx-tag-modal-taglist-wrapper"},q={ADD_TAG_SUCCESS:"ADD_TAG_SUCCESS",REMOVE_TAG_SUCCESS:"REMOVE_TAG_SUCCESS",ADD_TAG_FAILURE:"ADD_TAG_FAILURE",REMOVE_TAG_FAILURE:"REMOVE_TAG_FAILURE"},v={add:"add",remove:"remove",render:"render"},w=function(a){var c="";"ADD_TAG_SUCCESS"===a?c=d.state("tagModalChangeoverStrings").addSuccess:"REMOVE_TAG_SUCCESS"===a?c=d.state("tagModalChangeoverStrings").removeSuccess:"ADD_TAG_FAILURE"===
a?c=d.state("tagModalChangeoverStrings").addFailure:"REMOVE_TAG_FAILURE"===a&&(c=d.state("tagModalChangeoverStrings").removeFailure);h.showChangeOver(b.tagModalChangeover,c)},z=function(a,e,f,g,h){e&&f?(a.ref_="gr-dpx-modal",d.post("/registries/"+e+"/"+f+"/update-tag",{params:a,timeout:5E3,cache:!1,success:function(d){g&&w(g);if(a.updateType===v.remove)m(e,f),t(e,f);else if(c(b.tagListWrapper).html(d),a.updateType===v.add){m(e,f);var h=a.tagName,k=c(c(b.tagSectionTemplate).html()).clone();d=c(d).find(b.tagIdFinderSelector).last().attr("id");
k.attr("data-section-id",d);k.find(".gr-product-list-expander-section-name").text(h);c(b.productListExpander).append(k)}},error:function(){w(h)}})):w(h)},x=function(){c(b.tooManyTagsAlert).hasClass(b.hiddenClass)||c(b.tooManyTagsAlert).addClass(b.hiddenClass);c(b.invalidInputAlert).hasClass(b.hiddenClass)||c(b.invalidInputAlert).addClass(b.hiddenClass);c(b.tagModalMainContent).hasClass(b.hiddenClass)&&c(b.tagModalMainContent).removeClass(b.hiddenClass);c(b.tagModalDeleteContent).hasClass(b.hiddenClass)||
c(b.tagModalDeleteContent).addClass(b.hiddenClass);c(b.tagTextContent).val()&&c(b.tagTextContent).val("");h.closeChangeOver(b.tagModalChangeover)};c(document).delegate(".gr-tag-modal-create-button","click",function(a){a.preventDefault();a=c(b.tagTextContent).val();x();15<=c(b.tagListContainer).children().length?c(b.tooManyTagsAlert).removeClass(b.hiddenClass):a?z({updateType:v.add,tagName:a,token:l},n,y,q.ADD_TAG_SUCCESS,q.ADD_TAG_FAILURE):c(b.invalidInputAlert).removeClass(b.hiddenClass)});c(document).delegate(".gr-tag-modal-your-tags-tag",
"click",function(a){a.preventDefault();a=c(this).attr("id");var d=c(this).text();c(b.deleteFlowDeleteButton).attr("id",a);c(b.deleteFlowReplacementSelector).text(d);c(b.deleteFlowButtonReplacementSelector).text(d);c(b.tagModalMainContent).addClass(b.hiddenClass);c(b.tagModalDeleteContent).removeClass(b.hiddenClass)});c(document).delegate(".gr-tag-modal-delete-go-back","click",function(a){a.preventDefault();c(b.tagModalDeleteContent).addClass(b.hiddenClass);c(b.tagModalMainContent).removeClass(b.hiddenClass)});
c(document).delegate(".gr-tag-modal-delete-confirm","click",function(a){a.preventDefault();a=c(this).attr("id");z({updateType:v.remove,tagId:a,token:l},n,y,q.REMOVE_TAG_SUCCESS,q.REMOVE_TAG_FAILURE);c(b.tagModalDeleteContent).addClass(b.hiddenClass);c(b.tagModalMainContent).removeClass(b.hiddenClass)});c(document).delegate(".gr-tag-modal-back-button","click",function(a){a.preventDefault();if(a=g.get("tagModal"))x(),a.hide()});return{renderCreateTagModal:t}});"use strict";t.when("A","ready").register("message-render",
function(d){var g=d.$;return{showChangeOver:function(d,f,h){d=g(d);d.stop(!0,!0);d.find("strong").text(f);d.is(":visible")||d.fadeIn(400);d.delay(2E3).fadeOut(800,function(){h&&h()})},closeChangeOver:function(d){g(d).hide()}}});"use strict";t.when("A","ready").register("gr-request-quantity",function(d){var g=d.$;return function(d){var f={},h={quantity:function(c){g(".gr-pd-request-quantity-ui__number").val(c)}},k=function(c){f.isValid(c)&&(m=c);h.quantity(m);1>=parseInt(f.getState().quantity)?(g(".gr-pd-request-quantity-ui__remove--trash").removeClass("aok-hidden"),
g(".gr-pd-request-quantity-ui__remove--minus").addClass("aok-hidden")):(g(".gr-pd-request-quantity-ui__remove--trash").addClass("aok-hidden"),g(".gr-pd-request-quantity-ui__remove--minus").removeClass("aok-hidden"))};f.getState=function(){return{quantity:g(".gr-pd-request-quantity-ui__number").val()}};f.isValid=function(c){if(Number.isInteger(c)){if(1>c||999<c)return!1}else return!1;return!0};f.enable=function(){g(".gr-pd-request-quantity-ui__number").prop("disabled",!1);g(".gr-pd-request-quantity-ui").removeClass("gr-pd-request-quantity-ui--disabled")};
f.disable=function(){g(".gr-pd-request-quantity-ui__number").prop("disabled",!0);g(".gr-pd-request-quantity-ui").addClass("gr-pd-request-quantity-ui--disabled")};g(document).delegate(".gr-pd-request-quantity-ui__add","click",function(c){c=parseInt(f.getState().quantity)+1;k(c)});g(document).delegate(".gr-pd-request-quantity-ui__remove","click",function(c){c=parseInt(f.getState().quantity)-1;k(c)});g(document).delegate(".gr-pd-request-quantity-ui__number","change",function(c){c=parseInt(f.getState().quantity);
k(c)});var m=f.getState().quantity;return f}})});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,n=g._namespace||g.attributeErrors,b=n?n("GoldboxUDPAssets",""):g;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,g,n){f.when("A").execute("dealsx-constants",function(b){g.DealsX||(g.DealsX={});DealsX.constants={AAPI_V1_QUANTITY_RESTRICTION_VIOLATION_ERROR:"deal.claim.quantity-restriction-violation.error/v1",AAPI_V1_ERROR_TYPE:"error/v1"};DealsX.CustomerStates={NONE:"NONE",IN_CART:"IN_CART",PENDING_ADD_TO_CART:"PENDING_ADD_TO_CART",
CLAIMED:"CLAIMED",EXPIRED:"EXPIRED",UNKNOWN:"UNKNOWN"};DealsX.DealStates={AVAILABLE:"AVAILABLE",UPCOMING:"UPCOMING",WAITLISTFULL:"WAITLISTFULL",UNKNOWN:"UNKNOWN"};DealsX.Events={DEAL_TIMER_EXPIRED:"dealsx:gsod:buybox:deal-timer-expired"};DealsX.ApiNames={CLAIM_AND_ADD_TO_CART:"ClaimAndAddToCart",CART_COUNT:"CartCount",CART_ADD_ITEMS:"CartAddToCart",NEO_ATC:"NeoATC",PRODUCT_V2:"ProductV2"};DealsX.RenderingPlatform={MOBILE_WEB:"MOBILE_WEB",SHOPPING_APP:"SHOPPING_APP",DESKTOP:"DESKTOP"};DealsX.AppAccessRenderingComponent=
{APP_DOWNLOAD_BUTTON:"APP_DOWNLOAD_BUTTON",LEARN_MORE_MESSAGE:"LEARN_MORE_MESSAGE",NOTHING:"NOTHING"};DealsX.DeviceAttributes={SHOPPING_APP:"APP,APP_MASH",MOBILE_WEB:"MOBILE",DESKTOP:"DESKTOP"}});f.when("A").execute("dealsx-timer-ticker",function(b){b.interval(function(){b.trigger("dealsx-timer-tick")},1E3)});f.when("A").register("dealsx-productv2-service",function(b){return b.createClass({endpointUrl:null,offerListingID:null,headers:null,_request:null,setup:function(b){this.abortRequest();this.endpointUrl=
b.aapiEndpoint;this.offerListingId=b.offerListingId;this.headers=this.getHeaders(b)},callProductV2:function(c,a,d){var e=this;e._request=b.$.ajax({url:this.endpointUrl+"?buyingOptionTypes\x3dLIGHTNING_DEAL\x26offerListingId\x3d"+this.offerListingId,type:"GET",headers:this.headers,xhrFields:{withCredentials:!0},success:c,error:a,complete:function(){e._request=null;d&&d()}})},abortRequest:function(){this._request&&this._request.abort()},getDeviceAttributes:function(b){return b.app?DealsX.DeviceAttributes.SHOPPING_APP:
b.mobile?DealsX.DeviceAttributes.MOBILE_WEB:DealsX.DeviceAttributes.DESKTOP},getHeaders:function(b){var a={"Accept-Language":b.languageOfPreference,Accept:'application/vnd.com.amazon.api+json; type\x3d"product/v2"; expand\x3d"buyingOptions[].dealDetails(product.deal-details/v1),buyingOptions[].callToAction(product.call-to-action/v1),buyingOptions[].dealCustomerStatus(product.deal-customer-status/v1)"',"x-api-csrf-token":b.aapiCsrfToken,"x-amzn-device-attributes":this.getDeviceAttributes(b)};b.slateToken&&
(a["x-amzn-encrypted-slate-token"]=b.slateToken);return a}})});f.when("A","dealsx-productv2-service").register("dealsx-poller-service",function(b,c){return b.createClass({statusCallbackHandler:null,productV2Service:null,pollingIntervalMs:null,continuePolling:!0,init:function(){this.productV2Service=new c},setup:function(a){this.productV2Service.setup(a);this.pollingIntervalMs=a.pollingIntervalMs;this.continuePolling=!0},callProductV2:function(a,b){var d=this;d.productV2Service.callProductV2(function(b){d.provideBuyingOptionToSuccessCallback(b,
a)},b)},connect:function(a,d,e){var c=this,l=function(){c.productV2Service.callProductV2(function(b){c.provideBuyingOptionToSuccessCallback(b,a)},function(a){d&&d(a)},function(){e&&e();c.continuePolling&&(c.statusCallbackHandler=b.delay(l,c.pollingIntervalMs))})};l()},disconnect:function(){this.continuePolling=!1;null!==this.statusCallbackHandler&&(clearTimeout(this.statusCallbackHandler),this.statusCallbackHandler=null)},provideBuyingOptionToSuccessCallback:function(a,b){a=this.extractLightningDealBuyingOption(a);
b&&b(a)},extractLightningDealBuyingOption:function(a){if(a&&a.entity&&a.entity.buyingOptions)for(var b=0;b<a.entity.buyingOptions.length;b++){var e=a.entity.buyingOptions[b];if("LIGHTNING_DEAL"===e.type)return e}return null}})});f.when("A","dealsx-model","dealsx-deal-redemption-service","dealsx-redemption-view","dealsx-quantity-view","dealsx-progress-view","dealsx-timer-view","dealsx-header-view","dealsx-prime-access-view","dealsx-app-access-view","dealsx-cart-aapi-service","dealsx-warranty-view").register("dealsx-deal-controller",
function(b,c,a,d,e,h,l,k,m,p,g,q){return b.createClass({dealPollerController:null,dealRedemptionService:null,views:[],headerView:null,redemptionView:null,quantityView:null,timerView:null,primeAccessView:null,appAccessView:null,warrantyView:null,dealModel:null,buying:!1,cartAAPIService:null,init:function(a){},getSlateToken:function(){var a=b.$('meta[name\x3d"encrypted-slate-token"]');if(a.length&&a.attr("content"))return a.attr("content");DealsX.recordAPIMetrics({apiName:"getSlateToken",isSuccess:!1})},
setup:function(b){if(b){b.slateToken=this.getSlateToken();var d=b.systemTime?Date.now()-b.systemTime:0;this.dealModel=new c({setupData:b,clockOffset:d});this.setupDealPollerController(b);this.dealRedemptionService=new a(b);this.cartAAPIService=new g(b);this.setupBuyboxViews(b);this.onModelUpdate(this.dealModel);this.subscribeToAccordionEvents()}else f.log("No setupData passed for setup method of deal controller","ERROR","DealController")},setupDealPollerController:function(a){var d=this;f.when("dealsx-poller-service").execute(function(e){d.dealPollerController?
d.dealPollerController.disconnect():d.dealPollerController=new e;d.dealPollerController.setup(a);d.dealPollerController.connect(function(a){a?(d.dealModel.updateDealModelContent(a),d.onModelUpdate(d.dealModel)):d.headerView&&(d.dealPollerController.disconnect(),d.headerView.showDealUnavailableView())});b.off(DealsX.Events.DEAL_TIMER_EXPIRED);b.on(DealsX.Events.DEAL_TIMER_EXPIRED,function(){d.dealPollerController.callProductV2(function(a){a?(d.redemptionView.hideProcessingView(),d.dealModel.updateDealModelContent(a),
d.onModelUpdate(d.dealModel)):d.headerView&&(d.dealPollerController.disconnect(),d.headerView.showDealUnavailableView())})})})},setupBuyboxViews:function(a){var c=this,f=b.$("#dealsAccordionRow");f=0<f.length?f:b.$("#dealsx-single-offer-display-box");c.primeAccessView=m.getView({rootContainer:f,dealModel:c.dealModel});c.redemptionView=d.getView({rootContainer:f,setupData:a});c.appAccessView=p.getView({rootContainer:f,dealModel:c.dealModel,setupData:a});c.timerView=l.getView({rootContainer:f,clockOffset:c.dealModel.clockOffset,
startTime:c.dealModel.dealDetails.startTime,endTime:c.dealModel.dealDetails.endTime});c.redemptionView.initializeButtons(function(a){if(a){var d=c.quantityView.getQuantity();c.buying=!0;c.dealRedemptionService.claimDeal(a.dealId,a.itemId,a.purchaseRefTag,d,function(a,d){a&&(a&&a.dealAsinState&&a.customerState&&(c.dealModel.translateClaimDealResponse({customerState:a.customerState,itemState:a.dealAsinState,msToCustomerStateExpiry:a.msUntilExpiration}),c.buying=!1),c.redemptionView.hideProcessingView(),
c.updateNavigationCartQuantity(),c.onModelUpdate(c.dealModel),b.trigger("deals_claimDealSuccess"))},function(a,d){c.redemptionView.hideProcessingView();d===DealsX.constants.AAPI_V1_QUANTITY_RESTRICTION_VIOLATION_ERROR?(c.dealModel.canCustomerClaimPrimeOnlyDOTD=!1,c.redemptionView.showPodotdQuantityLimitExceeded()):c.redemptionView.showRedemptionFailed();b.trigger("deals_claimDealError")})}});c.quantityView=e.getView({rootContainer:f,setupData:a});c.headerView=k.getView({rootContainer:f});c.progressView=
h.getView({rootContainer:f});c.warrantyView=q.getView({rootContainer:f});c.addView(c.headerView);c.addView(c.progressView);c.addView(c.primeAccessView);c.addView(c.quantityView);c.addView(c.timerView);c.addView(c.redemptionView);c.addView(c.appAccessView);c.addView(c.warrantyView)},onModelUpdate:function(a){this.buying||this.views.forEach(function(b){return b.onModelUpdate(a)})},updateNavigationCartQuantity:function(){var a=this;a.cartAAPIService.getCount(function(b,d){(b=a.retrieveQuantity(b))&&
a.displayQuantity(b)},function(a){})},retrieveQuantity:function(a){return a&&a.entity?a.entity.items:null},displayQuantity:function(a){f.when("nav.setCartCount").execute(function(b){b(a)});f.when("mash").execute(function(b){b.cart.didUpdate({newCartQuantity:parseInt(a,10)})})},addView:function(a){null!==a&&this.views.push(a)},subscribeToAccordionEvents:function(){b.on("a:accordion:buybox-accordion:select",function(a){a&&a.selectedRow&&("dealsAccordionRow"===a.selectedRow.rowName?b.trigger("deals_onSelectLDBuybox"):
b.trigger("deals_onSelectRegularBuybox"))})},addItemsToCart:function(a,b){var d=this;d.cartAAPIService.addItems(a,b,function(a,b){a&&"cart.add-items/v1"===a.type&&(a=a.entity.count.entity.items)&&d.displayQuantity(a)},function(a){})}})});f.when("A").register("dealsx-model",function(b){var c=b.$;return b.createClass({callToAction:null,dealDetails:null,dealCustomerStatus:null,deviceType:null,canCustomerClaimPrimeOnlyDOTD:!0,hasPrimeSavingsBenefit:!1,clockOffset:0,init:function(a){if(a&&a.setupData){var b=
a.setupData.itemCustomerState;b&&(b.dealDetails&&(this.dealDetails=JSON.parse(b.dealDetails)),b.dealCustomerStatus&&(this.dealCustomerStatus=JSON.parse(b.dealCustomerStatus)),b.callToAction&&(this.callToAction=JSON.parse(b.callToAction)));this.hasPrimeSavingsBenefit=a.setupData.hasPrimeSavingsBenefit||!1;this.clockOffset=a.clockOffset;this.deviceType={isMobile:a.setupData.mobile,isApp:a.setupData.app}}},updateDealModelContent:function(a){this.callToAction=a.callToAction?a.callToAction.entity:null;
this.dealDetails=a.dealDetails?a.dealDetails.entity:null;this.dealCustomerStatus=a.dealCustomerStatus?a.dealCustomerStatus.entity:null},translateClaimDealResponse:function(a){a&&(c.extend(this.dealDetails,this.buildDealState(a)),c.extend(this.dealCustomerStatus,this.buildDealCustomerState(a)),this.isCustomerStateIsEqualTo("IN_CART")&&(this.callToAction={}))},buildDealCustomerState:function(a){if(!a.customerState)return{};var b=new Date((new Date).getTime()+parseInt(a.msToCustomerStateExpiry));return{state:this.convertClaimDealCustomerStateToProductV2CompatibleCustomerState(a.customerState),
expiryTime:b.toISOString()}},buildDealState:function(a){return{state:this.convertClaimDealDealStateToProductV2CompatibleDealState(a)}},isCustomerStateInCart:function(){return this.isCustomerStateIsEqualTo(DealsX.CustomerStates.IN_CART)},isCustomerStatePendingATC:function(){return this.isCustomerStateIsEqualTo(DealsX.CustomerStates.PENDING_ADD_TO_CART)},isDealStateIsEqualTo:function(a){return this.dealDetails?this.dealDetails.state===a:!1},isCustomerStateIsEqualTo:function(a){return this.dealCustomerStatus?
this.dealCustomerStatus.state===a:!1},getCurrentServerTime:function(){return new Date(Date.now()-this.clockOffset)},isDealInPrimeEarlyAccessWindowForPrimeCustomer:function(){if(!this.dealDetails||!this.dealDetails.startTime||null===this.dealDetails.earlyAccessDurationInMilliseconds)return!1;var a=this.getCurrentServerTime(),b=Date.parse(this.dealDetails.startTime),c=b+this.dealDetails.earlyAccessDurationInMilliseconds;a=b<=a&&a<c;return this.isDealPrimeEarlyAccess()&&a},isDealInPrimeEarlyAccessWindowForNonPrimeCustomer:function(){if(!this.dealDetails||
!this.dealDetails.startTime||null===this.dealDetails.earlyAccessDurationInMilliseconds)return!1;var a=this.getCurrentServerTime(),b=Date.parse(this.dealDetails.startTime);a=b-this.dealDetails.earlyAccessDurationInMilliseconds<=a&&a<b;return this.isDealPrimeEarlyAccess()&&a},isDealInPrimeEarlyAccessWindow:function(){return this.hasPrimeSavingsBenefit?this.isDealInPrimeEarlyAccessWindowForPrimeCustomer():this.isDealInPrimeEarlyAccessWindowForNonPrimeCustomer()},isDealPrimeEarlyAccess:function(){return this.dealDetails&&
"PRIME_EARLY_ACCESS"===this.dealDetails.accessBehavior},isDealAppOnly:function(){return this.dealDetails&&"APP_ONLY_LD"===this.dealDetails.accessBehavior},isDealPrimeOnly:function(){return this.dealDetails&&"PRIME_ONLY"===this.dealDetails.accessBehavior},isDealPrimeOnlyDotd:function(){return this.isDealPrimeOnly()&&"DEAL_OF_THE_DAY"===this.dealDetails.type},isDealAccessibleToCustomer:function(){return this.hasPrimeSavingsBenefit||!this.isDealInPrimeEarlyAccessWindowForNonPrimeCustomer()&&!this.isDealPrimeOnly()},
getCustomerStateExpiryTime:function(){return this.dealCustomerStatus?this.dealCustomerStatus.expiryTime:null},convertClaimDealCustomerStateToProductV2CompatibleCustomerState:function(a){switch(a){case "NONE":return DealsX.CustomerStates.NONE;case "INCART":return DealsX.CustomerStates.IN_CART;case "PENDINGATC":return DealsX.CustomerStates.PENDING_ADD_TO_CART;case "CLAIMED":return DealsX.CustomerStates.CLAIMED;case "EXPIRED":return DealsX.CustomerStates.EXPIRED;default:return DealsX.CustomerStates.UNKNOWN}},
convertClaimDealDealStateToProductV2CompatibleDealState:function(a){switch(a){case "AVAILABLE":return DealsX.DealStates.AVAILABLE;case "UPCOMING":return DealsX.DealStates.UPCOMING;case "WAITLISTFULL":return DealsX.DealStates.WAITLISTFULL;default:return DealsX.DealStates.UNKNOWN}},getRenderingPlatform:function(){return this.deviceType.isApp?DealsX.RenderingPlatform.SHOPPING_APP:this.deviceType.isMobile?DealsX.RenderingPlatform.MOBILE_WEB:DealsX.RenderingPlatform.DESKTOP}})});f.when("A").register("dealsx-prime-access-view",
function(b){var c=b.createClass({primeAccessMessageView:null,init:function(a){this.primeAccessMessageView=a.rootContainer.find("#dealsx_prime_access_view")},onModelUpdate:function(a){a.isDealInPrimeEarlyAccessWindow()?b.show(this.primeAccessMessageView):b.hide(this.primeAccessMessageView)}});return{getView:function(a){return a.dealModel.isDealPrimeEarlyAccess()?new c(a):null}}});f.when("A").register("dealsx-app-access-view",function(b){var c=b.createClass({learnMoreMessage:null,appDownloadButton:null,
addToCartButton:null,renderingPlatform:null,init:function(a){this.appDownloadButton=a.rootContainer.find("#app-download-button");this.learnMoreMessage=a.rootContainer.find("#app-only-deal-learn-more-message");this.addToCartButton=a.rootContainer.find("#dealsx_atc_btn");this.renderingPlatform=a.dealModel.getRenderingPlatform()},onModelUpdate:function(a){a=this.getRenderingComponent()[this.renderingPlatform](a);this.renderComponent(a)},renderComponent:function(a){switch(a){case DealsX.AppAccessRenderingComponent.APP_DOWNLOAD_BUTTON:b.show(this.appDownloadButton);
b.hide(this.learnMoreMessage);b.hide(this.addToCartButton);break;case DealsX.AppAccessRenderingComponent.LEARN_MORE_MESSAGE:b.show(this.learnMoreMessage);b.hide(this.appDownloadButton);break;default:b.hide(this.appDownloadButton),b.hide(this.learnMoreMessage)}},getRenderingComponent:function(){return{SHOPPING_APP:function(){return DealsX.AppAccessRenderingComponent.LEARN_MORE_MESSAGE},MOBILE_WEB:function(a){return a.isCustomerStateIsEqualTo(DealsX.CustomerStates.IN_CART)?DealsX.AppAccessRenderingComponent.LEARN_MORE_MESSAGE:
DealsX.AppAccessRenderingComponent.APP_DOWNLOAD_BUTTON},DESKTOP:function(a){return a.isCustomerStateIsEqualTo(DealsX.CustomerStates.IN_CART)?DealsX.AppAccessRenderingComponent.NOTHING:DealsX.AppAccessRenderingComponent.APP_DOWNLOAD_BUTTON}}}});return{getView:function(a){return a.setupData.showAppOnlyDealCx?new c(a):null}}});f.when("A","dealsx-processing-view","dealsx-redemption-countdown-timer","a-button").register("dealsx-redemption-view",function(b,c,a,d){var e=b.createClass({addToCartButton:null,
processingView:null,inCartView:null,inCartTimer:null,pendingAddToCartView:null,pendingAddToCartTimer:null,waitlistFullMessageView:null,itemQuantityView:null,podotdQuantityLimitMessageView:null,redemptionFailedMessageView:null,pushNotificationInfo:null,init:function(d){var e=d.rootContainer,h=this;h.processingView=c.getView(d);h.inCartView=e.find("#dealsx_incart");h.pendingAddToCartView=e.find("#dealsx_pending_atc");h.waitlistFullMessageView=e.find("#dealsx_waitlist_full_message");h.itemQuantityView=
e.find("#dealsx_quantity_view");h.redemptionFailedMessageView=e.find("#dealsx_redemption_failed");h.podotdQuantityLimitMessageView=e.find("#dealsx_podotd_quantitylimit_message");h.inCartTimer=a.getView({timerView:e.find("#dealsx_checkout_timer"),onTimeoutCallback:function(){h.processingView.showClaimingProgress();b.hide(h.inCartView);b.delay(function(){b.trigger(DealsX.Events.DEAL_TIMER_EXPIRED)},1E3)}});this.pendingAddToCartTimer=a.getView({timerView:e.find("#dealsx_pending_atc_timer"),onTimeoutCallback:function(){b.hide(h.pendingAddToCartView)}})},
initializeButtons:function(a){var c=this;c.addToCartButton=d("#dealsx_atc_btn");c.addToCartButton.enable();b.declarative("dealsx-addtocart-button-action","click",function(b){b.data&&b.data.actionEnabled&&(delete b.data.actionEnabled,c.addToCartButton.hide(),c.processingView.showClaimingProgress(),a(b.data))})},onModelUpdate:function(a){var c=!0;a.dealCustomerStatus&&"IN_CART"===a.dealCustomerStatus.state?(this.inCartTimer.targetDate||(c=new Date(Date.parse(a.dealCustomerStatus.expiryTime)),this.inCartTimer.setTargetDate(c)),
b.show(this.inCartView),c=!1):(this.inCartTimer.stop(),b.hide(this.inCartView));a.dealCustomerStatus&&"PENDING_ADD_TO_CART"===a.dealCustomerStatus.state?(b.show(this.pendingAddToCartView),this.pendingAddToCartTimer.targetDate||(c=new Date(Date.parse(a.dealCustomerStatus.expiryTime)),this.pendingAddToCartTimer.setTargetDate(c)),c=!0):(this.pendingAddToCartTimer.stop(),b.hide(this.pendingAddToCartView));a.dealDetails&&"WAITLISTFULL"===a.dealDetails.state&&a.isDealAccessibleToCustomer()?(b.show(this.waitlistFullMessageView),
c=!1):b.hide(this.waitlistFullMessageView);a.callToAction&&a.callToAction.addToCart?this.addToCartButton.show():this.addToCartButton.hide();c?b.show(this.itemQuantityView):b.hide(this.itemQuantityView)},showRedemptionFailed:function(){b.show(this.redemptionFailedMessageView)},showPodotdQuantityLimitExceeded:function(){b.show(this.podotdQuantityLimitMessageView)},hideProcessingView:function(){this.processingView.hide()}});return{getView:function(a){return new e(a)}}});f.when("A").register("dealsx-redemption-countdown-timer",
function(b){var c=b.createClass({targetDate:null,timerView:null,onTimeoutCallback:null,init:function(a){var c=this;c.timerView=a.timerView;c.targetDate=a.targetDate;c.onTimeoutCallback=a.onTimeoutCallback;b.on("dealsx-timer-tick",function(){c.render()})},setTargetDate:function(a){this.targetDate=a;this.render()},stop:function(){this.targetDate=null},render:function(){if(this.targetDate){var a=this.targetDate.getTime()-(new Date).getTime(),b=Math.floor(a/6E4%60);a=Math.floor(a/1E3%60);var c=b+":"+
("0"+a).slice(-2);this.timerView&&this.timerView.html(c);if(0===b&&0==a){if(this.onTimeoutCallback)this.onTimeoutCallback();this.stop()}}}});return{getView:function(a){return new c(a)}}});f.when("A").register("dealsx-quantity-view",function(b){var c=b.createClass({quantity:1,init:function(a){this.subscribeToQuantityChangeEvents()},getQuantity:function(){return this.quantity},onModelUpdate:function(a){},subscribeToQuantityChangeEvents:function(){var a=this;b.on("a:dropdown:selected:dealx_quantity_dropdown",
function(b){a.quantity=b.value})}});return{getView:function(a){return new c(a)}}});f.when("A").register("dealsx-processing-view",function(b){var c=b.createClass({processingView:null,processingMessage:null,init:function(a){this.processingView=a.rootContainer.find("#dealsx_processing_view");this.processingMessage=this.processingView.find("#dealsx_processing_msg")},hide:function(){b.hide(this.processingView);b.hide(this.processingMessage)},showClaimingProgress:function(){b.show(this.processingMessage);
b.show(this.processingView)}});return{getView:function(a){return new c(a)}}});f.when("A","dealsx-timer-countdown").register("dealsx-timer-view",function(b,c){var a=b.$,d=b.createClass({startTimerView:null,endTimerView:null,clockOffset:0,startTime:null,endTime:null,init:function(a){this.clockOffset=a.clockOffset;this.startTime=Date.parse(a.startTime);this.endTime=Date.parse(a.endTime);var d=b.$(a.rootContainer);this.isDealStarted()||(this.startTimerView=c.getView({timerView:d.find("#dealsx-start-timer"),
targetTime:Date.parse(a.startTime),clockOffset:a.clockOffset,onTimerExpired:this.onTimerExpired}));this.endTimerView=c.getView({timerView:d.find("#dealsx-end-timer"),targetTime:Date.parse(a.endTime),clockOffset:a.clockOffset,onTimerExpired:this.onTimerExpired})},onTimerExpired:function(){b.delay(function(){b.trigger(DealsX.Events.DEAL_TIMER_EXPIRED)},1E3)},onModelUpdate:function(b){b.dealDetails&&(b.isCustomerStateInCart()||b.isCustomerStatePendingATC()?this.endTimerView.hide():this.startTimerView?
(a("#dealsx-start-timer").addClass("a-color-success"),this.isDealStarted()&&(this.startTimerView.hide(),this.endTimerView.show())):(this.endTimerView.show(),this.isDealEnding()&&a("#dealsx-end-timer").addClass("a-color-success")))},isDealStarted:function(){return Date.now()-this.clockOffset>this.startTime},isDealEnding:function(){var a=Date.now()-this.clockOffset;return 18E5>this.endTime-a}});return{getView:function(a){return new d(a)}}});f.when("A","dealsx-polyfills").register("dealsx-timer-countdown",
function(b,c){c.padStart();var a=b.createClass({init:function(a){this.timerView=a.timerView;this.targetTime=a.targetTime;this.clockOffset=a.clockOffset;this.onTimerExpired=a.onTimerExpired;var c=this;b.on("dealsx-timer-tick",b.$.proxy(function(){c.countdown()},this))},countdown:function(){var a=Date.now()-this.clockOffset;a=(this.targetTime-a)/1E3|0;if(!(0>a))if(0===a)this.onTimerExpired();else{var b=Math.floor(a/86400),c=Math.floor(a/3600),f=Math.floor(a/60%60),k=Math.floor(a%60);a=this.timerView.find(".timer-days");
var m=this.timerView.find(".timer-precise");if(0<b)c=a.find(".singular"),f=a.find(".plural"),k=f.find(".value"),a.show(),m.hide(),1===b?(c.show(),f.hide()):(c.hide(),f.show(),k.text(b));else{b=m.find(".timer-hours \x3e .value");var p=m.find(".timer-minutes \x3e .value"),g=m.find(".timer-seconds \x3e .value");a.hide();m.show();b.text(c.toString().padStart(2,"0"));p.text(f.toString().padStart(2,"0"));g.text(k.toString().padStart(2,"0"))}}},hide:function(){b.hide(this.timerView)},show:function(){b.show(this.timerView)}});
return{getView:function(b){return new a(b)}}});f.when("A").register("dealsx-progress-view",function(b){var c=b.createClass({progressView:null,progressBarBase:null,progressBarTick:null,claimedMessage:null,init:function(a){a=a.rootContainer;this.progressView=a.find("#dealsx_progress_view");this.progressBarBase=a.find("#dealsx_progress_bar \x3e .progbar");this.progressBarTick=a.find("#dealsx_progress_bar \x3e .progbartick");this.claimedMessage=a.find("#dealsx_percent_message")},onModelUpdate:function(a){if(a.dealDetails&&
null!=a.dealDetails.percentClaimed&&a.dealDetails.percentClaimedMessage){!a.dealCustomerStatus||"IN_CART"!==a.dealCustomerStatus.state&&"PENDING_ADD_TO_CART"!==a.dealCustomerStatus.state?b.show(this.progressView):b.hide(this.progressView);var c=a.dealDetails.percentClaimed;this.progressBarBase.css("width",c+"%");this.progressBarTick.css("width",c+"%");this.claimedMessage.text(a.dealDetails.percentClaimedMessage);89>=c?this.claimedMessage.removeClass("a-color-error").removeClass("a-color-success").addClass("a-color-base"):
99>=c?this.claimedMessage.removeClass("a-color-base").removeClass("a-color-error").addClass("a-color-success"):this.claimedMessage.removeClass("a-color-base").removeClass("a-color-success").addClass("a-color-error")}}});return{getView:function(a){var b=a.rootContainer;return b.find("#dealsx_progress_view").length&&b.find("#dealsx_progress_bar \x3e .progbar").length&&b.find("#dealsx_progress_bar \x3e .progbartick").length&&b.find("#dealsx_percent_message").length?new c(a):null}}});f.when("A").register("dealsx-header-view",
function(b){var c=b.createClass({dealUnavailableView:null,claimedMessageView:null,headerStateView:null,init:function(a){a=a.rootContainer;this.headerStateView=a.find("#dealsx_header_message");this.claimedMessageView=a.find("#dealsx-claimed-message");this.dealUnavailableView=a.find("#dealsx-unavailable-message")},onModelUpdate:function(a){a.isCustomerStateIsEqualTo(DealsX.CustomerStates.CLAIMED)&&this.claimedMessageView&&(b.show(this.claimedMessageView),b.hide(this.claimedMessageView.siblings()));
this.updateHeaderStateMessage(a)},showDealUnavailableView:function(){this.dealUnavailableView&&(b.show(this.dealUnavailableView),b.hide(this.dealUnavailableView.siblings()))},updateHeaderStateMessage:function(a){a.isCustomerStateIsEqualTo(DealsX.CustomerStates.IN_CART)?this.hideHeaderStateViewChildrenExceptProvidedView(this.headerStateView.find("#dealsx_header_message_incart")):a.isCustomerStateIsEqualTo(DealsX.CustomerStates.PENDING_ADD_TO_CART)?this.hideHeaderStateViewChildrenExceptProvidedView(this.headerStateView.find("#dealsx_header_message_pendingatc")):
a.isCustomerStateIsEqualTo(DealsX.CustomerStates.CLAIMED)?this.hideHeaderStateViewChildrenExceptProvidedView(this.headerStateView.find("#dealsx_header_message_claimed")):a.isDealStateIsEqualTo(DealsX.DealStates.WAITLISTFULL)?this.hideHeaderStateViewChildrenExceptProvidedView(this.headerStateView.find("#dealsx_header_message_waitlistfull")):this.hideHeaderStateViewChildrenExceptProvidedView(null)},hideHeaderStateViewChildrenExceptProvidedView:function(a){a?(b.show(a),b.hide(a.siblings())):b.hide(this.headerStateView.children())}});
return{getView:function(a){return a.rootContainer.find("#dealsx_header_message").length?new c(a):null}}});f.when("A").register("dealsx-warranty-view",function(b){var c=b.createClass({warrantyViewSelector:null,init:function(a){a=a.rootContainer;this.isMobile()?this.warrantyViewSelector=a.find("#warrantyCheckBoxLD"):this.warrantyViewSelector=a.find("#abbWrapper")},onModelUpdate:function(a){null!==this.warrantyViewSelector&&(a.dealCustomerStatus&&a.dealCustomerStatus.state===DealsX.CustomerStates.IN_CART?
b.hide(this.warrantyViewSelector):this.warrantyViewSelector.removeClass("a-hidden"))},isMobile:function(){var a=b.$;return 0<a("#warrantyCheckBoxLD_feature_div").find('input[name\x3d"mbba-ld"][type\x3d"checkbox"]').length}});return{getView:function(a){return new c(a)}}});f.when("A").execute("dealsx-metrics-utilities",function(b){DealsX.incrementCounter=function(b){b&&g.ue&&"function"===typeof g.ue.count&&ue.count(b,(ue.count(b)||0)+1)};DealsX.setCounter=function(b,a){b&&g.ue&&"function"===typeof g.ue.count&&
ue.count(b,a)};DealsX.generateAPIMetricName=function(b){if(!b)return null;var a="dealsx";b.apiName&&(a+=":"+b.apiName,b.apiVersion&&(a+=":"+b.apiVersion));a+=":"+(b.isSuccess?"success":"error");b.clientId&&(a+=":"+b.clientId);b.errorCode&&(a+=":"+b.errorCode);b.isRobot&&(a+=":robot");return a.toLowerCase()};DealsX.recordAPIMetrics=function(b){if(b){var a=DealsX.generateAPIMetricName(b);DealsX.incrementCounter(a);b.quantity&&DealsX.setCounter(a+":quantity",b.quantity);b.latency&&DealsX.setCounter(a+
":time",b.latency)}};DealsX.callIfFunctionWithMetrics=function(){if(!(2>arguments.length)){var b=[];Array.prototype.push.apply(b,arguments);var a=b.shift(),d=b.shift();"function"==typeof d?(DealsX.recordAPIMetrics(a),d.apply(null,b)):(a.isRobot=!0,DealsX.recordAPIMetrics(a))}};DealsX.timeNow=function(){if(performance)return Math.round(performance.now());DealsX.recordAPIMetrics({apiName:"client_latency_measure",isSuccess:!1,errorCode:"fallback_to_date"});return Date.now()}});f.when("A").register("dealsx-polyfills",
function(){return{padStart:function(b){!b&&String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(b,a){a=a||" ";if(this.length>=b)return String(this);b-=this.length;for(var c="",e=0;e<b;e+=a.length)c+=a;return c.slice(0,b)+String(this)}})}}});f.when("A").register("deals-custom-integration-base",function(b){return b.createClass({isActive:!1,init:function(){this.isIntegrationActive()},isIntegrationActive:function(){throw Error("isIntegrationActive called from base");
},appendArgumentsToEndpoint:function(){throw Error("appendArgumentsToEndpoint called from base");},handleClaimDealSuccess:function(){throw Error("handleClaimDealSuccess called from base");},handleClaimDealError:function(){throw Error("handleClaimDealError called from base");},handleClaimDealRetry:function(){throw Error("handleClaimDealRetry called from base");},handleLDBuyBoxSelected:function(){throw Error("handleLDBuyBoxSelected called from base");},handleRegularBuyBoxSelected:function(){throw Error("handleRegularBuyBoxSelected called from base");
}})});f.when("A","deals-custom-integration-base").register("deals-custom-integration-installments",function(b,c){var a=b.$;return c.extend({init:function(){this._super()},isIntegrationActive:function(){var b=a('.installments-checkbox-wrapper input[name\x3d"installments-payment-checkbox"]'),c=a('.installments-checkbox-wrapper input[name\x3d"installments-programId"]');this.isActive=b.length&&c.length},appendArgumentsToEndpoint:function(){var b="",c=a('.installments-checkbox-wrapper input[name\x3d"installments-payment-checkbox"]'),
h=a('.installments-checkbox-wrapper input[name\x3d"installments-programId"]');h.length&&c.length&&c.is(":checked")&&(b="\x26installmentsProgramId\x3d"+h.val());return b},getRequestDataParameter:function(){var b={},c=a('.installments-checkbox-wrapper input[name\x3d"installments-payment-checkbox"]'),h=a('.installments-checkbox-wrapper input[name\x3d"installments-programId"]');h.length&&c.length&&c.is(":checked")&&(b={installmentsProgramId:h.val()});return b},handleClaimDealSuccess:function(){a(".installments-checkbox-wrapper").hide()},
handleClaimDealError:function(){},handleClaimDealRetry:function(){},handleLDBuyBoxSelected:function(){var b=a(".installments-deal-breakdown");b.length&&b.addClass("aok-hidden");b=a(".price-installment-payment");b.length&&b.removeClass("aok-hidden")},handleRegularBuyBoxSelected:function(){var b=a(".installments-deal-breakdown");b.length&&b.removeClass("aok-hidden");b=a(".price-installment-payment");b.length&&b.addClass("aok-hidden")}})});f.when("A","deals-custom-integration-base").register("dealsx-deal-custom-integration-preRegistration",
function(b,c){function a(){var a=d('#preRegistration-container-deals input[name\x3d"account-linking-deals"]'),b=d('#preRegistration-container-mobile-deals input[name\x3d"account-linking-deals"]');return 0<a.length?a:0<b.length?b:null}var d=b.$;return c.extend({init:function(){this._super()},isIntegrationActive:function(){this.isActive=null!==a()},appendArgumentsToEndpoint:function(){var b="",c=a();null!==c&&(b=c.is(":checked")&&!c.prop("disabled")?"\x26isDevicePreRegistered\x3dtrue":"\x26isDevicePreRegistered\x3dfalse");
return b},getRequestDataParameter:function(){var b={},c=a();0<c.length&&(b={devicePreRegistered:c.is(":checked")&&!c.prop("disabled")});return b},handleClaimDealSuccess:function(){g.dealController&&g.dealController.dealModel&&!g.dealController.dealModel.isDealPrimeOnlyDotd()&&(d("#preRegistration-container-deals").hide(),d("#preRegistration-container-mobile-deals").hide())},handleClaimDealError:function(){},handleClaimDealRetry:function(){},handleLDBuyBoxSelected:function(){},handleRegularBuyBoxSelected:function(){}})});
f.when("A","deals-custom-integration-base","ready").register("dealsx-deal-custom-integration-warranty",function(b,c){function a(){var a=e('div[id\x3d"warrantyCheckBoxLD_feature_div"] input[name\x3d"mbba-ld"][type\x3d"checkbox"]'),b=document.querySelectorAll('div[id\x3d"mbbLD_feature_div"] [id^\x3d"mbb-offeringID-3"]');return 0<a.length?a:b}function d(){return 0<e('div[id\x3d"warrantyCheckBoxLD_feature_div"] input[name\x3d"mbba-ld"][type\x3d"checkbox"]').length}var e=b.$;return c.extend({init:function(){this._super()},
isIntegrationActive:function(){this.isActive=0<a().length},appendArgumentsToEndpoint:function(){},getRequestDataParameter:function(){},handleClaimDealSuccess:function(){var c=a();if(0<c.length){if(d()){if(c.prop("checked")){var f=e('div[id\x3d"warrantyCheckBoxLD_feature_div"] input[name\x3d"mbba-ld"]').val();var k=e('div[id\x3d"warrantyCheckBoxLD_feature_div"] input[name\x3d"mbboid-ld"]').val()}}else for(var m=0;m<c.length;m++)if(c[m].checked){f=e('div[id\x3d"mbbLD_feature_div"] input[name\x3d"asin.3'+
m+'"]').val();k=e('div[id\x3d"mbbLD_feature_div"] input[name\x3d"offeringID.3'+m+'"]').val();break}f!==n&&k!==n&&(c=k,k=d()?b.state("hlcx-mbb-state").baseAsin:e('#ASIN,input[name\x3d"items[0.base][asin]"]').val(),c={asin:f,offerListingId:c,quantity:Number(e("#dealx_quantity_dropdown").val())||1,additionalParameters:{itemAssociation:{associatedItemId:k,renderType:"renderAll",programType:"AmazonProtect",deleteConstraint:{mutuallyInclusive:!1}}}},k=(d()?"wty_ld_m_mbb":"wty_ld_d_mbb")+"_"+k+"_"+f,g.dealController.addItemsToCart([c],
k))}},handleClaimDealError:function(){},handleClaimDealRetry:function(){},handleLDBuyBoxSelected:function(){var a=e(".a-section.mbb__tld");a.length&&a.removeClass("a-hidden")},handleRegularBuyBoxSelected:function(){var a=e(".a-section.mbb__tld");a.length&&a.addClass("a-hidden")}})});f.when("A").register("dealsx-cart-aapi-service",function(b){return b.createClass({countEndpointUrl:null,addItemsEndpointUrl:null,headers:null,init:function(b){this.countEndpointUrl=b.cartCountAapiEndpoint;this.addItemsEndpointUrl=
b.cartAddItemsAapiEndpoint;this.headers={"Accept-Language":b.languageOfPreference,"x-api-csrf-token":b.aapiCsrfToken};b.slateToken&&(this.headers["x-amzn-encrypted-slate-token"]=b.slateToken)},getCount:function(c,a){var d=this,e={apiName:DealsX.ApiNames.CART_COUNT};d._request=b.$.ajax({url:this.countEndpointUrl,type:"GET",dataType:"json",headers:b.$.extend({},d.headers,{Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.count/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.count.request/v1"'}),
xhrFields:{withCredentials:!0},success:function(a){e.isSuccess=!0;DealsX.recordAPIMetrics(e);c(a,d._request)},error:function(b){e.isSuccess=!1;DealsX.recordAPIMetrics(e);e.errorCode=JSON.parse(b.responseText).entity.status;DealsX.recordAPIMetrics(e);a(b)},complete:function(){d._request=null}})},addItems:function(c,a,d,e){var f=this,l={apiName:DealsX.ApiNames.CART_ADD_ITEMS},k=DealsX.timeNow();f._request=b.$.ajax({url:this.addItemsEndpointUrl+"?ref\x3d"+a,type:"POST",dataType:"json",headers:b.$.extend({},
f.headers,{Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"'}),data:JSON.stringify({items:c}),xhrFields:{withCredentials:!0},success:function(a){l.isSuccess=!0;l.latency=DealsX.timeNow()-k;DealsX.callIfFunctionWithMetrics(l,d,a,f._request)},error:function(a){l.isSuccess=!1;l.latency=DealsX.timeNow()-k;DealsX.recordAPIMetrics(l);if(a.hasOwnProperty("responseText")){var b=JSON.parse(a.responseText);
b.hasOwnProperty("type")&&b.type===DealsX.constants.AAPI_V1_ERROR_TYPE&&(l.errorCode=b.entity.status)}l.errorCode||(l.errorCode=a.status);DealsX.callIfFunctionWithMetrics(l,e,a)},complete:function(){f._request=null}})}})});f.when("A","dealsx-deal-custom-integration-service").register("dealsx-deal-redemption-service",function(b,c){return b.createClass({endPoint:null,dealCustomIntegrationService:null,init:function(a){this.dealCustomIntegrationService=new c;this.endPoint=a.claimDealAapiEndpoint;this.headers=
{"Accept-Language":a.languageOfPreference,Accept:'application/vnd.com.amazon.api+json; type\x3d"deals.claim.response/v1"',"x-api-csrf-token":a.aapiCsrfToken};a.slateToken&&(this.headers["x-amzn-encrypted-slate-token"]=a.slateToken)},claimDeal:function(a,c,f,h,l,k){var d=this,e={apiName:DealsX.ApiNames.CLAIM_AND_ADD_TO_CART,isRetry:!1},g=DealsX.timeNow();d._request=b.$.ajax({url:d.endPoint+a+"/claim-and-add-to-cart?ref_\x3d"+f,type:"POST",dataType:"json",data:d.generateRequestData(c,h),contentType:'application/vnd.com.amazon.api+json; type\x3d"deals.claim.request/v1"',
headers:d.headers,xhrFields:{withCredentials:!0},success:function(a){e.isSuccess=!0;e.latency=DealsX.timeNow()-g;DealsX.callIfFunctionWithMetrics(e,l,a.entity,d._request)},error:function(a){e.isSuccess=!1;e.latency=DealsX.timeNow()-g;DealsX.recordAPIMetrics(e);var b=null;if(a.hasOwnProperty("responseText")&&""!==a.responseText){var c=JSON.parse(a.responseText);c.hasOwnProperty("type")&&(b=c.type,b===DealsX.constants.AAPI_V1_QUANTITY_RESTRICTION_VIOLATION_ERROR||b===DealsX.constants.AAPI_V1_ERROR_TYPE)&&
(e.errorCode=c.entity.status)}e.errorCode||(e.errorCode=a.status);DealsX.callIfFunctionWithMetrics(e,k,a,b)},complete:function(){d._request=null}})},generateRequestData:function(a,b){var c=this.dealCustomIntegrationService.getRequestDataParameters();c.asin=a;c.quantity=parseInt(b);return JSON.stringify(c)}})});f.when("A","deals-custom-integration-installments","dealsx-deal-custom-integration-preRegistration","dealsx-deal-custom-integration-warranty").register("dealsx-deal-custom-integration-service",
function(b,c,a,d){var e=b.$;return b.createClass({requiredFunctions:"isIntegrationActive appendArgumentsToEndpoint handleClaimDealSuccess handleClaimDealError handleClaimDealRetry handleLDBuyBoxSelected handleRegularBuyBoxSelected".split(" "),registeredIntegrations:[new c,new a,new d],init:function(){this.bindEvents()},bindEvents:function(){b.on("deals_claimDealSuccess",e.proxy(function(){this.executeEventHandler("handleClaimDealSuccess")},this));b.on("deals_claimDealError",e.proxy(function(){this.executeEventHandler("handleClaimDealError")},
this));b.on("deals_claimDealRetry",e.proxy(function(){this.executeEventHandler("handleClaimDealRetry")},this));b.on("deals_onSelectLDBuybox",e.proxy(function(){this.executeEventHandler("handleLDBuyBoxSelected")},this));b.on("deals_onSelectRegularBuybox",e.proxy(function(){this.executeEventHandler("handleRegularBuyBoxSelected")},this))},appendCustomArgumentsToEndpoint:function(a){var b=a;e.each(this.registeredIntegrations,function(a,c){c.isIntegrationActive();c.isActive&&(b+=c.appendArgumentsToEndpoint())});
return b},getRequestDataParameters:function(){var a={};e.each(this.registeredIntegrations,function(b,c){c.isIntegrationActive();if(c.isActive){b=c.getRequestDataParameter();for(var d in b)a[d]=b[d]}});return a},executeEventHandler:function(a){e.each(this.registeredIntegrations,function(b,c){c.isIntegrationActive();if(c.isActive)c[a]()})}})})});
/* ******** */
(function(e){var g=window.AmazonUIPageJS||window.P,q=g._namespace||g.attributeErrors,a=q?q("DetailPageCommonScripts",""):g;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,g,q){e.when("A","jQuery").register("jumpLink",function(a,b){return{bind:function(a,f,d,u){try{f=f||1E3,d=d||0,b("body").delegate(a,"click",function(c){try{var e=b(a);if(e.get(0)){var h=e.attr("href");h&&"#"===h.charAt(0)&&(h=u&&0===b(h).length?"[name\x3d'"+h.substring(1)+"']":h,0!==b(h).length&&
(c.preventDefault(),b("html, body").animate({scrollTop:b(h).offset().top-d},f)))}}catch(m){g.ueLogError&&g.ueLogError(m,{logLevel:"FATAL",attribution:"jumpLink",message:"[JumpLink - Error in executing click handler]"})}})}catch(k){g.ueLogError&&g.ueLogError(k,{logLevel:"FATAL",attribution:"jumpLink",message:"[JumpLink - Error in binding click handler]"})}}}});"use strict";e.when("A").execute(function(a){a.declarative("mySummaryExpander_1","click",function(a){if(a=document.getElementById("summaryText"))a.style.display=
"block"===a.style.display?"none":"block"})});"use strict";e.when("A").register("dp-log-utils",function(a){a.on("dpLogFatalsEvent",function(a,c,f){g.ueLogError&&g.ueLogError({message:a},{logLevel:c,attribution:f})})});"use strict";e.register("dp-client-counter",function(){var a=function(){};g.ue&&g.ue.count&&"function"===typeof g.ue.count&&(a=g.ue.count);return{set:function(b,c){"undefined"!==typeof c&&a(b,c)},get:function(b){return a(b)},inc:function(b){a(b,(a(b)||0)+1)}}});"use strict";e.when("dp-client-counter").register("dp-click-counter",
function(a){return{record:function(b,c){b&&b.addEventListener("click",function(){a.inc(c+"-clicked")})}}});"use strict";e.when("A").register("cache",function(a){function b(){this.data={}}function c(b){var f=b;if("object"===typeof b){var c="";f="";a.each(b,function(a,b){f+=c+b+"\x3d"+a;c="\x26"})}return f}b.prototype={put:function(a,b){a=c(a);this.data[a]=b},get:function(a){a=c(a);return this.data[a]},exists:function(a){return c(a)in this.data}};return b});"use strict";e.register("dp-util-cookie",
function(){return function(a){a+="\x3d";for(var b=decodeURIComponent(document.cookie).split(";"),c=0;c<b.length;c++){var f=b[c];f=f.replace(/^\s+/,"");if(0===f.indexOf(a))return f.substring(a.length,f.length)}return""}});e.when("jQuery").register("quanityChangePriceUpdate",function(a){return{ajaxCall:function(a){}}});"use strict";e.when("A","jQuery","a-popover","a-dropdown","ready").register("moq-core",function(a,b,c,f){function d(a){return 0<a.length&&0<a.find("div[data-name\x3d'quantity.improvedMOQ']").length}
function e(){return b(n.join(", "))}function k(a){return"locked"===a.find("div[data-name\x3d'quantity.improvedMOQ']").attr("moq-lock")}function g(){return(b(h.join(", ")).length?h:b(m.join(", ")).length?m:b(t.join(", ")).length?t:["#buybox"]).map(function(a){return b(a)}).filter(d)}var h=["div[id^\x3dnewAccordionRow]","#snsAccordionRowMiddle","#snsAccordionRowMobileMiddle","#snsAccordionRowMobileAppMiddle"],m=["#oneTimeBuyBox","#snsBuyBox"],t=["#toggleBuyBox \x3e #sns","#toggleBuyBox \x3e #onetime"],
n=["#snsBuyBox","#toggleBuyBox \x3e #sns","#snsAccordionRowMiddle","#snsAccordionRowMobileMiddle","#snsAccordionRowMobileAppMiddle"],p="#add-to-cart-button;#mobb\\.addToCart;#buy-now-button;#one-click-button;#oneClickBuyButton;#prime-toggle-main;#rcx-subscribe-submit-button input;#rcx-subscribe-submit-button button".split(";");return{isSnsLocked:function(){var a=e();return k(a)},isLocked:k,getSnsSubscriptionContainer:e,offerContainerHasMoq:d,findMoqOfferContainers:g,findMoqOfferContainerWithDomElement:function(a){var b=
g().filter(function(b){return b[0].contains(a)});return 0===b.length?null:b[0]},tweakDisplayTextForMoqQuantityDropdown:function(a){var b=f.getSelect(a).getOptions(0),c=b.info()[0];c.selected?b.update({text:c.value}):b.update({text:a.children("option[data-displayText]").attr("data-displayText")})},lockSubmission:function(a,c,f){var d=a.find(p.join(", ")),e=a.find("div[data-name\x3d'quantity.improvedMOQ']");d.each(function(){"hidden"!==b(this).prop("type")&&(this.hasAttribute("moq-original-button-type")||
b(this).attr("moq-original-button-type",b(this).prop("type")),e.attr("moq-lock","locked"),b(this).prop("type","button"),b(this).bind("click.moq",c),"function"===typeof f&&f(b(this)))})},unlockSubmission:function(a,c){var f=a.find(p.join(", ")),d=a.find("div[data-name\x3d'quantity.improvedMOQ']");f.each(function(){"button"===b(this).prop("type")&&(d.attr("moq-lock","unlocked"),b(this).prop("type",b(this).attr("moq-original-button-type")),b(this).unbind("click.moq"),"function"===typeof c&&c(b(this)))})}}});
"use strict";e.when("A","dp-pre-atc-monitor").execute("dp-pre-atc-execution",function(a,b){a.declarative("dp-pre-atc-declarative","click",function(c){var f=b.getInstance();a.$.isEmptyObject(f.preAddToCartHeroFunctionRegister.heroFunctionMap)||a.$.isEmptyObject(f.getHeroName())||f.triggerHeroFunction(c)})});"use strict";e.when("A","ready").register("dp-pre-atc-hero-candidates",function(a){var b=a.state("dp-pre-atc-hero")===q?"":a.state("dp-pre-atc-hero").heroName;return{getHeroName:function(){return b},
setHeroName:function(a){a&&(b=a)},hasHeroName:function(){return!a.$.isEmptyObject(b)},getHeroCandidates:a.state("dp-pre-atc-hero-candidates")===q?[]:a.state("dp-pre-atc-hero-candidates")}});"use strict";e.when("A").register("dp-pre-atc-hero-function-register",function(a){function b(){this.heroFunctionMap={};this.registerHero=function(a,b){if(a&&"function"===typeof b)this.heroFunctionMap[a]=b;else throw Error("PRE-ATC-ERROR-REGISTER-1 Failed to register as your Hero name might be invalid or triggerFunction is not function type.");
}}var c;return{getInstance:function(){c||(c=new b);return c}}});"use strict";e.when("A","dp-pre-atc-hero-candidates","dp-pre-atc-hero-function-register").register("dp-pre-atc-monitor",function(a,b,c){function f(a,b){this.preAddToCartHeroCandidates=a;this.preAddToCartHeroFunctionRegister=b;this.logAttribution="dp_pre_atc_monitor"}f.prototype={getHeroName:function(){return this.preAddToCartHeroCandidates.getHeroName()},updateHero:function(b){b?-1<this.preAddToCartHeroCandidates.getHeroCandidates.indexOf(b)?
(this.preAddToCartHeroCandidates.setHeroName(b),a.state.replace("dp-pre-atc-hero",null),b=g.ue,"undefined"!==typeof b&&"undefined"!==typeof b.count&&b.count("dpOffers:preatc:updateHero",(b.count("dpOffers:preatc:updateHero")||0)+1)):a.trigger("dpLogFatalsEvent","PRE-ATC-ERROR-MONITOR-1 Failed to update Hero to "+b+" as it is not registered on DPX side.","ERROR",this.logAttribution):a.trigger("dpLogFatalsEvent","PRE-ATC-ERROR-MONITOR-2 Empty Hero name, Hero has been deleted.","WARN",this.logAttribution)},
triggerHeroFunction:function(b){if(!a.$.isEmptyObject(this.preAddToCartHeroFunctionRegister.heroFunctionMap)&&this.preAddToCartHeroCandidates.hasHeroName()){var c=this.getHeroName();try{this.preAddToCartHeroFunctionRegister.heroFunctionMap[c](b)}catch(v){a.trigger("dpLogFatalsEvent","PRE-ATC-ERROR-MONITOR-3 PreAddToCartMonitor could not find Hero's function.","ERROR",this.logAttribution)}}else a.trigger("dpLogFatalsEvent","PRE-ATC-ERROR-MONITOR-4 PreAddToCartMonitor tried to trigger Hero function when Hero does not exist.",
"ERROR",this.logAttribution)}};f.prototype.constructor=f;var d;return{getInstance:function(){d||(d=new f(b,c.getInstance()));return d}}});"use strict";e.when("dp-accordion-click-counter").execute("gsbb-accordion-click-counter-desktop",function(a){a.recordAccordionClick("gsbb","desktop")});"use strict";e.when("dp-button-click-counter").execute("gsbb-button-click-counter-desktop",function(a){a.recordButtonClick("desktop_buybox","gsbb","desktop")});"use strict";e.when("A","dp-client-counter","dp-get-buybox-element-ids",
"ready").register("dp-accordion-click-counter",function(a,b,c){return{recordAccordionClick:function(c,d){var f=c+":"+d+":";a.on("a:accordion:buybox-accordion:select",function(a){b.inc(f+a.selectedRow.rowName+":click")})}}});"use strict";e.when("A","dp-client-counter","dp-get-buybox-element-ids","ready").register("dp-button-click-counter",function(a,b,c){var f=a.$;return{recordButtonClick:function(a,e,g){(a=c.getAccordionRowIds(a))&&a.length&&a.forEach(function(a){var d=c.getButtonIds(a);d&&d.length&&
d.forEach(function(c){var d=e+":"+g+":"+a+":"+c+":click";f("#"+c).click(function(){b.inc(d)})})})},recordSingleOfferButtonClick:function(a,e,g){if(a){var d=c.getButtonIds(a);d&&d.length&&d.forEach(function(c){var d=e+":"+g+":"+a+":"+c+":click";f("#"+c).click(function(){b.inc(d)})})}}}});"use strict";e.when("A","ready").register("dp-get-buybox-element-ids",function(a){function b(a){return c(a).length?c(a).map(function(){return this.id}).get():[]}var c=a.$;return{getAccordionRowIds:function(a){return b("#"+
a+" [data-a-accordion-row-name]")},getButtonIds:function(a){return b("#"+a+" .a-button-input")}}});"use strict";e.when("A","ready").register("dp-get-offerDisplay-container",function(a){var b=a.$;return{getOfferDisplayContainerByElement:function(a){var c=["#buyBoxAccordion [data-a-accordion-row-name]","[id^\x3dgsod_singleOfferDisplay]","[id^\x3dtab_][id*\x3d_buybox_group_]","#buybox"],d=b("body");a&&a.closest&&(d=a.closest(c.join(",")));return d.length?d:b("body")}}});"use strict";e.register("dp-csm-metrics",
function(){return{updateCount:function(a){var b=g.ue;b&&b.count&&"string"===typeof a&&b.count(a,(b.count(a)||0)+1)},startLatencyTime:function(a){"function"===typeof uet&&"string"===typeof a&&uet("bb",a,{wb:1})},recordLatencyTime:function(a){"function"===typeof uex&&"string"===typeof a&&uex("ld",a,{wb:1})}}});"use strict";e.register("add-to-cart-constants",function(){return{PREFIX:"items",ITEM_TYPES:{BASE:"base"},PARAMETER_PATHS:{ASIN:["asin"],OFFER_LISTING_ID:["offerListingId"],QUANTITY:["quantity"],
GIFTOPTIONS:["additionalParameters","giftOptions","includeGiftReceipt"],DEVICEPREREGISTRATION:["additionalParameters","devicePreregistration","selected"]},CLIENT_NAME:"clientName",CSRF_TOKEN:"anti-csrftoken-a2z"}});"use strict";e.when("A","add-to-cart-constants").register("add-to-cart-parameter-name",function(a,b){return{constructParameterName:function(c,f,d){if("string"===typeof c&&"number"===typeof f&&0<=f&&Array.isArray(d)){var e=b.PREFIX;e+="["+(f+"."+c)+"]";d.forEach(function(a){e+="["+a+"]"});
return e}a.trigger("dpLogFatalsEvent","[Invalid parameters used to construct add to cart parameter]","WARN","addtocart_construct_parameter_error")}}});"use strict";e.when("add-to-cart-constants").register("offersx-csrf-utils",function(a){function b(b){var c="input[name\x3d'"+a.CSRF_TOKEN+"']";return(c=b?c+"[id\x3d'"+b+"']":c)?(b=document.querySelector(c))?b.value:"":""}function c(b,c){c instanceof Object||(c={});b&&""!==b&&(c[a.CSRF_TOKEN]=b);return c}return{getCSRFToken:b,setCSRFHeader:c,setCSRFHeaderFromId:function(a,
d){a=b(a);return c(a,d)}}});"use strict";e.when("A","hdp-invite-button-ajax-handler","atf").execute("hdp-invite-button-action-handler",function(a,b){a.declarative("invite-button","click",function(a){a.$event.preventDefault();b.hdpInviteButtonAjaxHandle(a.data,a.action)});a.declarative("request-invite","click",function(a){a.$event.preventDefault();b.hdpInviteButtonAjaxHandle(a.data,a.action)});a.declarative("notify-details","click",function(a){a.$event.preventDefault();b.hdpInviteButtonAjaxHandle(a.data,
a.action)})});"use strict";e.when("A","dp-client-counter","hdp-ajax-success-dialog-handler","a-button","atf").register("hdp-invite-button-ajax-handler",function(a,b,c,e){var d=a.$,f,k,q;c.initialize();return{hdpInviteButtonAjaxHandle:function(c,m){c=d("#hdp-ib-ajax-endpoint");var h=d("#hdp-ib-csrf-token"),n=d("#hdp-ib-signedIn"),p=d("#hdp-sign-in-url"),r=d("#hdp-language"),l=d("#hdp-ib-post-click-display-string");p=p?p.val():"/gp/sign-in.html";n=n?"true"===n.val():!1;r=r?r.val():"en_US";"notify-details"===
m?(f="iod:prime:signup:details:click",k="notify-program-details"):(f="hdp:request:invitation:click",k="request-invite");q=l?l.val():"Details emailed";if(n&&c&&h){c.val()&&(l=c.val().split("/"))&&4<l.length&&b.inc(f+":"+l[l.length-1]);b.inc(f);h={"Accept-Language":r,Accept:'application/vnd.com.amazon.api+json; type\x3d"aapi.highdemandproductcontracts.'+k+'/v1"',"x-api-csrf-token":h.val()};if(l=document.querySelector('meta[name\x3d"encrypted-slate-token"]'))h["x-amzn-encrypted-slate-token"]=l.content;
d.ajax({url:"https://"+c.val(),type:"POST",contentType:'application/vnd.com.amazon.api+json; type\x3d"aapi.highdemandproductcontracts.'+k+'.request/v1"',headers:h,data:JSON.stringify({}),xhrFields:{withCredentials:!0},timeout:1E4,success:function(b){if("request-invite"===m||"invite-button"===m){b=d("#shippingMessageInsideBuyBox_feature_div");var c=d("#availabilityInsideBuyBox_feature_div"),f=d("#tabular_feature_div"),g=d("#hdp-detail-no-requested-id"),h=d("#hdp-invite-button"),k=d("#hdp-detail-expired-id"),
l=d("#hdp-detail-requested-id"),n=d("#iod-request-invite-success-message-trigger"),p=d("#hdpInviteButton_feature_div").attr("data-csa-c-asin");"invite-button"===m&&f&&f.hide();b&&b.hide();c&&c.hide();g&&g.hide();h&&h.hide();k&&k.hide();l&&l.removeClass("aok-hidden");n.length&&n.click();a.trigger("updateCustomPageRefreshParams",p,"hdpCustomerAction","requestInvite")}else"notify-details"===m&&(b=d("#hdpInviteButton_feature_div").attr("data-csa-c-asin"),c=e("#hdp-invite-button"),c.isEmpty()||(c.disable().text(q),
a.trigger("updateCustomPageRefreshParams",b,"hdpCustomerAction","notifyDetails")))},error:function(){a.trigger("dpLogFatalsEvent","HDP Invite Button Ajax call failed","ERROR","HDPAjaxFailure");var b=d("#hdp-ajax-failure-modal");b&&b.click()}})}else n?a.trigger("dpLogFatalsEvent","HDP Invite Button Ajax data is missing","ERROR","HDPAjaxFailure"):g.location.href=p}}});"use strict";e.when("dp-button-click-counter").execute("hdp-button-click-counter-desktop",function(a){a.recordSingleOfferButtonClick("hdp_buybox_desktop",
"hdp","desktop")});e.when("A","a-modal").register("hdp-ajax-success-dialog-handler",function(a,b){return{initialize:function(){var b=this;a.declarative("close-iod-request-invite-success-dialog","click",function(){b.hide()})},hide:function(){var a=b.get("iodRequestInviteSuccessMessageModal");a&&a.hide()}}})});
/* ******** */
(function(n){var k=window.AmazonUIPageJS||window.P,p=k._namespace||k.attributeErrors,f=p?p("DetailPageLatencyAssets",""):k;f.guardFatal?f.guardFatal(n)(f,window):f.execute(function(){n(f,window)})})(function(n,k,p){n.when("dp-interactive-feature-component-base","dp-click-to-ci-utils","A").register("dp-interactive-feature",function(f,g,a){function b(a,e){this.name=a;this._baseComponents={};this.getComponent("default",e)}function d(a){return l.isPlainObject(a)&&a.hasComponents&&l.isArray(a.components)}
var l=a.$;b.prototype={getTimeToInteractivity:function(h,e){h=h||{};var c,m,b=0,f=!1,k=[];d(h)?(a.each(h.components,function(a){l.isPlainObject(a)&&g.isValidNonEmptyString(a.name)&&(c=this.getComponent(a.name,e),(m=c.getTimeToInteractivity(e,a.events))&&m.interactive?m.interactiveTime>b&&(b=m.interactiveTime):k.push(a.name))},this),k.length||(f=!0)):(m=this.getComponent("default",e).getTimeToInteractivity(e,h.events),f=m.interactive,b=m.interactiveTime);return{interactive:f,interactiveTime:f?b:0}},
getComponent:function(a,e){a=a.toLowerCase();this._baseComponents[a]||(this._baseComponents[a]=new f(a,e));return this._baseComponents[a]},updateFeatureInformation:function(h,e){var c={timestamp:h.timestamp,type:h.type,options:{}},m=!1;d(h.options)?a.each(h.options.components,function(a){l.isPlainObject(a)&&g.isValidNonEmptyString(a.name)&&(c.options=a,a=this.getComponent(a.name,e).updateComponentInformation(c,e),m=m||a)},this):(c.options=h.options||{},m=this.getComponent("default",e).updateComponentInformation(c,
e));return m},updateRenderTime:function(h,e,c){h=h||{};var m;d(h)?a.each(h.components,function(a){l.isPlainObject(a)&&g.isValidNonEmptyString(a.name)&&(m=this.getComponent(a.name))&&c&&m.updateRenderTime(c,e)},this):this.getComponent("default",c).updateRenderTime(c,e)},resetFeatureInfo:function(h,e){h=h||{};var c;d(h)?a.each(h.components,function(a){l.isPlainObject(a)&&g.isValidNonEmptyString(a.name)&&(c=this.getComponent(a.name))&&e&&c.resetComponentInfo(e)},this):this.getComponent("default",e).resetComponentInfo(e)}};
return b});n.when("A","dp-interactive-feature","dp-click-to-ci","dp-critical-features","3p-promise","dp-click-to-ci-utils").register("dp-time-to-interactive",function(f,g,a,b,d,l){var h=f.$;return{_features:{},criticalFeatures:{},_clickToCI:{},pageType:"glance",getTimeToInteractivity:function(a,c){a=a||{};var m={features:a,longPoleFeatureName:"",interactiveTime:0,allFeaturesInteractive:!1,nonInteractiveFeatures:[]},b=[];h.isPlainObject(a)&&!h.isEmptyObject(a)&&(f.each(a,function(a,e){e=e.toLowerCase();
var c=this._features[e];c?(c=c.getTimeToInteractivity(a,this.pageType),c.interactive?(a.interactiveTime=c.interactiveTime,c.interactiveTime>m.interactiveTime&&(m.interactiveTime=c.interactiveTime,m.longPoleFeatureName=e)):b.push(e)):b.push(e)},this),b.length||(m.allFeaturesInteractive=!0),m.nonInteractiveFeatures=b);return m},updateFeatures:function(a){a=a||[];var c=!1;h.isArray(a)&&(f.each(a,function(a){var e=!1;h.isPlainObject(a)&&l.isValidNonEmptyString(a.name)&&a.timestamp&&(e=this.getFeatureObject(a.name).updateFeatureInformation(a,
this.pageType));c=c||e},this),this._getClickToCIObj(this.pageType).getMetricInfo().allFeaturesInteractive||this.updateMetricInfo());return c},getFeatureObject:function(a){a=a.toLowerCase();this._features[a]||(this._features[a]=new g(a,this.pageType));return this._features[a]},updateRenderTime:function(a){if(a&&"twisterupdate"===this.pageType){var c=this.getCriticalFeatureObj().getCriticalFeaturesPromise(),b=this._getClickToCIObj(this.pageType).getMetricInfo(),d=this;c&&c.then(function(c){h.isPlainObject(c)&&
!h.isEmptyObject(c)&&f.each(c,function(c,b){b=b.toLowerCase();(b=d._features[b])&&b.updateRenderTime(c,a,d.pageType)},this);b.allFeaturesInteractive||d.updateMetricInfo(!0)})}},updatePage:function(e){if(e){var c=this.pageType;this.pageType=e.toLowerCase();var h=this.getCriticalFeatureObj().getCriticalFeatures();l.logCounter("ClickToCITwisterUpdateTotalCount");h&&this._clickToCI[c]&&!this._clickToCI[c].isResolved()&&this._clickToCI[c].reject(Error("ClicktoCI not available "));this._resetFeatureInfo(h,
e);this._clickToCI[this.pageType]=new a;this.criticalFeatures=new b;"twisterupdate"===this.pageType&&this.criticalFeatures.setIgnoreCriticalFeatures("twister")}},_resetFeatureInfo:function(a,c){c=c.toLowerCase();a=a||{};h.isPlainObject(a)&&!h.isEmptyObject(a)&&f.each(a,function(a,e){e=e.toLowerCase();(e=this._features[e])&&e.resetFeatureInfo(a,c)},this)},_getClickToCIObj:function(e){e=e.toLowerCase();this._clickToCI[e]||(this._clickToCI[e]=new a);return this._clickToCI[e]},getCriticalFeatureObj:function(){h.isEmptyObject(this.criticalFeatures)&&
(this.criticalFeatures=new b);return this.criticalFeatures},updateMetricInfo:function(a){var c=this._getClickToCIObj(this.pageType),b=this,h=this.getCriticalFeatureObj();h.getCriticalFeaturesPromise().then(function(d){h.isCriticalFeaturesKnown&&!c.getMetricInfo().allFeaturesInteractive&&c.setMetricInfo(b.getTimeToInteractivity(d,b.pageType));c.getMetricInfo().allFeaturesInteractive&&b._clickToCI[b.pageType]&&!b._clickToCI[b.pageType].isResolved()?(b._clickToCI[b.pageType].resolve(c.getMetricInfo()),
b._clickToCI[b.pageType].setResolved(!0),a&&l.logCounter("ClickToCITwisterUpdateSuccessCount"),n.now("dp-critical-features-interactive-marker").execute(function(a){a||n.register("dp-critical-features-interactive-marker",function(){return c.getMetricInfo().allFeaturesInteractive})})):a&&!c.getMetricInfo().allFeaturesInteractive&&l.logCounter("ClickToCITwisterUpdateFailureCount")})},getClickToCIPromise:function(a){if(a){if(a=a.toLowerCase(),this._clickToCI[a])return this._clickToCI[a].getPromiseObject()}else if(this._clickToCI[this.pageType])return this._clickToCI[this.pageType].getPromiseObject()},
updateCriticalFeatures:function(){this.getCriticalFeatureObj().updateCriticalInteractiveFeatures();this.updateMetricInfo()}}});n.when("A").register("dp-interactive-feature-component",function(f){function g(a){if(a instanceof g){var d={};this._renderTime=0;this._isInteractive=a._isInteractive;f.each(a._events,function(a){a.alwaysInteractive&&(d[a.name]={name:a.name,interactiveTime:a.interactiveTime,alwaysInteractive:!0})},this);this._events=d}else this._renderTime=0,this._isInteractive=!0,this._events=
{}}var a=f.$;g.prototype={updateComponentInformation:function(b){var d=!1;if(a.isPlainObject(b))switch(b.type){case "render":d=this._updateRenderInformation(b);break;case "interactive":d=this._updateInteractiveInformation(b)}return d},_updateRenderInformation:function(a){var d=!1,f=a.options||{};this._renderTime||(this._renderTime=a.timestamp,this._isInteractive=f.isInteractive===p?!0:f.isInteractive,d=!0);return d},_updateInteractiveInformation:function(a){var d;d=a.options||{};var g=d.alwaysInteractive||
!1,h=!1;this._isInteractive&&(d=d.events||["click"],f.each(d,function(e){this._events[e]||(this._events[e]={name:e,interactiveTime:a.timestamp,alwaysInteractive:g},h=!0)},this));return h},getTimeToInteractivity:function(b){var d=0,g=!1,h=[];this.isRendered()&&(this._isInteractive?(a.isArray(b)||(b=["click"]),f.each(b,function(a){var c=this._events[a];c?c.interactiveTime>d&&(d=c.interactiveTime):h.push(a)},this),h.length||(g=!0,this._renderTime>d&&(d=this._renderTime))):(g=!0,d=this._renderTime));
return{interactive:g,interactiveTime:g?d:0}},isRendered:function(){return!!this._renderTime},updateRenderTime:function(a){a&&!this.isRendered()&&(this._renderTime=a);return this._renderTime}};return g});n.when("dp-time-to-interactive").register("dp-interactive-page-refresh-handler",function(f){return{twisterStartTime:null,createInteractivityObjectForTwisterUpdate:function(){this.twisterStartTime=k.parseInt((new Date).getTime());f.updatePage("twisterUpdate")},updateCriticalFeatures:function(){f.updateCriticalFeatures()},
updateRenderTime:function(){f.updateRenderTime(this.twisterStartTime)},getClickToCIMetric:function(){return f.getClickToCIPromise("twisterUpdate")}}});n.when("dp-interactive-feature-component").register("dp-interactive-feature-component-base",function(f){function g(a,b){this.compName=a;this._pageType={};this.getComponentByPageType(b)}g.prototype={getComponentByPageType:function(a){if(a)return this._pageType[a]||(this._pageType[a]=this.getComponent(a)),this._pageType[a]},updateComponentInformation:function(a,
b){return this.getComponentByPageType(b).updateComponentInformation(a)},getTimeToInteractivity:function(a,b){return a?this.getComponentByPageType(a).getTimeToInteractivity(b):{interactive:!1,interactiveTime:0}},resetComponentInfo:function(a){a&&this._pageType[a]&&(this._pageType[a]=this.getComponent(a))},updateRenderTime:function(a,b){return this.getComponentByPageType(a).updateRenderTime(b)},getComponent:function(a){return this._pageType[a]?new f(this._pageType[a]):this._pageType.glance?new f(this._pageType.glance):
new f}};return g});n.when("3p-promise").register("dp-click-to-ci",function(f){function g(){this.reject=this.resolve=null;this.resolved=!1;var a=this;this.promiseObject=new f(function(b,d){a.resolve=b;a.reject=d});this.metricInfo={features:{},longPoleFeatureName:"",interactiveTime:0,allFeaturesInteractive:!1}}g.prototype={getMetricInfo:function(){return this.metricInfo},setMetricInfo:function(a){this.metricInfo=a},getPromiseObject:function(){return this.promiseObject},isResolved:function(){return this.resolved},
setResolved:function(a){this.resolved=a}};return g});n.when("A","dp-time-to-interactive","dp-click-to-ci-utils").register("dp-clicktoci-metric-for-glanceview",function(f,g,a){function b(){var c=g.getClickToCIPromise("GLANCE");c&&c.then(function(a){l(a.features);h(a.features);d(a)}).catch(function(c){a.logCounter("ClickToCIFailureCount")})}function d(c){a.addTag("DPCIFLongPole"+c.longPoleFeatureName);a.widgetTime("cf","clickToCI",{wb:1},c.interactiveTime);a.widgetTime("fn",p,p,c.interactiveTime);a.postCSMMetrics("ld",
"clickToCI",{wb:1});k.ue&&ue.isl&&a.postCSMMetrics("at")}function l(c){e.isPlainObject(c.atc)?(c=c.atc,a.addTag("DPCIFBuyable"),a.widgetTime("cf","dpATCTTI",{wb:1},c.interactiveTime),a.postCSMMetrics("ld","dpATCTTI",{wb:1}),c.hasComponents&&e.isArray(c.components)&&(c=c.components[0],e.isPlainObject(c)&&a.isValidNonEmptyString(c.name)&&a.addTag("DPCIFBuyable-"+c.name))):a.addTag("DPCIFNonBuyable")}function h(c){if(e.isPlainObject(c)){var b=k.performance;"object"===typeof b&&"object"===typeof b.timing&&
f.each(c,function(c,e){var h="DP"+e+"TTI";a.logCounter("DPCF"+e+"TTI",c.interactiveTime-b.timing.navigationStart);a.widgetTime("cf",h,{wb:1},c.interactiveTime);a.postCSMMetrics("ld",h,{wb:1})})}}var e=f.$;a.widgetTime("bb","dpATCTTI",{wb:1});b();n.when("atf").execute("dp-get-critical-interactive-features",function(){g.updateCriticalFeatures()});return{markClickToCI:b,publishTTIOfCriticalFeatures:h,tagBuyablibity:l,publishTimeToInteractive:d}});n.when("A").register("dp-click-to-ci-utils",function(f){return{widgetTime:function(g,
a,b,d){"function"===typeof uet&&uet(g,a,b,d)},addTag:function(g){k.ue&&k.ue.tag&&k.ue.tag(g)},logCounter:function(g,a){k.ue&&f.$.isFunction(k.ue.count)&&(a=a||(k.ue.count(g)||0)+1,k.ue.count(g,a))},isValidNonEmptyString:function(g){return"string"===typeof g&&0<g.length},postCSMMetrics:function(g,a,b){"function"===typeof uex&&uex(g,a,b)}}});n.when("A","3p-promise","dp-click-to-ci-utils").register("dp-critical-features",function(f,g,a){function b(){this._resolve;this._reject=null;var a=this;this._promiseObj=
new g(function(e,c){a._resolve=e;a._reject=c});this._features=null;this.isCriticalFeaturesKnown=!1}var d=f.$,k=[];b.prototype={getCriticalFeatures:function(){return this._features},getCriticalFeaturesPromise:function(){return this._promiseObj},setCriticalFeatures:function(a){d.isPlainObject(a)&&!d.isEmptyObject(a)&&(this._features=a,this._resolve(a),this.isCriticalFeaturesKnown=!0)},setIgnoreCriticalFeatures:function(a){k.push(a)},updateCriticalInteractiveFeatures:function(){var b={},e=d(".dp-cif");
e.length?(e.each(function(){var c=(d(this).data()||{}).featureDetails;if(d.isPlainObject(c)&&a.isValidNonEmptyString(c.name)){var e;e=k.length&&k.includes(c.name)?!1:!0;e&&(b[c.name]=c)}else a.logCounter("DPCIFInvalidData")}),this._parseCriticalFeatures(b)):a.addTag("DPCIFNoData")},_parseCriticalFeatures:function(b){var e={};d.isPlainObject(b)?(f.each(b,function(a,b){e[b]={};d.isPlainObject(a)&&(e[b]=a)}),d.isEmptyObject(e)?a.addTag("DPCIFNoData"):this.setCriticalFeatures(e)):a.addTag("DPCIFNoData")},
resetIgnoreCriticalFeatures:function(){k=[]}};return b});n.when("dp-critical-features-interactive-marker").register("dp-latency-marker",function(f){});"use strict";n.when("A","load").execute("logDpAssetInjectionMetric",function(f){var g=f.state("dp_injected_meta_assets");if("undefined"!=typeof performance&&"undefined"!=typeof performance.getEntries){for(var a=0,b=0,d=0,l=0,h=performance.getEntries(),e=0;e<h.length;e++){var c=h[e],m=c.initiatorType;c.name.match(/\.css\?AUIClients\/AmazonUI/g)&&m&&
"link"===m&&c.duration+c.startTime>a+b&&(a=c.duration,b=c.startTime);if("undefined"!=typeof g&&"undefined"!=typeof g.assetNames&&0<g.assetNames.length)for(var n=0;n<g.assetNames.length;n++)if(c.name.match(new RegExp("\\.css\\?AUIClients/"+g.assetNames[n]))&&m&&"link"===m){if(0===d||d>c.startTime)d=c.startTime;l<c.startTime&&(l=c.startTime);break}}k.ue&&f.$.isFunction(k.ue.count)&&(k.ue.count("aui.auiDuration",a),k.ue.count("aui.auiStartTime",b),0!==d&&0!==l&&(k.ue.count("dpcss.dpStartTimeMin",d),
k.ue.count("dpcss.dpStartTimeMax",l),k.ue.count("dpcss.auiDiffMin",d-b),k.ue.count("dpcss.auiDiffMax",l-b)))}});n.when("A","load").execute("dp-asset-metric-logging",function(f){function g(a){k.ue&&ue.tag&&ue.tag(a)}function a(a,b){k.ue&&ue.count&&a&&ue.count(a,b)}function b(b,e,c){0<e&&(a(b+"EncodeSize",Math.round(e/1024)),a(b+"DecodeSize",Math.round(c/1024)))}function d(a,b,c){return f.filter(a,function(a){if(a&&a.initiatorType===c&&a.name&&a.name.match(b))return!0})}function l(b,e,c,g){var k={encodedSize:0,
decodedSize:0,httpProtocol:"",count:0};f.each(e,function(e){var l=d(b,new RegExp("\\."+c+"\\?AUIClients/"+e),g)||[];k.count+=l.length;f.each(l,function(d,g){g=e+(g+1);if(d&&0<d.encodedBodySize){var f;f=d&&0===d.transferSize?!0:void 0;f?a("DP"+c+"Cached"+g,1):a("DP"+c+"NotCached"+g,1)}g=k.encodedSize;f=d&&d.encodedBodySize?d.encodedBodySize:0;k.encodedSize=g+f;g=k.decodedSize;d=d&&d.decodedBodySize?d.decodedBodySize:0;k.decodedSize=g+d;k.httpProtocol=b.nextHopProtocol||""})});return k}(function(){if(k.performance&&
performance.getEntriesByType){var b=performance.getEntriesByType("navigation")[0];b&&(0<b.encodedBodySize&&(a("DPEncodedSize",Math.round(b.encodedBodySize/1024)),a("DPDecodedSize",Math.round(b.decodedBodySize/1024))),b.nextHopProtocol&&g("DPhttpProtocol"+b.nextHopProtocol))}})();(function(){if(k.performance&&performance.getEntries){var d=performance.getEntries(),e=f.state("dp_injected_meta_assets"),c=[];e&&e.assetNames&&(c=e.assetNames||[]);var e=l(d,c,"js","script"),m=l(d,["AmazonUI","AmazonUIjQuery"],
"js","script"),c=l(d,c,"css","link"),d=l(d,["AmazonUI"],"css","link");b("DPJS",e.encodedSize,e.decodedSize);b("AUIJS",m.encodedSize,m.decodedSize);b("DPCSS",c.encodedSize,c.decodedSize);b("AUICSS",d.encodedSize,d.decodedSize);a("DPCSSResourceCount",c.count);a("DPJSResourceCount",e.count);e.httpProtocol&&g("DPJSHttpProtocal"+e.httpProtocol);c.httpProtocol&&g("DPCSSHttpProtocal"+c.httpProtocol)}})()});n.when("A","load").execute("dp-asset-connection-metric-logging",function(f){function g(a){k.ue&&ue.tag&&
ue.tag(a)}(function(){if(k.navigator&&k.navigator.connection){var a=1024*k.navigator.connection.downlink,b=k.navigator.connection.rtt,d=k.navigator.connection.effectiveType;b&&(k.ue&&ue.count&&ue.count("rtt",b),0<=b&&100>b?g("rtt:0_100"):100<=b&&200>=b&&g("rtt:100_200"));a&&(k.ue&&ue.count&&ue.count("downlink",a),0<=a&&5120>a?g("downlink:0_5"):5120<=a&&10240>=a&&g("downlink:5_10"));g("EffectiveConnectionType:"+d)}})()});n.when("A").register("get-resource-time",function(f){return{getResourceTimeByName:function(g,
a){var b=[];k.performance&&performance.getEntries&&g&&f.$.isArray(a)&&0<a.length&&(b=performance.getEntries(),b=f.filter(b,function(b){return b&&b.initiatorType===g?-1<f.indexOfArray(a,b.name):!1}));return b}}});n.when("A","dp-interactivity-metric-utils").execute("dp-non-critical-tti",function(f,g){var a=f.$;(function(){a(".a-container").click(function(a){g.calculateInteractivity(a)})})()});n.when("A").register("dp-log-critical-asset-source-details",function(f){function g(a){k.ue&&ue.tag&&ue.tag(a)}
function a(a){return a&&0<a.encodedBodySize}function b(b,c,d,g){var h=[];f.each(c,function(c){var k=new RegExp("\\."+d+"\\?AUIClients/"+c+"([^a-zA-Z]|$)");c=f.filter(b,function(b){return b&&b.initiatorType===g&&b.name&&b.name.match(k)&&a(b)?!0:!1});h=h.concat(c)});return h}function d(a){for(var b in a){var d=a[b];if(d&&0!==d.transferSize)return!1}return!0}var l=["DPMobileAppCriticalFeatureMetaAsset","DetailPageMobileWebCriticalFeatureAsset","DetailPageDesktopImageBlockMetaAsset"],h=["AmazonUI"];return{logAssetCacheSourceDetails:function(a){var c=
b(a,l,"js","script"),c=c.concat(b(a,l,"js","link"));a=b(a,h,"css","link");var f="";0<c.length&&0<a.length&&(f+="dpcriticaljs_",f=d(c)?f+"cached":f+"not_cached",f+=":auicss_",f=d(a)?f+"cached":f+"not_cached",g(f));return f},checkEncodedBodySize:a,getFilteredResources:b,isResourceCached:d,logTag:g}});n.when("dp-log-critical-asset-source-details","ready").execute("dp-log-critical-asset-source-details_execute",function(f){if(k.performance&&performance.getEntries){var g=performance.getEntries();f.logAssetCacheSourceDetails(g)}});
n.when("A","dp-click-to-ci-utils").register("dp-interactivity-metric-utils",function(f,g){var a=f.$;return{calculateInteractivity:function(b){var d=b.type,f=a(b.target),h=f.closest("div[id$\x3d'_feature_div']");g.logCounter("Total-"+d);h&&((h=a(h).data("feature-name"))?g.logCounter(h+"-"+d):g.logCounter(b.target.id+"-"+d));(b=f.closest(".a-declarative"))&&(b=a(b).data("action"))&&g.logCounter(b+"-"+d+"-dec-action")}}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,e=c._namespace||c.attributeErrors,a=e?e("DigitalDashDetailPageAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,e){b.register("DigitalDashUtils",function(){return{redirect:function(a){if(!a)throw"Must pass a target URL.";c.location.href=a}}});"use strict";b.when("A","DigitalDashCreateForm").register("DigitalDashAddListeners",function(a,b){a.declarative("digital-dash-create","click",function(a){a.$event.preventDefault();
if(a.$target.data("DigitalDashCreateForm"))var d=a.$target.data("DigitalDashCreateForm");else d=new b({el:a.data.el,href:a.data.href}),a.$target.data("DigitalDashCreateForm",d);d.submit(a.data.data);return!1});a.on("digital-dash:auto-create",function(a){(new b({el:a.el,href:a.href})).submit(a.data)})});"use strict";b.when("A","DigitalDashUtils","a-alert").register("DigitalDashCreateForm",function(a,g,c){function d(a){f.extend(this,h,a);if(!this.el)throw"Must specify an el";if(!this.href)throw"Must specify an href to post to";
this.$el=f(this.el);this.$el.find(this.errorAlertSelector).removeClass("aok-hidden").end();this.$errorAlert=c(this.$el.find(this.errorAlertSelector));this.baseErrorText=this.$errorAlert.text();this.$changeover=this.$el.find(this.changeoverSelector);this.$updatingEls=Array.prototype.slice.call(document.querySelectorAll(this.buttonSuccessClass))}var f=a.$,h={errorAlertSelector:"#digital-dash-create-error-message",ajaxFieldName:"isAjax",changeoverSelector:"#digital-dash-create-success-changeover",buttonSuccessClass:".digital-dash-create-button-success-display"};
d.prototype.submit=function(b){this.$updatingEls.forEach(function(a){a.classList.remove("success");a.classList.remove("error")});b[this.ajaxFieldName]=!0;a.ajax(this.href,{method:"POST",params:b,success:f.proxy(this.handleAjaxSuccess,this),error:f.proxy(this.handleAjaxError,this)})};d.prototype.handleAjaxSuccess=function(a){a.success||510===a.error.errorCode?(this.$changeover.show(),this.$updatingEls.forEach(function(a){a.classList.add("success")})):(a.error.errorTitle&&this.$errorAlert.heading(a.error.errorTitle),
a.error.errorMessage?this.$errorAlert.text(a.error.errorMessage):this.$errorAlert.text(this.baseErrorText),this.$updatingEls.forEach(function(a){a.classList.add("error")}))};d.prototype.handleAjaxError=function(a){if(401===a.http.status)try{return g.redirect(a.http.responseText)}catch(k){b.log("Error parsing unauth response: "+k,"ERROR","DigitalDashCreateForm")}else b.log("Create dash button call failed, could not recognize response from server.","FATAL","DigitalDashCreateForm");this.$updatingEls.forEach(function(a){a.classList.add("error")})};
return d});"use strict";b.when("A","DigitalDashAddListeners","load").execute("DigitalDashAutoAction",function(a){var b=a.state("digital-dash-auto-action");if(b)a.trigger(b.actionName,b.data);else a.on("a:state:update:digital-dash-auto-action",function(c){a.trigger(b.actionName,a.state("digital-dash-auto-action").data)})});"use strict";b.when("A","a-popover").execute("DigitalDashPopoverManager",function(a,c){var e=a.$,d=a.throttle(function(a){a.updatePosition()},500,{trailing:!1});a.on("a:popover:ajaxContentLoaded:dd-create-learn-more",
function(a){var c=a.popover;a=e(c.getContent());a.html()?a.find("img").each(function(){e(this).bind("load",function(){d(c)})}):b.log("dd-create-learn-more lazyPositionPopover popover content not ready","WARN","DigitalDashPopoverManager")})})});
/* ******** */
(function(d){var c=window.AmazonUIPageJS||window.P,a=c._namespace||c.attributeErrors,b=a?a("DetailPageOffersMulticlickAssets",""):c;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,c,a){d.when("A","preventMulticlick:forceFormSubmit","atf").execute(function(b,d){function e(b){c.ue&&c.ue.count&&c.ue.count(b,1)}var f=!1,a=function(c){var a=b.$(document);a&&a.delegate(c,"click",function(){var a=b.$(c);if(!a||"submit"!==a.prop("type"))return!0;if(f)return e("oneClickDisableOneClickButton"),
a.attr("disabled",!0),!1;e("oneClickTriggerOneClickFormSubmit");d(a);f=!0;setTimeout(function(){e("oneClickEnableOneClickButtonAfterTimeout");f=!1;a.attr("disabled",!1)},3E4);return!0})};b.on("mash:willReappear",function(){e("oneClickEnableOneClickButtonOnMashReappear");f=!1});a("#one-click-button");a("#oneClickBuyButton");a("#prime-toggle-main");e("oneClickPreventMultiClickModuleCalled")});"use strict";d.when("A","atf").register("preventMulticlick:forceFormSubmit",function(a){return function(a){}})});
/* ******** */
(function(e){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,a=p?p("DetailPageDesktopOffersAssets",""):l;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,l,p){e.when("A").register("add-to-form",function(a){return{addInputToForm:function(a,b,k,d){var c=document.createElement("input");c.id=a;c.type="hidden";c.name=k;c.value=d;b.appendChild(c)}}});"use strict";e.when("A","add-to-cart-parameter-name","add-to-cart-constants","add-to-form","afterLoad").execute("giftOptions-autoUpdate",
function(a,c,b,k){var d=a.$;d("input[type\x3d'checkbox'][id\x3d'gift-wrap']").each(function(){if(d(this).is(":checked")){var a=c.constructParameterName(b.ITEM_TYPES.BASE,0,b.PARAMETER_PATHS.GIFTOPTIONS),g=d(this).get(0).form;g&&k.addInputToForm("giftCheckBoxInput",g,a,"true")}})});"use strict";e.when("A","add-to-cart-parameter-name","add-to-cart-constants","add-to-form").execute("giftOptions-update",function(a,c,b,k){function d(){f("input[type\x3d'checkbox'][id\x3d'gift-wrap']").each(function(){f(this).change(function(){if(f(this).is(":checked")){var a=
c.constructParameterName(b.ITEM_TYPES.BASE,0,b.PARAMETER_PATHS.GIFTOPTIONS),d=f(this).get(0).form;d&&k.addInputToForm("giftCheckBoxInput",d,a,"true")}else(a=f('[id\x3d"giftCheckBoxInput"]'))&&a.remove()})})}var f=a.$;d();a.on("a:pageUpdate",function(){d()})});"use strict";e.when("A","add-to-cart-parameter-name","add-to-cart-constants","dp-get-offerDisplay-container").execute("quantity-update",function(a,c,b,k){function d(m){if(m&&m.value!==p&&m.nativeItemNode&&m.nativeItemNode.form!==p){var a=g(m.nativeItemNode.form);
a&&(a=a.find(h))&&a.val(m.value);a=k.getOfferDisplayContainerByElement(g(m.nativeItemNode));f(a,"form#addToCart",q,m.value);f(a,"form#buyNow","quantity",m.value)}}function f(a,b,c,d){0<a.length&&b&&(a=a.find(b+" input[name\x3d'"+c+"']"),0<a.length&&a.val(d))}var g=a.$,q=c.constructParameterName(b.ITEM_TYPES.BASE,0,b.PARAMETER_PATHS.QUANTITY),h='input[name\x3d"'+q+'"]';a.on("addToCartQuantityChange",d);a.on("a:dropdown:quantity:select",d)});"use strict";e.when("jQuery","a-popover","A","a-dropdown",
"moq-core","ready").register("moq",function(a,c,b,k,d){function f(n,b){0===k.getSelect(b).val().length?d.lockSubmission(n,a.noop,u):d.unlockSubmission(n,e)}function g(n){n=d.findMoqOfferContainerWithDomElement(n.nativeItemNode);if(null!==n){var a=n.find("#quantity, #rcxsubsQuan");f(n,a);d.tweakDisplayTextForMoqQuantityDropdown(a)}}function q(a){return d.findMoqOfferContainerWithDomElement(a.popover.$trigger[0]).find("#quantity, #rcxsubsQuan")}function h(){t||(b.on("a:popover:beforeShow:moqAtcPopover",
function(a){var n=q(a);0!==n.length&&(p(n),setTimeout(function(){n.addClass("highlightQuantityDropdownBorder")},20))}),b.on("a:popover:afterHide:moqAtcPopover",function(a){a=q(a);0!==a.length&&(a.removeClass("highlightQuantityDropdownBorder"),l(a))}),b.on("a:popover:beforeShow:MOQPreLoadPopOver",function(a){a=q(a);0!==a.length&&p(a)}),b.on("a:popover:afterHide:MOQPreLoadPopOver",function(a){a=q(a);0!==a.length&&l(a)}),b.on("a:dropdown:rcxsubsQuan:select",g),b.on("a:dropdown:quantity:select",g),t=
!0)}function m(a){var b=a.parent().parent("div").innerWidth()-a.prev("label").outerWidth()-5;100<b&&a.width(b)}function u(a){if(null===c.get(a)){var b=d.findMoqOfferContainerWithDomElement(a[0]).find("script#moqPopoverContent");0!==b.length&&(b=b.html(),a.addClass("cursorDisabled"),c.create(a,{name:"moqAtcPopover",position:"triggerLeft",closeButton:"false",inlineContent:b}))}}function e(a){null!==c.get(a)&&(a.removeClass("cursorDisabled"),c.remove(a))}function l(a){setTimeout(function(){r--;0<r||
(a.prop("disabled",!1),a.removeClass("quantityBarGrayOut"))},370)}function p(a){r++;0===k.getSelect(a).val().length&&(a.prop("disabled",!0),a.addClass("quantityBarGrayOut"))}function v(a){var b=a.find("#quantity, #rcxsubsQuan");0===b.length||b.hasClass("aok-hidden")||(k.getSelect(b).setValue(""),m(b),w(a),f(a,b))}function w(a){if(0!==a.length){var b=a.find("#quantity, #rcxsubsQuan");a.click(function(){setTimeout(function(){m(b)},20)})}}var t=!1,r=0;return{initializeQuantitySelect:function(){var a=
d.findMoqOfferContainers();0!==a.length&&(a.forEach(v),h())}}});"use strict";e.when("dp-click-counter").execute("dp-desktop-atc-click-counter",function(a){var c=document.getElementById("add-to-cart-button");c&&a.record(c,"dp-desktop-atc")});"use strict";e.when("A","ready").execute(function(a){function c(){for(var b=a.$(".offersConsistencyEnabled"),c=[],d=0;d<b.length;d++)"undefined"!=typeof b[d]&&null!=b[d]&&c.push(b[d].children);return c}function b(b){b.length&&(f=a.$("#buybox .a-accordion-active"),
f.length&&(g=f.index()));g=k(g)}function k(b){var c=a.$("#offerDisplayGroupTabSet #tab_heading_desktop_buybox_group_2");c.length&&0===c.index()&&(b+=1);return b}function d(){var b=a.$("#offerDisplayGroupTabSet #tab_heading_desktop_buybox_group_2");b.length&&h.length&&(b=b.index(),h[0].length&&(0===b?e=0:e=h[0].length-1))}var f,g=0,e=0,h=c();b(h);d();a.on("a:pageUpdate",function(){h=c();b(h);d()});a.on("a:accordion:buybox-accordion:select",function(b){b=a.$(b.selectedRow.$row).index();b=k(b);for(var c=
0;c<h.length;c++)h[c][g].style.display="none",h[c][b].style.display="block";g=b});a.on("a:tabs:offerDisplayGroup_tabs:select",function(b){b=a.$(b.selectedTab.$tab).index();for(var c=0;c<h.length;c++)h[c][0===e?e:g].style.display=0===b?"block":"none",h[c][0===e?g:e].style.display=0===b?"none":"block"})});e.when("A","ready").execute("quantity-selector-metrics",function(a){function c(a){l.ue&&l.ue.count(a,(ue.count(a)||0)+1)}a.on("a:dropdown:select",function(a){try{var b=a.name,d=a.value;if("quantity"===
b||"rcxsubsQuan"===b)c("desktop:quantitySelected_"+d),1<d&&c("desktop:quantitySelected:moreThanOne")}catch(f){c("desktop:quantitySelected:error")}})});"use strict";e.when("A","a-truncate","ready").execute(function(a,c){a.on("a:accordion:buybox-accordion:select",function(a){null!=document.getElementById("truncatedConditionNoteContainer")&&(c.manualTruncate("#truncatedConditionNoteContainer"),l.truncateConditionNote())});l.expandConditionNote=function(){document.getElementById("truncatedConditionNoteContainer").classList.add("aok-hidden");
var b=document.getElementById("expandedConditionNote");b.classList.remove("aok-hidden");b&&(b.setAttribute("tabindex","-1"),a.$("#expandedConditionNote").focus())};l.truncateConditionNote=function(){document.getElementById("truncatedConditionNoteContainer").classList.remove("aok-hidden");document.getElementById("expandedConditionNote").classList.add("aok-hidden");document.getElementById("truncateConditionExpanderButton").focus();var a=document.getElementById("expandedConditionNote");a&&a.removeAttribute("tabindex")}});
e.when("A").execute(function(a){a.on("a:truncate:truncatedCondition:updated",function(a){a=document.querySelector("#truncatedConditionNote .a-truncate-cut");var b=document.querySelector("#truncatedConditionNote .a-truncate-full");null!=b&&null!=a&&(b.ariaHidden=!0,a.ariaHidden=!1)})})});
/* ******** */
(function(g){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,d=h?h("DetailPageFeaturesAssets",""):e;d.guardFatal?d.guardFatal(g)(d,window):d.execute(function(){g(d,window)})})(function(g,e,h){e.P&&(g.when("A","jQuery","atf").execute(function(d,b){e.registeredDPApplicablePromotionListComponent||g.register("DPApplicablePromotionListComponent",function(){return{recordImpressions:function(){},adjustPromotionMessageWidth:function(){var a=b(".apl_popover_hover").width()+b(".apl_label").width()+
10;if(a){var c=b(".apl_popover_hover").parent().parent().width();if(c&&!(c<=a)){var d=b(".apl_popover_hover .apl_message").width();d&&(a=c-a+d,c=parseInt(b(".apl_popover_hover .apl_message").css("max-width"),10),!isNaN(c)&&c!==a&&60<=a&&b(".apl_popover_hover .apl_message").css("max-width",a+"px"))}}}}});e.registeredDPApplicablePromotionListComponent=!0}),g.when("A","ready").execute(function(d){var b=d.$("#applicable_promotion_list_sec"),a=d.$("#mediaTabsGroup #mediaAccordion");a&&a.length&&b&&b.length&&
((a=d.$("#mediaTabsGroup #newOfferAccordionRow"))&&a.length||b.addClass("a-hidden"),d.on("a:accordion:media-accordion:select",function(a){"media-newOffer-accordion"===a.selectedRow.rowName?b.removeClass("a-hidden"):b.addClass("a-hidden")}))}));"use strict";e.P&&g.when("A","ready").execute(function(d){var b=d.$;e.registeredDPApplicablePromotionListClaimCodeButtonComponent||g.register("registeredDPApplicablePromotionListClaimCodeButtonComponent",function(){return{init:function(){e.registeredDPApplicablePromotionListClaimCodeButtonPageStates||
(d.state("aplDetailPageRedemption",{redeemedCoupons:[]}),d.state("aplDetailpageStateData",{visitedAsins:[]}),e.registeredDPApplicablePromotionListClaimCodeButtonPageStates=!0)},isAplVisitedAsins:function(a){var c=d.state("aplDetailpageStateData"),f=c?c.visitedAsins:null;if(f)if(-1<b.inArray(a,f)){if(a=(a=d.state("aplDetailPageRedemption"))?a.redeemedCoupons:null)for(c=0;c<a.length;c++)f=a[c],b("#RedeemB_"+f).addClass("a-hidden"),b("#RedeemM_"+f).removeClass("a-hidden"),0!==b("#hvaCoupon .apl_badgeHvaCoupon").length&&
b("#hvaCoupon .apl_badgeHvaCoupon").addClass("apl_badgeHvaCoupon_redeemed")}else f.push(a),c.visitedAsins=f,d.state("aplDetailpageStateData",c)},bindClaimPromoEvent:function(){b(".apl_redeem").click(function(){var a=d.$(this).attr("id");b("#RedeemB_"+a).addClass("a-button-disabled");b.ajax({url:"/gp/collect-coupon/handler/redeem-coupon-detailpage.html?ref_\x3dapl_redeem_coupon",type:"POST",data:{encryptedPromotionId:a},dataType:"json",success:function(c){if(1==c.status){b("#RedeemB_"+a).addClass("a-hidden");
b("#RedeemM_"+a).removeClass("a-hidden");g.when("PromotionUpellComponent").execute(function(b){b.showRedeemedNote(a)});var f=(c=d.state("aplDetailPageRedemption"))?c.redeemedCoupons:null;if(f){for(var k=!1,l=f.length;l--;)if(f[l]===a){k=!0;break}k||(f.push(a),c.redeemedCoupons=f,d.state("aplDetailPageRedemption",c))}}else e.location.reload()},error:function(){e.location.reload()}})});b(".apl_login").click(function(){var a=b(this).attr("id"),c=encodeURIComponent(e.location.pathname);e.location.href=
"/gp/collect-coupon/handler/redeem_coupon_after_login.html?path\x3d"+c+"\x26encryptedPromotionId\x3d"+a})},showRedeemedNote:function(a){if(b("#RedeemB_"+a).length){b("#RedeemB_"+a).addClass("a-hidden");b("#RedeemM_"+a).removeClass("a-hidden");var c=d.state("aplDetailPageRedemption"),f=c?c.redeemedCoupons:null;if(f){for(var e=!1,g=f.length;g--;)if(f[g]===a){e=!0;break}e||(f.push(a),c.redeemedCoupons=f,d.state("aplDetailPageRedemption",c))}}}}});e.registeredDPApplicablePromotionListClaimCodeButtonComponent=
!0})});
/* ******** */
(function(m){var p=window.AmazonUIPageJS||window.P,u=p._namespace||p.attributeErrors,r=u?u("VasUpsellWidgetAsset",""):p;r.guardFatal?r.guardFatal(m)(r,window):r.execute(function(){m(r,window)})})(function(m,p,u){m.register("vas-widget-const",function(){return{COMMON:{DOM:{VAS_BUYBOX_SLOT:"vasBuyBox_feature_div",STS_BUYBOX_SLOT:"shipToStoreBuyBox_feature_div",ADDONS_WIDGET_SLOT:"addons_feature_div",VALUE_ADDS_SLOT:"valueAdds_feature_div",SERVICE_CAPABILITIES_SLOT:"serviceCapabilities_feature_div",
VALUE_PROP_T1_SLOT:"valuePropT1_feature_div",VALUE_PROP_PICKUP_SLOT:"valuePropPickUp_feature_div",VAS_PRODUCT_CONSULT_SLOT:"productConsult_feature_div",VALUE_PROP_BUY_BOX_SLOT:"valuePropBuybox_feature_div"},EVENT_NAME:{NO_BUYBOX:"vas:metrics:nobuybox",NO_PRODUCT:"vas:metrics:noproduct"},REFTAG_PREFIX:{NO_BUYBOX:"vas_nobb_d_ppd_",WIDGET_SUPRESSED:"vas-ppd-widget-suppressed",WIDGET_NO_PRODUCT:"vas-ppd-widget-should-suppressed"}},METRICS:{WIDGET_NAMES:{TABLET_PPD_BUNDLES:"tabbdl"},ACTION_NAMES:{GLANCE_VIEWS:"gv",
ADD_TO_CART:"atc",REDIRECTION:"redir",UPSELL_INCLUDED:"incl",UPSELL_EXCLUDED:"cncl"},TENANT_NAMES:{VAS:"vas"}}}});"use strict";m.when("A","vas-dp-instrumentation-builder","vas-postal-code-metrics-weblab").register("vas-metrics-publisher",function(d,c,a){var f=function(a,b,c){p.ueLogError&&p.ueLogError(a,{message:c,logLevel:"WARN",attribution:b})},h=function(b,e){b&&0<b.length?(e?(b=(new c.DetailPageInstrumentationBuilder(b)).setProductAsin(e.productAsin).setSelectedUpsellAsin(e.upsellAsin).setPageType(e.pageType).setSubPageType(e.subPageType).setMerchantId(e.merchantId).setSelectedUpsellPrice(e.upsellAsinPrice).setProductPrice(e.productAsinPrice).setHitType(e.hitType||
"popUp"),a.isEnabled&&(b=b.setPostalCode(e.postalCode)),"undefined"!==typeof e.additionalRequestData&&(b=b.setPromo(e.additionalRequestData.promo).setIsCritical(e.additionalRequestData.crtcl).setDeviceType(e.additionalRequestData.dt).setIsBuyBoxAvailable(e.additionalRequestData.ibba).setIsMbcClick(e.additionalRequestData.mbc).setUpsellAsins(e.additionalRequestData.services).setProductAsin(e.productAsin||e.additionalRequestData.asin)),b=b.build()):b=(new c.DetailPageInstrumentationBuilder(b)).build(),
b.publishMetrics()):p.ueLogError&&p.ueLogError({message:"null or an empty string passed as metricId"},{logLevel:"ERROR",attribution:"Trying to log widget instrumentation metrics without a metricId"})},g=function(a,b,c){var e="";a&&b&&c&&(e=a+"_"+b+"_"+c);return e},b=function(a,b,c,e){var d="";a&&b&&c&&e&&(d=a+"_"+b+"_"+c+"_"+e);return d},e=function(a,b){"undefined"!==typeof p.ue&&"undefined"!==typeof p.ue.count&&("undefined"===typeof b?p.ue.count(a,1):p.ue.count(a,b))};return{metric:function(a){"undefined"!==
typeof p.ue&&"undefined"!==p.ue.count&&p.ue.count("vas_ppd_"+a,1)},increaseMetricBy:function(a,b){"undefined"!==typeof p.ue&&"undefined"!==p.ue.count&&p.ue.count("vas_ppd_"+a,b)},logWarning:f,logCustomWarning:function(a,b,c){f({message:a},b,c)},log:function(a){p.ueLogError&&p.ueLogError(a,{logLevel:"ERROR",attribution:"ppd-bundles"})},logFatal:function(a,b,c){p.ueLogError&&p.ueLogError({message:a},{message:c,logLevel:"FATAL",attribution:b})},logException:function(a,b,c){p.ueLogError&&p.ueLogError(a,
{message:c,logLevel:"ERROR",attribution:b})},logRefTag:function(a,b,e,d,f,g,h,I,C){a?(b=(new c.DetailPageInstrumentationBuilder(a)).setProductAsin(h).setSelectedUpsellAsin(d).setPageType(b).setSubPageType(e).setMerchantId(g).setSelectedUpsellPrice(I).setProductPrice(C).setHitType(f||"popUp"),b=b.build(),b.publishMetrics(),"undefined"!==typeof p.ue&&"undefined"!==p.ue.count&&p.ue.count(a,1)):p.ueLogError&&p.ueLogError({message:"null or an empty string passed as metricId"},{logLevel:"ERROR",attribution:"Trying to log widget instrumentation metrics without a metricId"})},
logUeMetricIncreaseCount:e,getCSMName:g,getRefMarker:b,increaseCSMCounterBy:function(a,b){a&&"undefined"!==typeof p.ue&&"undefined"!==typeof p.ue.count&&p.ue.count(a,(p.ue.count(a)||0)+b)},logCSMCounter:function(a){a&&"undefined"!==typeof p.ue&&"undefined"!==typeof p.ue.count&&p.ue.count(a,(p.ue.count(a)||0)+1)},createCSMNameAndLog:function(a,b,c){a=this.getCSMName(a,b,c);this.logCSMCounter(a);return a},logHit:h,createRefMarkerAndLog:function(a,b,c,e,d){a=this.getRefMarker(a,b,c,e);this.logHit(a,
d);return a},logReftagAndCSMMetricForWidgetAction:function(a,c,d,f,v){var z=g(f,c,a);e(z);a=b(f,d,c,a);h(a,v)},hitParameterKeys:{upsellAsin:"upsellAsin",productAsin:"productAsin",pageType:"pageType",subPageType:"subPageType",upsellAsinPrice:"upsellAsinPrice",productAsinPrice:"productAsinPrice",hitType:"hitType",additionalRequestData:"additionalRequestData",merchantId:"merchantId",zipCode:"zip",postalCode:"postalCode",mappingSet:"mappingSet"},CSMActionTypes:{glanceView:"gv",addToCart:"att",buyBack:"bbk",
buyNow:"bnw",serviceIncluded:"incl",serviceNotIncluded:"cncl",expandBulletPoints:"expbp",collapseBulletPoints:"colbp",redirect:"redir",skip:"skip",escape:"escape"},RefmarkerActionTypes:{glanceView:"gv",glanceViewDisabled:"gvDis",addToCart:"att",buyBack:"bbk",buyNow:"bnw",serviceIncluded:"incl",serviceNotIncluded:"cncl",expandBulletPoints:"expbp",collapseBulletPoints:"colbp",redirect:"redir",hyperLinkClick:"click",popoverShow:"popshow"}}});"use strict";m.when("A","vas-widget-const","vas-value-prop-logger",
"vas-value-prop-constants","ready").register("vas-value-prop-controller",function(d,c,a,f){var h=d.$,g=c.COMMON.DOM.VALUE_PROP_BUY_BOX_SLOT,b=f.VALUE_PROP_T1_WIDGET_NAME,e=function(){var c,e;d.each(h("#"+g).find("[data-a-state]"),function(f,g){e=d.parseJSON(h(f).attr("data-a-state")).key;"vas-value-prop-widget-vm"===e&&(c=d.parseJSON(h(f).html()),a.logGlanceViewRefTagAndCSM(c,b))})};c=function(){e();d.off(f.POPOVER_SHOW_EVENT);d.on(f.POPOVER_SHOW_EVENT,function(c){a.logPopoverShowRefTagAndCSM(b)});
h(document.body).undelegate(f.HYPERLINK_TEXT_ID,f.CLICK_EVENT);h(document.body).delegate(f.HYPERLINK_TEXT_ID,f.CLICK_EVENT,function(){a.logHyperLinkClickRefTagAndCSM(b)})};c();return{initialize:c}});"use strict";m.when("A","vas-metrics-publisher").register("vas-value-prop-logger",function(d,c){var a=function(a){return{pageAsin:a.productAsin,services:f(a),zip:a.zipCode,additionalRequestData:{zip:a.zipCode,services:f(a)}}},f=function(a){var b=[];d.each(a.serviceOptions,function(a){b.push(a.serviceAsin)});
return b},h=function(a,b){return["vas",b,a].join("_")};return{logHyperLinkClickRefTagAndCSM:function(a){c.logHit(h(c.RefmarkerActionTypes.hyperLinkClick,a));c.logCSMCounter(h(c.RefmarkerActionTypes.hyperLinkClick,a))},logPopoverShowRefTagAndCSM:function(a){c.logHit(h(c.RefmarkerActionTypes.popoverShow,a));c.logCSMCounter(h(c.RefmarkerActionTypes.popoverShow,a))},logGlanceViewRefTagAndCSM:function(d,b){c.logHit(h(c.RefmarkerActionTypes.glanceView,b),a(d));c.logCSMCounter(h(c.RefmarkerActionTypes.glanceView,
b))}}});"use strict";m.when("ready").register("vas-value-prop-constants",function(){return{CLICK_EVENT:"click",VALUE_PROP_T1_WIDGET_NAME:"valuePropT1",HYPERLINK_TEXT_ID:"#vas-valueProp-hyperLink-text",POPOVER_SHOW_EVENT:"a:popover:afterShow:valuePropClickThrough"}});"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};m.register("vas-utilities",
function(d){return{generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var a=16*Math.random()|0;return("x"===c?a:a&3|8).toString(16)})},getPriceValue:function(c){var a=/[+-]?\d+(\.\d+)?/g;if(null!==c.match(a))return c.match(a).map(function(a){return parseFloat(a)})[0]},validateZipCode:function(c,a){return(new RegExp(a.val())).test(c)?!0:!1},flattenObject:function a(d){var h={};if(null==d)return h;Object.keys(d).forEach(function(g){var b=d[g];if("object"===
("undefined"===typeof b?"undefined":r(b))){var e="["+g+"]",k=a(b);Object.keys(k).forEach(function(a){h[e+a]=k[a]})}else h["["+g+"]"]=d[g]});return h}}});"use strict";"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","vas-mobile-config","vas-postal-code-metrics-weblab").register("vas-metric-utils",function(d,c,a,f,h){var g=f.mobileMetricConstants;return{createHitParameters:function(b){var e=c.getSetting("widgetCommonVM"),d=c.getSetting("winningWidgetVM"),f={},h={},d=d.baseAsinOfferData===
u?d:d.baseAsinOfferData;h[b.additionalRequestDataKeys.zipCode]=e.zipCode;f[a.hitParameterKeys.productAsin]=e.productAsin;f[a.hitParameterKeys.upsellAsin]=d.upsellAsin;f[a.hitParameterKeys.merchantId]=e.merchantId;f[a.hitParameterKeys.productAsinPrice]=e.buyboxPrice;f[a.hitParameterKeys.pageType]=b.hitRecordConstants.pageType;f[a.hitParameterKeys.upsellAsinPrice]=d.winningServiceMinPrice;f[a.hitParameterKeys.subPageType]=b.hitRecordConstants.subPageType;f[a.hitParameterKeys.additionalRequestData]=
h;return f},createHitParametersForVSX:function(b,c){var f={},h={},g=d.state("vas-base-vm");"undefined"!==typeof g&&"undefined"!==typeof b&&(h[c.additionalRequestDataKeys.zipCode]=g.zipCode,h[c.additionalRequestDataKeys.deviceType]="mobile",f[a.hitParameterKeys.productAsin]=g.productAsin,f[a.hitParameterKeys.upsellAsin]=b.asin,f[a.hitParameterKeys.additionalRequestData]=h);return f},createGlobalHitParameters:function(b){var e={},d=c.getSetting("widgetCommonVM");if(d){if(null===b||b===u)b={};b[a.hitParameterKeys.zipCode]=
d.zipCode;e[a.hitParameterKeys.additionalRequestData]=b;e[a.hitParameterKeys.productAsin]=d.productAsin;e[a.hitParameterKeys.merchantId]=d.merchantId;if(b=c.getSetting("winningWidgetVM"))e[a.hitParameterKeys.upsellAsin]=(b.baseAsinOfferData===u?b:b.baseAsinOfferData).upsellAsin}return e},getMobileMetricConstants:function(){c.getSetting("widgetCommonVM").isApp?(g.metricPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"aft":"aftxl",g.refmarkerPrefixes.widget="mobiletwister"===
c.getSetting("winningWidgetVM").winningWidgetName?"aft":"aftxl"):(g.metricPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"mft":"mftxl",g.refmarkerPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"mft":"mftxl");return g},createHitParametersForServiceOptions:function(b,c,f){var g={},n={};if(b!==u&&c!==u&&f!==u)return g[a.hitParameterKeys.productAsin]=c.baseAsin,g[a.hitParameterKeys.merchantId]=c.encryptedMerchantId,g[a.hitParameterKeys.productAsinPrice]=
c.displayPrice,h.isEnabled&&(g[a.hitParameterKeys.postalCode]=c.postalCode),n[f.additionalRequestDataKeys.services]=Object.keys(b),g[a.hitParameterKeys.additionalRequestData]=n,d.each(b,function(b,c){b.selectionBehaviour===u||"MANDATORY"!==b.selectionBehaviour&&"RECOMMENDED"!==b.selectionBehaviour||(g[a.hitParameterKeys.upsellAsin]=c)}),g}}});"use strict";"use strict";m.when("A","ready").register("vas-url-util",function(d){function c(a){return l.Q_STRING_REGEX.test(a)}function a(a){a=l.VAS_REGEX.exec(a);
return null===a||3>=a.length?"":a[2]}function f(a,b){return a.replace(l.VAS_REGEX,"$1vas\x3d"+encodeURIComponent(b))}function h(a){a=a.replace(l.VAS_REGEX,"");return 0<a.length&&"\x26"===a.charAt(0)?"?"+a.substring(1,a.length):a}function g(a,b,c){delete b[c];b=k(b);return f(a,b)}function b(a,b){return 0!==Object.keys(a).length&&b in a?!0:!1}function e(a){return JSON.parse(a.replace(/'/g,'"'))}function k(a){return JSON.stringify(a).replace(/"/g,"'")}var l={VAS_REGEX:/(\?|\&)vas=(.*?)(?=(&|$))/,Q_STRING_REGEX:/\?.*$/};
return{getDecodedQueryParamString:function(){return decodeURIComponent(p.location.search)},getPathName:function(){return p.location.pathname},doesAnyQueryStringExist:c,doesVasQueryParamExist:function(a){return l.VAS_REGEX.test(a)},getVasQueryParamValue:a,addOrUpdateKeyInVasQryParam:function(b,c,d){b=a(b);b=e(b);b[c]=d;return k(b)},replaceExistingVasParam:f,appendVasQueryParam:function(a,b){var e;e=c(a)?"\x26":"?";return a+e+"vas\x3d"+encodeURIComponent(b)},removeOrUpdateVasQryParamWithMarker:function(a,
c,e){if(!b(c,e))throw Error("vas: specified key "+e+" does not exist");return 1===Object.keys(c).length?h(a):g(a,c,e)},removeVasQueryParam:h,removeMarkerFromVasQueryParam:g,doesKeyExist:b,parseSingleQuotedStringAsJson:e,stringifyJsonWithSingleQuotes:k}});"use strict";m.when("A","vas-common-settings","ready").register("vas-detailpage-util",function(d,c){return{isMobbPresent:function(){var a=c.getSetting("widgetBaseVM").buyingOptionTypes;return"undefined"!==typeof a&&1<a.length?!0:!1}}});"use strict";
m.register("vas-addItems-ajax-call-constants",function(){return{headers:{ADD_ITEMS_API_HEADER_CONTENT_TYPE:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',ADD_ITEMS_API_HEADER_ACCEPT:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"'},SLATE_TOKEN_SELECTOR:'meta[name\x3d"encrypted-slate-token"]',API_PATH:"/cart/carts/retail/items",REFTAG:"vas_add_upsell",AJAX_METHOD:"POST",METRICS:{SUCCESS:"vas_addupsell_cart_success:desktop",ERROR:"vas_addupsell_cart_fail:desktop",
INCOMPLETE_ADD:"vas_addupsell_cart_incomplete_add:desktop"},FATAL_ATTRIBUTION:"VasUpsellWidgetAsset",SUCCESS_EVENT:"vas:ldbb-upsell-added:desktop"}});"use strict";m.when("A","vas-metrics-publisher","vas-utilities","vas-common-settings","vas-service-quantity-helper","vas_manage_forms").register("vas-core-buybox",function(d,c,a,f,h,g){function b(){var b=f.getSetting("widgetCommonVM"),c={};c.itemAssocId=a.generateUUID();c.addItemAssociation=b.isShipToStore||b.shouldAddItemAssociation||b.showUnifiedGuruExperience;
return c}function e(a){try{"undefined"!==typeof a.offerlistingId&&z()&&v("add",a.offerlistingId),c.increaseMetricBy("mbcFormAppend_fail",0),c.metric("mbcFormAppend_success")}catch(b){c.increaseMetricBy("mbcFormAppend_success",0),c.metric("mbcFormAppend_fail"),c.log(b)}}function k(){try{z()&&v("remove"),c.increaseMetricBy("mbcFormRemove_fail",0),c.metric("mbcFormRemove_success")}catch(a){c.increaseMetricBy("mbcFormRemove_success",0),c.metric("mbcFormRemove_fail"),c.log(a)}}function l(a){var b=n(q.BUY_BACK_FORM_ID),
c=n(q.ADD_TO_CART_FORM_ID),c=Math.max(c.find("input[name^\x3d'asin']").length+1,b.find("input[name^\x3d'asin']").length+1);if(b.length){var e=h.getServiceQuantity(f.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled);b.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"quantity.'+c+'" name\x3d"quantity.'+c+'" value\x3d"'+e+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"asin.'+c+'" name\x3d"asin.'+c+'" value\x3d"'+a.upsellAsin+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"offeringID.'+
c+'" name\x3d"offeringID.'+c+'" value\x3d"'+a.offerlistingId+'" /\x3e')}}var n=d.$,q={PRODUCT_QUANTITY_ID:"#quantity",ADD_TO_CART_FORM_ID:"#addToCart",BUY_BACK_FORM_ID:"#buyBackBuyNow",MOBB_FORM_ID:"#second_new_accordion_form",MOBB_FORM_NAME:"second_new_accordion_form"},v=function(a,b){n("#mbc .a-button").each(function(){var c=n(this);c.text();var c=c.find("a")[0],e,d,f;if(c&&c.href){var h=c.href;(f=h.match(/itemCount=([0-9]+)/i))&&f[1]&&((d=parseInt(f[1],10))&&"add"===a?e=d+1:d&&"remove"===a&&(e=
d-1));e&&(h=h.replace(/itemCount=([0-9]+)/i,"itemCount\x3d"+e),"add"===a&&b?h+="\x26offeringID."+e+"\x3d"+b:"remove"===a&&(h=h.replace(new RegExp("\x26offeringID."+d+"\x3d[^\x26]*"),"")),c.href=h)}})},z=function(){var a=f.getSetting("widgetCommonVM");return(a.populateMBCATC||a.showFakeTwisterBundles||a.showEnhancedUpsellBundle)&&!a.showUnifiedGuruExperience},t=function(a){g.removeFieldsFromBuyBoxForm("addToCart");k();g.addFieldsInBuyBoxForm("addToCart",a.data.asinOfferData,b(),!1);e(a.data.asinOfferData);
l(a.data.asinOfferData)},I={addServiceAsinBuybox:function(a){g.addFieldsInBuyBoxForm("addToCart",a,b(),!1);e(a);g.addFieldsInBuyBoxForm(q.MOBB_FORM_NAME,a,b(),!1);f.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled&&(n(document.body).undelegate(q.PRODUCT_QUANTITY_ID,"change",t),n(document.body).delegate(q.PRODUCT_QUANTITY_ID,"change",{asinOfferData:a},t))},removeServiceAsinBuybox:function(){g.removeFieldsFromBuyBoxForm("addToCart");g.removeFieldsFromBuyBoxForm(q.MOBB_FORM_NAME);k();n(document.body).undelegate(q.PRODUCT_QUANTITY_ID,
"change",t)},addServiceAsinToBuyBack:function(a){l(a)}};return{registerBuyboxEventHandlers:function(){d.off("vas:add-service-asin-buybox-event");d.on("vas:add-service-asin-buybox-event",function(a){I.addServiceAsinBuybox(a)});d.off("vas:remove-service-asin-buybox-event");d.on("vas:remove-service-asin-buybox-event",function(){I.removeServiceAsinBuybox()});d.off("vas:add-service-asin-buyback-form-event");d.on("vas:add-service-asin-buyback-form-event",function(a){g.addFieldsInBuyBoxForm("buyBackBuyNow",
a,b(),!1)})}}});"use strict";m.when("A","vas-metrics-publisher","vas-common-settings","vas-service-quantity-helper","vas-add-item-data","vas-natc","vas-item-association","vas-item-assocation-group-migration-uds","ready").register("vas_manage_forms",function(d,c,a,f,h,g,b,e){function k(a,b){var c=q("*[id\x3d"+a+"]");if("retailheavybulky"===b.mappingSet||"heavybulky"===b.mappingSet)c=c.not("#usedAccordionRow *[id\x3d"+a+"]");return c}function l(a,b,c){var e=document.createElement("input");e.type="hidden";
e.id=a;e.name=a;e.value=b;e.className=c;return e}function n(a,b){var c=g.getNatcParameters(b);Object.keys(c).forEach(function(b){a.append(l(b,c[b],"atcFormServiceAsinData"))});b.additionalParameters!==u&&b.additionalParameters.itemAssociation!==u&&"HeavyBulky"===b.additionalParameters.itemAssociation.programType&&(b=b.additionalParameters.itemAssociation,a.append(l("items[0.base][additionalParameters][itemAssociation][programType]",b.programType,"atcFormServiceAsinData")),a.append(l("items[0.base][additionalParameters][itemAssociation][associatedItemId]",
"","atcFormServiceAsinData")),a.append(l("items[0.base][additionalParameters][itemAssociation][renderType]",b.renderType,"atcFormServiceAsinData")),a.append(l("items[0.base][additionalParameters][itemAssociation][deleteConstraint][mutuallyInclusive]",!1,"atcFormServiceAsinData")))}var q=d.$,v={retailheavybulky:"RetailHeavyBulky",heavybulky:"HeavyBulky"},z="vdo_devices_display_on_website premium_ce_brands_display_on_website amazon_ereaders_display_on_website amazon_home_display_on_website amazon_shm_display_on_website amazon_smp_display_on_website amazon_tablets_display_on_website digital_devices_7_display_on_website digital_products_3_display_on_website fsn_devices_display_on_website sud_devices_display_on_website digital_accessories_3_display_on_website digital_accessories_4_display_on_website digital_accessories_5_display_on_website digital_device_acc_display_on_website".split(" ");
return{addFieldsInBuyBoxForm:function(d,g,C,m){try{var p=a.getSetting("widgetCommonVM");k(d,p).each(function(){var c=q(this),d;d=m?c.find("input[name^\x3d'offeringID']").length:c.find("input[name^\x3d'offeringID']").length+1;var k=C.itemAssocId,t=d+1,x=C.addItemAssociation,w=f.getServiceQuantity(p.multiQuantityPurchaseEnabled),r=c.find('input[name\x3d"itemCount"]');0<z.indexOf(p.productWDG)&&(d=0===r.length?1:r[0].value);if("undefined"!==typeof g.offerlistingId){c.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"quantity.'+
d+'" name\x3d"quantity.'+d+'" value\x3d"'+w+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"asin.'+d+'" name\x3d"asin.'+d+'" value\x3d"'+g.serviceAsin+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"offeringID.'+d+'" name\x3d"offeringID.'+d+'" value\x3d"'+g.offerlistingId+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"merchantID.'+d+'" name\x3d"merchantID.'+d+'" value\x3d"'+g.merchantId+'" /\x3e');var y="retailheavybulky"===
p.mappingSet||"heavybulky"===p.mappingSet;if(e.isEnabled){if(x=y?b.getItemAssociationData(g.asin):b.getItemAssociationData(g.upsellAsin))x=b.getIAGroupData(x),c.append(l("custom-name."+t+".1","itemAssociationGroup","atcFormServiceAsinData")),c.append(l("custom-value."+t+".1",JSON.stringify(x),"atcFormServiceAsinData"))}else if(!y){if(x=b.getItemAssociationData(g.upsellAsin))x=b.getIAGroupData(x),c.append(l("custom-name."+t+".1","itemAssociationGroup","atcFormServiceAsinData")),c.append(l("custom-value."+
t+".1",JSON.stringify(x),"atcFormServiceAsinData"))}else if(x){var x=c.find("input[name^\x3d'custom-name."+t+"']").length+1,y=c.find("input[name^\x3d'custom-name.1']").length+1,k='\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.'+t+"."+x+'" name\x3d"custom-name.'+t+"."+x+'" value\x3d"itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.'+t+"."+x+'" name\x3d"custom-value.'+t+"."+x+'" value\x3d"'+k+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.'+
y+'" name\x3d"custom-name.1.'+y+'" value\x3d"itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.'+y+'" name\x3d"custom-value.1.'+y+'" value\x3d"'+k+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.'+(y+1)+'" name\x3d"custom-name.1.'+(y+1)+'" value\x3d"UNIQ-itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.'+(y+1)+'" name\x3d"custom-value.1.'+(y+1)+'" value\x3d"'+
k+'" /\x3e',B;a:{B=g.asin;var F=a.getSetting("winningWidgetVM");if(F&&F.vasTwisterOptions&&F.vasTwisterOptions[B]&&(B=F.vasTwisterOptions[B].mappingSet)&&v.hasOwnProperty(B)){B=v[B];break a}B=void 0}B&&(k+='\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.'+(y+2)+'" name\x3d"custom-name.1.'+(y+2)+'" value\x3d"itemAssocType" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.'+(y+3)+'" name\x3d"custom-value.1.'+(y+2)+'" value\x3d"'+
B+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.'+t+"."+(x+1)+'" name\x3d"custom-name.'+t+"."+(x+1)+'" value\x3d"itemAssocType" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.'+t+"."+(x+1)+'" name\x3d"custom-value.'+t+"."+(x+1)+'" value\x3d"'+B+'" /\x3e');c.append(k)}0===r.length?c.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+d+'"\x3e'):r[0].value=Math.max(d,r[0].value);m||(t=g.offerlistingId,d=
g.upsellAsin,d===u&&(d=g.asin),w=(new h.AddItemData).construct(d,t,w),d=b.getItemAssociationData(d),d!==u&&(w=w.setItemAssociation(d)),n(c,w))}});c.increaseMetricBy("vas_"+d+"_FormAppend_fail",0);c.metric("vas_"+d+"_FormAppend_success")}catch(W){c.increaseMetricBy("vas_"+d+"_FormAppend_success",0),c.metric("vas_"+d+"_FormAppend_fail"),c.log(W)}},removeFieldsFromBuyBoxForm:function(b){try{q(".atcFormServiceAsinData").remove();var e=q("#"+b).find('input[name\x3d"itemCount"]');-1===z.indexOf(a.getSetting("widgetCommonVM").productWDG)&&
0!==e.length&&1<=e[0].value&&--e[0].value;c.increaseMetricBy("vas_"+b+"FormRemove_fail",0);c.metric("vas_"+b+"FormRemove_success")}catch(d){c.increaseMetricBy("vas_"+b+"FormRemove_success",0),c.metric("vas_"+b+"FormRemove_fail"),c.log(d)}},addItemDataInForm:n}});"use strict";m.when("A","vas-metrics-publisher","vas-url-util","ready").register("vas-persist-widget",function(d,c,a){return{initialize:function(){p.history&&p.history.replaceState?(d.on("vas:add-widget-state-url",function(d){try{var h;var g=
a.getDecodedQueryParamString(),b=d.preSelectedWidgetValue;if(a.doesVasQueryParamExist(g)){var e=a.addOrUpdateKeyInVasQryParam(g,"vw",b);h=a.replaceExistingVasParam(g,e)}else{d={};d.vw=b;var k=a.stringifyJsonWithSingleQuotes(d);h=a.appendVasQueryParam(g,k)}var l=a.getPathName()+h;p.history.replaceState({},document.title,l)}catch(n){c.metric("addWidgetStateInUrl_fail"),c.log(n)}}),d.on("vas:remove-widget-state-url",function(){var d=a.getDecodedQueryParamString();if(a.doesVasQueryParamExist(d))try{var h=
a.getVasQueryParamValue(d),g=a.parseSingleQuotedStringAsJson(h);if(a.doesKeyExist(g,"vw")){var b=a.removeOrUpdateVasQryParamWithMarker(d,g,"vw"),e=a.getPathName()+b;p.history.replaceState({},document.title,e)}}catch(k){c.metric("removeWidgetStateFromUrl_fail"),c.log(k)}})):c.metric("vas_unsupportedBrowser")}}});"use strict";m.when("A","vas-metrics-publisher","vas-common-settings","vas-atc-tracker","vas-atc-helper","vas-service-interstitial").register("vas-core-interstitial",function(d,c,a,f,h,g){var b=
d.$,e,k,l=!1,n,q,v=function(){var a=b("#ppdb-add-service-checkbox");if(!l){f.setHijacked();b(document.body).undelegate("#mbc .a-button","click.lsatc");f.logMetric("vas_si_atcClick");l=!0;e.isMBCClick=!1;e.atcButton=b(this);var g=e.atcButton.attr("id");if(g&&"add-to-cart-button"!==g)if("mobb.addToCart"!==g){if(e.isMBCClick=!0,(g=e.atcButton.text())&&!g.match(/cart/i))return document.body.style.cursor="default",h.safeATCClick(),!1}else e.isMOBBlick=!0;if(0<a.length&&a.is(":checked"))return a=!0===e.isUpsellCritical?
"1":"0",g="vas_bdlppd_",e.isMBCClick&&(g+="mbc_"),e.isMOBBClick&&(g+="mobb_"),c.logRefTag(g+"checked_atc_"+a+"_"+e.productAsin+"_"+e.serviceAsin),f.logMetric("vas_bdlppd_atc_click"),document.body.style.cursor="default",h.safeATCClick(),l?!0:!1;b(document.body).undelegate("#add-to-cart-button","click.lsatc");b(document.body).undelegate("#mobb\\.addToCart","click.lsatc");if(e.productAsin&&e.serviceAsin&&1===e.atcButton.length&&1===n.length){e.atcButton.bind("click.lsatc",h.lsATCHandlerSuppressATC);
if(a=b.parseJSON(b("#valueAddsInterstitial").attr("data-a-modal"))){if(a={name:a.name,header:a.header},b("#valueAddsInterstitial").attr("data-a-modal",JSON.stringify(a)).click(),d.$(".a-popover-inner").addClass("pdp-service-modal-instance"),e.showSTSServiceInterstitial&&(a=e.selectedOfferFulfillmentType,(g=b("#"+(e.showSTSServiceInterstitial?"sts-":"")+"pdp-service-siatc-modal-content"))&&g.length)){var k=g.find("."+a);k.length&&(g.find("."+e.selectedOfferFulfillmentType).addClass("vas-hidecomponent"),
k.removeClass("vas-hidecomponent"),e.selectedOfferFulfillmentType=a)}}else h.safeATCClick();return!1}document.body.style.cursor="default";h.safeATCClick();return!1}},z=function(){n=b("#addToCart");n.submit(function(){f.unsetHijacked();return!0});q=b("#second_new_accordion_form");q.submit(function(){f.unsetHijacked();return!0});e.hijackMBCATC&&(b(document).undelegate("#mbc .a-button","click.lsatc"),b(document.body).delegate("#mbc .a-button","click.lsatc",v),c.logRefTag("vas_mbc_ld_"+e.productAsin+
"_"+e.serviceAsin));b(document).undelegate("#add-to-cart-button","click.lsatc");b(document.body).delegate("#add-to-cart-button","click.lsatc",v);b(document).undelegate("#mobb\\.addToCart","click.lsatc");b(document.body).delegate("#mobb\\.addToCart","click.lsatc",v)};return{registerSIEventHandlers:function(){b(document.body).undelegate("#add-to-cart-button","click.lsatc");var d=0!==b("#abb-interstitial").length;d&&c.metric("devicesInterstitialPresentCount");if(d=!d)d="undefined"!==typeof a.getSetting("winningWidgetVM")?
a.getSetting("widgetCommonVM").hijackATC:!1;d&&(e=a.getSetting("widgetCommonVM"),e.isShipToStoreAsinSelected="in_store"===e.selectedOfferFulfillmentType,e.atcEventInProgress=!1,e.isMBCClick=!1,e.isMOBBClick=!1,k=e.isWarrantyPresent,h.setWidgetMetaData(e),f.setWidgetMetaData(e),g.setWidgetMetaData(e),e.doRedirect&&null===document.getElementById("servicesInterstitial")&&null===document.getElementById("attach-warranty-pane")&&!k&&(z(),g.registerSIEventHandlers()))}}});"use strict";m.when("vas-common-settings").register("vas-item-association",
function(d){return{getIAGroupData:function(c){return{type:c.programType,renderType:c.renderType,parentAsin:c.associatedItemId,constraintList:[{type:"DELETE",mutuallyInclusive:c.deleteConstraint.mutuallyInclusive}]}},getItemAssociationData:function(c){var a=d.getSetting("winningWidgetVM"),f=a.itemAssociationV2;f===u&&a.vasTwisterOptions&&a.vasTwisterOptions[c]&&(f=a.vasTwisterOptions[c].itemAssociationV2);return f}}});"use strict";m.when("vas-utilities").register("vas-natc",function(d){return{getNatcParameters:function(c){var a=
{asin:c.asin,offerListingId:c.offerListingId,quantity:c.quantity};c.additionalParameters!==u&&(a.additionalParameters=c.additionalParameters);var f={},h=d.flattenObject(a);Object.keys(h).forEach(function(a){f["items[0.vasItem]"+a]=h[a]});return f}}});"use strict";m.when("A","vas-add-item-data","vas-item-association","vas-metrics-publisher","vas-common-settings","vas-addItems-ajax-call-constants","ready").register("vas-addUpsell-to-cart",function(d,c,a,f,h,g){function b(){var a={"Content-Type":g.headers.ADD_ITEMS_API_HEADER_CONTENT_TYPE,
"Accept-Language":"en-US",Accept:g.headers.ADD_ITEMS_API_HEADER_ACCEPT,"x-api-csrf-token":n.csrfToken};"undefined"!==typeof document.querySelector(g.SLATE_TOKEN_SELECTOR)&&(a["x-amzn-encrypted-slate-token"]=document.querySelector(g.SLATE_TOKEN_SELECTOR).content);return a}function e(b,e,d){b=(new c.AddItemData).construct(b,e,d).setItemAssociation(a.getItemAssociationData(b));return JSON.stringify({items:[b]})}function k(){f.logUeMetricIncreaseCount(g.METRICS.SUCCESS,1);d.trigger(g.SUCCESS_EVENT)}function l(a){422===
a.status?f.logUeMetricIncreaseCount(g.METRICS.INCOMPLETE_ADD,1):(f.logUeMetricIncreaseCount(g.METRICS.ERROR,1),f.logFatal(a.responseText,g.FATAL_ATTRIBUTION,"[context:: productAsin\x3d"+q.productAsin+", zip\x3d"+q.zipCode+"] "))}var n,q;return{addUpsell:function(a,c,f){n=h.getSetting("addItemsAjaxCallVM");q=h.getSetting("widgetBaseVM");d.$.ajax({url:n.ajaxEndpoint+g.API_PATH+"?ref\x3d"+g.REFTAG,type:g.AJAX_METHOD,headers:b(),xhrFields:{withCredentials:!0},data:e(a,c,f),success:k,error:l})}}});"use strict";
m.register("vas-mobile-config",function(){return{mobileMetricConstants:{refmarkerPrefixes:{tenant:"vas"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas"}}}});"use strict";m.register("vas-common-settings",function(d){var c={};return{getSetting:function(a){return a?c[a]:c},setSetting:function(a,d,h){a&&h?c[a][h]=d:a&&(c[a]=d)},clearSettings:function(){c={}}}});"use strict";m.when("A","vas-metrics-publisher",
"vas-common-settings","vas-widget-const","ready").register("vas-common-metrics",function(d,c,a,f){d.off(f.COMMON.EVENT_NAME.NO_BUYBOX);d.on(f.COMMON.EVENT_NAME.NO_BUYBOX,function(){var d=f.COMMON.REFTAG_PREFIX.NO_BUYBOX,g=a.getSetting("widgetCommonVM").productAsin,b=a.getSetting("widgetCommonVM").zipCode;c.logRefTag(d+g+"_"+b,"LocalServicesWidget")});d.off(f.COMMON.EVENT_NAME.NO_PRODUCT);d.on(f.COMMON.EVENT_NAME.NO_PRODUCT,function(){var d=a.getSetting("widgetCommonVM").shouldSuppressWidget,g=a.getSetting("widgetCommonVM").isProductAvailable,
b;d?b=f.COMMON.REFTAG_PREFIX.WIDGET_SUPRESSED:g||(b=f.COMMON.REFTAG_PREFIX.WIDGET_NO_PRODUCT);c.logRefTag(b,"LocalServicesWidget")})});"use strict";m.when("A","vas-common-settings","vas-core-buybox","vas-core-interstitial","vas-widget-const","attach-to-ldbb","vas-persist-widget","vas-metrics-publisher","ready").register("vas-widgets",function(d,c,a,f,h,g,b,e){var k=d.$,l=function(){c.clearSettings();var a,b,g=!1;d.each(k("#"+h.COMMON.DOM.VALUE_ADDS_SLOT).find("[data-a-state]"),function(f,h){b=d.parseJSON(k(f).attr("data-a-state")).key;
"vas-common-vm"===b?(a=d.parseJSON(k(f).html()),c.setSetting("widgetCommonVM",a)):"vas-winning-widget-vm"===b?(a=d.parseJSON(k(f).html()),c.setSetting("winningWidgetVM",a),g=!0,e.logCSMCounter("vas_winningWidgetVM_"+a.winningWidgetName)):"vas-prepurchase-widget-vm"===b?(a=d.parseJSON(k(f).html()),c.setSetting("prepurchaseWidgetVM",a),g=!0):"vas-base-vm"===b&&(a=d.parseJSON(k(f).html()),c.setSetting("widgetBaseVM",a))});c.setSetting("addItemsAjaxCallVM",d.state("vas-aapi-ajax-call-data-vm"));return g},
n=function(){if(l()){a.registerBuyboxEventHandlers();f.registerSIEventHandlers();if("undefined"!==typeof c.getSetting("winningWidgetVM")){var k=c.getSetting("winningWidgetVM").winningWidgetName;d.trigger("vas:widgetname:"+k)}else d.trigger(h.COMMON.EVENT_NAME.NO_BUYBOX);d.trigger(h.COMMON.EVENT_NAME.NO_PRODUCT);"undefined"!==typeof c.getSetting("prepurchaseWidgetVM")&&(k=c.getSetting("prepurchaseWidgetVM").prepurchaseWidgetName,d.trigger("vas:widgetname:"+k));g.attachToLdbb();b.initialize();e.logCSMCounter("vas_widget_initialized")}};
d.on("a:pageUpdate",function(){n()});return{initialize:n}});"use strict";"use strict";m.when("A","vas-metrics-publisher","vas-widget-const","atf","ready").register("vas-base-data-publisher",function(d,c,a,f){var h=d.$;f=function(){var g,b;d.each(h("#"+a.COMMON.DOM.VALUE_ADDS_SLOT).find("[data-a-state]"),function(a,c){b=d.parseJSON(h(a).attr("data-a-state")).key;"vas-base-vm"===b&&(g=d.parseJSON(h(a).html()))});if(g){var e=!1,f={};if(0<h("#add-to-cart-button").length||0<h("#mbc .a-button").length)e=
!0;f[c.hitParameterKeys.productAsin]=g.productAsin;f[c.hitParameterKeys.additionalRequestData]={asin:g.productAsin,dt:"d",zip:g.zipCode,ibba:e};c.logHit("hbs_product_data",f)}};f();return{publish:f}});"use strict";m.when("A","vas-common-settings","vas-service-quantity-helper","vas-ldbb-constants").register("attach-to-ldbb",function(d,c,a,f){var h=d.$,g=function(){h(document.body).undelegate(f.ATC_BUTTON,f.EVENT_TYPE);var b=a.getServiceQuantity(c.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled,
"ldbb");d.on(f.SUCCESS_EVENT,function(){d.trigger(f.VAS_DEALS_A2C_EVENT,b)})};return{attachToLdbb:function(){c.getSetting("widgetCommonVM").attachToLdbb&&(h(document.body).undelegate(f.ATC_BUTTON,f.EVENT_TYPE),h(document.body).delegate(f.ATC_BUTTON,f.EVENT_TYPE,g))}}});"use strict";m.register("vas-ldbb-constants",function(){return{ATC_BUTTON:"#dealsx_atc_btn",SUCCESS_EVENT:"deals_claimDealSuccess",EVENT_TYPE:"click.attachServicesHandler",VAS_DEALS_A2C_EVENT:"vas:ldbb-a2c-event:desktop"}});"use strict";
m.when("A","service-options-ready").register("service-options-item-association-utils",function(){return{checkIAData:function(d){return d.itemAssociationV2&&d.itemAssociationV2.programType&&d.itemAssociationV2.renderType&&d.itemAssociationV2.associatedItemId?!0:!1},getIAData:function(d){return{parentAsin:d.itemAssociationV2.associatedItemId,type:d.itemAssociationV2.programType,renderType:d.itemAssociationV2.renderType,constraintList:[{type:"DELETE",mutuallyInclusive:d.itemAssociationV2.deleteConstraint.mutuallyInclusive}]}}}});
"use strict";r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};m.when("A","cc-manager","service-options-device-specific-constants","service-options-common-constants","service-options-cc-handler","service-options-card-toggler","service-options-ready").register("service-options-registration",function(d,c,a,f,h,g){var b={init:function(){},validateInputParams:function(a){return a&&
("undefined"===typeof a?"undefined":r(a))!==f.UNDEFINED&&a.itemType===f.ASIN&&r(a.asin)===f.STRING&&a.enableIA&&r(a.IAData)!==f.UNDEFINED&&r(a.offerListingId)===f.STRING?!0:!1},switchBuyingOption:function(b){c.ccSelectionsClear(a.FEATURE_NAME);var g=[a.FEATURE_NAME,f.SWITCH_BUYING_OPTION_EVENT].join("_");d.trigger(g,b)},cardCollapse:function(){var b=[a.FEATURE_NAME,f.COLLAPSE_CARD_EVENT].join("_");d.trigger(b)}};return{selectionUpdate:function(a,b){return c.ccSelectionUpdate(a,b)},registerFeature:function(a){c.registerFeature({featureName:a,
featureAttribution:f.FEATURE_ATTRIBUTION,isMultiSelection:1},b)},cardExpanderListener:function(a){c.cardExpanded(a)},ccSelectionsClear:function(a){c.ccSelectionsClear(a)},getRenderedFeaturesList:function(){return c.getRenderedFeaturesList().length}}});"use strict";var A=function(){return function(d,c){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d)){var a=[],f=!0,h=!1,g=u;try{for(var b=d[Symbol.iterator](),e;!(f=(e=b.next()).done)&&(a.push(e.value),!c||a.length!==c);f=!0);}catch(k){h=
!0,g=k}finally{try{if(!f&&b["return"])b["return"]()}finally{if(h)throw g;}}return a}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();m.when("A","cc-manager","service-options-setting","service-options-common-constants","service-options-device-specific-constants","service-options-item-association-utils","service-options-metric-utils","vas-mandatory-uds-price-override-weblab","price-details-bottomsheet","service-options-ready").register("service-options-item-utils",function(d,
c,a,f,h,g,b,e,k){function l(a,b){return a!==f.NULL&&a!==f.UNDEFINED&&b!==f.NULL&&b!==f.UNDEFINED?!0:!1}var n=function(a,b){a={itemType:f.ASIN,asin:b.asin,offerListingId:b.offerListingId,quantity:1,price:Number(b.offerPrice),selectionType:a,enableIA:g.checkIAData(b)};a.enableIA&&(a.IAData=g.getIAData(b));k.isEnabled&&(a.renderInBottomSheet=!0,a.priceBottomSheetDisplayString=b.priceBreakdownLabel,a.savings=Number(b.savings));return a};return{updateCartItems:function(d,e){d=d.split(f.DELIMITER);var g=
A(d,2);d=g[0];g=g[1];return l(d,g)?(g=a.getBundleV2ServiceOptionData(d,g),e=n(e,g),b.updateHitParametersForServiceOptions(d,g),c.ccSelectionUpdate(h.FEATURE_NAME,e)):!1},createItemData:n,updateCartItemsWithOverrides:function(a,d,k,l){return d!==u&&k!==u&&e.isEnabled?(k={itemType:f.ASIN,asin:d.asin,offerListingId:d.offerListingId,quantity:1,price:l.price!==u?l.price:Number(d.offerPrice),selectionType:k,enableIA:g.checkIAData(d)},k.enableIA&&(k.IAData=g.getIAData(d)),b.updateHitParametersForServiceOptions(a,
d),c.ccSelectionUpdate(h.FEATURE_NAME,k)):!1},validateBuyingOptionIndexandServiceAsin:l}});"use strict";m.when("service-options-ready").register("vas-udm-refresh-handler",{});"use strict";m.when("atf","dp-latency-marker").register("service-options-ready",function(d){});"use strict";m.when("A","vas-metrics-publisher","ready").register("vas-atc-tracker",function(d,c){d=d.$;var a=!1,f=null,h=null,g=0,b=null,e=null,k=!1,l,n=function(){return 0===g?!1:!0},q=function(a,b){"undefined"!==typeof b?c.logUeMetricIncreaseCount(a+
(l.showSTSServiceInterstitial||l.isParentServiceAsin?"_sts":""),b):c.logUeMetricIncreaseCount(a+(l.showSTSServiceInterstitial||l.isParentServiceAsin?"_sts":""))},v=function(){if(a){var b=f;null!==b&&(b=((new Date).getTime()-b)/1E3,q("vas_si_hijack_interval_time",b),300<b&&(c.logRefTag("vas_si_hijack_interval_time_5M_"+l.productAsin+"_"+l.serviceAsin),c.logFatal("Customer spending more than 5 min on SI widget","vas-si","[context::productAsin\x3d"+l.productAsin+",serviceAsin\x3d"+l.serviceAsin+",zip\x3d"+
l.zipCode+"] ")))}},z=function(){if(n()){var a=h;null!==a&&(a=((new Date).getTime()-a)/1E3,q("vas_si_dismissal_interval_time",a),30<a&&(c.logRefTag("vas_si_hijack_dismissal_time_30S_"+l.productAsin+"_"+l.serviceAsin),c.logFatal("Customer spending more than 30 sec on page after trying to dismiss SI widget","vas-si","[context::productAsin\x3d"+l.productAsin+",serviceAsin\x3d"+l.serviceAsin+",zip\x3d"+l.zipCode+"] ")))}},t=function(){if(!k&&(k=!0,a)){q("vas_si_hijack_unload");c.logRefTag("vas_si_hijack_unload"+
l.productAsin+"_"+l.serviceAsin);var b=f;if(null!==b){var d=(new Date).getTime();q("vas_si_hijack_unload_total_time",d-b);c.logFatal("Customer may be stuck on SI widget","vas-si","[context::productAsin\x3d"+l.productAsin+",serviceAsin\x3d"+l.serviceAsin+",zip\x3d"+l.zipCode+"] ")}}return!0};d(p).unbind("beforeunload");d(p).bind("beforeunload",t);d(p).unbind("unload");d(p).bind("unload",t);return{isHijacked:function(){return a},setHijacked:function(){a||(a=!0,q("vas_si_atcHijack"),c.logRefTag("vas_si_atcHijack"),
f=(new Date).getTime(),b=p.setInterval(v,6E4),e=p.setInterval(z,2E4))},unsetHijacked:function(){if(a){if(null!==f){var d=((new Date).getTime()-f)/1E3;q("vas_si_hijack_total_time",d)}a=!1;q("vas_si_atcUnHijack");c.logRefTag("vas_si_atcUnHijack");f=null;g=0;h=null;null!==b&&(p.clearInterval(b),b=null);null!==e&&(p.clearInterval(e),e=null)}},getHijackTime:function(){return f},logHijackMetricOnPageUnload:t,setHijackDismissalAttempt:function(){0===g&&(h=(new Date).getTime());g++;1<g?q("vas_si_dismissal_count",
1):q("vas_si_dismissal_count",0);2===g&&c.logFatal("SI widget is dismissed mulitple times","vas-si","[context::productAsin\x3d"+l.productAsin+",serviceAsin\x3d"+l.serviceAsin+",zip\x3d"+l.zipCode+"] ")},getDismissalTime:function(){return h},isDismissalAttempted:n,setWidgetMetaData:function(a){l=a},logMetric:q}});"use strict";m.when("A","vas-metrics-publisher","vas-atc-tracker","ready").register("vas-atc-helper",function(d,c,a){var f=d.$,h,g=function(){a.logMetric("vas_si_atcClick_returnFalse");h&&
(c.logFatal("Add to cart is clicked multiple times with vas SI","vas-si","[context::productAsin\x3d"+h.productAsin+",serviceAsin\x3d"+h.serviceAsin+",zip\x3d"+h.zipCode+"] "),c.logHit("vas_si_atcClick_returnFalse",{upsellAsin:h.serviceAsin,productAsin:h.productAsin,additionalRequestData:h.zipCode}));return!1},b=function(){a.logMetric("vas_si_forceSafeATC_click");h.isMBCClick&&h.atcButton.bind("click",function(){var a=f(this).find("a")[0];a&&a.href&&(p.location.href=a.href)});if(h.atcButton)h.atcButton.unbind("click.lsatc").click().bind("click.lsatc",
g);else{var b=f("#addToCart");b.append('\x3cinput type\x3d"hidden" id\x3d"add-to-cart-button" name\x3d"submit.add-to-cart" value\x3d"Add To Cart" /\x3e');b.submit()}},e=function(){a.logMetric("vas_si_safeATC_click");h.atcEventInProgress||b()},k=function(){var a,b,c,d;h.isMBCClick&&"undefined"!==typeof h.offerListingID&&(c=h.atcButton.find("a")[0])&&c.href&&(a=c.href,h.showSIATC&&(b=2,(d=a.match(/itemCount=([0-9]+)/i))&&d[1]&&(d=parseInt(d[1],10))&&(b=d+1),a=a.replace(/itemCount=([0-9]+)/i,"itemCount\x3d"+
b)+"\x26offeringID."+b+"\x3d"+h.offerListingID,c.href=a));return a},l=function(){var a={};a.upsellAsin=h.serviceAsin;a.offerlistingId=h.offerListingID;a.merchantId=h.merchantId;d.trigger("vas:add-service-asin-buybox-event",a)};return{addServiceToCart:function(c){var d=k();if(h.showSIATC)l(),a.logMetric("vas_siatc_service_added"),e();else{if(h.atcEventInProgress)return!1;h.atcEventInProgress=!0;a.logMetric("vas_si_addProduct");var g=function(b){document.body.style.cursor="default";a.logMetric("vas_siatc_sdp_redirect_ajaxFail",
0);if(h.productAsin&&h.serviceAsin){var d={dsc:1,productASIN:h.productAsin},e=h.zipCode;b=f(b);if(b=(b=(b=(b=(b=f(".giftableItem, .nonGiftableItem",b))&&b[0])&&b.outerHTML)&&f(b))&&b.attr("itemid"))d.itemID=b,d.newItems=b+",1",d.isHUC="true";e&&(d.area=e);d=JSON.stringify(d).replace(/"/g,"'");d="?vas\x3d"+encodeURIComponent(d)+"\x26psc\x3d1";a.unsetHijacked();p.location.href="/gp/product/"+h.serviceAsin+"/ref\x3d"+c+d;a.logMetric("vas_siatc_sdp_redirect")}else a.logMetric("vas_siatc_huc_redirect"),
a.unsetHijacked(),p.location.href="/gp/cart/view.html"},z=function(c){a.logMetric("vas_siatc_sdp_redirect_ajaxFail");document.body.style.cursor="default";b()};h.isMBCClick?f.get(d).done(g).fail(z):(d={"session-id":f("#session-id").attr("value"),ASIN:h.productAsin,offerListingID:f("#offerListingID").attr("value"),isMerchantExclusive:f("#isMerchantExclusive").attr("value"),merchantID:f("#merchantID").attr("value"),isAddon:f("#isAddon").attr("value"),nodeID:f("#nodeID").attr("value"),sellingCustomerID:f("#sellingCustomerID").attr("value"),
qid:f("#qid").attr("value"),sr:f("#sr").attr("value"),storeID:f("#storeID").attr("value"),tagActionCode:f("#tagActionCode").attr("value"),viewID:f("#viewID").attr("value"),rsid:f("#rsid").attr("value"),sourceCustomerOrgListID:f("#sourceCustomerOrgListID").attr("value"),sourceCustomerOrgListItemID:f("#sourceCustomerOrgListItemID").attr("value"),wlPopCommand:"",quantity:f("#quantity").attr("value"),"submit.add-to-cart":"Submit+Query"},f.post("/gp/product/handle-buy-box/ref\x3dvas_dphbb_"+h.productAsin+
"_"+h.serviceAsin,d).done(g).fail(z));document.body.style.cursor="progress"}return!1},lsATCHandlerSuppressATC:g,safeATCClick:e,forceSafeATCClick:b,setWidgetMetaData:function(a){h=a}}});"use strict";m.when("A","ready").register("vas-service-quantity-helper",function(d){return{getServiceQuantity:function(c,a){return 1}}});"use strict";A=function(){return function(d,c){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d)){var a=[],f=!0,h=!1,g=u;try{for(var b=d[Symbol.iterator](),e;!(f=(e=b.next()).done)&&
(a.push(e.value),!c||a.length!==c);f=!0);}catch(k){h=!0,g=k}finally{try{if(!f&&b["return"])b["return"]()}finally{if(h)throw g;}}return a}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();m.when("A","service-options-item-utils","service-options-common-constants","service-options-css-update","service-options-subheader-update","service-options-metric-utils","vas-udm-refresh-handler","vas-udm-refresh-integration-weblab","service-options-ready").register("service-options-cart-handlers",
function(d,c,a,f,h,g,b,e){var k=d.$,l=function(d,k){var l=c.updateCartItems(d,k),z=d.split(a.DELIMITER),t=A(z,2),z=t[0],t=t[1];l?(f.cssUpdate(d,a.CC_CARD,k),g.captureServiceSelectionMetrics(z,k),h.subHeaderUpdate(t,k,z),e.isEnabled&&k===a.ADD_SELECTION_TYPE&&b.refresh(t,Number(z),a.TPLUS)):g.captureCartUpdateFailure(k)};return{changeInServiceOptionCheckbox:function(b,d){var e=d?a.ADD_SELECTION_TYPE:a.DELETE_SELECTION_TYPE,k=c.updateCartItems(b,e),l=b.split(a.DELIMITER),m=A(l,2),l=m[0],m=m[1];k?(d?
f.cssUpdate(b,a.CHECK_BOX,a.ADD_SELECTION_TYPE):f.cssUpdate(b,a.CHECK_BOX,a.DELETE_SELECTION_TYPE),g.captureServiceSelectionMetrics(l,e),h.subHeaderUpdate(m,e,l)):g.captureCartUpdateFailure(e)},changeInServiceOptionCard:function(c){for(var d=c.split(a.DELIMITER),d=A(d,2)[0],g=document.getElementsByClassName(a.SELECTED_SERVICE_OPTIONS+d),z=0;z<g.length;z++){var t=g[z].id,m=k("#"+t).hasClass(a.CC_CARD_COMMON_CLASS),C=k("#"+t).hasClass(a.PRODUCT_ONLY_CC_CARD_CLASS);m&&(C?f.cssUpdate(t,a.CC_CARD,a.DELETE_SELECTION_TYPE):
l(t,a.DELETE_SELECTION_TYPE))}k("#"+c).hasClass(a.PRODUCT_ONLY_CC_CARD_CLASS)?(h.subHeaderUpdate(null,a.ADD_SELECTION_TYPE,d),e.isEnabled&&b.serviceRemovalRefresh(Number(d),a.TPLUS),f.cssUpdate(c,a.CC_CARD,a.ADD_SELECTION_TYPE)):l(c,a.ADD_SELECTION_TYPE)}}});"use strict";m.when("A","cc-manager","service-options-setting","service-options-item-utils","service-options-device-specific-constants","service-options-common-constants","service-options-subheader-update","service-options-metric-utils","vas-metrics-publisher",
"service-options-ready").register("service-options-cc-handler",function(d,c,a,f,h,g,b,e,k){var l=d.$,n=g.TPLUS+"_"+g.SERVICE_OPTIONS;return{addMandatoryServices:function(a){var c=document.getElementsByClassName(g.SELECTED_SERVICE_OPTIONS+a);b.initializeBuyingOptionToCurrentSelectionState(a);for(var d=0;d<c.length;d++){var h=c[d],m;m=h.id;m=l("#"+m).hasClass(g.PRODUCT_ONLY_CC_CARD_CLASS)?null:m.split(g.DELIMITER)[1];m&&(f.updateCartItems(h.id,g.ADD_SELECTION_TYPE)?(b.subHeaderUpdate(m,g.ADD_SELECTION_TYPE,
a),k.logCSMCounter(n+"_"+g.SERVICE_DEFAULTED),k.logCSMCounter([n,g.SERVICE_DEFAULTED,a].join("_")),e.captureServiceSelectionMetrics(a,g.ADD_SELECTION_TYPE)):e.captureCartUpdateFailure(g.ADD_SELECTION_TYPE,m))}}}});"use strict";m.when("service-options-ready").register("service-options-common-constants",function(d){return{DELIMITER:"-",UNDEFINED:"undefined",STRING:"string",NULL:"null",FEATURE_ATTRIBUTION:"Value Added Services/Discovery/Value Adds Detail Page",ASIN:"asin",ADD_SELECTION_TYPE:"add",DELETE_SELECTION_TYPE:"delete",
DELETE:"DELETE",REMOVE:"REMOVE",ADD:"ADD",AUI_EXPANDER:"a:expander:",AUI_POPOVER:"a:popover",AUI_BOTTOM_SHEET:"a:sheet:",BEFORE_SHOW:"beforeShow:",AFTER_HIDE:"afterHide:",AUI_TOGGLE_EXPAND:":toggle:expand",AUI_COLLAPSE:":toggle:collapse",AUI_CARD_EXPANDED:"a-expander-content-expanded",DATA_EXPANDED_STATE:"data-expanded",COLLAPSE_HEADING_ICON:"a-icon-section-collapse",EXPAND_HEADING_ICON:"a-icon-section-expand",AOK_HIDDEN:"aok-hidden",PAGE_REFRESH_ATF:"PageRefresh:ATF",DATA_EXPANDED_STATE_VALUE_FALSE:"false",
DATA_EXPANDED_STATE_VALUE_TRUE:"true",STYLE:"style",CARD_HIDDEN_STYLE:"overflow: hidden; display: none;",CARD_SHOWN_STYLE:"overflow: hidden;",PAGE_REFRESH_SUCCESS:"PageRefresh:Success",CLICK:"click",CHANGE:"change",SERVICE_OPTIONS_EXPANDER:"serviceOptionsExpander",SERVICE_OPTIONS_BOTTOM_SHEET:"serviceOptionsBottomSheet",SERVICE_OPTIONS_ACCORDIAN_WIDGET:"serviceOptionsAccordionWidget-",SERVICE_OPTIONS_GXA_PAGESTATE_HOLDER_ID:"serviceOptions-gxa-pageState-holder-",SERVICE_OPTION_PAGE_STATE:"serviceOptions-gxa-state-",
SERVICE_OPTION_STATE:"serviceOptions-state-",SERVICE_OPTIONS:"serviceOptions",CC_CARD_DECLARATIVE_ACTION_POST_SELECTION:"a-tp-card-declarative-post",CC_CARD_DECLARATIVE_ACTION_PRE_SELECTION:"a-tp-card-declarative-pre",CC_CARD_DECLARATIVE_ACTION:"a-tp-card-declarative",CHECK_BOX_DECLARATIVE_ACTION:"a-tp-checkbox-declarative",CC_CARD:"CC_CARD",CHECK_BOX:"CHECK_BOX",SUFFIX_FOR_OUTER_CONTAINER:"-outerContainer",POST_SELECTION:"-postSelection",PRE_SELECTION:"-preSelection",SELECTED_ICON:"-selectedIcon",
DESELECTED_ICON:"-deselectedIcon",SERVICE_OPTIONS_SUB_HEADER_PRICE:"serviceOptions-subHeaderPrice-",SERVICE_OPTIONS_SUB_HEADER_PREFIX:"serviceOptionsSubHeaderPrefix-",SERVICE_OPTIONS_SUB_HEADER_ICON:"serviceoptionsSubHeaderIcon-",SELECTED_SERVICE_OPTIONS:"preSelected-",SELECTED_CARD_CSS_CLASS_BORDER:"vas-tp-swatch-select",CC_CARD_COMMON_CLASS:"vas-serviceOptions-cc-card",CHECK_BOX_COMMON_CLASS:"vas-serviceOptions-cc-checkBox",PRODUCT_ONLY_CC_CARD_CLASS:"vas-tp-selectable",CUSTOMER_SELECTED_CLASS:"vas-tp-customer-selected",
TOP_CONTAINER_TITLE:"-topContainerTitle",HEADER_SHIMMER:"headerShimmer-",SUB_HEADER_SHIMMER:"subheaderShimmer-",NO_SERVICES_AVAILABLE:"noServiceOption-",TPLUS_POPOVER:"tpPopoverContent-",POPOVER:"popover",BOTTOM_SHEET:"bottomSheet",EMPTY_RESPONSE_ERROR_MESSAGE:"GXA Call Failure: Empty response",SERVICE_DEFAULTED:"service_defaulted",SHOW:"show",DISMISS:"dismiss",TPLUS:"tPlus",OPEN:"open",CLOSE:"close",SUB_HEADER_UPDATED_FAILURE:"subHeader_update_failure",SUB_HEADER_UPDATED_SUCCESS:"subHeader_update_success",
additionalRequestDataKeys:{services:"services"},FATAL_ATTRIBUTION:"VasUpsellWidgetAsset",GXA_RESPONSE_SUCCESS_EVENT:"GXA_RESPONSE_SUCCESS_",SWITCH_BUYING_OPTION_EVENT:"SWITCH_BUYING_OPTION",COLLAPSE_CARD_EVENT:"COLLAPSE_CARD",BUNDLE_V2:"BUNDLE_V2"}});"use strict";A=function(){return function(d,c){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d)){var a=[],f=!0,h=!1,g=u;try{for(var b=d[Symbol.iterator](),e;!(f=(e=b.next()).done)&&(a.push(e.value),!c||a.length!==c);f=!0);}catch(k){h=!0,g=
k}finally{try{if(!f&&b["return"])b["return"]()}finally{if(h)throw g;}}return a}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();m.when("A","service-options-device-specific-constants","service-options-common-constants","vas-metrics-publisher","service-options-ready").register("service-options-css-update",function(d,c,a,f){var h=d.$;return{cssUpdate:function(d,b,e){var k=d.split(a.DELIMITER),l=A(k,2),k="[context::serviceAsin\x3d"+l[1]+"] ",n=a.SELECTED_CARD_CSS_CLASS_BORDER,
q=c.SELECTED_CARD_CSS_CLASS_BACKGROUND,l=a.SELECTED_SERVICE_OPTIONS+l[0];switch(b){case a.CC_CARD:switch(e){case a.ADD_SELECTION_TYPE:h("#"+d).addClass(n+" "+q+" "+l);break;case a.DELETE_SELECTION_TYPE:h("#"+d).removeClass(n+" "+q+" "+l);break;default:f.logFatal("Invalid selectionType for CC_CARD",c.FATAL_ATTRIBUTION,k)}break;case a.CHECK_BOX:switch(e){case a.ADD_SELECTION_TYPE:h("#"+d).addClass(""+l);break;case a.DELETE_SELECTION_TYPE:h("#"+d).removeClass(""+l);break;default:f.logFatal("Invalid selectionType for CHECK_BOX",
c.FATAL_ATTRIBUTION,k)}break;default:f.logFatal("Invalid serviceOptionType for serviceOptionId",c.FATAL_ATTRIBUTION,k)}}}});"use strict";m.when("service-options-ready").register("service-options-device-specific-constants",function(d){return{FEATURE_NAME:"serviceOptionsWW",SELECTED_CARD_CSS_CLASS_BACKGROUND:"serviceOptions-buttonBG",FATAL_ATTRIBUTION:"VasUpsellWidgetAsset",SERVICE_OPTIONS_EXPANDER_HEADER_ID:"#serviceOptions-expander-header",SERVICE_OPTIONS_EXPANDER_CONTENT_ID:"#serviceOptions-expander-content"}});
"use strict";m.when("A","service-options-common-constants","service-options-setting","vas-metrics-publisher","vas-metric-utils","service-options-device-specific-constants","service-options-ready").register("service-options-metric-utils",function(d,c,a,f,h,g){function b(b){var d=a.buyingOptionToBundleV2Data[b].bundleOptionTypeData,g=a.getPageStateUsingElementId("serviceOptions-gxa-pageState-holder-",b);e[b]=h.createHitParametersForServiceOptions(d,g,c)}var e={},k=c.TPLUS+"_"+c.SERVICE_OPTIONS;return{captureServiceSelectionMetrics:function(a,
b){if(e!==u&&e[a].mappingSet!==u){var d=e[a].mappingSet;f.logHit([k,c.ASIN,b].join("_"),e[a]);f.logCSMCounter([k,d,c.ASIN,b].join("_"));f.logCSMCounter([k,c.ASIN,b].join("_"))}},updateHitParametersForServiceOptions:function(a,b){b!==u&&e!==u&&(e[a].upsellAsin=b.asin,e[a].mappingSet=b.key.mappingSet)},getHitParameters:function(){return e},captureGlanceViewMetrics:function(c){b(c);var g=a.buyingOptionToBundleV2Data[c].bundleOptionTypeData;f.logCSMCounter([k,f.CSMActionTypes.glanceView].join("_"));f.logCSMCounter([k,
f.CSMActionTypes.glanceView,c].join("_"));f.increaseCSMCounterBy(k+"_count",Object.keys(g).length);f.increaseCSMCounterBy([k,"count",c].join("_"),Object.keys(g).length);d.each(g,function(a,b){f.logCSMCounter([k,"renderStyle",a.renderStyle].join("_"));a.selectionBehaviour!==u&&f.logCSMCounter([k,"selection_behaviour",a.selectionBehaviour].join("_"))});f.logHit(k+"_"+f.RefmarkerActionTypes.glanceView,e[c])},captureGXALatency:function(a,b){a=(new Date).getTime()-a;f.logUeMetricIncreaseCount([k,"gxa_latency"].join("_"),
a);f.logUeMetricIncreaseCount([k,"gxa_latency",b].join("_"),a)},captureCartUpdateFailure:function(a,b){f.logFatal("Service Add To Cart Failure",g.FATAL_ATTRIBUTION,"Service ASIN: "+b);f.logCSMCounter([k,a,"failure"].join("_"))}}});"use strict";m.when("A","service-options-common-constants","service-options-setting","vas-metrics-publisher","service-options-ready").register("service-options-subheader-update",function(d,c,a,f){var h={};return{subHeaderUpdate:function(d,b,e){var k=h[e].selectedServicesCount,
l=h[e].currentUnifiedSelection,n=h[e].currentNonUnifiedSelection,q=a.isServiceUnified(d,e);d?b===c.ADD_SELECTION_TYPE?(q?l=d:n=d,k++):(q?l=null:n=null,k--):(l&&k--,l=null);h[e].currentUnifiedSelection=l;h[e].selectedServicesCount=k;h[e].currentNonUnifiedSelection=n;d=l;l="serviceOptions-subHeadericon-"+e;b=document.getElementById("serviceOptionsWidgetSubHeader-"+e);q=document.getElementById(l);l=a.getOriginalSubHeaderString(e);if(0===k)q.classList.add(c.AOK_HIDDEN);else{var v=d;1===k&&(v=n||d);a.checkSubHeaderUpdateStringsPresent(v,
e,2===k)&&(q.classList.remove(c.AOK_HIDDEN),l=a.getServiceSelectionMessage(v,e,1===k))}e=b.getElementsByTagName("span");if(0<e.length)for(e[0].textContent=l,f.logCSMCounter([c.TPLUS,c.SERVICE_OPTIONS,c.SUB_HEADER_UPDATED_SUCCESS].join("_")),d=1;d<e.length;d++)e[d].remove();else f.logCSMCounter([c.TPLUS,c.SERVICE_OPTIONS,c.SUB_HEADER_UPDATED_FAILURE].join("_"))},initializeBuyingOptionToCurrentSelectionState:function(a){h[a]={};h[a].selectedServicesCount=0;h[a].currentUnifiedSelection=null;h[a].currentNonUnifiedSelection=
null}}});"use strict";m.when("A","service-options-common-constants","service-options-device-specific-constants","service-options-setting","service-options-ready").register("service-options-card-toggler",function(d,c,a,f){var h=d.$;return{cardExpander:function(d){var b="#serviceOptionsOuterDiv-"+d;d=document.querySelector(b+" "+a.SERVICE_OPTIONS_EXPANDER_HEADER_ID+" .a-icon");b=document.querySelector(b+" "+a.SERVICE_OPTIONS_EXPANDER_CONTENT_ID);h(b).addClass(c.AUI_CARD_EXPANDED).attr(c.DATA_EXPANDED_STATE,
c.DATA_EXPANDED_STATE_VALUE_TRUE).attr(c.STYLE,c.CARD_SHOWN_STYLE);h(d).addClass(c.COLLAPSE_HEADING_ICON).removeClass(c.EXPAND_HEADING_ICON)},collapseCard:function(){var d="#serviceOptionsOuterDiv-"+f.getCurrentBuyingOptionIndex(),b=document.querySelector(d+" "+a.SERVICE_OPTIONS_EXPANDER_HEADER_ID+" .a-icon"),d=document.querySelector(d+" "+a.SERVICE_OPTIONS_EXPANDER_CONTENT_ID);h(d).removeClass(c.AUI_CARD_EXPANDED).attr(c.DATA_EXPANDED_STATE,c.DATA_EXPANDED_STATE_VALUE_FALSE).attr(c.STYLE,c.CARD_HIDDEN_STYLE);
h(b).removeClass(c.COLLAPSE_HEADING_ICON).addClass(c.EXPAND_HEADING_ICON)}}});"use strict";m.when("A","service-options-setting","service-options-cc-handler","service-options-registration","service-options-device-specific-constants","service-options-cart-handlers","service-options-common-constants","service-options-gxa-handler","service-options-subheader-update","vas-metrics-publisher","service-options-card-toggler","service-options-metric-utils","vas-udm-refresh-handler","vas-udm-refresh-integration-weblab",
"service-options-ready").execute("service-options-controller",function(d,c,a,f,h,g,b,e,k,l,n,q,v,m){function t(){d.off(b.AUI_EXPANDER+b.SERVICE_OPTIONS_EXPANDER+b.AUI_TOGGLE_EXPAND);d.on(b.AUI_EXPANDER+b.SERVICE_OPTIONS_EXPANDER+b.AUI_TOGGLE_EXPAND,function(){f.cardExpanderListener(h.FEATURE_NAME);l.logCSMCounter(x+"_"+b.CLICK+"_"+b.OPEN)});d.off(b.AUI_EXPANDER+b.SERVICE_OPTIONS_EXPANDER+b.AUI_COLLAPSE);d.on(b.AUI_EXPANDER+b.SERVICE_OPTIONS_EXPANDER+b.AUI_COLLAPSE,function(){l.logCSMCounter(x+"_"+
b.CLICK+"_"+b.CLOSE)});d.declarative(b.CC_CARD_DECLARATIVE_ACTION,b.CLICK,function(a){a!==b.UNDEFINED&&(a=a.$currentTarget[0],a=a===b.NULL||a===b.UNDEFINED?b.UNDEFINED:a.children[0],a=a===b.NULL||a===b.UNDEFINED?b.UNDEFINED:a.id,E("#"+a).hasClass(b.SELECTED_CARD_CSS_CLASS_BORDER)||g.changeInServiceOptionCard(a))});d.declarative(b.CHECK_BOX_DECLARATIVE_ACTION,b.CHANGE,function(a){if(a!==b.UNDEFINED){var c=a.$currentTarget[0];a=a.$target["0"];c=c===b.NULL||c===b.UNDEFINED?b.UNDEFINED:c.children[0];
(c=c===b.NULL||c===b.UNDEFINED?b.UNDEFINED:c.id)&&a&&g.changeInServiceOptionCheckbox(c,a.checked)}})}function I(a){E("#"+b.HEADER_SHIMMER+a).addClass(b.AOK_HIDDEN);E("#"+b.SUB_HEADER_SHIMMER+a).addClass(b.AOK_HIDDEN)}function C(a){var d=c.getPageStateUsingElementId("serviceOptions-gxa-pageState-holder-",a);a=E("#"+(b.HEADER_SHIMMER+a)).hasClass(b.AOK_HIDDEN);return d&&!a}function p(){c.fetchBuyingOptionIndicesList().forEach(function(a){J||(f.registerFeature(h.FEATURE_NAME),l.logCSMCounter([b.TPLUS,
h.FEATURE_NAME,w.REGISTERED].join("_")),J=!0);if(C(a)){var g=(new Date).getTime();e.fetchServiceOptionsContent(a).then(function(e){q.captureGXALatency(g,a);E("#"+b.SERVICE_OPTIONS_ACCORDIAN_WIDGET+a).append(e);I(a);var f=c.getPageStateUsingElementId(b.SERVICE_OPTIONS_GXA_PAGESTATE_HOLDER_ID,a);d.trigger(b.GXA_RESPONSE_SUCCESS_EVENT+f.userExperienceType,{pageState:f,response:e})}).catch(function(){E("#"+b.NO_SERVICES_AVAILABLE+a).removeClass(b.AOK_HIDDEN);l.logCSMCounter([x,w.NO_SERVICES,w.GV].join("_"));
I(a)})}})}function u(b){var d=c.getCurrentBuyingOptionIndex();b===d&&a.addMandatoryServices(d)}function r(){p();m.isEnabled&&v.register(c.fetchBuyingOptionIndicesList(),x)}var E=d.$,A=!1,J=!1,x=b.TPLUS+"_"+b.SERVICE_OPTIONS,w={REGISTERED:"registered",NO_SERVICES:"no_services",GV:"gv",GXA_SUCCESS_HANDLER_EXCEPTION:"gxa_success_handler_exception"},H=[h.FEATURE_NAME,b.SWITCH_BUYING_OPTION_EVENT].join("_"),y=[h.FEATURE_NAME,b.COLLAPSE_CARD_EVENT].join("_");r();d.on(b.PAGE_REFRESH_SUCCESS,function(){r()});
d.on(b.GXA_RESPONSE_SUCCESS_EVENT+b.BUNDLE_V2,function(a){try{var e=a.pageState;c.setBuyingOptionToBundleV2Data(e.buyingOptionIndex);q.captureGlanceViewMetrics(e.buyingOptionIndex);k.initializeBuyingOptionToCurrentSelectionState(e.buyingOptionIndex);u(e.buyingOptionIndex);A||(t(),A=!0);d.off(b.AUI_POPOVER+":"+b.SHOW+":"+b.TPLUS_POPOVER+e.buyingOptionIndex);d.on(b.AUI_POPOVER+":"+b.SHOW+":"+b.TPLUS_POPOVER+e.buyingOptionIndex,function(){l.logCSMCounter(x+"_"+b.POPOVER+"_"+b.SHOW)});d.off(b.AUI_POPOVER+
":"+b.DISMISS+":"+b.TPLUS_POPOVER+e.buyingOptionIndex);d.on(b.AUI_POPOVER+":"+b.DISMISS+":"+b.TPLUS_POPOVER+e.buyingOptionIndex,function(){l.logCSMCounter(x+"_"+b.POPOVER+"_"+b.DISMISS)});d.off(b.AUI_BOTTOM_SHEET+b.BEFORE_SHOW+b.SERVICE_OPTIONS_BOTTOM_SHEET+"-"+e.buyingOptionIndex);d.on(b.AUI_BOTTOM_SHEET+b.BEFORE_SHOW+b.SERVICE_OPTIONS_BOTTOM_SHEET+"-"+e.buyingOptionIndex,function(){l.logCSMCounter(x+"_"+b.BOTTOM_SHEET+"_"+b.SHOW)});d.off(b.AUI_BOTTOM_SHEET+b.AFTER_HIDE+b.SERVICE_OPTIONS_BOTTOM_SHEET+
"-"+e.buyingOptionIndex);d.on(b.AUI_BOTTOM_SHEET+b.AFTER_HIDE+b.SERVICE_OPTIONS_BOTTOM_SHEET+"-"+e.buyingOptionIndex,function(){l.logCSMCounter(x+"_"+b.BOTTOM_SHEET+"_"+b.DISMISS)});1===f.getRenderedFeaturesList()&&n.cardExpander(e.buyingOptionIndex)}catch(g){l.logException(g,"service-options-bundle-v2-handler","Error in GXA_RESPONSE_SUCCESS_BUNDLE_V2 event handler for buyingOptionIndex: "+(a&&a.pageState?a.pageState.buyingOptionIndex:"undefined")+", response: "+JSON.stringify(a?a.response:null)+
", pageState: "+JSON.stringify(a?a.pageState:null)),l.logCSMCounter([x,w.GXA_SUCCESS_HANDLER_EXCEPTION].join("_"))}});d.on(H,function(e){var f=c.getUserExperienceType(e);b.BUNDLE_V2===f?a.addMandatoryServices(e):(f=[H,f].join("_"),d.trigger(f,e))});d.on(y,function(){var a=c.getCurrentBuyingOptionIndex(),a=c.getUserExperienceType(a);b.BUNDLE_V2===a?n.collapseCard():(a=[y,a].join("_"),d.trigger(a))})});"use strict";m.when("A","service-options-common-constants","service-options-setting","vas-metrics-publisher",
"3p-promise","service-options-ready").register("service-options-gxa-handler",function(d,c,a,f,h){function g(a){var c=JSON.stringify(a),d={experienceId:"valueAddsGxa",showFeatures:"valueAddsGxa",userExperienceType:a.userExperienceType,vasProductData:c,asin:a.baseAsin,sr:a.requestId,language:a.language,buyingOptionIndex:a.buyingOptionIndex,psc:1};return"/gp/product/ajax?"+Object.keys(d).map(function(a){return a+"\x3d"+d[a]}).join("\x26")}return{fetchServiceOptionsContent:function(b){var e=a.getPageStateUsingElementId(c.SERVICE_OPTIONS_GXA_PAGESTATE_HOLDER_ID,
b),k=[c.SERVICE_OPTIONS,"gxa",e.userExperienceType].join("_"),l=g(e);return new h(function(a,e){d.get(l,{timeout:"10000",success:function(d){0===d.trim().length?(f.logCSMCounter([k,"success_noService"].join("_")),f.logCSMCounter([k,"success_noService",b].join("_")),e(Error(c.EMPTY_RESPONSE_ERROR_MESSAGE))):(f.logCSMCounter(k+"_success"),f.logCSMCounter([k,"success",b].join("_")),a(d))},error:function(a){f.logCSMCounter(k+"_failure");f.logCSMCounter([k,"failure",b].join("_"));var d="Status: "+(a.status||
"unknown")+", StatusText: "+(a.statusText||"unknown")+", Endpoint: "+l;a.responseText&&(d+=", Response: "+a.responseText);f.logFatal("Service Options GXA Call failed for BuyingOptionIndex "+b,c.FATAL_ATTRIBUTION,d);e(a)}})})}}});"use strict";m.when("A","service-options-common-constants","service-options-ready").register("service-options-setting",function(d,c){function a(a,b){return h.parseJSON(h("#"+(""+a+b)+" script").html())}function f(a,c){return b[a].bundleOptionTypeData[c]}var h=d.$,g=document.getElementsByClassName("serviceOptionsGXAPageState"),
b={};return{getBundleV2ServiceOptionData:f,fetchBuyingOptionIndicesList:function(){for(var a=[],b=0;b<g.length;b++){var f=g[b].querySelector("script"),f=d.parseJSON(h(f).html()).buyingOptionIndex;f!==c.UNDEFINED&&a.push(f)}return a},setBuyingOptionToBundleV2Data:function(c){b[c]=a("serviceOptions-pageState-holder-",c);var d="serviceOptionsWidgetSubHeader-"+c;document.getElementById(d).getElementsByTagName("span").length&&(b[c].originalSubHeaderString=h("#"+d+" span").text())},getCurrentBuyingOptionIndex:function(){var a=
0,b=d.$("#buybox .a-accordion-active");b.length&&(a=b.index());return a},getServiceSelectionMessage:function(a,b,c){a=f(b,a);return c?a.singleServiceSelectionMessage:a.twoServiceSelectionMessage},getPageStateUsingElementId:a,checkSubHeaderUpdateStringsPresent:function(a,b,c){a=f(b,a);return c?a&&"twoServiceSelectionMessage"in a:a&&"singleServiceSelectionMessage"in a},isServiceUnified:function(a,b){return a?f(b,a).key.unified:!1},getOriginalSubHeaderString:function(a){return b[a].originalSubHeaderString},
buyingOptionToBundleV2Data:b,getUserExperienceType:function(b){return(b=a(c.SERVICE_OPTIONS_GXA_PAGESTATE_HOLDER_ID,b))?b.userExperienceType:u},isUdmRefreshEnabled:function(a){a=h("script[data-a-state*\x3dserviceOptions-gxa-state-"+a+"]");a=0===a.length?null:d.parseJSON(a[0].innerHTML);return null!=a?a.isUdmRefreshEnabled:!1}}});"use strict";m.register("vas-si-config",function(){return{siMetricConstants:{hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",
isMBC:"mbc"},bsi_prefixes:{refmarkerPrefixes:{tenant:"vas",widget:"dbsi"},metricPrefixes:{tenant:"vas",widget:"dbsi"}},rsi_prefixes:{refmarkerPrefixes:{tenant:"vas",widget:"drsi"},metricPrefixes:{tenant:"vas",widget:"drsi"}}}}});"use strict";m.when("A","vas-metrics-publisher","vas-utilities","ready").register("vas-zipcode-helper",function(d,c,a){var f=d.$,h,g,b,e,k,l,n,q,v,m,t,p,C,u,r,A,E,R,J,x,w,H,y,B,F=function(a,b){"undefined"!==typeof b?c.logUeMetricIncreaseCount(a+(w.showSTSServiceInterstitial||
w.isParentServiceAsin?"_sts":""),b):c.logUeMetricIncreaseCount(a+(w.showSTSServiceInterstitial||w.isParentServiceAsin?"_sts":""))},N=function(){k.hide();E.hide();A.hide();p.addClass("a-button-disabled").prop("disabled",!0)},S=function(){N();q.hide();l.hide();v.show()};d.on("a:popover:show:VAS-SI-Zip-Update",function(a){B=a.popover});return{vasSIZipCodeUpdate:function(D,L){var M=D.bsi_prefixes.refmarkerPrefixes,T=D.additionalRequestDataKeys,K=D.bsi_prefixes.metricPrefixes;c.createCSMNameAndLog(K.tenant,
K.widget,"updateZip");D=r.val();if(a.validateZipCode(D,R)){y=r.val();var O=w.zipCode,U="vas_sx_zc_"+O+"_"+y,P="undefined"!==typeof w.childServiceAsins?w.childServiceAsins:[w.serviceAsin];c.logRefTag(U);if(y===H)return!1;d.ajax("/gp/ls/vas-ajax-handlers/vas-zipcode-refresh.html",{method:"get",params:{asinlist:P.join(","),vasZipcode:y,clientName:"vasBuyableSiZipRefresh",includeMerchantAddress:w.showSTSServiceInterstitial},success:function(a){var r,G,D=!(f.isEmptyObject(a)||"1"===a.hasError);if(D)for(var Q=
0;Q<P.length;Q++)if(G=P[Q],a[G]&&!r||!r.merchantId||w.showSTSServiceInterstitial&&"in_store"===a[G].fulfillmentType)r=a[G],w.serviceAsin=G;G=f(".vas-siatc-zip");G.length&&G.text(y);if(!D||d.objectIsEmpty(a)||1===a.hasError||d.objectIsEmpty(a[w.serviceAsin])||1===a[w.serviceAsin].hasError)return S(),c.logRefTag("vas_sx_zaf_"+O+"_"+y),F("vas-si-atc-zip-ajaxFail"),c.createCSMNameAndLog(K.tenant,K.widget,"updateZipFail"),!1;d.objectIsEmpty(r.offerListingId)?(L.additionalRequestData[T.zipCode]=y,c.createRefMarkerAndLog(M.tenant,
w.mappingSet,M.widget,"zprfrsh0",L),N(),l.hide(),v.hide(),n.length&&n.text(y),q.show(),w.showSTSServiceInterstitial&&J.hide(),c.logRefTag("vas_sx_zfl_"+O+"_"+y),F("vas-si-atc-zipchange-nooffer")):(L.additionalRequestData[T.zipCode]=y,c.createRefMarkerAndLog(M.tenant,w.mappingSet,M.widget,"zprfrsh1",L),B&&B.hide(),a=r,w.offerListingID=a.offerListingId,w.isCBM=a.isCBM,w.merchantId=a.merchantId,w.isShipToStoreAsinSelected="in_store"===a.fulfillmentType,w.shouldAddItemAssociation=w.isShipToStoreAsinSelected,
a=r.isCBM,e.html(r.positiveRatingHtml),m.text(r.merchantName).prop("href",r.sellerReviewLink),h.html(r.price).className+="a-color-price",b.html(r.price).className+="a-color-price",a?(E.hide(),A.show(),C.hide(),u.show()):(A.hide(),E.show(),u.hide(),C.show()),d.objectIsEmpty(r.nextOfferPrice)||a?k.hide():(t.html(r.nextOfferPrice).className+="a-color-price",k.show()),q.hide(),l.hide(),p.removeClass("a-button-disabled").prop("disabled",!1),c.logRefTag(U),F("vas-si-atc-zipchange-offeravailable"),r.fulfillmentType&&
(a=r.fulfillmentType,g&&g.length&&(D=g.find("."+a),D.length&&(g.find("."+w.selectedOfferFulfillmentType).addClass("vas-hidecomponent"),D.removeClass("vas-hidecomponent"),w.selectedOfferFulfillmentType=a))),w.showSTSServiceInterstitial&&(J.show(),d.objectIsEmpty(r.merchantAddress)?x.hide():(x.text(r.merchantAddress.AddressLine1+", "+r.merchantAddress.City+", "+r.merchantAddress.StateOrRegion+" "+r.merchantAddress.PostalCode),x.show())));H=y},error:function(){H=y;S();c.createCSMNameAndLog(K.tenant,
K.widget,"updateZipFail");F("vas-si-atc-zip-ajaxFail");B&&B.hide()}})}else H=D,N(),v.hide(),q.hide(),l.show();return!1},setZipCodeValuesFromDOM:function(){h=f("#vas-siatc-bestoffer-obm");b=f("#vas-siatc-bestoffer-cbm");e=f("#vas-siatc-ratingandreview");k=f("#vas-si-atc-remainingoffers");l=f("#vas-siatc-invalidzip-message");n=f("#vas-siatc-nooffer-zip");q=f("#vas-siatc-offerunavailable-message");v=f("#vas-siatc-zip-ajaxfail-message");m=f("#vas-siatc-merchantname");t=f("#vas-si-atc-remainingoffer-price");
p=f("#btnVasModalContinue");C=f("#vas-siatc-howitworks-obm");u=f("#vas-siatc-howitworks-cbm");A=f("#vas-siatc-cbm-gridrow");E=f("#vas-siatc-obm-gridrow");r=f("#vas-siatc-zip-input");R=f("#vas-zipCodeValidationRegexString");w.showSTSServiceInterstitial&&(g=f("#sts-pdp-service-siatc-modal-content"),f("#vas-sts-zip-update-modal"),g&&g.length&&(J=g.find(".vas-si-merchant"),x=g.find(".vas-si-merchant-address")))},setWidgetMetaData:function(a){w=a;H=w.zipCode}}});"use strict";m.when("A","vas-common-settings",
"vas-atc-helper","vas-zipcode-helper","vas-atc-tracker","vas-metrics-publisher","vas-si-config","ready").register("vas-service-interstitial",function(d,c,a,f,h,g,b){var e=d.$,k,l,n=b.siMetricConstants.hitRecordConstants,q,v,m=b.siMetricConstants.additionalRequestDataKeys,t={addProductAndOpenSDPInNewTab:function(b,c){g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,g.RefmarkerActionTypes.redirect,k.hitParameters);g.createCSMNameAndLog(v.tenant,v.widget,g.CSMActionTypes.redirect);h.setHijackDismissalAttempt();
h.logMetric(b);p.open("/dp/"+k.serviceAsin+"/ref\x3d"+c,"_blank");a.safeATCClick();return!1},triggerMetricsForPopoverShow:function(){h.logMetric("vas_si_show");var a=l+"show_"+k.serviceAsin;k.showSIATC?(h.logMetric("vas_buyable_si_show"),a=l+k.zipCode+"_"+k.merchantId):h.logMetric("vas_normal_si_show");g.createCSMNameAndLog(v.tenant,v.widget,g.CSMActionTypes.glanceView);g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,g.RefmarkerActionTypes.glanceView,k.hitParameters);g.logRefTag(a);p.ue&&ue.trigger&&
c.getSetting("widgetCommonVM").siRatingWeblabTreatment&&ue.trigger("DP_VAS_SI_RATING_235428",c.getSetting("widgetCommonVM").siRatingWeblabTreatment)},triggerMetricsForPopoverhide:function(){h.setHijackDismissalAttempt();h.logMetric("vas_si_hide_click");g.createCSMNameAndLog(v.tenant,v.widget,g.CSMActionTypes.escape);var b=l+"x1_"+k.productAsin+"_"+k.serviceAsin;k.showSIATC&&(b=l+"no_"+k.productAsin+"_"+k.serviceAsin);g.logRefTag(b);g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,g.RefmarkerActionTypes.serviceNotIncluded,
k.hitParameters);a.safeATCClick();return!1}};return{registerSIEventHandlers:function(){l="vas_si_";k.showSIATC&&(l="vas_sx_");k.isMBCClick&&(l+="mbc_");if(k.showSIATC){var c=e("#vas-siatc-zip-input");f.setZipCodeValuesFromDOM();c.keyup(function(a){13===a.keyCode&&e("#vas-siatc-zip-update").click()});e(document).undelegate("#vas-siatc-zip-update","click.vas-siatc-zip-refresh");e(document).delegate("#vas-siatc-zip-update","click.vas-siatc-zip-refresh",function(a){f.vasSIZipCodeUpdate(b.siMetricConstants,
k.hitParameters)});e(document).undelegate("#vas-si-moredetails","click.sdpredir");e(document).delegate("#vas-si-moredetails","click.sdpredir",function(a){t.addProductAndOpenSDPInNewTab("vas_siatc_see_more_details",l+"sm_"+k.productAsin+"_"+k.serviceAsin)})}e(document).undelegate("#btnVasModalSkip","click");e(document).delegate("#btnVasModalSkip","click",function(b){h.setHijackDismissalAttempt();h.logMetric("vas_si_skip_click");g.createCSMNameAndLog(v.tenant,v.widget,g.CSMActionTypes.skip);b=l+"x2_"+
k.productAsin+"_"+k.serviceAsin;k.showSIATC&&(b=l+"no_"+k.productAsin+"_"+k.serviceAsin);g.logRefTag(b);g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,g.RefmarkerActionTypes.serviceNotIncluded,k.hitParameters);a.safeATCClick();return!1});e(document).undelegate("#btnVasModalContinue","click.pdpVasNext");e(document).delegate("#btnVasModalContinue","click.pdpVasNext",function(b){h.setHijackDismissalAttempt();h.logMetric("vas_si_yes_click");b=l+"y1_"+k.productAsin+"_"+k.serviceAsin;var c,d;k.showSIATC?
(b=l+"atc_"+k.productAsin+"_"+k.serviceAsin,c=g.CSMActionTypes.addToCart,d=g.RefmarkerActionTypes.addToCart):(c=g.CSMActionTypes.redirect,d=g.RefmarkerActionTypes.redirect);g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,d,k.hitParameters);g.createCSMNameAndLog(v.tenant,v.widget,c);a.addServiceToCart(b);return!1});d.off("a:popover:hide:vasServiceInterstitial");d.on("a:popover:hide:vasServiceInterstitial",function(a){t.triggerMetricsForPopoverhide()});d.off("a:popover:afterShow:vasServiceInterstitial");
d.on("a:popover:afterShow:vasServiceInterstitial",function(a){t.triggerMetricsForPopoverShow()});d.off("a:popover:hide:valueAddsInterstitial");d.on("a:popover:hide:valueAddsInterstitial",function(a){t.triggerMetricsForPopoverhide()});d.off("a:popover:afterShow:valueAddsInterstitial");d.on("a:popover:afterShow:valueAddsInterstitial",function(a){t.triggerMetricsForPopoverShow()});e("#buyableSIAsinRatingLink").unbind("click");e("#buyableSIAsinRatingLink").bind("click",function(){h.logMetric("vas_sx_sdp_rating_redirect");
g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,g.RefmarkerActionTypes.redirect,k.hitParameters);g.createCSMNameAndLog(v.tenant,v.widget,g.CSMActionTypes.redirect)});e("#siAsinRatingLink").unbind("click");e("#siAsinRatingLink").bind("click",function(){h.logMetric("vas_si_sdp_rating_redirect");g.createRefMarkerAndLog(q.tenant,k.mappingSet,q.widget,g.RefmarkerActionTypes.redirect,k.hitParameters);g.createCSMNameAndLog(v.tenant,v.widget,g.CSMActionTypes.redirect)})},setWidgetMetaData:function(a){k=
a;f.setWidgetMetaData(a);k.showSIATC?(q=b.siMetricConstants.bsi_prefixes.refmarkerPrefixes,v=b.siMetricConstants.bsi_prefixes.metricPrefixes):(q=b.siMetricConstants.rsi_prefixes.refmarkerPrefixes,v=b.siMetricConstants.rsi_prefixes.metricPrefixes);q.tenant=k.showSTSServiceInterstitial||k.isParentServiceAsin?"sts":"vas";v.tenant=k.showSTSServiceInterstitial||k.isParentServiceAsin?"sts":"vas";a=k;var c={},d={};d[m.zipCode]=k.zipCode;d[m.isMBC]=k.isMBCClick?1:0;c[g.hitParameterKeys.upsellAsin]=k.serviceAsin;
c[g.hitParameterKeys.productAsin]=k.productAsin;c[g.hitParameterKeys.merchantId]=k.merchantId;c[g.hitParameterKeys.pageType]=n.pageType;c[g.hitParameterKeys.subPageType]=n.subPageType;c[g.hitParameterKeys.additionalRequestData]=d;a.hitParameters=c}}});"use strict";m.register("vas-twister-config",function(){return{vasTwisterMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"dft"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isPromo:"promo",
isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"dft"}}}});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","vas-twister-config","vas-metric-utils","ready").register("vas-twister-setting",function(d,c,a,f,h){var g=d.$,b={baseAsinMetaData:{},isUpsellCritical:"",hasPrecheckEnabled:""},e=f.vasTwisterMetricConstants.refmarkerPrefixes,k=f.vasTwisterMetricConstants.additionalRequestDataKeys,l=f.vasTwisterMetricConstants.metricPrefixes;return{getSettings:function(a){return"undefined"!==
typeof a?b[a]:b},fetchTwisterSetting:function(){var n=g("#ppdb-add-service-checkbox");n.is(":checked")&&n.prop("checked",!1);var n=c.getSetting("winningWidgetVM"),q=n.winningServicePriceWithPromotionApplied;b.baseAsinMetaData.upsellAsin=n.upsellAsin;b.upsellAsin=n.serviceAsinToOffer;b.baseAsinMetaData.offerlistingId=n.offerListingID;b.baseAsinMetaData.merchantId=n.merchantId;b.baseAsinMetaData.price=n.winningServiceMinPrice;b.isUpsellCritical=n.isUpsellCritical;b.hasPrecheckEnabled=n.hasPrecheckEnabled;
b.dynamicStringChangeOnTwisterSelection=n.dynamicStringChangeOnTwisterSelection;b.promotionMessagingWeblab="undefined"!==typeof n.promotionMessagingWeblab?n.promotionMessagingWeblab:!1;b.isPromoPriceDisplayed=!d.objectIsEmpty(g.trim(q));b.productAsin=c.getSetting("widgetCommonVM").productAsin;b.zipCode=c.getSetting("widgetCommonVM").zipCode;b.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;b.mappingSet=c.getSetting("widgetCommonVM").mappingSet;b.sessionId=c.getSetting("widgetCommonVM").sessionId;
b.vasTwisterMetricConstants=f.vasTwisterMetricConstants;b.hitParameters=h.createHitParameters(b.vasTwisterMetricConstants);n=b.hitParameters[a.hitParameterKeys.additionalRequestData];n[k.isPromo]=b.isPromoPriceDisplayed;n[k.isCritical]=b.isUpsellCritical;b.hitParameters[a.hitParameterKeys.additionalRequestData]=n;var n=b.upsellAsin,q=b.productAsin,v=b.baseAsinMetaData.price,m=b.baseAsinMetaData.merchantId,t="vas_bdlppd_fake_twister_"+(!0===b.isUpsellCritical?"1":"0")+"_a_"+b.zipCode;a.createCSMNameAndLog(l.tenant,
l.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.glanceView,b.hitParameters);a.metric("vas_bdlppd_fake_twister_");a.logRefTag(t,"LocalServicesWidget","Impression",n,"popUp",m,q,v,b.buyboxPrice)},logTwisterInteractionReftag:function(c){var d=b.isUpsellCritical,f=b.upsellAsin,g=b.productAsin,h=b.baseAsinMetaData.price,k=b.baseAsinMetaData.merchantId,m="vas_bdlppd_fake_twister_";b.isPromoPriceDisplayed&&(m="vas_bdplppd_fake_twister_promo_");
a.logRefTag(m+(c?"y":"n")+"_"+(!0===d?"1":"0")+"_a","LocalServicesWidget","AddServiceCheck",f,"popUp",k,g,h);a.createCSMNameAndLog(l.tenant,l.widget,c?a.CSMActionTypes.serviceIncluded:a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,c?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,b.hitParameters)},logTwisterATCReftag:function(){var c=!0===b.isUpsellCritical?"1":"0",d="vas_bdlppd_fake_twister_atc_"+c,f=b.upsellAsin,g=b.productAsin,
h=b.baseAsinMetaData.price,k=b.baseAsinMetaData.merchantId;b.isPromoPriceDisplayed&&(d="vas_bdlppd_fake_twister_atc_promo_"+c);a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.addToCart);a.logRefTag(d,"LocalServicesWidget","CartAdd",f,"popUp",k,g,h,b.buyboxPrice);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters);return!0},logTwisterExpanderReftagAndMetric:function(c){var d=b.upsellAsin,f=b.productAsin,g=b.baseAsinMetaData.merchantId,h=
c?"vas_bdlppd_fake_twister_sm_click":"vas_bdlppd_fake_twister_sl_click";a.createCSMNameAndLog(l.tenant,l.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints,b.hitParameters);a.increaseMetricBy(h,1);a.logRefTag(h,"LocalServicesWidget","SeeMoreClick",d,"popUp",g,f)},logTwisterSDPRedirectReftagAndMetric:function(){a.createCSMNameAndLog(l.tenant,
l.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,a.RefmarkerActionTypes.redirect,b.hitParameters)}}});"use strict";m.when("A","vas-twister-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-twister-controller",function(d,c,a,f){var h=d.$,g=h("body"),b=!1,e=function(){c.logTwisterATCReftag()},k=function(){h("#ppdb-add-service-checkbox").prop("checked",!0);var b=c.getSettings("baseAsinMetaData");try{d.trigger("vas:add-service-asin-buybox-event",
b),h("#addToCart").unbind("submit.ppdBundles"),h("#addToCart").bind("submit.ppdBundles",e),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(f){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(f)}h("#vas-fake-twister-include-section").find("i").hasClass("a-icon-extender-collapse")||h("#vas-fake-twister-include-section").click();c.getSettings("isPromoPriceDisplayed")&&c.getSettings("promotionMessagingWeblab")&&
(h("#vasTwisterSelectedPromotionMessage").removeClass("aok-hidden"),h("#vasTwisterNotSelectedPromotionMessage").addClass("aok-hidden"));d.trigger("vas:add-widget-state-url",{preSelectedWidgetValue:c.getSettings("baseAsinMetaData").upsellAsin})},l=function(a){c.getSettings("dynamicStringChangeOnTwisterSelection")&&h("#vas-service-title-text").html(a.attr("data-title"))},n={vasTwisterTrigger:function(b){h(".vas-ppd-swatch-item").removeClass("vas-ppd-swatch-select");b.addClass("vas-ppd-swatch-select");
l(b);if("removeOffer"===b.attr("data-twister-action")){h("#ppdb-add-service-checkbox").prop("checked",!1);try{d.trigger("vas:remove-service-asin-buybox-event"),h("#addToCart").unbind("submit.ppdBundles"),a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success"),d.trigger("vas:remove-widget-state-url")}catch(e){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(e)}c.getSettings("isPromoPriceDisplayed")&&c.getSettings("promotionMessagingWeblab")&&
(h("#vasTwisterSelectedPromotionMessage").addClass("aok-hidden"),h("#vasTwisterNotSelectedPromotionMessage").removeClass("aok-hidden"));c.logTwisterInteractionReftag(!1)}else k(),c.logTwisterInteractionReftag(!0)},vasTwisterExpander:function(){h("#vas-fake-twister-include-section").find("i").hasClass("a-icon-extender-collapse")?c.logTwisterExpanderReftagAndMetric(!1):c.logTwisterExpanderReftagAndMetric(!0)}},m=function(){h("#vas-fake-twister-include-section").unbind("click");h("#vas-fake-twister-include-section").bind("click",
function(a){n.vasTwisterExpander()});h("#vas-fake-twiseter-detailLink").unbind("click");h("#vas-fake-twiseter-detailLink").bind("click",function(a){c.logTwisterSDPRedirectReftagAndMetric()})},v=function(){b||(g.undelegate(".vas-ppd-swatch-item","click"),g.delegate(".vas-ppd-swatch-item","click",function(a){a=h(a.currentTarget);a.hasClass("vas-ppd-swatch-select")||n.vasTwisterTrigger(a)}),b=!0)},z=function(){d.off("vas:ldbb-a2c-event:desktop");d.on("vas:ldbb-a2c-event:desktop",function(a){if(h("#ppdb-add-service-checkbox").is(":checked")){var b=
c.getSettings("baseAsinMetaData");f.addUpsell(b.upsellAsin,b.offerlistingId,a)}});d.off("vas:ldbb-upsell-added:desktop");d.on("vas:ldbb-upsell-added:desktop",function(){c.logTwisterATCReftag()})};d.off("vas:widgetname:twister");d.on("vas:widgetname:twister",function(){h("#vas-service-title-text");v();c.fetchTwisterSetting();c.getSettings("hasPrecheckEnabled")&&(k(),l(h(".vas-ppd-swatch-select")));m();z();h("#vasTwisterRow").removeClass("vas-twister-disabled")})});"use strict";m.register("vas-twister-xl-config",
function(){return{vasTwisterXLMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"dftxl"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip"},metricPrefixes:{tenant:"vas",widget:"dftxl"}}}});"use strict";m.when("A","vas-metrics-publisher","ready").register("vas-twister-page-refresh-common",function(d,c){function a(a){a=document.getElementById(a);var b=[];if(null===a||a===u)return b;a=a.getElementsByTagName("SCRIPT");d.each(a,function(a){b.push(a.innerHTML)});
return b}function f(a,b){d.each(b,function(b){var c=document.createElement("script");c.type="text/javascript";c.text=b;b=document.getElementById(a);null!==b&&b!==u&&b.appendChild(c)})}var h=d.$,g=null,b=function(b){try{var e=b.pageRefreshData,g=[];d.each(b.featuresWithScriptTags,function(b){g.push(a(b))});b.featuresToRefresh.forEach(function(a){h(a).replaceWith(h(e).find(a).prop("outerHTML"))});d.each(b.featuresWithScriptTags,function(a,b){f(a,g[b])});d.trigger("vas:vas-twister-page-refresh-complete",
b);c.increaseMetricBy("vasTwisterUpdateFeatures_success",1);c.increaseMetricBy("vasTwisterUpdateFeatures_fail",0);d.loadImageManually(d.$(".icon-box"));d.trigger("a:pageUpdate")}catch(m){d.trigger("vas:vas-twister-update-features-failed",b),c.increaseMetricBy("vasTwisterUpdateFeatures_success",0),c.increaseMetricBy("vasTwisterUpdateFeatures_fail",1),c.log(m)}},e=function(a){d.trigger("vas:vas-twister-page-refresh-start",a);null!==g&&g.abort();g=d.ajax(a.ajaxUrl,{method:"GET",timeout:"90000",params:{isVariationalParent:a.isVariationalParent},
success:function(d){a.pageRefreshData=d;b(a);c.increaseMetricBy("vasTwisterPageRefresh_success",1);c.increaseMetricBy("vasTwisterPageRefresh_fail",0)},error:function(){d.trigger("vas:vas-twister-page-refresh-failed",a);c.increaseMetricBy("vasTwisterPageRefresh_success",0);c.increaseMetricBy("vasTwisterPageRefresh_fail",1)}})};return{performPageRefresh:function(a){"undefined"===typeof a.pageRefreshData?e(a):b(a)},abortPageRefreshRequests:function(){null!==g&&g.abort()},restoreInitialData:function(a){try{var b=
a.pageRefreshData;d.each(a.featuresToRefresh,function(a){"undefined"!==typeof b[a]&&h(a).replaceWith(b[a])});c.increaseMetricBy("vasTwisterRestoreInitialData_success",1);c.increaseMetricBy("vasTwisterRestoreInitialData_fail",0);d.trigger("vas:vas-twister-initialdata-restore-complete")}catch(e){c.increaseMetricBy("vasTwisterRestoreInitialData_success",0),c.increaseMetricBy("vasTwisterRestoreInitialData_fail",1),c.log(e)}}}});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","vas-twister-xl-config",
"vas-metric-utils","pre-check-disabled","ready").register("vas-twister-xl-setting",function(d,c,a,f,h,g){var b=d.$,e={vasTwisterOptions:{},baseAsinMetaData:{},productAsinAndOfferData:{},productPriceInTwisterVariation:{}},k=f.vasTwisterXLMetricConstants.refmarkerPrefixes,l=f.vasTwisterXLMetricConstants.metricPrefixes,n=function(){var b=e.productAsinAndOfferData.asin,c=e.productAsinAndOfferData.merchantId,f="vas_bdlppd_fake_twister_a_"+e.productAsinAndOfferData.zipCode;a.metric("vas_bdlppd_vas_twister_");
a.logRefTag(f,"LocalServicesWidget","Impression","","popUp",c,b,"","");a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.glanceView);d.each(e.vasTwisterOptions,function(b,c){var d=a.RefmarkerActionTypes.glanceView;b.isOfferAvailable||(d=a.RefmarkerActionTypes.glanceViewDisabled);e.hitParameters[a.hitParameterKeys.upsellAsin]=c;a.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,d,e.hitParameters)})},m=function(){try{var c=e.productAsinAndOfferData.asin,d=b("li[data-defaultasin\x3d"+c+"] .a-size-mini");
d.length&&e.productPriceInTwisterVariation[c]===u&&(e.productPriceInTwisterVariation[c]=d.text());a.increaseMetricBy("saveInitialProductPriceContent_fail",0);a.metric("saveInitialProductPriceContent_success",1)}catch(f){a.createCSMNameAndLog(l.tenant,l.widget,"saveInitialProductError"),a.increaseMetricBy("saveInitialProductPriceContent_success",0),a.metric("saveInitialProductPriceContent_fail",1),a.log(f)}};return{getProductAsinAndOfferData:function(a){return"undefined"!==typeof a?e.productAsinAndOfferData[a]:
e.productAsinAndOfferData},getSettings:function(a){if("undefined"!==typeof a){a=e.vasTwisterOptions[a];var b={};b.asin=a.serviceAsin;b.offerlistingId=a.offerData.offerListingId;b.merchantId=a.offerData.merchantId;b.price=a.offerData.price;return b}},hasPrecheckEnabled:function(){return e.hasPrecheckEnabled},getVasTwisterOption:function(a){if("undefined"!==typeof a)return e.vasTwisterOptions[a]},getInitialProductPriceContent:function(){return e.productPriceInTwisterVariation},setInitialWidgetSettings:function(){b("#ppdb-add-service-checkbox").is(":checked")&&
b("#ppdb-add-service-checkbox").prop("checked",!1);var a=c.getSetting("winningWidgetVM"),k=a.vasTwisterOptions;e.productAsinAndOfferData=a.vasUpsellProductAsinAndOfferData;e.mappingSet=c.getSetting("widgetCommonVM").mappingSet;e.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;d.each(k,function(a,b){e.vasTwisterOptions[b]=a});e.vasTwisterXLMetricConstants=f.vasTwisterXLMetricConstants;e.hitParameters=h.createHitParameters(e.vasTwisterXLMetricConstants);e.hasPrecheckEnabled=!0===g.isDisabled?
!1:a.hasPrecheckEnabled;m();n()},logVasTwisterInteractionReftag:function(b,c){b&&(b=e.vasTwisterOptions[c].offerData.price,a.logRefTag("vas_bdlppd_vas_twister_a","LocalServicesWidget","AddServiceCheck",c,"popUp",e.vasTwisterOptions[c].offerData.merchantId,e.productAsinAndOfferData.asin,b),e.hitParameters[a.hitParameterKeys.upsellAsin]=c,e.hitParameters[a.hitParameterKeys.upsellAsinPrice]=b);c=a.CSMActionTypes.serviceIncluded;a.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,a.RefmarkerActionTypes.serviceIncluded,
e.hitParameters);a.createCSMNameAndLog(l.tenant,l.widget,c)},logVasTwistetATCReftag:function(b){a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.addToCart);var d=e.productAsinAndOfferData.asin,f=e.vasTwisterOptions[b].offerData.price,g=e.vasTwisterOptions[b].offerData.merchantId,h="";c.getSetting("widgetCommonVM")&&(h=c.getSetting("widgetCommonVM").buyboxPrice||"");e.hitParameters[a.hitParameterKeys.upsellAsin]=b;e.hitParameters[a.hitParameterKeys.upsellAsinPrice]=f;a.createRefMarkerAndLog(k.tenant,
e.mappingSet,k.widget,a.RefmarkerActionTypes.addToCart,e.hitParameters);a.logRefTag("vas_bdlppd_vas_twister_atc_","LocalServicesWidget","CartAdd",b,"popUp",g,d,f,h);return!0},logTwisterExpanderReftagAndMetric:function(b,c){var d=e.vasTwisterOptions[c].offerData.price;a.createCSMNameAndLog(l.tenant,l.widget,b?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints);e.hitParameters[a.hitParameterKeys.upsellAsin]=c;e.hitParameters[a.hitParameterKeys.upsellAsinPrice]=d;a.createRefMarkerAndLog(k.tenant,
e.mappingSet,k.widget,b?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints,e.hitParameters)},getVasTwisterXLMetricConstants:function(){return e.vasTwisterXLMetricConstants},getHitParameters:function(){return e.hitParameters},isMultiQuantityPurchaseEnabled:function(){return c.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled},isBusinessCustomer:function(){return c.getSetting("widgetCommonVM").businessCustomer}}});"use strict";m.when("A","vas-twister-page-refresh-common",
"vas-metrics-publisher","vas-twister-xl-setting","vas-twister-xl-util","ready").register("vas-twister-page-refresh-webView",function(d,c,a,f,h){var g=d.$,b={},e={},k=function(a){a.pageRefreshData=b;c.restoreInitialData(a);n("1.0",a.featuresToRefresh)},l=function(){var a=f.getProductAsinAndOfferData().asin,b=g("#twister_feature_div"),c=g("li[data-defaultasin\x3d"+a+"]"),a=g("li[data-defaultasin\x3d"+a+"] .a-size-mini"),d=g("#priceblock_ourprice"),e=g("#priceblock_saleprice");0>=b.length||0>=c.length||
0>=a.length||(d.length?a.text(d.text()):e.length?a.text(e.text()):a.text(""))},n=function(a,b){d.each(b,function(b,c){g(b).css("opacity",a)})},m=function(){try{var b=f.getInitialProductPriceContent();d.each(b,function(a,b){b=g("li[data-defaultasin\x3d"+b+"] .a-size-mini");b.length&&b.text(a)});a.increaseMetricBy("restoreInitialPriceInProductTwister_fail",0);a.metric("restoreInitialPriceInProductTwister_success",1)}catch(c){a.increaseMetricBy("restoreInitialPriceInProductTwister_success",0),a.metric("restoreInitialPriceInProductTwister_fail",
1),a.log(c)}};d.off("vas:vas-twister-page-refresh-start");d.on("vas:vas-twister-page-refresh-start",function(a){n("0.5",a.featuresToRefresh);g("#vasTwisterRow").addClass("vas-twister-disabled")});d.off("vas:vas-twister-page-refresh-complete");d.on("vas:vas-twister-page-refresh-complete",function(a){e[a.baseOfferMerchantId+a.asin]=a.pageRefreshData;l();n("1.0",a.featuresToRefresh);g("#vasTwisterRow").removeClass("vas-twister-disabled");d.trigger("vas:twister-update-widgets","hide");d.trigger("vas:add-asin-offer-data-to-cart",
a.svcAsin)});d.off("vas:vas-twister-page-refresh-failed");d.on("vas:vas-twister-page-refresh-failed",function(a){n("1.0",a.featuresToRefresh);g("#vasTwisterRow").removeClass("vas-twister-disabled")});d.off("vas:vas-twister-update-features-failed");d.on("vas:vas-twister-update-features-failed",function(a){k(a.featuresToRefresh);n("1.0",a.featuresToRefresh)});d.off("vas:vas-twister-initialdata-restore-complete");d.on("vas:vas-twister-initialdata-restore-complete",function(){m();d.trigger("vas:remove-asin-offer-data-to-cart");
d.trigger("vas:twister-update-widgets","show")});d.off("vas:twister-update-widgets");d.on("vas:twister-update-widgets",function(a){var b=g("#dpFastTrack_feature_div"),c=g("#moreBuyingChoices_feature_div");0<b.length&&("show"===a?b.show():b.hide());0<c.length&&("show"===a?c.show():c.hide())});return{setInitialFeaturesData:function(a){d.each(a,function(a,c){b[a]=g(a).prop("outerHTML")});d.trigger("vas:twister-update-widgets","show")},performPageRefresh:function(a){a.ajaxUrl=h.getAjaxUrl(a.asin,a.baseOfferMerchantId);
a.pageRefreshData=e[a.baseOfferMerchantId+a.asin];a.featuresWithScriptTags=h.getFeaturesWithScriptTags();c.performPageRefresh(a)},abortPageRefreshRequests:function(){c.abortPageRefreshRequests()},restoreInitialPriceInProductTwister:m,restoreInitialData:k,updatePriceInProductTwisterDesktop:l,hideOfferUpdateWidget:function(){g("#vas-twister-price-update-div").hide()},showOfferUpdateWidget:function(){g("#vas-twister-price-update-div").show()}}});"use strict";m.when("A","vas-twister-xl-setting","vas-detailpage-util",
"ready").register("vas-twister-xl-util",function(d,c,a){function f(){return c.isBusinessCustomer()&&c.isMultiQuantityPurchaseEnabled()}function h(){return"{%27disableFreeFormQtyPicker%27:true}"}return{isRefreshRequired:function(d,b){return c.isBusinessCustomer()?d!==b||c.isMultiQuantityPurchaseEnabled()&&!c.hasPrecheckEnabled():a.isMobbPresent()||d!==b},getAjaxUrl:function(a,b){a="/gp/product/"+a+"?m\x3d"+b;return f()?a+"\x26vas\x3d"+h():a},getFeaturesWithScriptTags:function(){return c.isMultiQuantityPurchaseEnabled()&&
!c.isBusinessCustomer()?["soldByThirdParty_feature_div","quantityLayoutHigh_feature_div"]:[]},disableQuantityRefresh:f,getQueryParamValueToDisableQuantityRefresh:h}});"use strict";m.when("A","vas-twister-xl-setting","vas-twister-page-refresh-webView","vas-metrics-publisher","vas-twister-xl-util","vas-detailpage-util","ready").execute("vas-twister-xl-controller",function(d,c,a,f,h,g){var b=d.$,e="#iconfarmv2_feature_div #buybox_feature_div #desktop_buybox #price_feature_div #unifiedPrice_feature_div #pmpux_feature_div #issuancePriceblockAmabot_feature_div #alternativeOfferEligibilityMessaging_feature_div #applicablePromotionList_feature_div #availability_feature_div #holidayDeliveryMessage_feature_div #dpFastTrack_feature_div #businessOnlyItem_feature_div #shipsFromSoldBy_feature_div #businessPricing_feature_div #smileEligibility_feature_div #holidayAvailabilityMessage_feature_div #moreBuyingChoices_feature_div #companyCompliancePolicies_feature_div #apex_desktop".split(" "),
k=!1,l="",n="",m=function(){c.logVasTwistetATCReftag(n)},p=function(){try{d.trigger("vas:remove-service-asin-buybox-event"),b("#addToCart").unbind("submit.ppdBundles"),f.increaseMetricBy("a2cFormRemoveEventSend_fail",0),f.metric("a2cFormRemoveEventSend_success")}catch(a){f.increaseMetricBy("a2cFormRemoveEventSend_success",0),f.metric("a2cFormRemoveEventSend_fail"),f.log(a)}},r=function(a){try{d.trigger("vas:add-service-asin-buybox-event",a),b("#addToCart").bind("submit.ppdBundles",m),f.increaseMetricBy("a2cFormAddEventSend_success",
1),f.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(c){f.increaseMetricBy("a2cFormAddEventSend_success",0),f.increaseMetricBy("a2cFormAddEventSend_fail",1),f.log(c)}},t={vasTwisterExpander:function(a,d){b("#vas-fake-twister-includesection-"+a.attr("data-twister-svcAsin")).find("i").hasClass("a-icon-extender-collapse")?c.logTwisterExpanderReftagAndMetric(!1,d):c.logTwisterExpanderReftagAndMetric(!0,d)},ppdFakeTwisterTrigger:function(f){var g=f.attr("data-twister-svcAsin"),m={};if("undefined"===
typeof g||c.getVasTwisterOption(g).isOfferAvailable)if(b(".vas-ppd-swatch-item").removeClass("vas-ppd-swatch-select"),f.addClass("vas-ppd-swatch-select"),b(".vas-twister-whatsincluded").hide(),b("#vas-twister-title").html(f.attr("data-twister-callToAction")),"removeOffer"===f.attr("data-twister-action"))a.abortPageRefreshRequests(),b("#ppdb-add-service-checkbox").prop("checked",!1),n="undefined",h.isRefreshRequired(l,c.getProductAsinAndOfferData("merchantId"))?(m.featuresToRefresh=e,a.restoreInitialData(m),
l=c.getProductAsinAndOfferData("merchantId"),a.showOfferUpdateWidget()):a.hideOfferUpdateWidget(),p(),c.logVasTwisterInteractionReftag(!1,"ItemOnly"),d.trigger("vas:twister-update-widgets","show");else{!1===k&&(a.setInitialFeaturesData(e),k=!0);b("#ppdb-add-service-checkbox").prop("checked",!0);p();b("#vas-fake-twister-whatsincluded-"+f.attr("data-twister-svcAsin")).show();b("#vas-fake-twister-includesection-"+f.attr("data-twister-svcAsin")).find("i").hasClass("a-icon-extender-collapse")||(b("#vas-fake-twister-includesection-"+
f.attr("data-twister-svcAsin")).unbind("click"),b("#vas-fake-twister-includesection-"+f.attr("data-twister-svcAsin")).bind("click",function(a){t.vasTwisterExpander(f,g)}),b("#vas-fake-twister-includesection-"+f.attr("data-twister-svcAsin")).click());n=g;var q=c.getVasTwisterOption(g).baseOfferMerchantId;h.isRefreshRequired(l,q)?(m.asin=c.getProductAsinAndOfferData("asin"),m.svcAsin=g,m.merchantId=c.getVasTwisterOption(g).offerData.merchantId,m.isVariationalParent=!1,m.featuresToRefresh=e,m.baseOfferMerchantId=
q,a.performPageRefresh(m),l=q,a.showOfferUpdateWidget()):(d.trigger("vas:twister-update-widgets","hide"),r(c.getSettings(f.attr("data-twister-svcAsin"))),a.hideOfferUpdateWidget());c.logVasTwisterInteractionReftag(!0,g)}}};d.off("vas:add-asin-offer-data-to-cart");d.on("vas:add-asin-offer-data-to-cart",function(a){r(c.getSettings(a))});d.off("vas:remove-asin-offer-data-to-cart");d.on("vas:remove-asin-offer-data-to-cart",function(){p()});var u=function(){b(".vas-ppd-swatch-item").unbind("click");b(".vas-ppd-swatch-item").bind("click",
function(a){a=b(a.currentTarget);a.hasClass("vas-ppd-swatch-select")||t.ppdFakeTwisterTrigger(a)})};d.off("vas:widgetname:twister_xl");d.on("vas:widgetname:twister_xl",function(){c.setInitialWidgetSettings();u();l=c.getProductAsinAndOfferData("merchantId");a.restoreInitialPriceInProductTwister();if(c.hasPrecheckEnabled()&&!g.isMobbPresent()){a.hideOfferUpdateWidget();var d=b(".vas-ppd-swatch-select");t.ppdFakeTwisterTrigger(d)}b("#vasTwisterRow").removeClass("vas-twister-disabled")})});"use strict";
m.register("vas-enhanceppd-config",function(){return{enhancedPPDMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"eppdb",mandatory_widget:"mandatory_eppdb"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"eppdb",mandatory_widget:"mandatory_eppdb"}}}});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","vas-utilities","vas-enhanceppd-config","vas-metric-utils",
"ready").register("vas-enhanceppd-setting",function(d,c,a,f,h,g){var b={enhancePpdViewModel:{}},e=h.enhancedPPDMetricConstants.refmarkerPrefixes,k=h.enhancedPPDMetricConstants.metricPrefixes;return{getSettings:function(a){return b.hasOwnProperty(a)?b[a]:b},setSettings:function(a,c,d){a&&d?b[a][d]=c:a&&(b[a]=c)},fetchEnhancePpdSetting:function(){b.enhancePpdViewModel=c.getSetting("winningWidgetVM");b.productAsin=c.getSetting("widgetCommonVM").productAsin;b.zipCode=c.getSetting("widgetCommonVM").zipCode;
b.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;b.isEnhanceUpsellPresence="undefined"===typeof b.enhancePpdViewModel.upsellAsinOfferData?!1:!0;b.sessionId=c.getSetting("widgetCommonVM").sessionId;b.mappingSet=c.getSetting("widgetCommonVM").mappingSet;b.enhancedPPDMetricConstants=h.enhancedPPDMetricConstants;b.hitParameters=g.createHitParameters(h.enhancedPPDMetricConstants);var d,f=b.enhancePpdViewModel.baseAsinOfferData.isMandatory,m=!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0",p=
b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,r=b.enhancePpdViewModel.productAsin,t=b.enhancePpdViewModel.winningServiceMinPrice,u=b.enhancePpdViewModel.baseAsinOfferData.merchantId,C=b.buyboxPrice,A=b.zipCode;d=(!1===b.isEnhanceUpsellPresence?"vas_bdlppd_enh_":"vas_bdlppd_enh_upsell_")+m+"_a_"+A;a.logRefTag("vas_bdlppd_ld_"+m+"_a_"+A,"LocalServicesWidget","Impression",p,"popUp",u,r,t,C);a.logRefTag(d,"LocalServicesWidget","Impression",p,"popUp",u,r,t,C);d=b.isEnhanceUpsellPresence?"uppdb":f?
k.mandatory_widget:k.widget;a.createCSMNameAndLog(k.tenant,d,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(e.tenant,b.mappingSet,d,a.RefmarkerActionTypes.glanceView,b.hitParameters)},logPPDBundlesExpander:function(c,d){a.increaseMetricBy(!1===b.isEnhanceUpsellPresence?"vas_ppd_bdl_sm_clicks":"vas_ppd_bdl_sm_upg_clicks",1);a.createRefMarkerAndLog(e.tenant,b.mappingSet,d?e.mandatory_widget:e.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints,b.hitParameters);a.createCSMNameAndLog(k.tenant,
d?k.mandatory_widget:k.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints)},logPPDBundlesATCReftag:function(c){a.createCSMNameAndLog(k.tenant,c?k.mandatory_widget:k.widget,a.CSMActionTypes.addToCart);a.createRefMarkerAndLog(e.tenant,b.mappingSet,c?e.mandatory_widget:e.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters)},logCheckboxInteractionReftag:function(c){a.logRefTag("vas_bdlppd_"+c+"_"+b.ppdBundlesInteractionSlice+"_"+(!0===b.enhancePpdViewModel.isUpsellCritical?
"1":"0")+"_a","LocalServicesWidget","AddServiceCheck",b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,b.enhancePpdViewModel.productAsin,b.enhancePpdViewModel.winningServiceMinPrice);a.createCSMNameAndLog(k.tenant,k.widget,"y"===c?a.CSMActionTypes.serviceIncluded:a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(e.tenant,b.mappingSet,e.widget,"y"===c?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,
b.hitParameters)},logBuyBackReftagHandler:function(c){var d=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,f=b.enhancePpdViewModel.productAsin;a.logRefTag("vas_bbk_"+f+"_"+d,"LocalServicesWidget","CartAdd",d,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,f,b.enhancePpdViewModel.winningServiceMinPrice);a.createCSMNameAndLog(k.tenant,c?k.mandatory_widget:k.widget,a.CSMActionTypes.buyBack);a.createRefMarkerAndLog(e.tenant,b.mappingSet,c?e.mandatory_widget:e.widget,a.RefmarkerActionTypes.buyBack,
b.hitParameters);return!0},logPPDBundlesBuyNowReftag:function(c){a.createCSMNameAndLog(k.tenant,c?k.mandatory_widget:k.widget,a.CSMActionTypes.buyNow);a.createRefMarkerAndLog(e.tenant,b.mappingSet,c?e.mandatory_widget:e.widget,a.RefmarkerActionTypes.buyNow,b.hitParameters)}}});"use strict";m.when("A","vas-enhanceppd-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-enhanceppd-controller",function(d,c,a,f){var h=d.$,g=!1,b=function(){c.logPPDBundlesATCReftag(g)},e=function(){c.logPPDBundlesBuyNowReftag(g)},
k=function(){c.logBuyBackReftagHandler(g)},l=function(){try{d.trigger("vas:remove-service-asin-buybox-event"),h("#add-to-cart-button").unbind("click.ppdBundles"),h("#buy-now-button").unbind("click.ppdBundles"),h("#buyBackBuyNow").length&&h(document.body).undelegate("#buyBackBuyNow","submit.vasBuyBackReftag"),a.increaseMetricBy(g?"mandatory_eppdb_a2cFormRemoveEventSend_fail":"a2cFormRemoveEventSend_fail",0),a.metric(g?"mandatory_eppdb_a2cFormRemoveEventSend_success":"a2cFormRemoveEventSend_success")}catch(b){a.increaseMetricBy(g?
"mandatory_eppdb_a2cFormRemoveEventSend_success":"a2cFormRemoveEventSend_success",0),a.metric(g?"mandatory_eppdb_a2cFormRemoveEventSend_fail":"a2cFormRemoveEventSend_fail"),a.log(b)}},m=function(c){try{d.trigger("vas:add-service-asin-buybox-event",c),h("#add-to-cart-button").bind("click.ppdBundles",b),h("#buy-now-button").bind("click.ppdBundles",e),d.trigger("vas:add-service-asin-buyback-form-event",c),h(document.body).delegate("#buyBackBuyNow","submit.vasBuyBackReftag",k),a.increaseMetricBy(g?"mandatory_eppdb_a2cFormAddEventSend_success":
"a2cFormAddEventSend_success",1),a.increaseMetricBy(g?"mandatory_eppdb_a2cFormAddEventSend_fail":"a2cFormAddEventSend_fail",0)}catch(f){a.increaseMetricBy(g?"mandatory_eppdb_a2cFormAddEventSend_success":"a2cFormAddEventSend_success",0),a.increaseMetricBy(g?"mandatory_eppdb_a2cFormAddEventSend_fail":"a2cFormAddEventSend_fail",1),a.log(f)}},q={ppdBundlesCheckBoxHandler:function(){var a,b=h("#ppdBundlesEnhancedWrapper"),d=h("#ppdBundlesEnhancedBox");h("#ppdb-add-service-checkbox").is(":checked")?(a=
"y",l(),c.getSettings("isEnhanceUpsellPresence")&&h("#ppdb-upsell-service-checkbox").is(":checked")?m(c.getSettings("enhancePpdViewModel").upsellAsinOfferData):m(c.getSettings("enhancePpdViewModel").baseAsinOfferData),b.addClass("ppdBundlesOrangeBorder").removeClass("ppdBundlesGrayBorder"),d.addClass("ppdBundlesOrangeBox"),null===c.getSettings("ppdBundlesInteractionSlice")&&c.setSettings("ppdBundlesInteractionSlice",1),h("#ppdBundlesExpanderContent").is(":visible")||h("#ppdBundlesExpanderHeadingLink").click()):
(a="n",b.addClass("ppdBundlesGrayBorder").removeClass("ppdBundlesOrangeBorder"),d.removeClass("ppdBundlesOrangeBox"),c.getSettings("isEnhanceUpsellPresence")&&h("#ppdb-upsell-service-checkbox").is(":checked")&&h("#ppdb-upsell-service-checkbox").click(),l());c.logCheckboxInteractionReftag(a);c.setSettings("ppdBundlesInteractionSlice",1)},ppdBundlesUpsellCheckBoxHandler:function(){var a;h("#ppdb-upsell-service-checkbox").is(":checked")?(h("#ppdb-add-service-checkbox").is(":checked")?(l(),m(c.getSettings("enhancePpdViewModel").upsellAsinOfferData)):
h("#ppdb-add-service-checkbox").click(),a="y"):(l(),m(c.getSettings("enhancePpdViewModel").baseAsinOfferData),a="n");c.logCheckboxInteractionReftag(a)}},p=function(){d.off("a:expander:ppdBundlesExpander:toggle:expand");d.on("a:expander:ppdBundlesExpander:toggle:expand",function(a){c.logPPDBundlesExpander(!0,g)});d.off("a:expander:ppdBundlesExpander:toggle:collapse");d.on("a:expander:ppdBundlesExpander:toggle:collapse",function(a){c.logPPDBundlesExpander(!1,g)});h("#ppdb-add-service-checkbox").unbind("change");
h("#ppdb-add-service-checkbox").bind("change",function(){q.ppdBundlesCheckBoxHandler()});c.getSettings("isEnhanceUpsellPresence")&&(h("#ppdb-upsell-service-checkbox").unbind("change"),h("#ppdb-upsell-service-checkbox").bind("change",function(){q.ppdBundlesUpsellCheckBoxHandler()}))},r=function(){d.off("vas:ldbb-a2c-event:desktop");d.on("vas:ldbb-a2c-event:desktop",function(a){if(h("#ppdb-add-service-checkbox").is(":checked")){var b;b=c.getSettings("isEnhanceUpsellPresence")&&h("#ppdb-upsell-service-checkbox").is(":checked")?
c.getSettings("enhancePpdViewModel").upsellAsinOfferData:c.getSettings("enhancePpdViewModel").baseAsinOfferData;f.addUpsell(b.upsellAsin,b.offerlistingId,a)}});d.off("vas:ldbb-upsell-added:desktop");d.on("vas:ldbb-upsell-added:desktop",function(){b()})};d.off("vas:widgetname:enhancedPPD");d.on("vas:widgetname:enhancedPPD",function(){c.fetchEnhancePpdSetting();g=c.getSettings("enhancePpdViewModel").baseAsinOfferData.isMandatory;p();r();g?(l(),m(c.getSettings("enhancePpdViewModel").baseAsinOfferData)):
h("#ppdb-add-service-checkbox").is(":checked")?(l(),h("#ppdBundlesEnhancedWrapper").addClass("ppdBundlesOrangeBorder").removeClass("ppdBundlesGrayBorder"),h("#ppdBundlesEnhancedBox").addClass("ppdBundlesOrangeBox"),c.getSettings("isEnhanceUpsellPresence")&&h("#ppdb-upsell-service-checkbox").is(":checked")?m(c.getSettings("enhancePpdViewModel").upsellAsinOfferData):m(c.getSettings("enhancePpdViewModel").baseAsinOfferData)):(h("#ppdBundlesEnhancedWrapper").addClass("ppdBundlesGrayBorder").removeClass("ppdBundlesOrangeBorder"),
h("#ppdBundlesEnhancedBox").removeClass("ppdBundlesOrangeBox"));h("#ppdBundlesEnhancedContent").removeClass("ppd-bundles-disabled")})});"use strict";m.when("ready").register("vas-service-capabilities-constants",function(){return{CLICK_EVENT:"click",SERVICE_CAPABILITIES_WIDGET_NAME:"serviceCapabilities",SERVICE_CAPABILITIES_IMAGE_ID:"service-capabilities-image"}});"use strict";m.when("A","vas-service-capabilities-constants","vas-metrics-publisher","vas-widget-const","ready").register("vas-service-capabilities-controller",
function(d,c,a,f){var h=d.$,g=f.COMMON.DOM.SERVICE_CAPABILITIES_SLOT,b=c.SERVICE_CAPABILITIES_WIDGET_NAME,e=function(){var c;d.each(h("#"+g).find("[data-a-state]"),function(e,f){c=d.parseJSON(h(e).attr("data-a-state")).key;"vas-service-capabilities-model"===c&&a.logCSMCounter(["vas",b,a.RefmarkerActionTypes.glanceView].join("_"))})};f=function(){e();h("#"+c.SERVICE_CAPABILITIES_IMAGE_ID).unbind(c.CLICK_EVENT);h("#"+c.SERVICE_CAPABILITIES_IMAGE_ID).bind(c.CLICK_EVENT,function(){a.logCSMCounter(["vas",
b,c.CLICK_EVENT].join("_"))})};f();return{initialize:f}});"use strict";m.register("vas-ppdbundle-config",function(){return{ppdBundlesMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"ppdb"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"ppdb"}}}});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","vas-utilities","vas-ppdbundle-config","vas-metric-utils",
"ready").register("vas-ppdbundle-setting",function(d,c,a,f,h,g){var b=d.$,e={ppdBundleViewModel:{}},k=h.ppdBundlesMetricConstants.refmarkerPrefixes,l=h.ppdBundlesMetricConstants.metricPrefixes;return{getSettings:function(a){return e.hasOwnProperty(a)?e[a]:e},setSettings:function(a,b,c){a&&c?e[a][c]=b:a&&(e[a]=b)},fetchPpdBundleSetting:function(){e.ppdBundleViewModel=c.getSetting("winningWidgetVM");e.productAsin=c.getSetting("widgetCommonVM").productAsin;e.zipCode=c.getSetting("widgetCommonVM").zipCode;
e.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;e.sessionId=c.getSetting("widgetCommonVM").sessionId;e.mappingSet=c.getSetting("widgetCommonVM").mappingSet;e.ppdBundlesMetricConstants=h.ppdBundlesMetricConstants;e.hitParameters=g.createHitParameters(e.ppdBundlesMetricConstants);var d=b("#ppdb-add-service-checkbox");d.is(":checked")&&d.prop("checked",!1);var d=!0===e.ppdBundleViewModel.isUpsellCritical?"1":"0",m=e.zipCode,p=e.productAsin,r=f.getPriceValue(e.ppdBundleViewModel.baseAsinOfferData.price),
t=f.getPriceValue(e.buyboxPrice),u=e.ppdBundleViewModel.baseAsinOfferData.upsellAsin,A=e.ppdBundleViewModel.baseAsinOfferData.merchantId,V="vas_bdlppd_old_"+d+"_a_"+m;a.logRefTag("vas_bdlppd_ld_"+d+"_a_"+m,"LocalServicesWidget","Impression",u,"popUp",A,p,r,t);a.logRefTag(V,"LocalServicesWidget","Impression",u,"popUp",A,p,r,t);a.metric("bdl_old_gv");a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,a.RefmarkerActionTypes.glanceView,
e.hitParameters)},logCheckboxInteractionReftag:function(b){var c=!0===e.ppdBundleViewModel.isUpsellCritical?"1":"0",d=e.ppdBundleViewModel.baseAsinOfferData.upsellAsin,g=e.productAsin,h=f.getPriceValue(e.ppdBundleViewModel.baseAsinOfferData.price);f.getPriceValue(e.buyboxPrice);a.logRefTag("vas_bdlppd_"+b+"_1_"+c+"_a","LocalServicesWidget","AddServiceCheck",d,"popUp",e.ppdBundleViewModel.baseAsinOfferData.merchantId,g,h);a.createCSMNameAndLog(l.tenant,l.widget,"y"===b?a.CSMActionTypes.serviceIncluded:
a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,"y"===b?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,e.hitParameters)},logATCInteraction:function(){a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.addToCart);a.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,a.RefmarkerActionTypes.addToCart,e.hitParameters)},logSDPRedirectReftagAndMetric:function(){a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.redirect);
a.createRefMarkerAndLog(k.tenant,e.mappingSet,k.widget,a.RefmarkerActionTypes.redirect,e.hitParameters);return!0}}});"use strict";m.when("A","vas-ppdbundle-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-ppdbundle-controller",function(d,c,a,f){var h=d.$,g={ppdBundlesCheckBoxHandler:function(){var b;if(h("#ppdb-add-service-checkbox").is(":checked")){b=c.getSettings("ppdBundleViewModel").baseAsinOfferData;c.logATCInteraction();try{d.trigger("vas:add-service-asin-buybox-event",
b),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(e){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(e)}b="y"}else{try{d.trigger("vas:remove-service-asin-buybox-event"),a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(e){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(e)}b="n"}c.logCheckboxInteractionReftag(b)}},
b=function(){h("#ppdb-add-service-checkbox").unbind("change");h("#ppdb-add-service-checkbox").bind("change",function(){g.ppdBundlesCheckBoxHandler()});h("#ppdBundles-estimate-SDP").unbind("click");h("#ppdBundles-estimate-SDP").bind("click",function(){c.logSDPRedirectReftagAndMetric()})},e=function(){d.off("vas:ldbb-a2c-event:desktop");d.on("vas:ldbb-a2c-event:desktop",function(a){if(h("#ppdb-add-service-checkbox").is(":checked")){var b=c.getSettings("ppdBundleViewModel").baseAsinOfferData;f.addUpsell(b.upsellAsin,
b.offerlistingId,a)}})};d.off("vas:widgetname:ppdBundle");d.on("vas:widgetname:ppdBundle",function(){c.fetchPpdBundleSetting();b();e()})});"use strict";m.register("vas-regularPPD-config",function(){return{regularPPDMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"rpdp"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip"},metricPrefixes:{tenant:"vas",widget:"rpdp"}}}});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher",
"vas-regularPPD-config","vas-metric-utils","ready").register("vas-regularppd-setting",function(d,c,a,f,h){var g,b,e,k,l=f.regularPPDMetricConstants.refmarkerPrefixes,m=f.regularPPDMetricConstants.metricPrefixes;return{fetchRegularPpdSetting:function(){g=c.getSetting("widgetCommonVM").productAsin;b=c.getSetting("winningWidgetVM").upsellAsin;e=c.getSetting("widgetCommonVM").mappingSet;c.getSetting("widgetCommonVM");c.getSetting("widgetCommonVM");k=h.createHitParameters(f.regularPPDMetricConstants);
a.createRefMarkerAndLog(l.tenant,e,l.widget,a.RefmarkerActionTypes.glanceView,k);a.createCSMNameAndLog(m.tenant,m.widget,a.CSMActionTypes.glanceView);a.logRefTag("vas_ppd_cs_"+g+"_"+b);a.logUeMetricIncreaseCount("vas_standard_pdp_show")},logRedirectMetrics:function(){a.createCSMNameAndLog(m.tenant,m.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(l.tenant,e,l.widget,a.RefmarkerActionTypes.redirect,k)}}});"use strict";m.when("A","vas-regularppd-setting","vas-metrics-publisher","ready").execute("vas-regularppd-controller",
function(d,c,a){var f=d.$,h=function(){f(".sdpRedirect").unbind("click");f(".sdpRedirect").bind("click",function(){c.logRedirectMetrics();a.logUeMetricIncreaseCount("vas_pdp_sdp_redirect");c.logRedirectMetrics()})};d.off("vas:widgetname:regularPPD");d.on("vas:widgetname:regularPPD",function(){h();c.fetchRegularPpdSetting()})});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","ready").register("vas-brandmessaging-setting",function(d,c,a){var f,h,g;return{fetchBrandMessagingSettings:function(){f=
c.getSetting("widgetCommonVM").productAsin;h=c.getSetting("winningWidgetVM").upsellAsin;g=c.getSetting("winningWidgetVM").impressionReftag;a.logRefTag(g,"LocalServicesWidget","Impression",h,null,null,f,null,null);a.logUeMetricIncreaseCount("vas_brand_gv")}}});"use strict";m.when("A","vas-brandmessaging-setting","vas-metrics-publisher","ready").execute("vas-brandmessaging-controller",function(d,c,a){var f=d.$,h=function(){f("#vas-brand-messaging-details-redirect").unbind("click");f("#vas-brand-messaging-details-redirect").bind("click",
function(){a.logUeMetricIncreaseCount("vas_brand_details_redir")})};d.off("vas:widgetname:brandMessagingDesktop");d.on("vas:widgetname:brandMessagingDesktop",function(){h();c.fetchBrandMessagingSettings()})});"use strict";m.when("ready").register("vas-service-banner-constants",function(){return{CLICK_EVENT:"click",SERVICE_BANNER_WIDGET_NAME:"serviceBanner",SERVICE_BANNER_IMAGE_DIV_ID:"vas-service-banner-image"}});"use strict";m.when("A","vas-metrics-publisher","vas-service-banner-constants","ready").execute("vas-serviceBanner-controller",
function(d,c,a){var f=d.$,h=function(){f("#"+a.SERVICE_BANNER_IMAGE_DIV_ID).unbind(a.CLICK_EVENT);f("#"+a.SERVICE_BANNER_IMAGE_DIV_ID).bind(a.CLICK_EVENT,function(){c.logCSMCounter(["vas",a.SERVICE_BANNER_WIDGET_NAME,a.CLICK_EVENT].join("_"))})};d.off("vas:widgetname:serviceBanner");d.on("vas:widgetname:serviceBanner",function(){h();c.logCSMCounter(["vas",a.SERVICE_BANNER_WIDGET_NAME,c.RefmarkerActionTypes.glanceView].join("_"))})});"use strict";"use strict";"use strict";"use strict";"use strict";
m.when("A").register("vsx-services-constants",function(d){return{UNDEFINED:"undefined",STRING:"string",NUMBER:"number",OBJECT:"object",BOOLEAN:"boolean",FEATURE_NAME:"VSXServices",FEATURE_ATTRIBUTION:"Value Added Services/Discovery/Value Adds Detail Page",ASIN:"asin",ADD_SELECTION_TYPE:"add",DELETE_SELECTION_TYPE:"delete",DELETE:"DELETE",AUI_BUTTON_SELECTED:"a-button-selected",AUI_BUTTON_FOCUS:"a-button-focus",AUI_BUTTON_TOGGLE_GROUP:".a-button-toggle-group",AUI_BUTTON_TOGGLE:".a-button-toggle",AUI_EXPANDER:"a:expander:",
AUI_EXPANDER_EXPAND:":toggle:expand",AUI_EXPANDER_COLLAPSE:":toggle:collapse",CLICK:"click",AUI_CARD_EXPANDED:"a-expander-content-expanded",DATA_EXPANDED_STATE:"data-expanded",DATA_EXPANDED_STATE_VALUE_FALSE:"false",STYLE:"style",CARD_HIDDEN_STYLE:"overflow: hidden; display: none;",COLLAPSE_HEADING_ICON:"a-icon-section-collapse",EXPAND_HEADING_ICON:"a-icon-section-expand",PAGE_UPDATE_EVENT:"a:pageUpdate",CARD_OPENED:"tp_cc_vsx_dss_open",CARD_CLOSED:"tp_cc_vsx_dss_close",CARD_OPENED_SIMPLE_MESSAGING:"tp_cc_vsx_dss_open_simpleMessaging",
CARD_CLOSED_SIMPLE_MESSAGING:"tp_cc_vsx_dss_close_simpleMessaging",CARD_OPENED_BUNDLE:"tp_cc_vsx_dss_open_bundle",CARD_CLOSED_BUNDLE:"tp_cc_vsx_dss_close_bundle",ASIN_LINK_CLICK:"tp_cc_vsx_dss_asin_clk",ASIN_ADD:"tp_cc_vsx_dss_asin_add",ASIN_REMOVE:"tp_cc_vsx_dss_asin_rem",SEE_MORE_LINK:"tp_cc_vsx_dss_bsm_clk",GLANCE_VIEW:"tp_cc_vsx_dss_gv",GLANCE_VIEW_SIMPLE_MESSAGING:"tp_cc_vsx_dss_gv_simpleMessaging",GLANCE_VIEW_BUNDLE:"tp_cc_vsx_dss_gv_bundle",REF_TAG_BASE_URL:"/hctp/log/refMarker?ref_\x3d",SIMPLE_MESSAGING_CARD_HEADER:"vsx-services-simpleMessaging-expander-header",
SIMPLE_MESSAGING_DETAILS_LINK_ID:"#vsx-services-simpleMessaging-detailsLink",SIMPLE_MESSAGING_DIV_ID:"#vsx-services-simpleMessaging",SIMPLE_MESSAGING_STATE_ELEMENT:"vsx-services-simpleMessaging-data",SIMPLE_MESSAGING_CARD_CONTENT_SELECTOR:".vsx-services-simpleMessaging .a-expander-content",SIMPLE_MESSAGING_HEADING_ICON_SELECTOR:".vsx-services-simpleMessaging .a-expander-container .a-expander-header .a-icon",SIMPLE_MESSAGING_GV:"vsx_simple_messaging_gv",BUNDLE_CARD_HEADER:"vsx-services-bundle-expander-header",
BUNDLE_ASIN_LINK_ID:"#vsx-services-bundle-asinLink",BUNDLE_CARD_ICON_DIV_ID:"#vsx-services-bundle-icon",BUNDLE_CARD_ICON_CSS:"vsx-services-bundle-icon-css",BUNDLE_CARD_ICON_SELECTED_CSS:"vsx-services-selected-icon-css",BUNDLE_CARD_POST_SELECTION_CLASS:"vsxServices-bundle-postSelection",BUNDLE_CARD_PRE_SELECTION_CLASS:"vsxServices-bundle-preSelection",BUNDLE_CARD_HIDDEN_CLASS:"vsxServices-bundle-hidden",BUNDLE_CARD_INCLUSION_BUTTON_ID:"#vsx-services-bundle-inclusionButton",BUNDLE_CARD_EXCLUSION_BUTTON_ID:"#vsx-services-bundle-exclusionButton",
BUNDLE_DIV_ID:"#vsx-services-bundle",BUNDLE_STATE_ELEMENT:"vsx-services-bundle-data",BUNDLE_CARD_CONTENT_SELECTOR:".vsx-services-bundle .a-expander-content",BUNDLE_HEADING_ICON_SELECTOR:".vsx-services-bundle .a-expander-container .a-expander-header .a-icon",BUNDLE_GV:"vsx_bundle_gv",BUNDLE_ASIN_MANDATORY:"vsx_bundle_asin_mandatory",BUNDLE_ASIN_ADDED:"vsx_bundle_asin_add",BUNDLE_ASIN_REMOVED:"vsx_bundle_asin_removed",VIEWBOX:"viewBox",VSX_SERVICES_ICON_DIV_ID:"#vsx-services-icon",SELECTED_ICON_VIEWBOX:"0 0 24 24",
INSTALLATION_ICON_VIEWBOX:"0 100 24 24",vsxMetricConstants:{tenant:"vsx",widget:{bundle:"bundle",simpleMessaging:"simpleMessaging"},additionalRequestDataKeys:{zipCode:"zip",deviceType:"dt"},actions:{glanceView:"gv",asinMandatory:"asin_mandatory",asinAdded:"asin_added",asinRemoved:"asin_removed",vsxCardExpanded:"card_expanded",vsxCardCollapsed:"card_collapsed",vsxCardRedirection:"card_redirection",initializationFailure:"initialize_failure",inclusionFailure:"inclusion_failure",exclusionFailure:"exclusion_failure"}}}});
"use strict";r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};m.when("A","cc-manager","vsx-services-constants").register("vsx-services-twister-registration",function(d,c,a){var f=d.$,h={init:function(){},validateInputParams:function(b){return b&&("undefined"===typeof b?"undefined":r(b))!==a.UNDEFINED&&b.itemType===a.ASIN&&r(b.asin)===a.STRING&&
r(b.offerListingId)===a.STRING?1:0},cardCollapse:function(){g(a.BUNDLE_CARD_CONTENT_SELECTOR,a.BUNDLE_HEADING_ICON_SELECTOR);g(a.SIMPLE_MESSAGING_CARD_CONTENT_SELECTOR,a.SIMPLE_MESSAGING_HEADING_ICON_SELECTOR)}},g=function(b,c){f(b).removeClass(a.AUI_CARD_EXPANDED).attr(a.DATA_EXPANDED_STATE,a.DATA_EXPANDED_STATE_VALUE_FALSE).attr(a.STYLE,a.CARD_HIDDEN_STYLE);f(c).removeClass(a.COLLAPSE_HEADING_ICON).addClass(a.EXPAND_HEADING_ICON)};return{selectionUpdate:function(a,d){return c.ccSelectionUpdate(a,
d)},registerFeature:function(){c.registerFeature({featureName:a.FEATURE_NAME,featureAttribution:a.FEATURE_ATTRIBUTION},h)},cardExpanderListener:function(){c.cardExpanded(a.FEATURE_NAME)},ccSelectionsClear:function(){c.ccSelectionsClear(a.FEATURE_NAME)}}});"use strict";m.when("A","vas-metrics-publisher","vas-prepurchase-setting").execute("vas-prepurchase-controller",function(d,c,a){var f=d.$,h=function(){f("#vas-prepurchase-details-redirect").undelegate("click");f("#vas-prepurchase").delegate("#vas-prepurchase-details-redirect",
"click",function(){c.logUeMetricIncreaseCount("vas_prepurchase_details_redirect")})};d.off("vas:widgetname:prePurchase");d.on("vas:widgetname:prePurchase",function(){h();a.fetchPrepurchaseSettings()})});"use strict";m.when("A","vas-common-settings","vas-metrics-publisher","ready").register("vas-prepurchase-setting",function(d,c,a){var f={};return{fetchPrepurchaseSettings:function(){"undefined"!==typeof c.getSetting("widgetBaseVM")&&(f.productAsin=c.getSetting("widgetBaseVM").productAsin);f.impressionReftag=
c.getSetting("prepurchaseWidgetVM").impressionReftag;a.logRefTag(f.impressionReftag,"LocalServicesWidget","Impression",f.serviceAsin,null,null,f.productAsin,null,null);a.logUeMetricIncreaseCount("vas_prepurchase_gv")}}});"use strict";m.register("pre-check-disabled",function(){return{isDisabled:!0}});"use strict";m.register("vas-item-assocation-group-migration-uds",function(){return{isEnabled:!0}});"use strict";m.register("price-details-bottomsheet",function(){return{isEnabled:!1}});"use strict";m.when("service-options-ready").register("vas-udm-refresh-integration-weblab",
function(){return{isEnabled:!1}});"use strict";m.register("vas-postal-code-metrics-weblab",function(){return{isEnabled:!1}});"use strict";m.register("vas-add-item-data",function(){return{AddItemData:function(){return{construct:function(d,c,a){this.asin=d;this.offerListingId=c;this.quantity=a;return this},setItemAssociation:function(d){this.additionalParameters===u&&(this.additionalParameters={});this.additionalParameters.itemAssociation=d;return this}}}}});"use strict";m.register("vas-mandatory-uds-price-override-weblab",
function(){return{isEnabled:!1}})});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,e=h?h("VasDPInstrumentationMetrics",""):g;e.guardFatal?e.guardFatal(f)(e,window):e.execute(function(){f(e,window)})})(function(f,g,h){f.register("vas-dp-instrumentation-config",function(){return{SCHEMA_ID:"vas.instrumentation.metrics.VasInstrumentationMetrics.5",PRODUCER_ID:"vas-discovery"}});f.register("vas-dp-postal-code-format-config",function(){return{MARKETPLACE_TO_NON_UCI_LENGTH:{us:5,de:5,"in":6,jp:8,fr:5,
it:5,es:5}}});f.register("vas-dp-instrumentation-get-marketplace",function(){return{marketplace:"us"}});f.register("vas-dp-instrumentation-exception-logger",function(){return{logDataTypeException:function(e,b){b={message:"Incorrect data type for param: "+b};"undefined"!==typeof g.ueLogError&&ueLogError(b,{logLevel:"WARN",attribution:"Vas dp instrumentation metricId: "+e})}}});f.when("A","vas-dp-instrumentation-get-marketplace","vas-dp-postal-code-format-config").register("vas-dp-instrumentation-postal-code-formatter",
function(e,b,d){return{format:function(c){var a=b.marketplace,e=d.MARKETPLACE_TO_NON_UCI_LENGTH[a];return"gb"===a||"ca"===a?(c=c.split(" "),a="",1<c.length&&2<=c[0].length&&4>=c[0].length&&(a=c[0],"undefined"!==c[1][0]&&(a=a+" "+c[1][0])),a):"undefined"!==e?c.slice(0,e):c}}});f.register("vas-dp-instrumentation-time-formatter",function(){var e=function(b){return(10>b?"0":"")+b};return{formatTime:function(b){return b.getFullYear()+"-"+e(b.getMonth()+1)+"-"+e(b.getDate())+" "+e(b.getHours())+":"+e(b.getMinutes())+
":"+e(b.getSeconds())}}});f.when("vas-dp-instrumentation-config","vas-dp-instrumentation-time-formatter").register("vas-dp-instrumentation",function(e,b){return{DetailPageInstrumentation:function(d){this.pagePath=location.href;this.customerLocalTime=b.formatTime(new Date);this.metricId=d.metricId;this.obfuscatedCustomerId=d.obfuscatedCustomerId||"";this.widgetName=d.widgetName||"";this.productAsin=d.productAsin;this.productPrice=d.productPrice;this.selectedUpsellAsin=d.selectedUpsellAsin;this.selectedUpsellPrice=
d.selectedUpsellPrice;this.upsellAsins=d.upsellAsins;this.postalCode=d.postalCode;this.merchantId=d.merchantId;this.pageType=d.pageType||"LocalServicesWidget";this.subPageType=d.subPageType||"Impression";this.hitType=d.hitType||"popUp";this.isCritical=d.isCritical;this.deviceType=d.deviceType;this.promo=d.promo;this.isMbcClick=d.isMbcClick;this.isBuyBoxAvailable=d.isBuyBoxAvailable;this.deviceType=d.deviceType;this.postPurchaseUID=d.postPurchaseUID;this.experimentalData=d.experimentalData;this.payload=
function(){var b={},a;for(a in this)"function"!==typeof this[a]&&(b[a]=this[a]);return b};this.publishMetrics=function(){g.ue&&ue.event&&"undefined"!==typeof this.metricId&&ue.event(this.payload(),e.PRODUCER_ID,e.SCHEMA_ID)}}}});f.when("vas-dp-instrumentation","vas-dp-instrumentation-exception-logger","vas-dp-instrumentation-postal-code-formatter").register("vas-dp-instrumentation-builder",function(e,b,d){return{DetailPageInstrumentationBuilder:function(c){return{metricId:c,obfuscatedCustomerId:"",
setWidgetName:function(a){"string"===typeof a?this.widgetName=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"widgetName");return this},setProductAsin:function(a){"string"===typeof a?this.productAsin=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"productAsin");return this},setProductPrice:function(a){"string"===typeof a?this.productPrice=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"productPrice");return this},setSelectedUpsellAsin:function(a){"string"===
typeof a?this.selectedUpsellAsin=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"selectedUpsellAsin");return this},setSelectedUpsellPrice:function(a){"string"===typeof a?this.selectedUpsellPrice=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"selectedUpsellPrice");return this},setUpsellAsins:function(a){if("object"===typeof a)this.upsellAsins=a;else if("string"===typeof a)try{this.upsellAsins=JSON.parse(a)}catch(k){g.ueLogError&&g.ueLogError(k,{logLevel:"ERROR",attribution:"error in parsing upsellAsin"})}else"undefined"!==
typeof a&&null!==a&&b.logDataTypeException(c,"upsellAsins");return this},setPostalCode:function(a){"string"===typeof a?this.postalCode=d.format(a):"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"postalCode");return this},setMerchantId:function(a){"string"===typeof a?this.merchantId=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"merchantId");return this},setPageType:function(a){"string"===typeof a?this.pageType=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,
"pageType");return this},setSubPageType:function(a){"string"===typeof a?this.subPageType=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"subPageType");return this},setHitType:function(a){"string"===typeof a?this.hitType=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"hitType");return this},setIsCritical:function(a){"boolean"===typeof a?this.isCritical=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"isCritical");return this},setPromo:function(a){"boolean"===
typeof a?this.promo=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"promo");return this},setIsBuyBoxAvailable:function(a){"boolean"===typeof a?this.isBuyBoxAvailable=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"isBuyBoxAvailable");return this},setIsMbcClick:function(a){"boolean"===typeof a?this.isMbcClick=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"isMbcClick");return this},setDeviceType:function(a){"string"===typeof a?this.deviceType=a:"undefined"!==
typeof a&&null!==a&&b.logDataTypeException(c,"deviceType");return this},setPostPurchaseUID:function(a){"string"===typeof a?this.postPurchaseUID=a:"undefined"!==typeof a&&null!==a&&b.logDataTypeException(c,"postPurchaseUID");return this},addExperimentalData:function(a,b){"undefined"===typeof this.experimentalData&&(this.experimentalData={});"string"===typeof b&&(this.experimentalData[a]=b);return this},build:function(){return new e.DetailPageInstrumentation(this)}}}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPagePromotionalBundleAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("DeliveryStaticPackard",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","GLUXWidget").execute(function(a,b){a.on("packard:glow:destinationChangeAll",function(){c.location.reload()})});b.when("A","GlowTriggerMetrics","a-modal").register("dpContextualIngressPtTrigger",function(a,c,f){function b(d){c.logGLOWTriggerCountFromIngress(c.getEvents().cip.desktop);
var e=f.get(a.$("#nav-global-location-slot"));e&&(d.$event.preventDefault(),e.show())}a.declarative("dpContextualIngressPt","click",function(a){b(a)});return{showGlowModal:b}});b.when("A").register("GlowTriggerMetrics",function(a){var b={cip:{desktop:"cip.desktop",mobileWeb:"cip.mobileWeb",tabletApp:"cip.tabletApp",mobileApp:"cip.mobileApp",micron:"cip.micron"},glowTop:{tabletApp:"glow-top.tabletApp",mobileApp:"glow-top.mobileApp",micron:"glow-top.micron"},gpsOnLoad:{nativeApp:"gpsOnLoad.nativeApp"},
unknown:{nativeApp:"unknown.nativeApp"}};return{getEvents:function(){return b},logGLOWTriggerCountFromIngress:function(a){a="GLOWTrigger."+a;c.ue?c.ue.count(a,1):(a="Failed to increment metrics counter: "+a+" because window.ue is not present.",c.ueLogError&&a&&c.ueLogError({message:a},{logLevel:"ERROR",attribution:"GLOWTrigger"}))}}});b.when("BottomSheetPlugin").register("GlowOpener",function(a){return{openGlow:function(b){a.ShowBottomSheet(b)}}})});
/* ******** */
(function(k){var n=window.AmazonUIPageJS||window.P,r=n._namespace||n.attributeErrors,b=r?r("DeliveryStatic",""):n;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,n,r){k.when("A","jQuery","ready").register("DeliveryCountdownComponent",function(b,a){function g(a,b,c,d,e){this.strings=a;this.asin=b;this.deliveryMessageSectionId=c;this.countdownElementId=d;this.secondsLeft=e;this.intervalHandle=null}n.DeliveryCountdownHandler=function(a){var b=a.strings,c=a.asin,
d=a.deliveryMessageSectionId,e=a.fastCountdownElementId,m=a.cheapCountdownElementId;this.cheapCountdownTimer=this.fastCountdownTimer=null;this.start=function(a,h){0<a&&(this.fastCountdownTimer=new g(b,c,d,e,a),this.fastCountdownTimer.start());0<h&&(this.cheapCountdownTimer=new g(b,c,d,m,h),this.cheapCountdownTimer.start())};this.stop=function(){this.fastCountdownTimer&&(this.fastCountdownTimer.stop(),this.fastCountdownTimer=null);this.cheapCountdownTimer&&(this.cheapCountdownTimer.stop(),this.cheapCountdownTimer=
null)}};g.prototype.start=function(){var a=this;this.intervalHandle=b.interval(function(){a&&a.updateCountdownText()},1E3)};g.prototype.stop=function(){this.intervalHandle&&n.clearInterval(this.intervalHandle)};g.prototype.updateCountdownText=function(){this.secondsLeft--;if(0<this.secondsLeft){var b=Math.floor(this.secondsLeft/60),h=b%60;b=Math.floor(b/60);var c=this.secondsLeft%60,d=this.strings.inNext,e=1<b?this.strings.hours:this.strings.hour,m=1<h?this.strings.minutes:this.strings.minute,w=1<
c?this.strings.seconds:this.strings.second,g=this.strings.timeSeperator;h=0<b&&0<h?b+g+e+g+h+g+m+g+d:0<b&&0===h?b+g+e+d:0===b&&0<h?h+g+m+d:c+g+w+d;a(this.countdownElementId).html(h)}else this.stop(),h="\x3ca href\x3d'javacript:window.location.reload();'\x3e"+this.strings.refreshTimeout+"\x3c/a\x3e",a(this.deliveryMessageSectionId).html(h)}});k.when("A","jQuery","LUXContext").register("LUXController",function(b,a,g){function l(){return{addressLabel:m,addressId:w,obfuscatedId:y,countryCode:f,zipCode:t,
state:u,city:x,district:p,locationType:v}}function h(a){m=a.addressLabel;w=a.addressId;y=a.obfuscatedId;f=a.countryCode;t=a.zipCode;u=a.state;x=a.city;p=a.district;v=a.locationType}function c(a,f,d){a=b.copy(a);a.deviceType=g.deviceType;a.pageType=e;a.actionSource="locux";b.post("/gp/delivery/ajax/address-change.html",{contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",params:a,success:function(a){if(a.sembuUpdated){a.address&&h(a.address);var c=l();g.fullPageRefresh?(k.when("LUXMetrics").execute(function(a){a.logLocationChange(c.locationType)}),
n.location.reload()):(b.trigger("DeliveryAddressDropdown_OnSembuUpdateSuccess",c),b.trigger("DeliveryAddressDropdown_OnAddressChange",c),f&&f(),k.when("LUXMetrics").execute(function(a){a.logLocationChange(c.locationType)}))}else d&&d()},error:function(){b.trigger("DeliveryAddressDropdown_OnSembuUpdateFail",l());d&&d()}})}var d=!1,e=null,m,w,y,f,t,u,x,p,v;return{locationChangeEventName:"DeliveryAddressDropdown_OnAddressChange",locationTypes:{defaultAddress:"DEFAULT_ADDRESS",accountAddress:"ACCOUNT_ADDRESS",
lockerAddress:"LOCKER_ADDRESS",locationInput:"LOCATION_INPUT",realmDefault:"REALM_DEFAULT",region:"REGION",country:"COUNTRY",ip2location:"IP2LOCATION"},init:function(a){k.when("LUXResponder").execute(function(f){d?b.equals(a,l())||(h(a),f.refresh()):(h(a),f.activate(),d=!0)});k.when("LUXCustom").execute(function(a){a.activate()});k.when("LUXMetrics").execute(function(a){e=a.getPageType()})},getLocationData:function(){return l()},changeLocation:function(a,b,f){c(a,b,f)}}});k.when("A","LUXDPOnly").register("LUXDPRefreshController",
function(b){function a(a){e=a;g({addressId:e.addressId,zipCode:e.zipCode,city:e.city,state:e.state,district:e.district,countryCode:e.countryCode,relatedRequestId:e.relatedRequestId});var b={asin:e.asin,merchantId:e.merchantId,deviceType:e.deviceType,smid:e.smid,wdg:e.wdg,exMerchId:e.exMerchId,oneClick:e.oneClick};k.when("UnifiedLocationUpdateHandler").execute(function(a){a.init(b);d=a});l(e.obfuscatedId);h(e.obfuscatedId)}function g(a){var d=c('#buybox select[name\x3d"quantity"]').val()||1;b.state("unifiedLocation",
{addressId:a.addressId,zipCode:a.zipCode,city:a.city,state:a.state,district:a.district,countryCode:a.countryCode,quantity:d,relatedRequestId:a.relatedRequestId})}function l(a){if(e&&e.oneClick){var d="unifiedLocation1ClickAddress";e.deviceType&&"mobileApp"===e.deviceType&&(d="addressID");a||(a=c("#"+d).data("addnewaddress"))||(a="new");d='[id\x3d"'+d+'"]';0<c(d).length&&c(d).val(a);if(e.deviceType&&e.deviceType in m&&(d=b.state("buyNowInfo"))){var f=d.urlParams;f=0<f.indexOf("addressID\x3d")?f.replace(/(addressID=)[^&]*/,
"$1"+a):f+"\x26addressID\x3d"+a;d.urlParams=f;b.state("buyNowInfo",d)}}}function h(a){e&&!e.oneClick&&"T1"===e.updateAddressForNon1Click&&(a||(a=c("#unifiedLocationAddress").data("addnewaddress")),1===c("#unifiedLocationAddress").length&&c("#unifiedLocationAddress").val(a))}var c=b.$,d=null,e=null,m={tabletApp:1,tabletLargeApp:1,iPad:1};b.on("DeliveryAddressDropdown_OnAddressChange",function(a){var c=b.state("unifiedLocation")?b.state("unifiedLocation").relatedRequestId:r;a.relatedRequestId=c;g(a);
l(a.obfuscatedId);h(a.obfuscatedId);null!==d&&(d.refresh(),b.trigger("LocationUX_OnAddressChange",a))});b.on("UnifiedLocationPostRefresh",function(){b.trigger("diodeAjaxRefreshed")});return{init:function(d){a(d)},updateFeaturesForNewQuantitySelection:function(a){g(a);null!==d&&(d.refresh(),b.trigger("LocationUX_OnAddressChange",a))}}});k.when("A","LUXController","LUXDPRefreshController","LUXDPOnly").register("LUXDPQuantityRefresh",function(b,a,g){b.declarative("quantity-dropdown","change",function(b){b=
a.getLocationData();g.updateFeaturesForNewQuantitySelection(b)})});k.when("A","detailPage:RefreshHandler","LUXDPOnly","a-state").execute(function(b,a){k.register("TwisterUpdateHandler",function(){return{init:function(a){b.state("unifiedLocation",a)},refresh:function(){var g=a.getHandlerInstance("LocationUX"),l=[],h="addressId zipCode city state district countryCode relatedRequestId".split(" ");if(g){var c=b.state("unifiedLocation"),d;for(d in c)if(c.hasOwnProperty(d)&&-1<b.$.inArray(d,h)){var e=typeof c[d];
("number"===e||"boolean"===e||"string"===e||c[d]instanceof String)&&l.push(g.getURLParamObject(d,null===c[d]?"":c[d],1))}}0<l.length&&g.doPageRefresh(l)}}})});k.when("A","LUXDPOnly","a-state").execute(function(b){k.register("UnifiedLocationUpdateHandler",function(){return{init:function(a){b.state("unifiedLocation",a)},refresh:function(){a=2;g()}}});var a=0,g=function(){var a=b.state("unifiedLocation");a.urlParams=JSON.stringify(a.urlParams);for(var e in a)if(a.hasOwnProperty(e)){var m=typeof a[e];
"number"===m||"boolean"===m||"string"===m||a[e]instanceof String||(null===a[e]?a[e]="":delete a[e])}a&&a.asin&&a.merchantId&&(b.trigger("UnifiedLocationPreRefresh"),b.ajax("/gp/product/features/unified-location/udp/refresh-features.html?_encoding\x3dUTF-8",{params:a,method:"POST",success:l,error:h,abort:c}))},l=function(){b.trigger("UnifiedLocationPostRefresh",!0)},h=function(){b.trigger("UnifiedLocationPostRefresh",!1);0<--a&&g()},c=function(a){b.trigger("UnifiedLocationPostRefresh",!1)}});k.when("A",
"jQuery","a-popover","LUXWidgetConfig","ready").execute(function(b,a,g,l){function h(c){var d=!1,e=c.selectedAddressId,m=c.selectedObfuscatedId,h=c.selectedAddressLabel,g=c.selectedCountryCode,f=c.selectedZipCode,t=c.selectedState,u=c.selectedCity,x=c.selectedDistrict,p=c.addressPopover.name,v=c.addressPopover.type,r=l.initialAddressLoadCount,z=l.addressReloadCount,q=c.deviceType,N=c.isRecognized,C=0,A=!1;this.init=function(){d||(d=!0,O())};this.destroy=function(){b.off("a:popover:beforeShow:"+p,
D);b.off("a:popover:afterHide:"+p,E);b.capabilities.tablet&&a.isFunction(b.off.orientationchange)&&b.off.orientationchange(F);a(document).undelegate("#unifiedLocationAddrInput","focus");a(document).undelegate("#unifiedLocationAddrInput","input");a(document).undelegate("#unifiedLocationSignIn","click");a(document).undelegate("#unifiedLocationAddrUpdate","click");a(document).undelegate("#unifiedLocationAccountAddrList input[type\x3dradio], #unifiedLocationPopoverSelections ul li .a-touch-link.a-touch-select",
"click");a(document).undelegate("#unifiedLocationSeeMore","click")};var G=function(){k.when(v).execute(function(a){a.get(p)&&a.get(p).hide()})},O=function(){b.on("a:popover:beforeShow:"+p,D);b.on("a:popover:afterHide:"+p,E);b.capabilities.tablet&&a.isFunction(b.on.orientationchange)&&b.on.orientationchange(F);a(document).delegate("#unifiedLocationAddrInput","focus",function(a){H()});a(document).delegate("#unifiedLocationSignIn","click",function(){var a=!0;"mobileApp"===q&&k.now("mash").execute(function(b){b&&
(a=!1,b.navstack.begin().back().end(),b.showLoginDialog({successCallback:function(){b.navstack.begin().back().forward(n.location.href).end()}}))});a&&(n.location.href=c.addressPopover.signInURL+n.location.pathname)});a(document).delegate("#unifiedLocationAddrInput","keyup",function(a){I()});a(document).delegate("#unifiedLocationAddrInput","keypress",function(a){13===(a.keyCode||a.which)&&J()});a(document).delegate("#unifiedLocationAddrUpdate","click",function(a){J()});a(document).delegate("#unifiedLocationAccountAddrList input[type\x3dradio], #unifiedLocationPopoverSelections ul li .a-touch-link.a-touch-select",
"click",function(b){b=a.parseJSON(a(this).hasClass("a-touch-link")?a(this).find("input[type\x3dhidden]").val():a(this).val());if(a(this).hasClass("a-active"))G();else if(b){var f=b.id;f!==e&&K({addressId:f,isDefaultShippingAddress:b.isDefault,addressLabel:b.label,deviceType:q},!1,a(this))}});a(document).delegate("#unifiedLocationSeeMore","click",function(a){L()});"tabletApp"===q&&n.scrollBy(0,1)},P=a("#unifiedLocationAddrInput").attr("placeholder"),I=function(){"tabletApp"===q&&(a("#unifiedLocationAddrInput").val()?
a("#unifiedLocationAddrInput").removeAttr("placeholder"):a("#unifiedLocationAddrInput").attr("placeholder",P))},J=function(){var b=a("#unifiedLocationAddrInput").val();b&&b.match(/^\d{5}$/)?K({zipCode:b,deviceType:q},!0,null):M()},D=function(f){a("#unifiedLocationInvalidInputAlert").hasClass("aok-hidden")||(a("#unifiedLocationAddrInput").val(""),H());b.capabilities.tablet&&a("#a-popover-lgtbox")&&a("#a-popover-lgtbox").css({position:"absolute",top:"0px",left:"0px",width:"100%",height:a("#a-page").css("height")});
I();A||L()},E=function(){"tabletApp"===q&&document.activeElement.blur()},F=function(){k.when(v).execute(function(a){a.get(p)&&a.get(p).refresh()})},L=function(){N&&a.ajax({type:"POST",url:"/gp/delivery/ajax/get-customer-address-list.html",contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",data:{currentAddressCount:C,loadCount:A?z:r,selectedAddressId:e,deviceType:q},dataType:"json",success:function(b){if(b){var f=b.loadedAddressCount;if(0<f){var d=b.html;d&&(a("#unifiedLocationPopoverSelections").length?
(a("#unifiedLocationPopoverSelections ul li").has("span .a-touch-link.a-touch-select").remove(),a("#unifiedLocationPopoverSelections ul").html(d+a("#unifiedLocationPopoverSelections ul").html())):a("#unifiedLocationAccountAddrList").html(d),a("#unifiedLocationTitleSelectAddress").removeClass("a-hidden aok-hidden"),a("#unifiedLocationTitleNoAddress").addClass("aok-hidden"),a("#unifiedLocationSeeMoreDiv").removeClass("a-hidden aok-hidden"),k.when(v).execute(function(a){a.get(p)&&a.get(p).updatePosition()}),
b.hasMore?a("#unifiedLocationSeeMore").removeClass("a-hidden aok-hidden"):a("#unifiedLocationSeeMore").addClass("aok-hidden"),C=f)}}A=!0},error:function(){}})},M=function(){a("#unifiedLocationAddrInput").addClass("a-form-error");a("#unifiedLocationInvalidInputAlert").removeClass("a-hidden aok-hidden");"tabletApp"===q&&(document.activeElement.blur(),a("#unifiedLocationInvalidInputAlert")[0].scrollIntoView())},H=function(){a("#unifiedLocationAddrInput").removeClass("a-form-error");a("#unifiedLocationInvalidInputAlert").addClass("aok-hidden")},
K=function(b,d,c){a.ajax({type:"POST",url:"/gp/delivery/ajax/address-change.html",contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",data:b,dataType:"json",success:function(b){if(b.sembuUpdated){if(b=b.address)e=b.addressId,m=b.obfuscatedId,h=b.addressLabel,g=b.countryCode,f=b.zipCode,t=b.state,u=b.city,x=b.district,b=h?h:(u?u+", ":"")+(t?t+" ":"")+f,a("#unifiedLocationSelectedAddressText").html(b),d&&(a("#unifiedLocationAccountAddrList input[type\x3dradio]:checked").attr("checked",
!1),a("#unifiedLocationAddrInput").val("")),a("#unifiedLocationPopoverSelections ul li .a-touch-link.a-touch-select.a-active").removeClass("a-active"),c&&c.hasClass("a-touch-link")&&c.addClass("a-active");G();B("DeliveryAddressDropdown_OnSembuUpdateSuccess");B("DeliveryAddressDropdown_OnAddressChange")}else b.isValidAddress||M()},error:function(){B("DeliveryAddressDropdown_OnSembuUpdateFail")}})},B=function(a){b.trigger(a,{addressId:e,obfuscatedId:m,countryCode:g,zipCode:f,state:t,city:u,district:x})}}
k.register("DeliveryAddressDropdown",function(){var a;return{init:function(b){a&&a.destroy();(a=new h(b)).init()}}})});k.when("A","jQuery","LUXContext","LUXWidgetConfig","LUXUtils","LUXController","LUXMetrics","ready").register("LUXResponder",function(b,a,g,l,h,c,d){function e(b){a("#unifiedLocationAddrInput").trigger("updateAlerts",[b]);1===b?(a("#unifiedLocationAddrInput").addClass("a-form-error"),a("#LUXInvalidZipCodeAlert").width(a("#LUXInvalidZipCodeAlert").parent().width()).removeClass("aok-hidden"),
a("#LUXMilitaryZipCodeAlert").addClass("aok-hidden")):2===b?(a("#unifiedLocationAddrInput").removeClass("a-form-error"),a("#LUXInvalidZipCodeAlert").addClass("aok-hidden"),a("#LUXMilitaryZipCodeAlert").width(a("#LUXMilitaryZipCodeAlert").parent().width()).removeClass("aok-hidden")):3===b&&(a("#unifiedLocationAddrInput").removeClass("a-form-error"),a("#LUXInvalidZipCodeAlert").addClass("aok-hidden"),a("#LUXMilitaryZipCodeAlert").addClass("aok-hidden"))}function m(b){a(".lux-location-label").html(h.generateLocationLabel(b))}
function w(f){a("#LUXAddressSelections input[type\x3dradio]:checked").attr("checked",!1);var d=a("#LUXAddressSelections .a-declarative").has(".a-radio input[type\x3dradio]");f=f.addressId;for(var c=d.length-1;0<=c;c--)if(b.parseJSON(d[c].getAttribute("data-lux-address-selection")).addressId===f){a(".a-radio input[type\x3dradio]",d[c]).attr("checked",!0);break}}function y(b){b=b.locationType===c.locationTypes.locationInput&&b.zipCode?b.zipCode:"";a("#unifiedLocationAddrInput").trigger("updateZipCodeField",
b);a("#unifiedLocationAddrInput").val(b);e(3)}function f(a){k.when("a-dropdown").execute(function(f){f=f.getSelect(l.countrySelectorComponentName);b.objectIsEmpty(f)||(a.locationType===c.locationTypes.country||a.locationType===c.locationTypes.region||a.locationType===c.locationTypes.ip2location&&!a.state?f.setValue(h.mapLocationDataToCode(a)):f.setValue(""))})}function t(){b.post("/gp/delivery/ajax/get-country-selections.html",{contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",params:h.prepareCountrySelectionGeneratorInput(),
success:function(b){a("#unifiedLocationCountrySelectionDiv").html(b);f(c.getLocationData())}})}function u(a){c.changeLocation(a.data,null,function(){w(c.getLocationData())})}function x(a){c.changeLocation(h.mapCodeToLocationData(a.value),null,function(){f(c.getLocationData())})}function p(){var b=a("#unifiedLocationAddrInput").val();h.validateZipCode(b)?c.changeLocation({zipCode:h.preprocessZipCode(b),locationType:c.locationTypes.locationInput},function(){e(3)},function(){e(1)}):h.isMilitaryZipCode(b)?
e(2):e(1)}function v(){k.when(l.addressSelectorComponentType).execute(function(a){a.get(l.addressSelectorComponentName)&&a.get(l.addressSelectorComponentName).hide()})}function r(){var b=a("#LUXAddressSelections .a-radio"),f=a("#LUXAddressSelections .a-radio.aok-hidden");b=b.length===f.length;f.slice(0,b?l.initialAddressLoadCount:l.addressReloadCount).removeClass("aok-hidden");0===a("#LUXAddressSelections .a-radio.aok-hidden").length&&(a("#LUXSeeMoreAddressLink").addClass("aok-hidden"),a("#LUXAddressActionSeparator").addClass("aok-hidden"));
b||d.logEvent(d.getEvents().click.seeMore)}function z(a){m(a);w(a);y(a);h.shouldPopulateCountrySelector()&&f(a);v()}function q(){var f=c.getLocationData();y(f);g.isRecognizedCustomer&&0===a("#LUXAddressSelections .a-radio").length&&0===a("#LUXNoAddressNote").length&&b.get("/gp/delivery/ajax/get-address-selections.html",{params:{currentAddressId:f.addressId,deviceType:g.deviceType,isOneClickFromContext:g.isOneClick,clientPage:g.clientPage},success:function(b){b&&(a("#unifiedLocationTitleNoAddress").remove(),
a("#unifiedLocationAccountAddrList").remove(),a("#unifiedLocationSeeMoreDiv").remove(),a("#unifiedLocationTitleSelectAddress").remove(),a(".lux-address-selector-divider").before(b),r())}});!a.trim(a("#unifiedLocationCountrySelectionDiv").html()).length&&h.shouldPopulateCountrySelector()&&t(f);d.logWidgetView(d.getEvents().view.addressSelector)}return{activate:function(){var f=c.getLocationData();d.logPageView(f.locationType);f.locationType===c.locationTypes.region&&m(f);b.on("a:popover:beforeShow:"+
l.addressSelectorComponentName,q);y(f);b.on(c.locationChangeEventName,z);b.declarative("lux-address-selection",["change"],u);a(document).delegate("#unifiedLocationAddrInput","keypress",function(a){13===a.which&&p()});a(document).delegate("#unifiedLocationAddrInput","focus",function(){e(3)});a(document).delegate("#unifiedLocationAddrUpdate","click",p);a(document).delegate("#unifiedLocationSignIn","click",function(){d.logEvent(d.getEvents().click.signIn);var a=l.signInURL+n.location.pathname;"Search"===
d.getPageType()&&(a+=n.location.search);n.location.href=a});a(document).delegate("#LUXSeeMoreAddressLink","click",r);a(document).delegate(".lux-manage-address-link","click",function(a){d.logEvent(d.getEvents().click.manageAddressBook);return!0});b.on("a:dropdown:"+l.countrySelectorComponentName+":select",x)},refresh:function(a){z(c.getLocationData())}}});k.declare("LUXWidgetConfig",{addressSelectorComponentName:"LUXAddressSelector",addressSelectorComponentType:"a-popover",countrySelectorComponentName:"LUXCountrySelector",
countrySelectorComponentType:"a-dropdown",initialAddressLoadCount:5,addressReloadCount:5,signInURL:"/gp/sign-in.html?ie\x3dUTF8\x26useRedirectOnSuccess\x3d1\x26path\x3d"});k.when("A","jQuery","LUXController","RegionNames","ready").register("LUXRegionData",function(b,a,g,l){function h(a){if(b.objectIsEmpty(a)||!a.countryCode||!a.zipCode)return null;for(var d in c)if(c.hasOwnProperty(d)&&b.reduce(c[d],function(e,h,g){return e&&!b.objectIsEmpty(a[g])&&b.equals(a[g],c[d][g])},!0))return d;return null}
var c={"GB-ML":{countryCode:"GB",zipCode:"KA10 6EB"},"GB-NI":{countryCode:"GB",zipCode:"BT1 3ES"},"GB-JE":{countryCode:"GB",zipCode:"JE2 4QA"},"GB-IS":{countryCode:"GB",zipCode:"ZE1 0BX"},"GB-BF":{countryCode:"GB",zipCode:"BFPO 204"},"GB-HI":{countryCode:"GB",zipCode:"PH41 4PU"},"DE-ML":{countryCode:"DE",zipCode:"60313"},"DE-GI":{countryCode:"DE",zipCode:"27498"},"FR-ML":{countryCode:"FR",zipCode:"75001"},"FR-CH":{countryCode:"FR",zipCode:"20000"},"FR-GP":{countryCode:"FR",zipCode:"97100"},"FR-GY":{countryCode:"FR",
zipCode:"97300"},"FR-MC":{countryCode:"FR",zipCode:"98000"},"FR-MQ":{countryCode:"FR",zipCode:"97200"},"FR-NC":{countryCode:"FR",zipCode:"98800"},"FR-PF":{countryCode:"FR",zipCode:"98700"},"FR-RE":{countryCode:"FR",zipCode:"97400"},"FR-SB":{countryCode:"FR",zipCode:"97133"},"FR-SM":{countryCode:"FR",zipCode:"97150"},"FR-SP":{countryCode:"FR",zipCode:"97500"},"FR-WF":{countryCode:"FR",zipCode:"98611"},"FR-YT":{countryCode:"FR",zipCode:"97600"},"IT-ML":{countryCode:"IT",zipCode:"20125"},"IT-II":{countryCode:"IT",
zipCode:"09121"},"ES-ML":{countryCode:"ES",zipCode:"28004"},"ES-BI":{countryCode:"ES",zipCode:"07003"},"ES-CI":{countryCode:"ES",zipCode:"35005"},"BR-SP":{countryCode:"BR",zipCode:"01319900"}};return{getRegions:function(){return c},mapLocationDataToRegionCode:function(a){return h(a)},mapRegionCodeToLocationData:function(b){b=c.hasOwnProperty(b)?a.extend({},{addressLabel:l[b],countryCode:c[b].countryCode,zipCode:c[b].zipCode,state:c[b].state,city:c[b].city,locationType:g.locationTypes.region}):null;
return b}}});k.when("A","jQuery","ready").register("LUXRegionConfig",function(b,a){var g=[],l="AD AE AF AG AI AL AM AN AO AQ AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BQ BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EH ER ES ET FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS XK YE YT ZA ZM ZW".split(" "),
h=/^\d{5}([ \-]\d{4})?$/,c=/^[ \t]*([AFD](\.?)([ \t]?)P(\.?)([ \t]?)O(\.?)[ \t]*[A-Z]{2}[ \t]*[0-9]{5}([ \-][0-9]{4})?)[ \t]*$/;return{getPrimarySelections:function(){return g},getSecondarySelections:function(){return l},getZipCodePattern:function(){return h},getMilitaryZipCodePattern:function(){return c},preprocessZipCode:function(a){return a.toUpperCase().trim().substring(0,5)}}});k.declare("RegionNames",{"GB-ML":"UK - Mainland","GB-BF":"UK - BFPO","GB-JE":"UK - Channel Islands","GB-IS":"UK - Islands",
"GB-NI":"UK - Northern Ireland","GB-HI":"UK - Scottish Highlands","DE-ML":"Germany - Mainland","DE-GI":"German Islands","FR-ML":"France - Mainland","FR-CH":"Corsica","FR-GP":"Guadeloupe","FR-GY":"Guyane","FR-MC":"Monaco","FR-MQ":"Martinique","FR-NC":"New Caledonia","FR-PF":"French Polynesia","FR-RE":"Reunion","FR-SB":"Saint Barthélemy","FR-SM":"Saint Martin","FR-SP":"Saint Pierre and Miquelon","FR-WF":"Wallis and Futuna Islands","FR-YT":"Mayotte","IT-ML":"Italy - Mainland","IT-II":"Italian Islands",
"ES-ML":"Spain - Mainland","ES-BI":"Spain - Balearic Islands","ES-CI":"Spain - Canary Islands, Ceuta and Melilla","BR-SP":"Brazil"});k.declare("CountryNames",{AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Aland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",
BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Saint Eustatius and Saba",BR:"Brazil",BS:"Bahamas, The",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, The Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",
CO:"Colombia",CR:"Costa Rica",CS:"Serbia and Montenegro",CU:"Cuba",CV:"Cape Verde",CW:"Curaçao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",
GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia, The",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and the McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",
IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",
ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, The Former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",
OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territories",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",
SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",
US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",YU:"Yugoslavia",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"});k.when("A","jQuery","LUXController","LUXRegionData","LUXRegionConfig","LUXContext","CountryNames","RegionNames").register("LUXUtils",function(b,a,g,l,h,c,d,e){function m(a){return!b.objectIsEmpty(a)&&
a.countryCode&&d.hasOwnProperty(a.countryCode)?b.equals(a.locationType,g.locationTypes.country)?a.countryCode:b.equals(a.locationType,g.locationTypes.region)?l.mapLocationDataToRegionCode(a):l.mapLocationDataToRegionCode(a)||a.countryCode:null}function k(a){return d.hasOwnProperty(a)?d[a]:e.hasOwnProperty(a)?e[a]:null}function n(a){var f={};if(!b.objectIsEmpty(a))for(var c=a.length,d=0;d<c;d++)f[k(a[d])]=a[d];return f}return{getNameForCode:function(a){return k(a)},mapCodeToLocationData:function(a){a=
a?d.hasOwnProperty(a)?{countryCode:a,locationType:g.locationTypes.country,district:a}:l.mapRegionCodeToLocationData(a):null;return a},mapLocationDataToCode:function(a){return m(a)},generateLocationLabel:function(a){a.addressLabel?a=a.addressLabel:a.locationType!==g.locationTypes.region&&a.locationType!==g.locationTypes.country&&a.zipCode?(h.formatZipCodeForAddressLabel&&(a.zipCode=h.formatZipCodeForAddressLabel(a.zipCode)),a=a.city||a.state?h.generateDiffLocationLabelForZip?h.generateDiffLocationLabelForZip(a):
(a.city?a.city+", ":"")+(a.state?a.state+" ":"")+a.zipCode:h.formatZipCodeForAddressLabel?a.zipCode:k(m(a))):a=k(m(a));return a},prepareCountrySelectionGeneratorInput:function(){return{deviceType:c.deviceType,primarySelections:JSON.stringify(n(h.getPrimarySelections())),primarySelectionsOrder:JSON.stringify(h.getPrimarySelections()),secondarySelections:JSON.stringify(n(h.getSecondarySelections()))}},validateZipCode:function(a){return!b.objectIsEmpty(a)&&h.getZipCodePattern().test(a.toUpperCase())},
preprocessZipCode:function(a){return h.preprocessZipCode(a)},isMilitaryZipCode:function(a){return!b.objectIsEmpty(a)&&h.getMilitaryZipCodePattern().test(a.toUpperCase())},shouldPopulateCountrySelector:function(){var a=!0;"undefined"!==typeof c.shouldPopulateCountrySelector&&(a=c.shouldPopulateCountrySelector);return a}}});k.when("A","jQuery","LUXContext","ready").register("LUXMetrics",function(b,a,g){function l(a,b){n.ueLogError&&a&&n.ueLogError({message:a},{logLevel:b||"ERROR",attribution:"LocationUX"})}
function h(a){n.ue?n.ue.count(a,(n.ue.count(a)||0)+1):l("Failed to increment metrics counter: "+a+" because window.ue is not present.","ERROR")}function c(){var a;if(a=n.ue_pty)a:{a=n.ue_pty;for(var c in d)if(d.hasOwnProperty(c)&&-1!==b.indexOfArray(d[c],a)){a=!0;break a}a=!1}return a?n.ue_pty:"unrecognizedPage"}var d={detail:["Detail","DetailAW","DetailWebView","TabletUDP"],search:["Search","SearchAW"],offerListing:["OfferListing","OfferListingAW","OfferListingMobileAppAW"]},e={click:{signIn:"click.signIn",
seeMore:"click.seeMore",manageAddressBook:"click.manageAddressBook"},view:{page:"view.page",addressSelector:"view.addressSelector",countrySelector:"view.countrySelector"},selection:"selection",override:"override"};return{getPageType:function(){return c()},getEvents:function(){return e},logLocationChange:function(a){k.when("LUXController").execute(function(k){var m=c(),f="LocationUX."+m;f=b.equals(a,k.locationTypes.locationInput)||b.equals(a,k.locationTypes.realmDefault)||b.equals(a,k.locationTypes.ip2location)?
f+("."+e.override+"."+a):f+("."+e.selection+"."+a);b.equals(a,k.locationTypes.defaultAddress)||b.equals(a,k.locationTypes.accountAddress)||b.equals(a,k.locationTypes.lockerAddress)||(f+="."+(g.isRecognizedCustomer?"recognized":"unrecognized"));-1!==b.indexOfArray(d.detail,m)&&g.isRecognizedCustomer&&(f+="."+(g.isOneClick?"1Click":"Non1Click"));h(f)})},logPageView:function(a){k.when("LUXController").execute(function(k){var l=c(),f="LocationUX."+l+"."+e.view.page+"."+a;b.equals(a,k.locationTypes.defaultAddress)||
b.equals(a,k.locationTypes.accountAddress)||b.equals(a,k.locationTypes.lockerAddress)||(f+="."+(g.isRecognizedCustomer?"recognized":"unrecognized"));-1!==b.indexOfArray(d.detail,l)&&g.isRecognizedCustomer&&(f+="."+(g.isOneClick?"1Click":"Non1Click"));h(f)})},logWidgetView:function(a){var e=c();a="LocationUX."+e+"."+a+"."+(g.isRecognizedCustomer?"recognized":"unrecognized");-1!==b.indexOfArray(d.detail,e)&&g.isRecognizedCustomer&&(a+="."+(g.isOneClick?"1Click":"Non1Click"));h(a)},logEvent:function(a){a=
"LocationUX."+c()+"."+a;h(a)},logError:function(a,b){l(a,b)}}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("AmazonsChoiceAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","a-popover","ready").execute(function(a,b){var g=a.$;g(document).delegate("#why-we-love-this-product-link","click mouseenter",function(a){b.get(g("#ac-badge-popover-declarative")).show();a.preventDefault()})});"use strict";b.when("A","atf","dp-refresh-handler","twisterModule","ac-state-utils").execute(function(a,
b,g,c,d){d.addACStateParamsToPageRefreshAjaxUrl()});"use strict";b.when("A","atf","dp-refresh-handler","ready").register("ac-state-utils",function(a,b,c){return{addACStateParamsToPageRefreshAjaxUrl:function(){var b={featureName:"acBadge"},d=a.$,e=a.state("acState");if(e){var f={};e.acAsin&&(f.acAsin=e.acAsin);e.modalityMetadata&&(f.ac_md=e.modalityMetadata);d.isEmptyObject(f)||(new c(b)).addParams(f)}}}})});
/* ******** */
(function(m){var t=window.AmazonUIPageJS||window.P,B=t._namespace||t.attributeErrors,b=B?B("ProductBundleUIAssets",""):t;b.guardFatal?b.guardFatal(m)(b,window):b.execute(function(){m(b,window)})})(function(m,t,B){m.when("A","bundle-constants","bundle-logger","a-carousel-framework","a-carousel-constants","p-detect").register("bundles-card",function(b,c,e,d,a,k){function y(a){var f=a.getAttr(u.ATTR_MAX_HEIGHT);f&&b.isFiniteNumber(f)||(f=1);var n=f;a.dom.$carousel.children("li").not("."+u.EMPTY_CARD_CLASS).each(function(a,
f){a=p(f).outerHeight();n=Math.max(a,n)});n>f&&(a.setAttr(u.ATTR_MAX_HEIGHT,n),k.capabilities.transition?1===f?a.dom.$viewport.height(n):b.animate(a.dom.$viewport,{height:n},a.getAttr(u.ATTR_HEIGHT_ANIMATION_SPEED),"linear"):a.dom.$viewport.height(n),a.updateDimensionsCache({viewport:{height:n,outerHeight:n}}))}function r(p){var f=p.getAttr(a.PAGE_NUMBER),n=p.getAttr(a.TOTAL_PAGES),v=p.dom.$container.find(u.prevButton);p=p.dom.$container.find(u.nextButton);v.css("visibility",1===f?"hidden":"visible");
p.css("visibility",f>=n?"hidden":"visible")}function x(){d.onInit("bundle-drawer-carousel",function(a){y(a);r(a);b.on(u.pageChangeEvent,function(p){var n=p.oldValue,v=p.newValue,c=a.dom.$carousel.children("li").not("."+u.EMPTY_CARD_CLASS);(n=v>=n?c.first():c.last())&&(n=n.find("a"))&&n.focus();z||(z=!0,e.logCount(g.SCROLL,1),f.isDevices&&e.logRefTag(h.INGRESS_SCROLLED+f.landingAsin,f.landingAsin));r(p.carousel)});b.on(u.repaintEvent,function(a){r(a.carousel)})})}function m(){var a=p(w.bundlesCardBundles),
f=0,n=0,v=0;b.each(a,function(a,c){a=p(a);c=a.find(w.bundleTitle);c.height()>f&&(f=c.height());c=a.find(w.bundleImage);c.height()>n&&(n=c.height());a=a.find(w.bundleSavings);a.height()>v&&(v=a.height())});b.each(a,function(a,c){p(a).find(w.bundleTitle).height(f);p(a).find(w.bundleImage).height(n);p(a).find(w.bundleSavings).height(v)})}var p=b.$,f={},z=!1,u={pageChangeEvent:"a:carousel:bundle-drawer-carousel:change:pageNumber",repaintEvent:"a:carousel:bundle-drawer-carousel:repaint",prevButton:".a-carousel-goto-prevpage",
nextButton:".a-carousel-goto-nextpage",ATTR_MAX_HEIGHT:"maxHeight",ATTR_HEIGHT_ANIMATION_SPEED:"height_animation_speed",EMPTY_CARD_CLASS:"a-carousel-card-empty"},w={alexaBadgeContainer:".amazon-certified-badge-container",bundlesBottomDivider:".bundles-bottom-divider",bundlesCardCarousel:"#bundles-card .a-carousel-viewport",bundlesCardBundles:".bundles-carousel .bundle",bundlesCardState:"#bundles-card-state",bundlesFeature:"#bundles-feature",bundleSavings:".bundle-savings-line",bundleImage:".bundle-image",
bundleTitle:".bundle-title",inlineTwister:"#twister-plus-mobile-inline-twister-container",vas:"#vas-ppd-fake-twister-mobile",kso:"#special-offers-information",devices_mc6:"#atfCenter10_feature_div"},g={SCROLL:"bundlesCard.desktop.ingress.scroll",WIDGET_SHOWN:"bundlesCard.desktop.ingress.shown"},h={INGRESS_SHOWN:"amzdv_tplus_dp_dsk_imp_",INGRESS_SCROLLED:"amzdv_tplus_dp_dsk_scroll_"};b.on(c.BUNDLES_CARD_READY,function(){z=!1;var a=p(w.bundlesCardState);f.currency=a.data("currencysymbol");f.aapiEndpoint=
a.data("aapiendpoint");f.language=a.data("language");f.csrfToken=a.data("csrftoken");f.marketplaceId=a.data("marketplaceid");f.sessionId=a.data("sessionid");f.landingAsin=a.data("landingasin");f.isDevices=a.data("isdevices");f.currencyOfPreference=a.data("currencyofpreference");f.isUnifiedCxView=a.data("isunifiedcxview");m();x();e.logCount(g.WIDGET_SHOWN,1);f.isDevices&&e.logRefTag(h.INGRESS_SHOWN+f.landingAsin,f.landingAsin);p(w.alexaBadgeContainer).length&&p(w.bundlesBottomDivider).addClass("aok-hidden")});
return f});"use strict";m.when("A").register("aapi-add-to-cart-helper",function(b){var c=b.$,e=["true","false"],d=b.createClass({init:function(a,c,d){this.csrfToken=a||"";this.marketplace=c||"";this.ajaxEndpoint=d||"";this.asinDataList=[];this.refTag=""},setAsinDataList:function(a){if(Array.isArray(a))return this.asinDataList=a,this},addSingleAsinData:function(a){if(a.asin&&a.offerId&&a.quantity)return this.asinDataList.push(a),this;m.log("asin, offerListingId or quantity of single asinData is empty",
"WARN")},setRefTag:function(a){this.refTag=a;return this},sendRequest:function(a,d){var b=this;this.asinDataList.length?c.ajax({url:this.constructAjaxUrl(),type:"POST",data:this.constructAddToCartRequest(this.asinDataList),xhrFields:{withCredentials:!0},headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":this.csrfToken,"x-amzn-encrypted-slate-token":c('meta[name\x3d"encrypted-slate-token"]').prop("content")},
success:function(c){b.verifyCartApiResponse(c)?a(c):d()},error:d}):(m.log("Invalid request with an empty asin list to CartAPI","WARN"),d())},verifyCartApiResponse:function(a){return"cart.add-items/v1"===a.type&&"items"in a.entity&&0<a.entity.items.length&&"id"in a.entity.items[0]&&this.isCartCountResponseValid(a.entity.count)},isCartCountResponseValid:function(a){return a&&"cart.count/v1"===a.type&&"items"in a.entity},constructAjaxUrl:function(){var a="https://"+this.ajaxEndpoint+"/api/marketplaces/"+
this.marketplace+"/cart/carts/retail/items";this.refTag&&(a+="?ref_\x3d"+this.refTag);return a},constructAddToCartRequest:function(a){for(var c=[],d=0;d<a.length;d++){var b=a[d],e={asin:b.asin,offerListingId:b.offerId,quantity:b.quantity},b=this.formatBooleanParams(b);e.additionalParameters=this.constructAdditionalParameters(b);c.push(e)}return JSON.stringify({items:c})},constructAdditionalParameters:function(a){var c={};a.hasOwnProperty("isToBeGiftWrapped")&&"boolean"===typeof a.isToBeGiftWrapped&&
(c.giftOptions={includeGiftReceipt:a.isToBeGiftWrapped});a.hasOwnProperty("isDevicePreRegistered")&&"boolean"===typeof a.isDevicePreRegistered&&(c.devicePreregistration={selected:a.isDevicePreRegistered});a.hasOwnProperty("programId")&&a.programId.length&&(c.installments={programId:a.programId});a.hasOwnProperty("incentivizedCart")&&a.incentivizedCart.length&&(c.incentivizedCart=a.incentivizedCart);a.hasOwnProperty("paymentOfferInfo")&&a.paymentOfferInfo.length&&(c.paymentOfferInfo=a.paymentOfferInfo);
return c},formatBooleanParams:function(a){for(var c in a)if(a.hasOwnProperty(c)&&"string"===typeof a[c]){var d=a[c].toLowerCase();-1!==e.indexOf(d)&&(a[c]="true"===d)}return a}});return{createRequest:function(a,c,b){return new d(a,c,b)}}});"use strict";m.when("A","bundles-card").register("bundles-secondary-view-item-models",function(b,c){function e(a){try{var c=y.grep(a.entity.images,function(a){return"MAIN"===a.variant});c&&c.length||(c=a.entity.images);return"https://m.media-amazon.com/images/I/"+
c[0].lowRes.physicalId+"."+c[0].lowRes.extension}catch(d){m.log("Unable to fetch main image for asin","ERROR")}}function d(a){try{return a.entity.displayString}catch(c){m.log("Unable to fetch title for asin","ERROR")}}function a(a,c){try{if(a[0].price&&a[0].price.entity[""+c]){var d=a[0].price.entity[""+c];if(d)return d.moneyValueOrRange.value.amount}}catch(b){m.log("Unable to fetch "+JSON.stringify(c)+" price for asin","ERROR")}}function k(a,c){r||(r=new Intl.NumberFormat(a,{style:"currency",currency:c}));
return r}var y=b.$,r,x=function(a,c){try{return"stars"===c?a.rating.hasHalfStar?a.rating.fullStarCount+.5:a.rating.fullStarCount:a.count.displayString}catch(d){m.log("Unable to fetch star rating/review count for asin","ERROR")}},A=function(a,c,d){a=a.parameters;if(a.length)for(var b=0;b<a.length;b++)if(a[b].name===c)return a[b].value;return d};return{validateProductV2Entity:function(a){return a.asin&&a.productImages.entity.images.length&&a.title.entity.displayString&&a.buyingOptions.length?!0:!1},
componentData:function(b,f){this.detailPageUrl="/dp/"+b.asin;this.imageUrl=e(b.productImages);this.itemTitle=d(b.title);if(f=a(b.buyingOptions,"basisPrice"))this.basisPrice=k(c.language,c.currencyOfPreference).format(f);b.customerReviewsSummary&&(this.starRating=x(b.customerReviewsSummary.entity,"stars"),this.ratingCount=x(b.customerReviewsSummary.entity,"count"))},recommendationItemData:function(b,f){this.asin=b.asin;this.detailPageUrl="/dp/"+b.asin;this.imageUrl=e(b.productImages);this.itemTitle=
d(b.title);b.customerReviewsSummary&&(this.starRating=x(b.customerReviewsSummary.entity,"stars"),this.ratingCount=x(b.customerReviewsSummary.entity,"count"));f=a(b.buyingOptions,"basisPrice");var r=k(c.language,c.currencyOfPreference);f&&(this.basisPrice=r.format(f));this.buyingPrice=r.format(a(b.buyingOptions,"priceToPay"));b.featureBullets&&(this.featureBullets=b.featureBullets.entity.featureBullets);b.buyingOptions[0].callToAction&&b.buyingOptions[0].callToAction.entity&&b.buyingOptions[0].callToAction.entity.addToCart&&
b.buyingOptions[0].callToAction.entity.addToCart.data&&(f=b.buyingOptions[0].callToAction.entity.addToCart.data,this.canAddToCart=A(f,"canAddToCart",!1),this.offerListingId=A(f,"offerListingId",""));b.buyingOptions[0].quantity&&b.buyingOptions[0].quantity.entity&&(this.quantityLimit=b.buyingOptions[0].quantity.entity.maxOrderQuantity)}}});"use strict";m.when("A","ready").register("bundle-state",function(b){var c=b.$,e={bundleState:"#bundle-state"};return{elements:e,getBundleASIN:function(){var b=
c(e.bundleState);if(b.length)return b.data("asin")}}});"use strict";m.when("A").register("bundles-aapi-util",function(b){var c=b.$;return{getAAPIProductData:function(b,d,a,k,m,r,x){return c.ajax({url:"https://"+b+"/api/marketplaces/"+r+"/products/"+k,type:"GET",headers:{Accept:m,"x-api-csrf-token":a,"Accept-Language":d,"x-cc-currency-of-preference":x,"x-amzn-encrypted-slate-token":c('meta[name\x3d"encrypted-slate-token"]').prop("content")},xhrFields:{withCredentials:!0}})},getProductV2ResourceInclusions:function(c){return'application/vnd.com.amazon.api+json; type\x3d"collection(product/v2)/v1"; expand\x3d"'+
c.join(",")+'"'},getCartData:function(b,d,a){return c.ajax({cache:!1,url:"https://"+b+"/api/marketplaces/"+a+"/cart/items",type:"GET",data:{filter:"RETAIL"},headers:{Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.items.request/v1"',"x-api-csrf-token":d,"x-amzn-encrypted-slate-token":c('meta[name\x3d"encrypted-slate-token"]').prop("content")},xhrFields:{withCredentials:!0}})},getFullCartCount:function(b,d,a){return c.ajax({cache:!1,
url:"https://"+b+"/api/marketplaces/"+a+"/cart/count",type:"GET",headers:{Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.count/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.count.request/v1"',"x-api-csrf-token":d,"x-amzn-encrypted-slate-token":c('meta[name\x3d"encrypted-slate-token"]').prop("content")},xhrFields:{withCredentials:!0}})},getCartSummary:function(b,d,a){return c.ajax({cache:!1,url:"https://"+b+"/api/marketplaces/"+a+"/cart/summary",type:"GET",data:{cartTypes:"RETAIL"},
headers:{Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.summary/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.summary.request/v1"',"x-api-csrf-token":d,"x-amzn-encrypted-slate-token":c('meta[name\x3d"encrypted-slate-token"]').prop("content")},xhrFields:{withCredentials:!0}})}}});"use strict";m.when("A").register("bundle-logger",function(b){b=t.ue||!1;var c=b.count||!1,e=b.log||!1,d=t.ueLogError||!1,a={ent:"all"},k=function(a,b,c,k){"INFO"!==b&&d?(null!==k&&"object"===
typeof k?k.message="["+a+"] "+k.message:k={message:"["+a+"]"},d(k,{logLevel:b,attribution:c,message:a})):"INFO"===b&&e&&e(a,c)},m=function(a,b,c){k(a,"ERROR",b,c)};return{logCount:function(a,b){if(c)return c(a,b),c(a)},logInfo:function(a,b){k(a,"INFO",b,null)},logWarning:function(a,b,c){k(a,"WARN",b,c)},logError:m,logFatal:function(a,b,c){k(a,"FATAL",b,c)},logRefTag:function(b,c){try{if(!t.csa)throw Error("CSA is not available.");var d=t.csa("Events",{producerId:"buda"});if(!b||!c)throw Error("All parameters (refTag, asin) are required.");
if(!t.ue)throw Error("Session and Request Data is not available.");var k=(new Date).toISOString(),f=(new Date(Date.now()-6E4*(new Date).getTimezoneOffset())).toISOString().slice(0,-1),e=t.opts?t.opts.customerId:t.fwcimData?t.fwcimData.customerId:"",u=t.opts?parseInt(t.opts.marketId):null;d("log",{schemaId:"buda.CSAMetrics.8",refMarker:b,userCustomerId:e,marketplaceId:u,sessionId:t.ue.sid||"",requestId:t.ue.rid||"",hitHourUtc:k,endTimeLocal:f,pageAsin:c},a)}catch(w){m(w.message,"ProductBundleUIAssets:bundle-logger",
w)}}}});"use strict";m.when("A").register("bundle-constants",function(){return{BUNDLE_LISTING_V2_READY_EVENT:"bundle-listing-V2:widget:ready",BUNDLE_LISTING_BOTTOM_SHEET_READY_EVENT:"bundle-listing:sheet:ready",BUNDLES_CARD_READY:"bundles-card-ready",BUNDLES_CARD_SECONDARY_VIEW_READY:"bundles-card-secondary-view-ready",BUNDLES_DRAWER_SIDE_SHEET_READY:"bundles-drawer-side-sheet-ready",BUNDLES_CARD_SECONDARY_VIEW_ATC_READY:"bundles-card-secondary-view-atc-ready",BUNDLES_CARD_RENDER_SECONDARY_VIEW:"bundles-card-render-secondary-view",
BUNDLES_COMPONENTS_EXPANDER_READY:"a:expander:bundle-components-expander",BUNDLES_POPOVER_BEFORE_SHOW:"a:popover:beforeShow:bundles_secondary_view",BUNDLES_POPOVER_AFTER_HIDE:"a:popover:afterHide:bundles_secondary_view",BUNDLES_TOGGLE_EXPANDER:"toggle-bundle-cards-expander",AJAX_URL:"/gp/product/ajax/bundlesAjaxExperience?asin\x3d"}});"use strict";m.when("A","bundles-card","bundle-constants","bundles-secondary-view-item-models","bundles-aapi-util","bundles-side-sheet-cart-data","a-truncate","bundles-drawer-side-sheet",
"bundle-logger","ready").register("bundles-desktop-secondary-view",function(b,c,e,d,a,k,y,r,x){function t(a){r.reset();g.post(e.AJAX_URL+a).done(function(a){a=g(E.ajaxDataWrapper).html(a);r.initialize(a)}).done(function(){b.trigger(e.BUNDLES_CARD_SECONDARY_VIEW_ATC_READY);b.trigger(e.BUNDLES_DRAWER_SIDE_SHEET_READY);g(q.bundleTitle).live("click",function(){if(c.isDevices){var a=g(this).closest(q.bundleExpander).find(q.bundleAsin).val();x.logRefTag(C.BUNDLE_TITLE_CLICKED_DESKTOP+c.landingAsin+v.UNDERSCORE+
a,c.landingAsin)}});g(q.bundleGetDealButton).live("click",function(){if(c.isDevices){var a=g(this).closest(q.bundleExpander).find(q.bundleAsin).val();x.logRefTag(C.GET_DEAL_BUNDLE_CLICKED_DESKTOP+c.landingAsin+v.UNDERSCORE+a,c.landingAsin)}})}).fail(function(){m.log("Fail to render secondary view for "+a,"ERROR")})}function p(b,n,k){var e=g(q.bundleComponentsExpander+b),u=!1;e.length&&a.getAAPIProductData(c.aapiEndpoint,c.language,c.csrfToken,n,h,c.marketplaceId,c.currencyOfPreference).done(function(a){a=
a.entities;for(var b=0;b<a.length;b++){var n=a[b].entity;if(d.validateProductV2Entity(n)){var k=n.asin,n=new d.componentData(n,c.currency),k=e.find(q.bundleComponentCard+k);f(k,n);z(k,n);k.find(l.productBuyingPriceBase).text()&&n.basisPrice&&k.find(l.productFullPrice).text(n.basisPrice)}else{u=!0;break}}e.toggleClass(v.AUI_HIDDEN_CLASS,u);r.updateContent(g(q.bundlesSecondaryViewSideSheet).html())})}function f(a,b){a.find(l.productImageUrl).attr("src",b.imageUrl);a=a.find(l.productTitle);a.attr("href",
b.detailPageUrl);a.find(l.productTitleText).append(b.itemTitle);y.get(a.find(l.productTitleTruncate)).update()}function z(a,b){if(b.starRating&&b.ratingCount){var c=b.starRating.toString().replace(".","-");a.find(l.productRatingStars).removeClass("a-star-0").addClass("a-star-"+c);a.find(l.productRatingCount).text(b.ratingCount)}}function u(a,b){var c=g(q.bundlesSecondaryView+" .primary-bundles").children("div");c.length&&(c=c.eq(0).offset().top,b=b.offset().top,a.animate({scrollTop:b-c},2E3))}function w(b,
e){var u=g(q.bundlesSecondaryView).find(n.upsellRecommendation+b),p=0;a.getAAPIProductData(c.aapiEndpoint,c.language,c.csrfToken,e,h,c.marketplaceId,c.currencyOfPreference).done(function(a){a=a.entities;for(var b=0;b<a.length;b++){var e=a[b].entity;if(d.validateProductV2Entity(e)){var h=new d.recommendationItemData(e,c.currency),e=u.find(n.accessoryAtcCard+e.asin);f(e,h);z(e,h);h.buyingPrice&&e.find(l.productBuyingPriceBase).text(h.buyingPrice);h.fullPrice&&e.find(l.productFullPrice).text(h.fullPrice);
if(h.featureBullets)for(var m=0;m<h.featureBullets.length;m++)e.find(l.featureBullet).append("\x3cli\x3e"+h.featureBullets[m]+"\x3c/li\x3e");h.quantityLimit&&k.setItemQuantityLimit(h.asin,h.quantityLimit);h.offerListingId&&h.canAddToCart&&(e.find(n.individualRecommendationAtc).find(n.accessoryOfferListingId).val(h.offerListingId),e.toggleClass(v.AUI_HIDDEN_CLASS),p++)}}0<p&&(a=u.find(n.accessoryAtcHeader),a.text(a.text().replace(v.ITEM_COUNT_PLACEHOLDER,p)),a.toggleClass(v.AUI_HIDDEN_CLASS));r.updateContent(g(q.bundlesSecondaryViewSideSheet).html())}).fail(function(){u.toggleClass(v.AUI_HIDDEN_CLASS,
!0);m.log("An error has occurred while getting accessory recommendations sub total","WARN")})}var g=b.$,h=a.getProductV2ResourceInclusions("productImages(product.product-images/v2) title(product.offer.title/v1) buyingOptions[].price(product.price/v1) customerReviewsSummary(product.customer-reviews-summary/v1) featureBullets(product.offer.feature-bullets/v1) buyingOptions[].quantity(product.quantity/v2) buyingOptions[].callToAction(product.call-to-action/v1)".split(" ")),l={productImageUrl:".item-image",
productTitle:".item-title",productTitleText:".a-truncate-full",productTitleTruncate:".a-truncate",productRatingStars:".a-star-0",productRatingCount:".component-rating-count",productBuyingPriceBase:".buying-item-price-base",productFullPrice:".full-item-price",featureBullet:".feature-bullet"},q={bundlesSecondaryView:"#bundles-secondary-view",bundleAsin:"[name\x3d'bundle-asin']",bundleExpanders:"#bundle-expander-content-",bundleExpander:".secondary-bundle-container",bundleExpanderContent:".bundle-expander-content",
bundleExpanderHeader:".bundle-expander-header",bundleComponentsExpander:".bundle-components-expander-",bundleComponentsExpanderHeader:".bundle-components-expander-header",bundleComponentsExpanderContent:".bundle-components-expander-content",bundleComponentCard:".bundle-component-card-",componentAsins:"[name\x3d'component-asins']",expanderAsins:".bundles-secondary-expander-asins",expanderComponentAsins:".bundles-secondary-expander-component-asins",bundlesSecondaryViewSideSheet:"#bundles-desktop-side-sheet",
bundleCardAsin:"input[name\x3d'bundle-card-asin']",bundleTitle:".bundle-details-title",bundleGetDealButton:".bundle-get-deal-button",relatedBundlesDivider:".related-bundles-divider"},n={individualRecommendationAtc:".bundles-drawer-individual-recommendation-add-to-cart",accessoryAtcHeader:".bundles-drawer-accessory-atc-header",accessoryOfferListingId:'[name\x3d"accessory-offer-listing-id"]',upsellRecommendation:"#bundle-upsell-recommendations-",accessoryAtcCard:"#bundle-upsell-accessory-atc-card-",
bundleAsin:".bundles-sideSheet-accessory-atc-asins",bundleAccessoryAsins:".bundles-sideSheet-accessory-atc-recommendation-asins"},v={AUI_HIDDEN_CLASS:"aok-hidden",SIDE_SHEET:"side-sheet",BUNDLES_CARD_SELECTOR:"div[id^\x3d'bundle-card']",ITEM_COUNT_PLACEHOLDER:"{NUM_OF_ITEMS}",BUNDLE_EXPANDER_HEADING_HIGHLIGHTED_CLASS:"bundle-expander-header-highlighted",BUNDLE_EXPANDER_HEADING_CLASS:"bundle-expander-header",BUNDLE_CARD_CLICKED_REFTAG:"amzdv_tplus_dp_dsk_card_clicked_",UNDERSCORE:"_",INGRESS_CARD_REFTAG:"amzdv_tplus_dp_dsk_expl_simlr_bdl_"},
E={ajaxDataWrapper:'\x3cdiv id\x3d"bundles-desktop-side-sheet-wrapper"\x3e\x3c/div\x3e'},C={BUNDLE_TITLE_CLICKED_DESKTOP:"amzdv_tplus_dp_dsk_bdp_",GET_DEAL_BUNDLE_CLICKED_DESKTOP:"amzdv_tplus_dp_dsk_bgd_"};b.on(e.BUNDLES_CARD_RENDER_SECONDARY_VIEW,function(){t(c.landingAsin)});b.on(e.BUNDLES_DRAWER_SIDE_SHEET_READY,function(){var a=g(q.bundlesSecondaryView),b=a.find(q.expanderComponentAsins),d=a.find(q.expanderAsins);b.length&&b.each(function(c){p(d[c].textContent.trim(),b[c].textContent.trim(),a)});
var f=a.find(n.bundleAsin),e=a.find(n.bundleAccessoryAsins);e.length&&e.each(function(a){w(f[a].textContent.trim(),e[a].textContent.trim())});a=g(q.bundlesSecondaryViewSideSheet);g(".ingress-card").unbind("click").click(function(b){b.preventDefault();c.isDevices&&x.logRefTag(v.INGRESS_CARD_REFTAG+c.landingAsin,c.landingAsin);r.show(function(){var b=g(q.relatedBundlesDivider);u(a,b)},!0)});c.isUnifiedCxView||g(".bundle-box-link").unbind("click").click(function(b){b.preventDefault();var n=g(this).siblings(q.bundleCardAsin).val();
c.isDevices&&(b=g(".bundle-box-link").index(b.target),x.logRefTag(v.BUNDLE_CARD_CLICKED_REFTAG+b+v.UNDERSCORE+c.landingAsin,c.landingAsin));r.show(function(b){var c=g(q.bundlesSecondaryView).find(".secondary-bundle-container input[value\x3d'"+b+"']").closest(q.bundleExpander);"false"===c.find(q.bundleExpanderContent).attr("aria-expanded")&&c.find(q.bundleExpanderHeader).click();"false"===c.find(q.bundleComponentsExpanderContent).attr("aria-expanded")&&c.find(q.bundleComponentsExpanderHeader).click();
c.find(q.bundleExpanderHeader).removeClass(v.BUNDLE_EXPANDER_HEADING_CLASS).addClass(v.BUNDLE_EXPANDER_HEADING_HIGHLIGHTED_CLASS);b=a.find(".secondary-bundle-container input[value\x3d'"+b+"']").closest(q.bundleExpander);u(a,b)},!1,n)})})});"use strict";m.when("A","MakoAmazonApiAddToCartHelper","bundle-constants","bundles-aapi-util","bundles-card","bundles-side-sheet-cart-data","bundle-logger","a-checkbox").execute("register-bundles-add-to-cart-declarative-actions",function(b,c,e,d,a,k,y,r){function t(a){a&&
a.items&&a.items.forEach(function(a){k.setCartItemQuantity(a.asin,a.quantity)})}function A(a){k.setCartTotalCount(a);m.when("nav.setCartCount").execute(function(b){b(a)})}function p(a){g(h.postAddToCartContent).find(q.subTotalContainer).toggleClass(l.AUI_HIDDEN_CLASS,!a)}function f(){d.getCartSummary(a.aapiEndpoint,a.csrfToken,a.marketplaceId).done(function(a){p(!0);a.entity&&a.entity.summary&&0<a.entity.summary.length&&g(h.postAddToCartContent).find(q.subTotalPrice).text(a.entity.summary[0].subtotal.displayString)}).fail(function(){p(!1);
m.log("An error has occurred while getting cart sub total","WARN")})}function z(a){var b=a.asin;if(g(h.atcButton+b).length){var c=r(h.accountLinkingCheckbox+b);c&&(a.isDevicePreRegistered=c.isChecked())}g(h.installmentsCheckbox+b).length&&(c=r(h.installmentsCheckbox+b))&&c.isChecked()&&(a.programId=g(h.installmentsCheckbox+b).val());return a}function u(a){var b=g(h.postAddToCartContent).find(q.proceedToCheckoutText);b.text().includes(l.ITEM_COUNT_PLACEHOLDER)?b.text(b.text().replace(l.ITEM_COUNT_PLACEHOLDER,
a)):b.text(b.text().replace(/\d+/,a))}function w(a,b,c,d){b.text(c);a.toggleClass(l.AUI_HIDDEN_CLASS,!0);d.toggleClass(l.AUI_HIDDEN_CLASS,!1)}var g=b.$,h={reachCartLimitMessage:"#bundle-reach-cart-limit-message-",atcButton:"#bundle-ajax-atc-button-",atcErrorBlock:"#bundle-ajax-atc-error-block-",bundlesDrawerSideSheet:"#bundles-desktop-side-sheet",natcForm:"#bundles-drawer-natc-form-",accountLinkingCheckbox:"#bundles-desktop-side-sheet #bundle-account-linking-",accountLinkingHiddenInput:"#bundles-drawer-natc-accountLinking-",
installmentsCheckbox:"#bundles-desktop-side-sheet #bundle-account-installments-",installmentsHiddenInput:"#bundles-drawer-natc-installments-",installmentsMessage:"#bundles-desktop-side-sheet #bundles-drawer-installments-message",installmentsMessageText:"#bundles-desktop-side-sheet #bundles-drawer-installments-message-text",bundleExpanders:"#bundle-expander-content-",bundleImage:".bundle-image",bundleContent:"#bundles-desktop-side-sheet .bundle-content",postAddToCartContent:"#bundles-desktop-side-sheet .post-add-to-cart"},
l={AUI_HIDDEN_CLASS:"aok-hidden",UNDERSCORE:"_",HIDDEN_TYPE:"hidden",BUNDLE_AJAX_ATC_DECLARATIVE_ACTION:"bundles-ajax-add-to-cart",BUNDLE_NATC_ACCOUNT_LINKING_DECLARATIVE_ACTION:"bundles-account-linking-checkbox",ACCOUNT_LINKING_INPUT_NAME_NATC:"items[0.base][additionalParameters][devicePreregistration][selected]",BUNDLE_NATC_INSTALLMENTS_DECLARATIVE_ACTION:"bundles-installments-checkbox",INSTALLMENTS_INPUT_NAME_NATC:"items[0.base][additionalParameters][installments][programId]",ACCOUNT_LINKING_INPUT_ID_PREFIX:"bundles-drawer-natc-accountLinking-",
INSTALLMENTS_INPUT_ID_PREFIX:"bundles-drawer-natc-installments-",ACCESSORY_ATC_DECLARATIVE_ACTION:"bundles-ajax-accessory-atc",ITEM_COUNT_PLACEHOLDER:"{NUM_OF_ITEMS}"},q={accessoryAtcButton:".bundles-drawer-ajax-accessory-atc-button",accessoryAtcCard:".bundles-drawer-accessory-atc-card",accessoryAtcErrorContent:".bundles-drawer-accessory-atc-error-content",accessoryAtcSpinner:".bundles-drawer-accessory-atc-spinner",accessoryAtcSuccessContainer:".bundles-drawer-accessory-atc-success-container",accessoryAtcSuccessContent:".bundles-drawer-accessory-atc-success-content",
accessoryOfferListingId:'[name\x3d"accessory-offer-listing-id"]',upsellRecommendationSection:"#bundle-upsell-recommendations-",successCount:".bundles-drawer-success-count",proceedToCheckoutText:".bundles-drawer-proceed-to-checkout-text",addedItemImage:".bundles-drawer-added-item-image",subTotalPrice:".bundles-drawer-accessory-sub-total-price",subTotalContainer:".bundles-drawer-accessory-sub-total-container"};b.on(e.BUNDLES_CARD_SECONDARY_VIEW_ATC_READY,function(){k.resetData();d.getCartData(a.aapiEndpoint,
a.csrfToken,a.marketplaceId).done(function(a){t(a.entity)});d.getFullCartCount(a.aapiEndpoint,a.csrfToken,a.marketplaceId).done(function(a){a.entity&&k.setCartTotalCount(a.entity.items)})});b.declarative(l.BUNDLE_AJAX_ATC_DECLARATIVE_ACTION,"click",function(b){b=b.data;var d=b.asin,e=g(h.bundlesDrawerSideSheet),p=e.find(h.atcButton+d),w=e.find(h.reachCartLimitMessage+d),t=e.find(h.atcErrorBlock+d);k.cartContainsItem(d)?(p.addClass(l.AUI_HIDDEN_CLASS),w.removeClass(l.AUI_HIDDEN_CLASS)):(e=c.createRequest(b.csrfToken,
b.marketplaceId,b.aapiEndpoint),b={asin:d,offerId:b.offerListingId,quantity:1},b=z(b),e.addSingleAsinData(b),e.setRefTag("bundles_dsk_sec_view_bundle_atc"),y.logCount("bundlesDrawerBundleCartApiSent",1),e.sendRequest(function(b){k.setCartItemQuantity(d,1);var c=k.getCartTotalCount();A(b.entity.count.entity.items);a.isDevices&&y.logRefTag("amzdv_tplus_dp_dsk_atc_"+a.landingAsin+l.UNDERSCORE+d,a.landingAsin);f();u(k.getCartTotalCount());b=g(h.bundlesDrawerSideSheet).find(h.bundleExpanders+d).find(h.bundleImage).attr("src");
var e=0;g(h.installmentsCheckbox+d).length&&r(h.installmentsCheckbox+d).isChecked()&&(e=k.getCartTotalCount()-c);c=g(h.installmentsMessageText).text();0<e?(g(h.installmentsMessageText).text(c.replace(l.ITEM_COUNT_PLACEHOLDER,e)),g(h.installmentsMessage).toggleClass(l.AUI_HIDDEN_CLASS,!1)):g(h.installmentsMessage).toggleClass(l.AUI_HIDDEN_CLASS,!0);g(q.addedItemImage).attr("src",b);g(h.bundlesDrawerSideSheet).scrollTop(0);g(h.bundleContent).toggleClass(l.AUI_HIDDEN_CLASS,!0);g(h.postAddToCartContent).find(q.upsellRecommendationSection+
d).toggleClass(l.AUI_HIDDEN_CLASS);g(h.postAddToCartContent).toggleClass(l.AUI_HIDDEN_CLASS)},function(){y.logCount("bundlesDrawerBundleCartApiFailed",1);m.log("An error has occurred with Cart API addItems request when add "+d+" from Secondary View.","WARN");a.isDevices&&y.logRefTag("amzdv_tplus_dp_dsk_failed_atc_"+a.landingAsin+l.UNDERSCORE+d,a.landingAsin);p.addClass(l.AUI_HIDDEN_CLASS);t.removeClass(l.AUI_HIDDEN_CLASS)}))});b.declarative(l.ACCESSORY_ATC_DECLARATIVE_ACTION,"click",function(d){var e=
d.data;y.logCount("bundlesDrawerSideSheetAccessoryAtcClicked",1);var h=e.bundleAsin,g=e.asin,p=d.$target.closest(q.accessoryAtcButton);p.toggleClass(l.AUI_HIDDEN_CLASS,!0);var r=p.closest(q.accessoryAtcCard),t=r.find(q.accessoryAtcSpinner);t.toggleClass(l.AUI_HIDDEN_CLASS);var x=r.find(q.accessoryAtcSuccessContent).find(q.accessoryAtcButton),z=r.find(q.accessoryAtcErrorContent);d=r.find(q.accessoryOfferListingId).val();var B=r.find(q.accessoryAtcSuccessContainer),D=B.find(q.successCount),e=c.createRequest(e.csrfToken,
e.marketplaceId,e.aapiEndpoint);e.addSingleAsinData({asin:g,offerId:d,quantity:1});e.setRefTag("bundles_dsk_sec_view_acc_atc");e.sendRequest(function(c){A(c.entity.count.entity.items);z.toggleClass(l.AUI_HIDDEN_CLASS,!0);k.cartContainsItem(g)?k.setCartItemQuantity(g,k.getCartItemQuantity(g)+1):k.setCartItemQuantity(g,1);!k.getItemQuantityLimit(g)||k.getCartItemQuantity(g)<k.getItemQuantityLimit(g)?b.delay(function(){f();u(k.getCartTotalCount());w(t,D,k.getCartItemQuantity(g),B);p.toggleClass(l.AUI_HIDDEN_CLASS,
!1);x.toggleClass(l.AUI_HIDDEN_CLASS,!1)},3E3):(f(),u(k.getCartTotalCount()),w(t,D,k.getCartItemQuantity(g),B));a.isDevices&&y.logRefTag("amzdv_tplus_dp_dsk_patc_"+a.landingAsin+l.UNDERSCORE+h+l.UNDERSCORE+g,a.landingAsin)},function(){y.logCount("bundlesDrawerSideSheetAccessoryAtcFailed",1);t.toggleClass(l.AUI_HIDDEN_CLASS,!0);p.toggleClass(l.AUI_HIDDEN_CLASS,!1);x.toggleClass(l.AUI_HIDDEN_CLASS,!0);z.toggleClass(l.AUI_HIDDEN_CLASS,!1);m.log("An error has occurred with desktop post atc screen add to cart request handler for "+
g,"WARN");a.isDevices&&y.logRefTag("amzdv_tplus_dp_dsk_failed_patc_"+a.landingAsin+l.UNDERSCORE+h+l.UNDERSCORE+g,a.landingAsin)})});b.declarative(l.BUNDLE_NATC_ACCOUNT_LINKING_DECLARATIVE_ACTION,"change",function(a){var b=a.data.asin,c=r(h.accountLinkingCheckbox+b).isChecked();a=g(h.bundlesDrawerSideSheet).find(h.natcForm+b);var d=a.find(h.accountLinkingHiddenInput+b);d&&d.length&&d.remove();b=g("\x3cinput\x3e",{type:l.HIDDEN_TYPE,name:l.ACCOUNT_LINKING_INPUT_NAME_NATC,value:c,id:l.ACCOUNT_LINKING_INPUT_ID_PREFIX+
b});a.append(b)});b.declarative(l.BUNDLE_NATC_INSTALLMENTS_DECLARATIVE_ACTION,"change",function(a){a=a.data.asin;var b=r(h.installmentsCheckbox+a),c=g(h.installmentsCheckbox+a).val(),d=b.isChecked(),b=g(h.bundlesDrawerSideSheet).find(h.natcForm+a),e=b.find(h.installmentsHiddenInput+a);e&&e.length&&e.remove();d&&(a=g("\x3cinput\x3e",{type:l.HIDDEN_TYPE,name:l.INSTALLMENTS_INPUT_NAME_NATC,value:c,id:l.INSTALLMENTS_INPUT_ID_PREFIX+a}),b.append(a))})});"use strict";m.when("A","bundles-focus-management",
"ready").register("bundles-drawer-side-sheet",function(b,c){function e(a,b){t=document.activeElement;if(a)d("#bundle-expander-header-"+a).focus();else{if(b&&(a=d(f.SIDE_SHEET_CONTAINER).find(f.RELATED_BUNDLES),a.length))return a.find('[id^\x3d"bundle-expander-header-"]:first').focus(),z;d(f.SIDE_SHEET_CONTAINER).find('[id^\x3d"bundle-expander-header-"]:first').focus()}}var d=b.$,a,k,m,r=!1,t,A,p,f={SIDE_SHEET_MODAL_LAYER:"#bundles-desktop-side-sheet-modal-wrapper",SIDE_SHEET_CONTAINER:"#bundles-desktop-side-sheet",
SIDE_SHEET_DARK_BACKGROUND:"#bundles-side-sheet-bg",PAGE_BODY:"body",RELATED_BUNDLES:".related-bundles"},z={initialize:function(b){m=b;d(f.SIDE_SHEET_CONTAINER).html(m);a=this.close},onKeyDown:function(b){27===b.which&&a()},close:function(){b.delay(function(){b.hide(f.SIDE_SHEET_DARK_BACKGROUND)},400);d(f.SIDE_SHEET_CONTAINER).animate({right:k},{duration:500,complete:function(){d(f.SIDE_SHEET_CONTAINER).addClass("aok-hidden");d(f.SIDE_SHEET_MODAL_LAYER).addClass("aok-hidden");d(document).unbind("keydown",
this.onKeyDown);d(f.PAGE_BODY).removeClass("bundles-scroll-disabled");r=!1;t.focus()}})},show:function(a,c,g){d(f.SIDE_SHEET_CONTAINER).length&&(d(f.SIDE_SHEET_CONTAINER).html(m),d(f.SIDE_SHEET_CONTAINER).scrollTop(0),d(f.SIDE_SHEET_MODAL_LAYER).removeClass("aok-hidden"),d(f.SIDE_SHEET_CONTAINER).removeClass("aok-hidden"),d(f.SIDE_SHEET_CONTAINER).animate({right:"0"},500,"linear"),b.delay(function(){b.show(f.SIDE_SHEET_DARK_BACKGROUND)},400),d(f.PAGE_BODY).addClass("bundles-scroll-disabled"),d(document).unbind("keydown",
this.onKeyDown),d(document).keydown(this.onKeyDown),a&&"function"===typeof a&&a(g),k=d(f.SIDE_SHEET_CONTAINER).css("right"),r=!0,e(g,c))},reset:function(){m=null;r=!1;t=null;A=!1;p=null},isReadyToShow:function(){return null!==m},updateContent:function(a){m=a}};document.addEventListener("focus",function(a){if(r&&!A){var b=d(f.SIDE_SHEET_MODAL_LAYER).get(0);b.contains(a.target)?p=a.target:(A=!0,c.focusDescendant(b,"first"),p===document.activeElement&&c.focusDescendant(b,"last"),A=!1,p=document.activeElement)}},
!0);return z});"use strict";m.register("bundles-side-sheet-cart-data",function(){var b={},c={},e;return{resetData:function(){b={};c={}},setCartItemQuantity:function(c,a){b[c]=a},getCartItemQuantity:function(c){return b[c]},cartContainsItem:function(c){return c in b},setCartTotalCount:function(b){e=b},getCartTotalCount:function(){return e},getItemQuantityLimit:function(b){return c[b]},setItemQuantityLimit:function(b,a){c[b]=a}}});"use strict";m.when("A","bundles-drawer-side-sheet","bundles-card","bundle-logger").execute("register-bundles-side-sheet-declarative-actions",
function(b,c,e,d){var a=b.$;b.declarative("open-bundles-drawer-side-sheet","click",function(a){c.isReadyToShow()&&(e.isDevices&&d.logRefTag("amzdv_tplus_dp_dsk_shown_all_"+e.landingAsin,e.landingAsin),c.show())});b.declarative("close-bundles-side-sheet","click",function(a){c.close()});b.on("a:expander:bundle-components-expander:toggle:expand",function(b){a("#bundles-secondary-view .bundle-expander-header-highlighted").removeClass("bundle-expander-header-highlighted").addClass("bundle-expander-header");
e.isDevices&&(b=b.expander.$expander.closest(".secondary-bundle-container").find("[name\x3d'bundle-asin']").val(),d.logRefTag("amzdv_tplus_dp_dsk_witb_"+e.landingAsin+"_"+b,e.landingAsin))})});"use strict";m.register("bundles-focus-management",function(){return{attemptFocus:function(b){try{b.focus()}catch(c){}return b===document.activeElement},focusDescendant:function(b,c){if(b&&b.children)for(var e=0;e<b.children.length;e++){var d=b.children.item("last"===c?b.children.length-e-1:e);if(this.attemptFocus(d)||
this.focusDescendant(d,c))return!0}return!1}}})});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,v=g._namespace||g.attributeErrors,e=v?v("SmartHomeDPAssets",""):g;e.guardFatal?e.guardFatal(f)(e,window):e.execute(function(){f(e,window)})})(function(f,g,v){f.when("A","a-button","a-checkbox","sh-badge-utils","ready").execute(function(e,y,n,x){function m(c){var e=w[c],a=y(d.selectors.shAtcBtn);0<c?(a.enable(),q(d.selectors.shTotalPriceContainer).css("visibility","visible")):(a.disable(),q(d.selectors.shTotalPriceContainer).css("visibility","hidden"));
a.text(e)}function k(){var c=0,e=0,a=[];q(d.selectors.shCheckbox).each(function(){var b=q(this);b.find("input").prop("checked")&&(e++,b=b.data(),a.push({asin:b[d.dataProperties.checkboxAsin],offerListingId:b[d.dataProperties.checkboxOfferListingId]}),c+=b[d.dataProperties.checkboxPrice])});x.injectUniversalAddToCartParams(a,d.selectors.shAtcFormFields);x.updatePrice(d.selectors.shAtcTotalPriceText,p,c,f,r);m(e)}var d={selectors:{shAtcBtn:"#sh-badge-v2-atc-btn",shCheckbox:".sh-badge-v2-chkBox",shAtcTotalPriceText:"#sh-badge-v2-simple-total-price",
shAtcFormFields:".sh-badge-v2-atc-form-fields",shTotalPriceContainer:"#sh-badge-v2-atc-total-price-container"},pageStateModels:{shAtcBtnMsg:"sh-badge-v2-atc-btn-messages",shBadgeV2WidgetData:"sh-badge-v2-data"},pageStateModelKeys:{currencyDecimalSeparator:"currencyDecimalSeparator",currencyCode:"currencyCode",priceFormat:"priceFormat"},declarativeActions:{shCheckBoxEventHandler:"sh-badge-v2-chkBox-action"},dataProperties:{checkboxPrice:"price",checkboxAsin:"asin",checkboxOfferListingId:"offerlistingid"},
events:{expanderCollapse:"a:expander:sh-badge-v2-rq-device-expander:toggle:collapse"}},c=e.state(d.pageStateModels.shBadgeV2WidgetData);if("object"!==typeof c)return!1;var f=c[d.pageStateModelKeys.currencyCode],p=c[d.pageStateModelKeys.priceFormat],r=c[d.pageStateModelKeys.currencyDecimalSeparator],w=e.state(d.pageStateModels.shAtcBtnMsg);r||(r="");if(!r&&"JPY"!==f||!f||!p||"object"!==typeof w)return!1;var q=e.$;e.declarative(d.declarativeActions.shCheckBoxEventHandler,"change",function(){k()});e.on(d.events.expanderCollapse,
function(){n(d.selectors.shCheckbox).check()});n(d.selectors.shCheckbox).enable();e.on("a:pageUpdate",function(){n(d.selectors.shCheckbox).enable()})});"use strict";f.when("A","sh-accounting","ready").register("sh-badge-utils",function(e,f){var n=e.$;return{injectUniversalAddToCartParams:function(e,m){var k=n(m);k.empty();e.forEach(function(d,c){n("\x3cinput\x3e").attr({type:"hidden",name:"ASIN."+c,value:d.asin}).appendTo(k);n("\x3cinput\x3e").attr({type:"hidden",name:"offerListingID."+c,value:d.offerListingId}).appendTo(k)})},
updatePrice:function(e,m,k,d,c){k=f.formatNumber(k,"JPY"===d?"0":"2",","===c?".":",",c);m=m.replace(/([0.,]*[0][0.,]*)/,k);n(e).html(m)}}});f.register("sh-accounting",function(){function e(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function f(a){return p?p(a):"[object Array]"===r.call(a)}function n(a){return a&&"[object Object]"===r.call(a)}function x(a,b){var c;a=a||{};b=b||{};for(c in b)b.hasOwnProperty(c)&&null==a[c]&&(a[c]=b[c]);return a}function m(a,b,c){var e=[],d,f;if(!a)return e;if(g&&
a.map===g)return a.map(b,c);d=0;for(f=a.length;d<f;d++)e[d]=b.call(c,a[d],d,a);return e}function k(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function d(a){var b=c.settings.currency.format;"function"===typeof a&&(a=a());return e(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:a&&a.pos&&a.pos.match("%v")?a:e(b)?c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b}var c={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",
precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},g=Array.prototype.map,p=Array.isArray,r=Object.prototype.toString,w=c.unformat=c.parse=function(a,b){if(f(a))return m(a,function(a){return w(a,b)});a=a||0;if("number"===typeof a)return a;b=b||c.settings.number.decimal;var d=new RegExp("[^0-9-"+b+"]",["g"]);a=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(d,"").replace(b,"."));return isNaN(a)?0:a},q=c.toFixed=function(a,b){b=k(b,c.settings.number.precision);var d=
Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},v=c.formatNumber=c.format=function(a,b,d,e){if(f(a))return m(a,function(a){return v(a,b,d,e)});a=w(a);var t=x(n(b)?b:{precision:b,thousand:d,decimal:e},c.settings.number),u=k(t.precision),h=0>a?"-":"",l=parseInt(q(Math.abs(a||0),u),10)+"",g=3<l.length?l.length%3:0;return h+(g?l.substr(0,g)+t.thousand:"")+l.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+t.thousand)+(u?t.decimal+q(Math.abs(a),u).split(".")[1]:"")},z=c.formatMoney=function(a,
b,e,g,t,u){if(f(a))return m(a,function(a){return z(a,b,e,g,t,u)});a=w(a);var h=x(n(b)?b:{symbol:b,precision:e,thousand:g,decimal:t,format:u},c.settings.currency),l=d(h.format);return(0<a?l.pos:0>a?l.neg:l.zero).replace("%s",h.symbol).replace("%v",v(Math.abs(a),k(h.precision),h.thousand,h.decimal))};c.formatColumn=function(a,b,g,q,t,u){if(!a)return[];var h=x(n(b)?b:{symbol:b,precision:g,thousand:q,decimal:t,format:u},c.settings.currency),l=d(h.format),r=l.pos.indexOf("%s")<l.pos.indexOf("%v")?!0:!1,
p=0;a=m(a,function(a,b){if(f(a))return c.formatColumn(a,h);a=w(a);a=(0<a?l.pos:0>a?l.neg:l.zero).replace("%s",h.symbol).replace("%v",v(Math.abs(a),k(h.precision),h.thousand,h.decimal));a.length>p&&(p=a.length);return a});return m(a,function(a,b){return e(a)&&a.length<p?r?a.replace(h.symbol,h.symbol+Array(p-a.length+1).join(" ")):Array(p-a.length+1).join(" ")+a:a})};return c})});
/* ******** */
(function(f){var d=window.AmazonUIPageJS||window.P,F=d._namespace||d.attributeErrors,a=F?F("FreshDetailPageCommonAssets",""):d;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,d,F){f.when("A","jQuery","a-modal","afx-dp-uatc-proxy","afx-update-cart-count","a-dropdown","fresh-dp-double-click","afx-dp-csm-metrics-utils","fresh-show-atc-changeover","fresh-dp-quantity","afx-utils","ready").register("fresh-atc-handler",function(a,e,d,c,u,m,n,b,r,q,g){var p;f.when("EWC").execute(function(b){p=
b});f.when("nav.getFlyout").execute(function(b){b("ewc")});var A={"itemPrice:priceUnavailable:1":"PRICE_UNAVAILABLE","itemDeleted:itemCountOverflow:6":"QUANTITY_OVERFLOW"};return{addToFreshCart:function(m){function h(b,a,k,l){x(b);m.error(b,a,k,l)}function x(l,c){c=c||{};var g=l.data.sessionID;c.title=D(l.data.title);c.asin=l.data.asin;c.offerListingID=l.data.offerListingID;c.sessionID=g;switch(c.reasonCode?c.reasonCode:F){case y.itemNotAvailable:b.increment(k.freshUATCItemNotAvailableErrorCountMetric);
break;case y.itemPartiallyAvailable:b.increment(k.freshUATCItemPartiallyAvailableErrorCountMetric);break;case y.itemPartiallyAvailableForReservation:b.increment(k.freshUATCItemPartiallyAvailableForReservationErrorCountMetric);break;case y.itemNotAvailableForReservation:b.increment(k.freshUATCItemNotAvailableForReservationErrorCountMetric);break;case y.itemPriceUnavailable:b.increment(k.freshUATCItemPriceUnavailableErrorCountMetric);break;case y.itemCountOverflow:b.increment(k.freshUATCItemCountOverflowErrorCountMetric);
break;default:b.increment(k.freshUATCEmptyItemStatusCodeErrorCountMetric),f.log("fresh-atc-handler: No error status code.","ERROR")}c=e.param(c);d.create(l.$currentTarget,{name:"fresh-add-to-cart-modal",sessionID:g,url:"/afx/cart/reservation_conflict?"+c}).show();a.on("a:popover:afterHide:fresh-add-to-cart-modal",function(b){v(g);d.remove(b.popover)})}function D(b){var a={"\x26amp;":"\x26"},l;for(l in a)a.hasOwnProperty(l)&&(b=b.replace(l,a[l]));return b}function B(b){return b.filter(function(b){return b.statusKey in
A})}function l(b,l,a){a+=" returned by UATC is not an array";f.log(a,"Error",l);h(b,"","",a)}function t(e,g,d){d||(d=function(){});try{var m=e.data.asin;if(m)if(e.data.title){var z=e.data.offerListingID;if(z){var r=e.data.sessionID;if(r){var n=q.val();n||(f.log('fresh-atc-handler: "quantity" action parameter is missing.',"ERROR"),n=1);b.setWidgetClickTimestamp(k.freshUATCTCallScope);c({asin:m,offerListingID:z,sessionID:r,quantity:n,reftag:"afx-dp-addtocart",success:function(c){try{b.sendWidgetMetrics(k.freshUATCTCallScope);
var m;if(c&&c.isOK){var z=c.extraErrorInfos;if(z&&z.constructor===Array&&0<z.length)m=!0;else{var q=c.statusList,C;if(q&&q.constructor===Array&&0<q.length){var y=B(q);C=y&&0<y.length}else C=!1;m=C?!0:!1}}else m=!0;if(m)if(b.increment(k.freshUATCInvalidErrorResponseCountMetric),c)if(c.isOK){var v=c.extraErrorInfos,t=c.statusList;if(v&&v.constructor!==Array)l(e,v,"extraErrorInfos");else if(0<v.length){if(v&&!(0>=v.length)){var u=v[0];"ADDRESS_NOT_SELECTED"===u.statusCode?(b.increment(k.freshUATCAddressNotSelectedErrorCountMetric),
f.log("fresh-atc-handler: Address is not selected.","INFO")):x(e,{reasonCode:u.itemStatusCode,quantityAdded:u.availableQuantity,quantityRequested:u.requestedQuantity})}}else if(t&&t.constructor!==Array)l(e,t,"statusList");else if(0<t.length&&t&&!(0>=t.length)){var p=B(t);p&&0<p.length&&x(e,{reasonCode:A[p[0].statusKey]})}}else b.increment(k.freshUATCFailureCountMetric),h(e,"","","isOK returned by UATC is false");else b.increment(k.freshUATCFailureCountMetric),h(e,"","","No response from UATC");else b.increment(k.freshUATCSuccessCountMetric),
g(c,r,n)}catch(w){b.increment(k.freshAddToCartExceptionCountMetric),f.log("fresh-atc-handler exception: "+w,"ERROR")}finally{a.delay(d,E.reEnableDelay)}},error:function(l,c,g){try{b.sendWidgetMetrics(k.freshUATCTCallScope),b.increment(k.freshUATCFailureCountMetric),h(e,l,c,g)}catch(m){b.increment(k.freshAddToCartExceptionCountMetric),f.log("fresh-atc-handler exception: "+m,"ERROR")}finally{a.delay(d,E.reEnableDelay)}}})}else f.log('fresh-atc-handler: Required "sessionID" action parameter is missing.',
"ERROR"),b.increment(k.freshAddToCartMissingParameterCountMetric),h(e)}else f.log('fresh-atc-handler: Required "offerListingID" action parameter is missing.',"ERROR"),b.increment(k.freshAddToCartMissingParameterCountMetric),h(e)}else f.log('fresh-atc-handler: Required "title" action parameter is missing.',"ERROR"),b.increment(k.freshAddToCartMissingParameterCountMetric),h(e);else f.log('fresh-atc-handler: Required "asin" action parameter is missing.',"ERROR"),b.increment(k.freshAddToCartMissingParameterCountMetric),
h(e)}catch(C){b.increment(k.freshAddToCartExceptionCountMetric),f.log("fresh-atc-handler exception: "+C,"ERROR"),a.delay(d,E.reEnableDelay)}}function v(b){p&&"function"===typeof p.refresh?p.refresh():u(b)}var E={reEnableDelay:1E3},k={freshAddToCartClickCountMetric:"freshAddToCartClickCount",freshAddToCartMissingParameterCountMetric:"freshAddToCartMissingParameterCount",freshAddToCartExceptionCountMetric:"freshAddToCartExceptionCount",freshUATCTCallScope:"freshUATCCall",freshUATCSuccessCountMetric:"freshUATCSuccessCount",
freshUATCFailureCountMetric:"freshUATCFailureCount",freshUATCInvalidErrorResponseCountMetric:"freshUATCInvalidErrorResponseCount",freshUATCAddressNotSelectedErrorCountMetric:"freshUATCAddressNotSelectedErrorCount",freshUATCItemPartiallyAvailableErrorCountMetric:"freshUATCItemPartiallyAvailableErrorCount",freshUATCItemPartiallyAvailableForReservationErrorCountMetric:"freshUATCItemPartiallyAvailableForReservationErrorCount",freshUATCItemNotAvailableErrorCountMetric:"freshUATCItemNotAvailableErrorCount",
freshUATCItemNotAvailableForReservationErrorCountMetric:"freshUATCItemNotAvailableForReservationErrorCount",freshUATCEmptyItemStatusCodeErrorCountMetric:"freshUATCEmptyItemStatusCodeErrorCount",freshUATCItemPriceUnavailableErrorCountMetric:"freshUATCItemPriceUnavailableErrorCount",freshUATCItemCountOverflowErrorCountMetric:"freshUATCItemCountOverflowErrorCount"},y={itemNotAvailable:"ITEM_NOT_AVAILABLE",itemPartiallyAvailable:"ITEM_PARTIALLY_AVAILABLE",itemPartiallyAvailableForReservation:"ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION",
itemNotAvailableForReservation:"ITEM_NOT_AVAILABLE_FOR_RESERVATION",itemPriceUnavailable:"PRICE_UNAVAILABLE",itemCountOverflow:"QUANTITY_OVERFLOW"},C=function(b,l,a){r(a);v(l);m.success(b)};a.declarative("fresh-atc-handler","click",n(function(l,a){q.valid()?(g.vibrate(),b.increment(k.freshAddToCartClickCountMetric),t(l,C,a)):a()}))}}});"use strict";f.when("A","jQuery","a-button","fresh-show-atl-changeover","ready").register("FreshAddToShoppingList",function(a,e,d,c){function u(b){e("#"+b.asin+"-afx-atl-dropdown").change(function(a){b.$alreadyInMessage.addClass("aok-hidden");
b.$errorMessage.addClass("aok-hidden")})}function m(b){var e=(a.state("baseWidgetState")||{}).csrfToken;a.post("/afx/lists/json/shoppinglists/additem",{cache:!1,timeout:5E3,params:{asin:b.asin,listID:b.shoppingListID,token:e},success:function(a){b.addButtonInstance.enable();a.successful?(b.$modalParent.find("#"+b.cancelButtonID).click(),c()):1===a.errorCodes[0]?b.$alreadyInMessage.removeClass("aok-hidden"):n(b)},error:function(){b.addButtonInstance.enable();n(b)}})}function n(b){b.$errorMessage.removeClass("aok-hidden");
f.log("Failed to add asin "+b.asin+" to shopping list "+b.shoppingListID,"ERROR")}a.declarative("add-to-list","click",function(b){var a=b.$currentTarget.closest(".a-popover-wrapper");if(1>a.length)f.log("Could not find the element that parents this modal (it should contain class a-popover wrapper)","FATAL");else{var c=a.find("#"+b.data.addButtonID),e;1>c.length?(f.log("Could not find the button that will add the item. This is required for preventing double clicks","ERROR"),e=!1):b.data.asin?e=!0:
(f.log("ASIN was blank. Please supply the ASIN you wish to add to the list.","ERROR"),e=!1);e&&(c=d(c),c.isEnabled()&&(c.disable(),b={asin:b.data.asin,addButtonInstance:c,$modalParent:a,cancelButtonID:b.data.cancelButtonID,shoppingListID:a.find("#"+b.data.asin+"-afx-atl-dropdown").val(),$alreadyInMessage:a.find("#afx-atl-already-in"),$errorMessage:a.find("#afx-atl-service-error")},b.$alreadyInMessage.addClass("aok-hidden"),b.$errorMessage.addClass("aok-hidden"),u(b),m(b)))}})});"use strict";f.when("A",
"jQuery","fresh-add-to-cart","fresh-dp-quantity","fresh-show-atc-changeover").execute(function(a,e,d,c,u){d.addToFreshCart({success:function(a,c){u(a.data.renderableSellingQuantity?a.data.renderableSellingQuantity:a.data.quantity);a=c.couponClipStatus;if("CLIP_SUCCESSFUL"===a||"ALREADY_CLIPPED"===a)e("#unclippedCoupon").hide(),e("#clippedCoupon").show()},error:function(a,c,b,e){}});c.init();a.on("a:pageUpdate",function(){c.init();d.updateQuantity("freshAddToCartButton",c.val())});d.updateQuantity("freshAddToCartButton",
c.val());a.declarative("freshDetailPageQuantityUpdate","change",function(a){d.updateQuantity("freshAddToCartButton",c.val())});f.when("fresh-atfc-hook").execute(function(a){a.callback()})});f.when("A","jQuery","a-dropdown","fresh-dp-constants","fresh-add-to-cart","a-button").register("fresh-dp-quantity",function(a,e,d,c,f,m){return function(){var n,b,r,q,g,p,A,w,h,x,D,B,l,t=function(){if(!n){b=e(c.addToCartButtonSelector);g=d.getSelect(c.dropdownID);if(r=!!g){q=e(c.dropdownDivSelector);var a=g.getOptions().size();
a&&(A=a-1)}w=e(c.freeTextDivSelector);if(p=0!==w.length)h=e(c.freeTextInputSelector),x=e(c.freeTextErrorDivsSelector),D=e(c.freeTextErrorMsgMin),B=e(c.freeTextErrorMsgMax)}},v=function(){a.on(c.dropdownSelectedID,function(a){e(a.nativeItemNode).index()===A?(h.attr("validValue",l),h.val(l),w.show(),x.hide(),q.hide(),h.focus().select(),g.val("1")):l=g.val()});var k=function(){var a=h.attr("validValue");a&&(g.val(a),g.val()===a?(l=a,q.show(),w.hide()):(f.updateQuantity("freshAddToCartButton",a),b.focus()))},
d=function(){var a=E(h.val());h.attr("validValue",a?a:"")};h.change(d);h.keyup(d);h.keypress(function(a){if(0===a.which||8===a.which||a.ctrlKey||a.altKey||c.rxNumbersOnly.test(String.fromCharCode(a.which)))return!0;13===a.which&&(k(),b.click());return!1});h.blur(k)},E=function(){var a;a:{a=h.val();if(c.rxNumbersOnly.test(a)&&(a=parseInt(a,10),!isNaN(a)))break a;a=!1}x.hide();var b=m(c.addToCartButtonSelector);if(!1===a||0>=a)D.show(),b.isEnabled()&&b.disable();else if(1E3<=a)B.show();else return b.isEnabled()||
b.enable(),String(a);return!1};return{init:function(){n=!1;t();n=!0;if(p){w.hide().removeClass(c.auiHiddenClass);x.hide().removeClass(c.auiHiddenClass);var a=g.getOption(A),b=a.info()[0].text;a.update({value:"0",text:e.trim(b)+"+"});l=g.val();v()}},valid:function(){t();return p&&w.is(":visible")?!1!==E():!0},val:function(){t();return p&&w.is(":visible")?h.attr("validValue"):r?g.val():1}}}()});f.register("fresh-dp-constants",function(){return{actionPanelStateData:"apstate",actionPanelFreshState:"fresh",
mobileNavSearchFormSelector:'#nav-search-form, form[role\x3d"search"], #searchForm',rxNumbersOnly:/^\d+$/,auiHiddenClass:"aok-hidden",addToCartButtonSelector:"#freshAddToCartButton",dropdownID:"freshQuantity",dropdownSelectedID:"a:dropdown:selected:freshQuantity",dropdownDivSelector:"#quantitySelect",freeTextDivSelector:"#quantityText",freeTextInputSelector:"#quantityTextInput",freeTextErrorDivsSelector:"#quantityTextErrors \x3e div",freeTextErrorMsgMin:"#quantityFreeTextErrorMsgMin",freeTextErrorMsgMax:"#quantityFreeTextErrorMsgMax"}});
f.when("A","afx-dp-csm-metrics-utils","ready").execute(function(a,e){a.on("a:expander:ingredients-expander:toggle:expand",function(a){e.increment("almIngredientsExpand")});a.on("a:expander:ingredients-expander:toggle:collapse",function(a){e.increment("almIngredientsCollapse")})});f.when("A","ready").register("fresh-dp-prevent-atc-default",function(a){return{init:function(){a.$("#addToFreshCart").submit(function(a){a.preventDefault()})}}});"use strict";f.when("A","jQuery","a-button","ready").register("fresh-multiselleroffers-pagination-handler",
function(a,e,d){function c(a){var c=parseInt(n.attr("data-currentPage"),10),d=parseInt(n.attr("data-pageCount"),10),c="next"===a?c+1:c-1;n.attr("data-currentPage",c);0===c?b.disable():b.enable();c===d-1?r.disable():r.enable();e(".freshMultiSellerOffer").addClass("hidden");e('.freshMultiSellerOffer[data-page\x3d"'+c+'"]').removeClass("hidden")}var f=e("#freshMultiSellerOffersPreviousPage"),m=e("#freshMultiSellerOffersNextPage"),n=e("#freshMultiSellerOffersPagination"),b=d(f),r=d(m);a.declarative.create(f,
"fresh-multiselleroffers-previous-page",{});a.declarative.create(m,"fresh-multiselleroffers-next-page",{});a.declarative("fresh-multiselleroffers-previous-page","click",function(a){b.isEnabled()&&c("previous")});a.declarative("fresh-multiselleroffers-next-page","click",function(a){r.isEnabled()&&c("next")})});"use strict";f.register("afx-dp-csm-metrics-utils",function(){return{setWidgetClickTimestamp:function(a){d.ue&&d.uet&&a&&d.uet("bb",a,{wb:1})},setWidgetTimestamp:function(a,e){d.ue&&d.uet&&a&&
e&&d.uet(a,e,{wb:1})},increment:function(a){d.ue&&d.ue.count&&a&&d.ue.count(a,(d.ue.count(a)||0)+1)},setCount:function(a,e){d.ue&&d.ue.count&&a&&e&&d.ue.count(a,e)},sendWidgetMetrics:function(a){d.ue&&d.uex&&a&&d.uex("ld",a,{wb:1})}}});"use strict";f.when("A","jQuery","a-button","ready").register("fresh-dp-double-click",function(a,e,d){return function(c){var e={disabled:"true"},d={};return function(f){var b=a.state("fresh-atc-status");b&&b.disabled||(b&&a.state("fresh-atc-status",e),c(f,function(){(b=
a.state("fresh-atc-status"))&&a.state.replace("fresh-atc-status",d)}))}}});"use strict";f.register("afx-utils",function(){return{isFunction:function(a){return"function"===typeof a},isDefined:function(a){return"undefined"!==typeof a},vibrate:function(){return d.amazon&&d.amazon.cordova&&d.amazon.cordova.notification&&d.amazon.cordova.notification.vibrate&&d.amazon.cordova.notification.vibrate(50)}}});"use strict";f.when("A","jQuery","fresh-show-atl-changeover","afx-dp-csm-metrics-utils","ready").register("FreshAddToAlexaLists",
function(a,e,z,c){function u(a){c.increment(g.countAddToAlexaList);a.data.isAlmInStoreMode&&c.increment(g.countISMAddToAlexaList);c.setWidgetClickTimestamp(g.addToAlexaListCallTime);r(a);var b=Date.now(),h=n(a);e.ajax({url:a.data.url,type:"POST",contentType:"application/json",Accept:"application/json",timeout:5E3,dataType:"json",data:JSON.stringify(a.data.alexaListV2Payload),headers:{"x-amzn-as-metadata":JSON.stringify(h)},success:function(e){c.sendWidgetMetrics(g.addToAlexaListCallTime);c.increment(g.addToAlexaListCallSuccess);
if(a.data.isUnifiedMobileCx){a.$currentTarget.find(".afx-dp-add-to-alexa-list-unified-mobile-text").addClass("aok-hidden");a.$currentTarget.find(".afx-dp-added-to-alexa-list-unified-mobile-text").removeClass("aok-hidden");var d=a.$currentTarget.find("button");d.prop("disabled",!0);a.data.isMobileWfm?d.addClass("afx-dp-add-to-alexa-list-unified-mobile-wfm-success"):d.addClass("afx-dp-add-to-alexa-list-unified-mobile-success")}else z();m(b,Date.now(),a,e);q(a)},error:function(b,e,h){c.sendWidgetMetrics(g.addToAlexaListCallTime);
c.increment(g.addToAlexaListCallFail);f.log("Error response: "+b.responseText,"ERROR");b.status===B?a&&a.data&&a.data.signInURL&&(d.location=a.data.signInURL):f.log("Failed to add item to shopping list "+a.data.title+", url : "+a.data.url,"ERROR");q(a)}})}function m(a,c,d,g){a=0<g.itemInfoList.length?b(a,c,d.data.underscoredBrandName,d.data.sessionId,g.itemInfoList[0]):{eventName:p+w,eventType:h,eventVersion:1,pageName:h+x+d.data.underscoredBrandName,eventStartTime:a,delay:c-a,listType:"SHOP",isDefaultList:!0,
sessionId:d.data.sessionId};d=n(d);e.ajax({url:D,type:"POST",contentType:"application/json",Accept:"application/json",timeout:5E3,dataType:"json",data:JSON.stringify(a),headers:{"x-amzn-as-metadata":JSON.stringify(d)},error:function(a,b,c){f.log("Error response: "+a.responseText,"ERROR")}})}function n(a){var b=a.data.alexaListV2Payload.items[0];return{requestType:a.data.requestType,applicationName:"unknown",applicationVersion:"unknown",ssnapVersion:0,rnVersion:"unknown",osName:"unknown",osVersion:"unknown",
appId:"unknown",bundleVersion:"unknown",isBeta:!1,localeInfo:{marketplaceId:a.data.marketplaceCountryCode,localeId:b.locale,marketplaceObfuscatedId:b.marketplaceId},deviceInfo:{model:"unknown",manufacturer:"unknown"},stage:"Prod"}}function b(a,b,c,e,d){return{eventName:p+A,eventType:h,eventVersion:1,pageName:h+x+c,eventStartTime:a,delay:b-a,listId:d.listId,listType:"SHOP",isDefaultList:!0,sessionId:e,item:{id:d.itemId,listId:d.listId,value:d.itemName,encryptedValue:d.encryptedItemName,updatedDateTime:d.updateAt,
createdDateTime:d.createAt,customerId:d.customerId,version:1,itemType:d.itemType}}}function r(a){a.data.isUnifiedMobileCx?(a.$currentTarget.addClass("aok-hidden"),a.$currentTarget.siblings(".afx-dp-add-to-alexa-list-unified-mobile-spinner").removeClass("aok-hidden")):(a.$currentTarget.find(".afx-dp-add-to-alexa-list-link").addClass("aok-hidden"),a.$currentTarget.siblings(".afx-dp-add-to-alexa-list-spinner").removeClass("aok-hidden"))}function q(a){a.data.isUnifiedMobileCx?(a.$currentTarget.siblings(".afx-dp-add-to-alexa-list-unified-mobile-spinner").addClass("aok-hidden"),
a.$currentTarget.removeClass("aok-hidden")):(a.$currentTarget.siblings(".afx-dp-add-to-alexa-list-spinner").addClass("aok-hidden"),a.$currentTarget.find(".afx-dp-add-to-alexa-list-link").removeClass("aok-hidden"))}a.declarative("add-to-alexa-lists","click",function(a){q(a);u(a)});var g={countAddToAlexaList:"countAddToAlexaList",addToAlexaListCallTime:"addToAlexaListCallTime",addToAlexaListCallSuccess:"addToAlexaListCallSuccess",addToAlexaListCallFail:"addToAlexaListCallFail",countISMAddToAlexaList:"countISMAddToAlexaList"},
p="ADD_ITEM_",A="SUCCESS",w="FAILURE",h="F3_Detail_Page",x="_",D="/alexashoppinglists/api/logevents",B=401});f.when("A","afx-dp-csm-metrics-utils","ready").execute(function(a,d){a.on("a:expander:alm-nutrition-information-expander:toggle:expand",function(){document.querySelectorAll(".js-hide-when-nutrition-info-expanded").forEach(function(a){a.style.display="none"});d.increment("almNutritionalInformationExpand")});a.on("a:expander:alm-nutrition-information-expander:toggle:collapse",function(){document.querySelectorAll(".js-hide-when-nutrition-info-expanded").forEach(function(a){a.style.display=
""});d.increment("almNutritionalInformationCollapse")})});f.when("A","afx-dp-csm-metrics-utils","ready").execute(function(a,d){a.declarative("almCRIngress-click-metrics","click",{allowLinkDefault:!0},function(a){d.increment("almCustomerReviewsATF")})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageVoltageComplianceAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(h){var m=window.AmazonUIPageJS||window.P,u=m._namespace||m.attributeErrors,b=u?u("ProductAdsDetailPageAssets",""):m;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,m,u){h.when("A","a-carousel-framework","a-carousel-ajax-standard").register("AmazonClicks",function(b,m,q){function t(c,a,e,n){var k=c.getAttr("pageNumber");var w=c.getAttr("initialSeenAsins");for(var p=c.getAttr("fetchedItems").slice(w.length),l=0;l<p.length;l++)p[l]&&p[l].oid&&w.push(p[l].oid);
p=c.getAttr("filteredItems");for(l=0;l<p.length;l++)p[l]&&w.push(p[l]);w=w.join("");e.pg=k;e.tot=c.getAttr("set_size");e.start=e.offset;e.num=e.count;e.cc=1===k?0:e.offset;e.oData=w;k=c.getAttr("ajax");c.setAttr("requestTimer",b.delay(d,k.fetch_delay,c,a,e,n))}function d(c,a,e,n){c.triggerEvent("beforeAjax",{url:a,params:e});b.get(a,{cache:!1,success:function(k){k=D(k,a);if(null===k)h.error("Invalid JSON returned to carousel from "+a+" - see http://tiny/c1mr5h0u for details.","a-carousel-ajax-standard",
"sendRequest");else{e.needSetSize&&(k&&k.length||h.error("Carousel requires a set_size and none was returned by the fallback AJAX request at: "+a,"a-carousel-ajax-standard","sendRequest"),c.setAttr("set_size",k[0].setSize?k[0].setSize:k.length));for(var n=c.getAttr("fetchedItems"),p=c.getAttr("filteredItems"),l=c.getAttr("ajax"),y=[],d,f=k.length,g=0;f--;)d=k[f],null===d&&y.push(f),d&&d.isFilteredItem&&"true"===d.isFilteredItem?(p.push(d.oid),g++):(d&&(d.content||""===d.content?d.content=b.trim(d.content):
d=b.trim(d)),n[e.offset+f]=d);A=1*g/k.length;l.remove_nulls&&l.id_list&&y.length&&(b.each(y,function(c){l.id_list.splice(e.offset+c,1)}),c.setAttr("ajax",l));e.needSetSize&&c.init();c.setAttr("fetchedItems",n);c.setAttr("filteredItems",p);c.setAttr("ajaxLock",!1);c.getAttr("pageSize")*c.getAttr("pageNumber")>=n.length&&c.strategies.ajax.wantCurrentPage(c);c.triggerEvent("ajaxSuccess",{url:a,params:e})}},error:function(){b.delay(function(){var a=b.$("#"+c.dom.$container[0].id+" li.a-carousel-card-empty");
0<a.length&&(c.setAttr("set_size",a[0].getAttribute("aria-posinset")-1),a.removeClass("a-carousel-card-empty"))},200)},params:e,headers:n})}function D(c,a){return b.isArray(c)?c:c!==u&&null!==c&&!b.objectIsEmpty(c)&&c.hasOwnProperty("data")&&b.isArray(c.data)?c.data:null}function f(c,k){Array.isArray(c)&&b.each(c,function(c){a[c]=k})}function g(c){b.each(a,function(b,e){b===c&&delete a[e]})}var B={},a={},v={},r={},z=[],A=0,x=b.extend([],q),C=function(c,b,a){return function(){c.apply(b,a)}};x.init=
function(c){var a=c.getAttr("ajax");if(a&&a.params){var e=a.params;if((a=c.getAttr("fetchedItems"))&&a.length!==e.start){var n=0;a.forEach(function(c){c&&n++});var d=[];c.dom.$carousel.children("li").each(function(c,a){if(c>=e.start)return!1;d.push(b.trim(a.innerHTML))});n!==d.length&&(e.offset=d.length,c.setAttr("fetchedItems",d))}}q.init(c)};x.getItems=function(c,a,e,d){var k=!1,n=c.getAttr("name");b.each(r,function(c,a){a!==n&&(k=k||c)});c=C(t,this,[c,a,e,d]);(a=v[n]!==u)&&k?z.push(c):(a&&(r[n]=
!0),c())};x.want=function(c,a,b){var d=Math.ceil(10*A);b=Math.max(b,c.getAttr("pageSize")*d);b=Math.min(b,30);if(!c.getAttr("ajaxLock")){if(d=c.getAttr("requestTimer"))clearTimeout(d),c.setAttr("requestTimer",null);d=c.getAttr("ajax");var e=c.getAttr("set_size");if(d.url){var k=c.getAttr("fetchedItems"),f=d.id_list;f||(f=[]);var l=-1<a?a:0;a=a+b-1;var g=d.params||{},h=d.headers||{},v=[],r=[];0===e&&(f.length&&(e=f),g.needSetSize="true",c.setAttr("ajaxLock",!0));for(-1===b&&e&&(a=e);l<=a;)k[l]||((b=
f[l])&&v.push(b),r.push(l)),l++;c.setAttr("fetchedItems",k,{silent:!0});g.count=r.length;g.offset=r[0]||0;0<v.length&&(g[d.id_param_name]=v.join(","));(0<r.length||g.needSetSize)&&this.getItems(c,d.url,g,h)}}};m.registerStrategy("ajax","clicksCustomAjax",x);return{registerFeedbackEvents:function(c,a,d,n,f){var e=!0,k=function(){b.$("#"+a).text(n);e=!1;b.$("."+f).each(function(){b.$(this).show()})},g=function(){b.$("#"+a).text(d);e=!0;b.$("."+f).each(function(){b.$(this).hide()})};b.$("#"+a).click(function(){e?
k():g()});b.on("a:carousel:"+c+":change:pageNumber",g);g()},registerFeedbackEventsWithSponsoredLabel:function(a,d,e,f){var c=!0,k=function(){b.$("#"+e).show();c=!1;b.$("."+f).each(function(){b.$(this).show()})},g=function(){b.$("#"+e).hide();c=!0;b.$("."+f).each(function(){b.$(this).hide()})};b.$("#"+d).click(function(){c?k():g()});b.on("a:carousel:"+a+":change:pageNumber",g);g()},truncateTitles:function(a){b.$("."+a).each(function(){var c=b.$(this);if("hidden"===c.css("overflow")){var d=c.html(),
f=b.$(this.cloneNode(!0)).hide().css("position","absolute").css("overflow","visible").width(c.width()).height("auto");c.after(f);for(f.html(d);0<d.length&&f.height()>c.height();)d=d.substr(0,d.length-1),f.html(d+"\x26#133;");c.html(f.html()).height("auto").removeClass(a);f.remove()}})},preventSpinners:function(a,d){B[a]===u&&(b.on("a:carousel:"+a+":ajaxSuccess",function(a){b.delay(function(){var c=b.$("#"+d+" li.a-carousel-card-empty");0<c.length&&(a.carousel.setAttr("set_size",c[0].getAttribute("aria-posinset")-
1),c.removeClass("a-carousel-card-empty"))},200)}),B[a]="defined")},registerCarouselToSaveAsins:function(a,d,e){g(a);f(e,a);r[a]=!1;v[a]===u&&(b.on("a:carousel:"+a+":ajaxSuccess",function(c){var d=c.carousel.getAttr("fetchedItems").slice(-1*c.params.count),e=[];b.each(d,function(a){e.push(a.oid)});f(e,a);r[c.carousel.getAttr("name")]=!1;0<z.length&&z.shift()()}),v[a]=d)}}});(function(b,m,q){function t(){return b.P&&b.P.AUI_BUILD_DATE}t()?(h.when("jQuery").register("sponsored-products-truncator-jQuery",
function(b){return b}),h.when("ready").register("sponsored-products-truncator-ready",function(){})):b.amznJQ&&(b.amznJQ.available("jQuery",function(){h.register("sponsored-products-truncator-jQuery",function(){return b.amznJQ.jQuery})}),b.amznJQ.onReady("jQuery",function(){h.register("sponsored-products-truncator-ready",function(){})}),b.amznJQ.available("amazonShoveler",function(){h.register("sponsored-products-truncator-amznJQ-shoveler",function(){})}));h.register("sponsored-products-truncator-util",
function(){function d(b,d){h({logLevel:b,attribution:"ProductAdsDetailPageAssets",message:"[sponsored-products-truncator] "+d})}var h=b.ueLogError;"function"!==typeof h&&(h=function(b,d){if(d&&d.message)throw Error(d.message);if(b&&b.message)throw Error(b.message);});return{constants:{FEATURE_NAME:"SponsoredProductsTitleTruncation"},count:b.ue&&b.ue.count||function(){},isAUI:t,log:{warn:function(b){d("WARN",b)},error:function(b){d("ERROR",b)}}}})})(m,document);(function(b,m,q){h.when("A","sponsored-products-truncator-jQuery",
"sponsored-products-truncator-util").register("sponsored-products-truncator-line-truncator",function(b,d,h){function f(a){this.$element=a;this.$experimentElement=d("\x3cdiv\x3e").addClass("sponsored-products-truncator-offscreen-truncate");this.maxRows=a.attr("data-rows");this.text=a.attr("data-fulltext")?a.attr("data-fulltext"):this.$element.html();this.lineHeight=this.getLineHeight();this.maxRows||h.log.error("Truncation element missing necessary line number data")}var g=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/;
var m=/[^\/\-\[\]():\s]/;f.prototype.truncate=function(){var a=this.text,b;a=d.trim(a);this.$element.append(this.$experimentElement);this.checkLineFit(a)?this.text!==this.$element.html()&&this.$element.html(a):(b=this.truncateByToken(a))?(this.$element.html(b),this.$element.attr({title:a})):h.log.error("Unable to successfully truncate line "+a);this.$experimentElement.remove()};f.prototype.getLineHeight=function(){var a=this.$element.html();this.$element.html("\x26hellip;");var b=this.$element.innerHeight();
this.$element.html(a);return b};f.prototype.checkLineFit=function(a){this.$experimentElement.html(a);a=this.$experimentElement.get(0).clientHeight/this.lineHeight;return Math.round(a)<=this.maxRows};f.prototype.truncateByToken=function(a){a=a.split(this.getTokenSeparatorRegex());var b=a.length,d=0,f;for(f=1;f!==b;){var g=Math.floor((b+f)/2);var h=a.slice(0,g).join("")+"\x26hellip;";if(this.checkLineFit(h)){if(1>=b-g){for(d=g;0<d&&!m.test(a[d-1]);)d--;break}f=g}else b=g}if(0!==d)return a.slice(0,d).join("")+
"\x26hellip;"};f.prototype.getTokenSeparatorRegex=function(){return this.$element.attr("data-truncate-by-character")?"":g};return{truncateLines:function(a){a.find(".sponsored-products-truncator-truncate:visible, .sponsored-products-truncator-truncate-medium:visible").each(function(){(new f(d(this))).truncate();d(this).addClass("sponsored-products-truncator-truncated").removeClass("sponsored-products-truncator-truncate sponsored-products-truncator-truncate-medium");d(this).removeClass(function(a,b){return(b.match(/sponsored-products-truncator-line-clamp-\d/g)||
[]).join(" ")})});b.trigger("sponsored-products-truncator:linestruncated")}}});h.when("jQuery","A","sponsored-products-truncator-line-truncator","a-carousel-framework").register("sp-dp-carousel-truncation",function(b,d,h,f){function g(a){"string"===typeof a?(h.truncateLines(d.$("#"+a)),f.getCarouselByName(a+"_carousel")&&d.trigger("spTruncationComplete",f.getCarouselByName(a+"_carousel"))):(h.truncateLines(a.carousel.dom.$container),d.trigger("spTruncationComplete",a.carousel))}var m="sp_detail sp_detail2 sp_detail_thematic sp_phone_detail sp_phone_detail2 sp_phoneapp_detail sp_phoneapp_detail2 sp_phone_detail_thematic sp_phoneapp_detail_thematic".split(" ");
d.on("spCarouselNoTruncationRegistration",function(){var a=d.state("spTruncatorStatus");if(!a||!a.truncationInitialized){for(a=m.length-1;0<=a;a--)g(m[a]),d.on("a:carousel:"+m[a]+"_carousel:change:animating",g),d.on("a:carousel:"+m[a]+"_carousel:change:loading",g),d.on("a:carousel:"+m[a]+"_carousel:change:pageSize",g);d.state("spTruncatorStatus",{truncationInitialized:!0})}});d.on("spMobileCarouselAjaxComplete",g);return{setUpTruncation:function(a){g(a);d.on("a:carousel:"+a+"_carousel:change:animating",
g);d.on("a:carousel:"+a+"_carousel:change:loading",g);d.on("a:carousel:"+a+"_carousel:change:pageSize",g)}}})})(m,document);h.execute("ClickLoggingUrlParamRemover",function(){if(history&&history.replaceState){var b=m.location.href;b=b.split("?");if(2<=b.length){for(var h=encodeURIComponent("spc")+"\x3d",q=b[1].split(/[&;]/g),t=q.length;0<t--;)-1!==q[t].lastIndexOf(h,0)&&q.splice(t,1);b=b[0]+(0<q.length?"?"+q.join("\x26"):"");m.history.replaceState({},document.title,b)}}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,r=f._namespace||f.attributeErrors,b=r?r("SponsoredProductsViewabilityAssets",""):f;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,f,r){e.when("A","SponsoredProductsEventBatcher","SPHAT").register("SponsoredProductsViewability",function(b,l,h){function k(c,a){c="SPView-"+a+"-"+c;f.ue&&f.ue.count(c,(f.ue.count(c)||0)+1)}function p(c){return{qualifier:a("qualifier",c),id:a("id",c),widgetName:a("widgetName",c),
adId:a("adId",c),adIndex:a("adIndex",c),eventType:a("eventType",c)}}function a(c,a){return(c=(new RegExp("[?\x26]"+c+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(a))&&c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):""}function d(c){g[c.selector].viewHandler=b.delay(function(){if(c){var a=c.data("viewpixelurl");a&&-1===e.indexOf(a)&&(l.sendRequest(p(a+"\x26eventType\x3d1")),e.push(a),g[c.selector]&&(g[c.selector].viewState="VIEWED",k("viewUrlSuccess",g[c.selector].placementId)),m())}},500)}function m(){for(var c in g)if("VIEWED"===
g[c].viewState)delete g[c];else{var a=b.$(c),n=g[a.selector].viewState;"VIEWED"!==n&&(b.onScreen(a,-.15*a.height())?"OFF"===n&&(g[a.selector].viewState="ON",d(a)):"ON"===n&&(g[a.selector].viewState="OFF",clearTimeout(g[a.selector].viewHandler)))}}var g={},e=[],q=[],n=[],u=Date.now();b.on("spViewTrackingElementLoaded",m);return{registerViewTrackingElement:function(a,d){-1===e.indexOf(a.data("viewpixelurl"))&&(k("totalAds",d),g[a.selector]={viewState:"OFF",viewHandler:null,placementId:d},b.trigger("spViewTrackingElementLoaded"))},
registerAuiEvents:function(a){Array.isArray(a)&&a.forEach(function(a){if(-1===n.indexOf(a))b.on(a,m)})},registerHorizontalScrollEvent:function(a){a&&a.addEventListener("scroll",function(){75<Date.now()-u&&(u=Date.now(),m())})},loadImagePixel:function(a,b,d,n){!h.checkForHiddenElementsWithTargetList(b,d,n)&&Array.isArray(q)&&-1===q.indexOf(a)&&(q.push(a),l.sendRequest(p(a)))}}});e.when("A","SponsoredProductsViewabilityConfig").register("SponsoredProductsEventBatcher",function(b,l){function h(a,b){a||
(q+=1,g+=b);m+=b;t+=1;k("avgRequestFailurePerPage",q/t);k("avgEventFailurePerPage",g/m)}function k(a,b){f.ue&&f.ue.count("SPBatch-"+a,b)}function p(a){var d=[];b.each(a,function(a){d.push({data:a})});return{events:d}}function a(){if(0<d.length){var a=d.length,g=p(d);d=[];var c=/unagi-\w\w.amazon.com\/1\/events\/com.amazon.eel.SponsoredProductsEventTracking.(prod|gamma)/;l.eelEndpoint!==r&&c.test(l.eelEndpoint)?b.ajax(l.eelEndpoint,{method:"post",params:g,paramsFormat:"json",contentType:"application/json",
accepts:"application/json",success:function(b,c,d){h(!0,a);k("batchSuccess",a)},error:function(b,c,d){e.log("Warning -- sushi response: "+d+" | StatusText: "+c+" | xhrStatusCode: "+(b.http?b.http.status:"could not get xhr status code. ")+" | url: "+l.eelEndpoint,"WARN","SponsoredProductsViewabilityAssets");h(!1,a);k("batchError",a)}}):(h(!1,a),k("batchError",a),e.log("Warning -- sushi endpoint incorrectly configured with: "+l.eelEndpoint,"WARN","SponsoredProductsViewabilityAssets"))}}var d=[],m=0,
g=0,t=0,q=0;b.interval(function(){a()},250);f.addEventListener("beforeunload",function(){a()});return{sendRequest:function(b){d.push(b);15<d.length&&a()},_batchRequest:function(){a()}}});e.when("A","SponsoredProductsEventBatcher").register("SPHAT",function(b,e){function h(a,b){a&&f.ue&&f.ue.count&&f.ue.count(a,(f.ue.count(a)||0)+b?1:0)}function k(a,d){return a&&d?0<b.$(a).find(d.join(",")).filter(function(){return"hidden"===b.$(this).css("visibility")||"0"===b.$(this).css("opacity")||b.$(this).is(":hidden")}).length:
!1}function p(a,d){var e=":hidden";b.$.each(d,function(a,b){e+=":not("+b+")"});return 0<b.$(a).children(e).length}return{checkForHiddenElementsWithTargetList:function(a,b,e){a=k(a,b);h(e,a);return a},checkForHiddenElements:function(a,b,e){a=p(a,b);h(e,a);return a}}});e.when("A","ready").register("SponsoredProductsViewabilityConfigInitializer",function(b){function f(b){e.register("SponsoredProductsViewabilityConfig",function(){return{eelEndpoint:b,updateEelEndpoint:function(a){this.eelEndpoint=a}}})}
var h=b.state("SpViewabilityConfigState"),k=!1;"undefined"!==typeof h&&null!==h&&"undefined"!==typeof h.eelEndpoint&&null!==h.eelEndpoint&&(k=!0,f(h.eelEndpoint));b.state.bind("SpViewabilityConfigState",function(b,a){a.eelEndpoint&&"undefined"!==typeof b.eelEndpoint&&null!==b.eelEndpoint&&(k?e.when("SponsoredProductsViewabilityConfig").execute(function(a){a.updateEelEndpoint(b.eelEndpoint)}):(k=!0,f(b.eelEndpoint)))})})});
/* ******** */
(function(b){var e=window.AmazonUIPageJS||window.P,g=e._namespace||e.attributeErrors,d=g?g("SponsoredProductsAddToCartAssets",""):e;d.guardFatal?d.guardFatal(b)(d,window):d.execute(function(){b(d,window)})})(function(b,e,g){b.when("A").register("sp-atc-config",function(){return{getClientID:function(){return"sspa-dp-desktop"}}});"use strict";b.when("sp-atc-config","fresh-add-to-cart","A").execute(function(d,b,k){var h={},f=function(a,c){var b=k.capabilities.mobile?"mobile":"desktop";a="spF3Atc."+b+
"."+a+"."+c;e.ue&&e.ue.count(a,(ue.count(a)||0)+1)},l=function(a){var c=a&&a.additionalParams?a.additionalParams.loggingUrl:g;c&&!h[c]?k.post(c,{success:function(a){h[c]=!0;f("logClick","success")},error:function(a,c,b){f("logClick","failure")}}):h[c]?f("logClick","duplicate"):c||f("logClick","missingData")};b.addToFreshCart({clientID:d.getClientID(),success:function(a,c){l(a.data);f("addToCart","success")},error:function(a,c,b,d){f("addToCart","failure")}})})});
/* ******** */
(function(v){var y=window.AmazonUIPageJS||window.P,H=y._namespace||y.attributeErrors,B=H?H("QuantitySelectorAssets",""):y;B.guardFatal?B.guardFatal(v)(B,window):B.execute(function(){v(B,window)})})(function(v,y,H){function B(p){var e=!1;v.now(p).execute("qsAssetDuplicationGuard",function(a){e=!!a});return e}function M(p,e){if(!B(p))try{v.register(p,e)}catch(a){if(!a.message.includes("reregistered by QuantitySelectorAssets"))throw a;}}function Ca(){var p=arguments;return{register:function(e,a){if(!B(e))try{v.when.apply(v,
p).register(e,a)}catch(c){if(!c.message.includes("reregistered by QuantitySelectorAssets"))throw c;}},execute:function(e,a){v.when.apply(v,p).execute(e,a)}}}M("QSAssetDuplicationGuard",function(){return{register:M,when:Ca}});"use strict";v.when("QSAssetDuplicationGuard").execute("qsAUIDeps-main-duplication-guard",function(p){p.when("A","QuantitySelectorConstants","a-util").execute("qsAUIDeps-main",function(e,a,c){function g(){x&&x.enableCheckoutCompatibility&&f()}function f(){e.$('span[id^\x3d"'+
a.getQsWidgetSummaryPriceId("")+'"][data-a-color\x3d"price"]').each(function(){e.$(this)[0].style.color="#B12704"});e.$('span[id^\x3d"'+a.getQsWidgetButtonId("")+'"]').each(function(){var a=e.$(this);a.hasClass("a-button-dropdown")&&a.hasClass("a-button-small")&&(a=a.attr("id"),e.$('button[id^\x3d"'+a+'-announce"]').each(function(){e.$(this)[0].style.paddingRight="17px"}))})}function h(a){function c(a){return e.$(a+"-announce")}return function(a){return new c(a)}}function F(c){var d=function(a,d){var h=
a+"-extradata",m=c.state(h);if(null==d)return h=c.state(a),d=e.$.extend({},h,m);m=e.$.extend({},m,d);c.state(h,m)};d.parse=function(){for(var d=e.$(a.getQsWidgetGenericStateSelectorQuery()),h=a.getQsWidgetConfigurationId(""),f=0;f<d.length;f++)try{var x=d[f].getAttribute("data-a-state"),k=JSON.parse(x).key;if(k&&k.substring(0,h.length)==h){var n=c.state(k);if(!n||!n.id){var u=JSON.parse(d[f].innerHTML);c.state(k,u)}}}catch(G){var F=a.getQsWidgetConfigurationJsonString(),r=a.getQsWidgetStateAttributeJsonString();
if(x.includes(r)||d[f].innerHTML.includes(F))throw G;}};d.replace=function(a,d){a+="-extradata";"function"===typeof c.state.replace?c.state.replace(a,d):c.state(a,d)};return{state:d}}var x;v.when("QuantitySelectorAUIDeps_AState","QuantitySelectorAUIDeps_AButton").execute("qsAUIDeps-register",function(a,d){p.register("QuantitySelectorAUIDeps",function(){return{aUtil:c,aState:a.object,aButton:d.object,initialize:g}})});(function(){for(var c=e.$(a.getQsWidgetGenericStateSelectorQuery()),d=a.getQsWidgetGlobalConfigurationId(),
h=0;h<c.length;h++)try{var f=c[h].getAttribute("data-a-state"),l=JSON.parse(f).key;if(l&&l.substring(0,d.length)==d){x=JSON.parse(c[h].innerHTML);break}}catch(n){var F=a.getQsWidgetConfigurationJsonString(),k=a.getQsWidgetStateAttributeJsonString();if(f.includes(k)||c[h].innerHTML.includes(F))throw n;}})();(function(){x&&x.enableCheckoutCompatibility?(v.when("a-state").execute("qsAUIDeps-checkout-compat-a-state-register",function(a){p.register("QuantitySelectorAUIDeps_AState",function(){return{object:F(a)}})}),
v.when("a-buttons").execute("qsAUIDeps-checkout-compat-a-button-register",function(a){p.register("QuantitySelectorAUIDeps_AButton",function(){return{object:h(a)}})}),e.on("checkout:afterReload",function(){e.trigger(a.getQsWidgetEventInitialize(),!1)})):(v.when("a-state").execute("qsAUIDeps-a-state-register",function(a){p.register("QuantitySelectorAUIDeps_AState",function(){return{object:a}})}),v.when("a-button").execute("qsAUIDeps-a-button-register",function(a){p.register("QuantitySelectorAUIDeps_AButton",
function(){return{object:a}})}));e.on("a:pageUpdate ready",function(){e.trigger(a.getQsWidgetEventInitialize(),!1)})})();g()})});"use strict";v.when("QSAssetDuplicationGuard").execute("qsConstants-duplication-guard",function(p){p.when("A").register("QuantitySelectorConstants",function(e){function a(a){return"qs-widget-configuration-"+a}var c={height:358,heightWithAtc:410,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},g={height:303,heightWithAtc:355,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},
f={scrollEventStop:200,constant:19,increment:45,adjustment:20};return{getQsWidgetEventInitialize:function(){return"quantity-selector-widget:initialize"},getQsWidgetEventLoadStatesAndInitialize:function(){return"quantity-selector-widget:loadStatesAndInitialize"},getQsWidgetEventTriggerAction:function(){return"quantity-selector-widget:triggerAction"},getQsWidgetVariationEventTriggerAction:function(){return"quantity-selector-widget-variation-selector:triggerAction"},getQsWidgetEventConfigureList:function(){return"quantity-selector-widget:configure:list"},
getQsWidgetEventConfigureEnable:function(){return"quantity-selector-widget:configure:enable"},getQsWidgetEventConfigureDisable:function(){return"quantity-selector-widget:configure:disable"},getQsWidgetEventConfigureReset:function(){return"quantity-selector-widget:configure:reset"},getQsWidgetEventConfigureGet:function(){return"quantity-selector-widget:configure:get"},getQsWidgetEventConfigureSet:function(){return"quantity-selector-widget:configure:set"},getQsWidgetEventSelectId:function(){return"quantity-selector-widget:selectId"},
getQsWidgetVariationEventSelectId:function(){return"quantity-selector-widget-variation-selector:selectId"},getQsWidgetEventSelectQuantity:function(){return"quantity-selector-widget:selectQuantity"},getQsWidgetEventSelectQuantityClientUpdate:function(){return"quantity-selector-widget:selectQuantity:clientUpdate"},getQsWidgetEventHideDropdown:function(){return"quantity-selector-widget:hideDropdown"},getQsWidgetEventSyncStepperQuantity:function(){return"quantity-selector-widget:sync-stepper-quantity"},
getQsWidgetEventSyncStepperQuantityFromIcdpToHostPage:function(){return"quantity-selector-widget:sync-stepper-quantity:icdp-to-host"},getQsWidgetEventInitialized:function(){return"quantity-selector-widget:initialized"},getQsWidgetEventAction:function(a){return"quantity-selector-widget:action:"+a},getQsWidgetAuiInputTextWrapperClass:function(){return"a-input-text-wrapper"},getQsWidgetActivateDebounce:function(){return 100},getQsWidgetInitialViewDropdown:function(){return"dropdown"},getQsWidgetInitialViewTextLink:function(){return"text_link"},
getQsWidgetInitialViewChooseQuantity:function(){return"choose_quantity"},getQsWidgetActionTriggerOnConfirmation:function(){return"on_confirmation"},getQsWidgetActionTriggerOnSelect:function(){return"on_select"},getQsWidgetGlobalConfigurationId:function(){return"qs-widget-global-configuration"},getQsWidgetConfigurationId:a,getQsWidgetStateScriptSelectorQuery:function(c){return"script[data-a-state*\x3d'"+a(c)+"'], "+("div[data-a-state*\x3d'"+a(c)+"']")},getQsWidgetGenericStateSelectorQuery:function(){return"script[type\x3d'a-state'], div[data-a-state]"},
getQsWidgetStateAttributeJsonString:function(){return"qs-widget-"},getQsWidgetConfigurationJsonString:function(){return"qsItems"},getQsWidgetContainerId:function(a){return"qs-widget-container-"+a},getQsWidgetDivSelectorQueryForWidgetContainers:function(){return"div[id^\x3dqs-widget-container-]"},getQsWidgetSpinnerId:function(a){return"qs-widget-spinner-"+a},getQsWidgetDivSelectorQueryForSpinners:function(){return"div[id^\x3dqs-widget-spinner-]"},getQsWidgetCheckboxId:function(a){return"qs-widget-checkbox-"+
a},getQsWidgetInputSelectorQueryForCheckboxes:function(){return"input[id^\x3dqs-widget-checkbox-]"},getQsWidgetButtonContainerId:function(a){return"qs-widget-button-container-"+a},getQsWidgetButtonId:function(a){return"qs-widget-button-"+a},getQsWidgetStepperId:function(a){return"qs-widget-stepper-"+a},getQsWidgetAtcButtonId:function(a){return"qs-widget-atc-button-"+a},getQsWidgetPlusButtonId:function(a){return"qs-widget-plus-button-"+a},getQsWidgetMinusButtonId:function(a){return"qs-widget-minus-button-"+
a},getQsWidgetDropdownContainerGenericId:function(){return"qs-widget-dropdown-container-"},getQsWidgetDropdownContainerId:function(a){return"qs-widget-dropdown-container-"+a},getQsWidgetDropdownId:function(a){return"qs-widget-dropdown-"+a},getQsWidgetDropdownViewId:function(a){return"qs-widget-dropdown-view-"+a},getQsWidgetVariationDropdownViewId:function(a){return"qs-widget-dropdown-view-variation-"+a},getQsWidgetDropdownItemId:function(a,c){return"qs-widget-dropdown-item-"+c+"-"+a},getQsWidgetDropdownItemAriaId:function(a,
c){return"qs-widget-dropdown-item-aria-"+c+"-"+a},getQsWidgetDropdownItemQuantitySuffixId:function(a,c){return"qs-widget-dropdown-item-quantitySuffix-"+c+"-"+a},getQsWidgetDropdownUnorderedListId:function(a){return"qs-widget-dropdown-unorderedlist-"+a},getQsWidgetDropdownVariationUnorderedListId:function(a){return"qs-widget-dropdown-variation-unorderedlist-"+a},getQsWidgetTextInputId:function(a){return"qs-widget-text-input-"+a},getQsWidgetTextInputContainerId:function(a){return"qs-widget-text-input-container-"+
a},getQsWidgetTextInputUpdateButtonId:function(a){return"qs-widget-text-input-updatelink-"+a},getQsWidgetTextInputUpdateButtonContainerId:function(a){return"qs-widget-text-input-updatelink-container-"+a},getQsWidgetTextInputUpdateButtonDecl:function(){return"qs-widget-text-input-updatelink-decl"},getQsWidgetTextInputDecl:function(){return"qs-widget-text-input-decl"},getQsWidgetQuantityContainerId:function(a){return"qs-widget-quantity-container-"+a},getQsWidgetQuantityId:function(a){return"qs-widget-quantity-"+
a},getQsWidgetQuantitySuffixId:function(a){return"qs-widget-quantity-suffix-"+a},getQsWidgetInitialViewSuffixId:function(a){return"qs-widget-initialView-suffix-"+a},getQsWidgetSummaryPriceId:function(a){return"qs-widget-summary-price-"+a},getQsWidgetSummaryPriceSymbolId:function(a){return"qs-widget-summary-price-symbol-"+a},getQsWidgetSummaryPriceWholeId:function(a){return"qs-widget-summary-price-whole-"+a},getQsWidgetSummaryPriceFractionId:function(a){return"qs-widget-summary-price-fraction-"+a},
getQsWidgetSummaryPriceDecimalId:function(a){return"qs-widget-summary-price-decimal-"+a},getQsWidgetSummaryAtcId:function(a){return"qs-widget-summary-atc-"+a},getQsWidgetFooterPriceContainerId:function(a){return"qs-widget-footer-price-container-"+a},getQsWidgetFooterPriceSymbolId:function(a){return"qs-widget-footer-price-symbol-"+a},getQsWidgetFooterPriceWholeId:function(a){return"qs-widget-footer-price-whole-"+a},getQsWidgetFooterPriceFractionId:function(a){return"qs-widget-footer-price-fraction-"+
a},getQsWidgetFooterPriceDecimalId:function(a){return"qs-widget-footer-price-decimal-"+a},getQsWidgetFooterQuantitySuffixContainerId:function(a){return"qs-widget-footer-quantitySuffix-container-"+a},getQsWidgetFooterQuantitySuffixId:function(a){return"qs-widget-footer-quantitySuffix-"+a},getQsWidgetButtonDecl:function(){return"qs-widget-button-decl"},getQsWidgetSummaryAtcDecl:function(){return"qs-widget-summary-atc-decl"},getQsWidgetQuantityChangelinkId:function(a){return"qs-widget-quantity-changelink-"+
a},getQsWidgetQuantityChangelinkDecl:function(){return"qs-widget-quantity-changelink-decl"},getQsWidgetDropdownItemDecl:function(){return"qs-widget-dropdown-item-decl"},getQsWidgetVariationDropdownItemDecl:function(){return"qs-widget-dropdown-variation-item-decl"},getQsWidgetDropdownDecl:function(){return"qs-widget-dropdown-decl"},getQsWidgetDropdownScrollMetricThreshold:function(){return 20},getQsWidgetBottomSheetId:function(a){return"qs-widget-bottom-sheet-"+a},getQsWidgetBottomSheetPriceTextId:function(a){return"qs-widget-bottom-sheet-price-text-"+
a},getQsWidgetBottomSheetContainerId:function(a){return"qs-widget-bottom-sheet-container-"+a},getQsWidgetBottomSheetQuantitySuffixId:function(a){return"qs-widget-bottom-sheet-quantitySuffix-"+a},getQsWidgetBottomSheetBackButtonId:function(a){return"qs-widget-bottom-sheet-back-button-"+a},getQsWidgetBottomSheetBackButtonDecl:function(){return"qs-widget-bottom-sheet-back-button-decl"},getQsWidgetSummaryDisclaimerId:function(a){return"qs-widget-summary-disclaimer-"+a},getQsWidgetSummaryDisclaimerContainerId:function(a){return"qs-widget-summary-disclaimer-container-"+
a},getQsWidgetBottomSheetTemplateId:function(){return"qs-widget-bottom-sheet-container-qsUID"},getQsWidgetBottomSheetSelectQuantityTextId:function(a){return"qs-widget-bottom-sheet-select-quantity-text-"+a},getQsWidgetBottomSheetImageId:function(a){return"qs-widget-bottom-sheet-image-"+a},getQsWidgetBottomSheetUnitTextId:function(a){return"qs-widget-bottom-sheet-unit-text-"+a},getQsWidgetBottomSheetTableId:function(a){return"qs-widget-bottom-sheet-table-"+a},getQsWidgetBottomSheetPpuTextId:function(a){return"qs-widget-bottom-sheet-ppu-text-"+
a},getQsWidgetInitialViewTextLinkId:function(a){return"qs-widget-link-"+a},getQsWidgetBottomSheetHeightConfig:function(a){return a?c:g},getQsWidgetBottomSheetDropDownScrollFactor:function(){return f},getQsWidget1DBottomSheetSelectorCssClass:function(){return"qs-widget-new-1d-dropdown-li"},getQsWidget2DBottomSheetQuantitySelectorCssClass:function(){return"qs-widget-new-2d-dropdown-qs-li"},getQsWidget2DBottomSheetVariationSelectorCssClass:function(){return"qs-widget-new-2d-dropdown-vs-li"},getQsWidgetVariationSelectorListMapKey:function(){return"variationSelectorListsMap"},
getQsWidgetVariationSelectorSelectedIdKey:function(){return"selectedId"},getQsWidgetVariationSelectorDisplayTextKey:function(){return"displayText"},getQsWidgetVariationSelectorDisplayTextWithQuantityKey:function(){return"displayTextWithQuantity"},getQsWidgetStepperIncrementDecl:function(){return"qs-widget-increment-decl"},getQsWidgetStepperDecrementDecl:function(){return"qs-widget-decrement-decl"},getQsWidgetStepperDecrementMinusIconId:function(a){return"qs-widget-decrement-minus-icon-"+a},getQsWidgetStepperDecrementTrashIconId:function(a){return"qs-widget-decrement-trash-icon-"+
a},getQsWidgetStepperAddToCartReftag:function(){return"_qs_atc"},getQsWidgetStepperDecrementReftag:function(){return"_qs_rm"},getQsWidgetStepperIncrementReftag:function(){return"_qs_add"},getQsWidgetBottomSheetReftag:function(){return"_qs_udt"},getQsWidgetStepperShapeType:function(){return"QUANTITY_STEPPER"},getQsWidgetSimplifiedStepperShapeType:function(){return"SIMPLIFIED_QUANTITY_STEPPER"},getQsWidgetDropdownItemIdPrefix:function(){return"qs-widget-dropdown-item-"},getQsWidgetCadenceDropdownItemId:function(a,
c){return"qs-widget-cadence-dropdown-item-"+c+"-"+a},getTabKeyCode:function(){return 9},getReturnKeyCode:function(){return 13}}})});"use strict";v.when("QSAssetDuplicationGuard").execute("qsMetadata-duplication-guard",function(p){p.when("A","QuantitySelectorState","QuantitySelectorAUIDeps").register("QuantitySelectorMetadata",function(e,a,c){function g(c){return(c=a.getQsWidgetConfiguration(c).metadata)?JSON.parse(c):null}return{isWeblabEnabled:function(a,c,e){a:{if((a=g(a))&&a.weblabs)for(var f=
0;f<a.weblabs.length;f++){var h=a.weblabs[f];if(h.weblabName==c){c=h.treatment;break a}}c=null}return null==c?e:"T1"==c?!0:!1},getMetaConfiguration:function(a,c){return(a=g(a))?a[c]:null}}})});"use strict";v.when("A","QSAssetDuplicationGuard").execute("qsMetrics-duplication-guard",function(p,e){e.when("A","QuantitySelectorAUIDeps","QuantitySelectorConstants").register("QuantitySelectorMetrics",function(a,c,e){function f(a){y.ue&&y.ue.count&&a&&ue.count(a,(ue.count(a)||0)+1)}v.when("ready").execute(function(){a.now()});
return{incrementInitializeCount:function(a,c){var e="QuantitySelector-Initialize";e=a?e+"-Success-Count":e+"-Failed-Count";f(c?e+":mobile":e+":desktop")},incrementInvalidIdCount:function(){f("QuantitySelector-InvalidID")},incrementTriggerActionCount:function(a,c,e){a="QuantitySelector-TriggerAction-"+a;a=c?a+"-Success-Count":a+"-Failed-Count";f(e?a+":mobile":a+":desktop")},incrementChangeLinkCount:function(){f("QuantitySelector-ChangeLink-Count")},incrementShowPopup:function(a){var c="QuantitySelector-ShowPopup-Count";
f(a?c+":mobile":c+":desktop")},incrementQsItemNotFound:function(a,c){var e="QuantitySelector-QsItemNotFound-Count";f(a?e+":mobile:"+c:e+":desktop:"+c)},logLatencyMetric:function(a,c,e){a="QuantitySelector-TimeTo-"+a;y.ue&&y.ue.count&&a&&"undefined"!==typeof y.ue_t0&&(c-=y.ue_t0,ue.count(a,c),ue.count(a+"Hundredths",Math.floor(c/10)))},incrementQsWidgetFailToRender:function(){f("QuantitySelector-QsWidgetFailToRender-Count")},logCsm:function(a,f){var g=c.aState.state(e.getQsWidgetConfigurationId(a));
if(g&&(a="mobile"==g.viewType.toLowerCase()?"mob":"dsk",(g=g.qsCsm)&&g.almBrandRefMarker&&g.pageRefMarker)){a:{var h=g.sellingUomDimension;var d=g.pricingUomDimension;if(h&&d){var m="s";switch(h){case "count":m+="u";break;case "weight":m+="w";break;default:h=void 0;break a}m+="p";switch(d){case "count":m+="u";break;case "weight":m+="w";break;default:h=void 0;break a}h=m}else h=void 0}h&&(f={pageType:g.pageType,subPageType:g.subPageType,pageTypeId:g.pageTypeId,storeName:g.tabId,programRegionId:g.programRegionId,
hitType:g.hitType,refMarker:g.almBrandRefMarker+"_"+a+"_"+g.pageRefMarker+"_qs_"+f+"_"+h,fromTabName:g.fromTabName,toTabName:g.toTabName},y.ue&&y.ue.event&&ue.event(f,"quantityselector_attr","quantityselector.QuantityselectorMetrics.2"))}}}})});"use strict";v.when("QSAssetDuplicationGuard").execute("qsState-duplication-guard",function(p){p.when("A","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps").register("QuantitySelectorState",function(e,a,c,g){function f(c){var k=
g.aState.state(a.getQsWidgetConfigurationId(c));F(c)||(h(c),k=g.aState.state(a.getQsWidgetConfigurationId(c)));return k}function h(c){if(c){var k=a.getQsWidgetConfigurationId(c),d=a.getQsWidgetStateScriptSelectorQuery(c);try{var m=e.$(d).first(),f=JSON.parse(m.html());g.aState.state(k,f);if(f&&f.staticData){var l=JSON.parse(f.staticData).asin;t(l,c)}}catch(Da){if(c=a.getQsWidgetConfigurationJsonString(),m.html().includes(c))throw Da;}}}function F(c){return(c=g.aState.state(a.getQsWidgetConfigurationId(c)))&&
c.id?!0:!1}function x(a){var c=f(a),k=c.selectedId;c=c.selectedQuantity;0==c||c?d(a,c):k&&r(a,k)}function r(c,d){d={previousSelectedId:d,previousSelectedQuantity:null};g.aState.state(a.getQsWidgetConfigurationId(c),d)}function d(c,d){d={previousSelectedQuantity:d,previousSelectedId:null};g.aState.state(a.getQsWidgetConfigurationId(c),d)}function m(){for(var c=[],d=e.$(a.getQsWidgetGenericStateSelectorQuery()),m=a.getQsWidgetConfigurationId(""),f=0;f<d.length;f++)try{var l=d[f].getAttribute("data-a-state"),
g=JSON.parse(l).key;if(g&&g.substring(0,m.length)==m){var h=g.substring(m.length);c.push(h)}}catch(D){var t=a.getQsWidgetStateAttributeJsonString();if(l.includes(t))throw D;}return c}function t(a,c){var d;if(d=a&&c)d="f3cart"!==f(c).clientId;d&&l(c)&&(z[a]||(z[a]=new Set),z[a].add(c))}function l(c){c=f(c);return c.shapeType===a.getQsWidgetStepperShapeType()||c.shapeType===a.getQsWidgetSimplifiedStepperShapeType()}var z={};e.on(a.getQsWidgetEventConfigureList(),function(a){"function"===typeof a&&a(m())});
e.on(a.getQsWidgetEventConfigureGet(),function(a,c){a=f(a);"function"===typeof c&&c(a)});e.on(a.getQsWidgetEventConfigureSet(),function(c,d){g.aState.state.replace(a.getQsWidgetConfigurationId(c),d);e.trigger(a.getQsWidgetEventInitialize(),!0,c)});return{getQsWidgetConfiguration:f,loadQsWidgetStateConfiguration:function(a){if(!F(a))h(a);else if(a)try{var c=f(a),d=JSON.parse(c.staticData).asin;t(d,a)}catch(w){}},reloadQsWidgetStateConfiguration:h,saveOriginalSettings:function(a){},setEnable:function(c,
d){d={enable:d};g.aState.state(a.getQsWidgetConfigurationId(c),d)},setInitialized:function(c){g.aState.state(a.getQsWidgetConfigurationId(c),{initialized:!0})},setSelectedId:function(c,d,e){"SIMPLIFIED_QUANTITY_STEPPER"!==f(c).shapeType&&(e||x(c),d={selectedId:d,selectedQuantity:null},g.aState.state(a.getQsWidgetConfigurationId(c),d))},setSelectedQuantity:function(c,d,e){e||x(c);d={selectedId:null,selectedQuantity:d};g.aState.state(a.getQsWidgetConfigurationId(c),d)},setPreviousSelectedId:r,setPreviousSelectedQuantity:d,
setData:function(c,d){g.aState.state(a.getQsWidgetConfigurationId(c),d)},getQsUIDs:m,getQsWidgetMapSet:function(a){return z[a]},isStepper:l}})});"use strict";v.when("QSAssetDuplicationGuard").execute("qsTemplates-duplication-guard",function(p){p.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps","QuantitySelectorUtils").register("QuantitySelectorTemplates",function(e,a,c,g,f){function h(a,c){e.$("#"+a+" .replace-qsUID").each(function(){var a=e.$(this).attr("id");
e.$(this).attr("id",a.replace("qsUID",c))})}return{generateBottomSheet:function(g){var x=f.getQsWidgetBottomSheetTemplateElement().clone(!0);x.appendTo(f.getQsWidgetContainer(g));x.attr("id",c.getQsWidgetBottomSheetContainerId(g));var r=a.getQsWidgetConfiguration(g);x.attr("cel_widget_id","qs-widget-metric-"+r.qsMetricID+"-bottomsheet");x.addClass(r.cssClass);h(c.getQsWidgetBottomSheetContainerId(g),g);f.getQsWidgetBottomSheetSelectQuantityTextElement(g).text(f.replaceNbspWithPlainTextNbsp(r.bottomSheetSelectQuantityText));
f.getQsWidgetBottomSheetUnitTextElement(g).text(f.replaceNbspWithPlainTextNbsp(r.bottomSheetSelectQuantityUnitText));f.getQsWidgetBottomSheetUnitTextElement(g).attr("aria-label",r.bottomSheetSelectQuantityUnitAriaLabelText);f.getQsWidgetBottomSheetPpuTextElement(g).text(f.replaceNbspWithPlainTextNbsp(r.bottomSheetPricePerUnitText));f.getQsWidgetBottomSheetPriceTextElement(g).text(f.replaceNbspWithPlainTextNbsp(r.estTotalPriceText));f.getQsWidgetBottomSheetImageElement(g).attr("src",r.bottomSheetImageUrl);
r.summaryDisclaimerText?f.getQsWidgetSummaryDisclaimerElement(g).text(f.replaceNbspWithPlainTextNbsp(r.summaryDisclaimerText)):(f.getQsWidgetBottomSheetTableElement(g).attr("style","border-bottom: 0px solid !important;"),f.getQsWidgetSummaryDisclaimerContainerElement(g).remove());"right"===r.currencySymbolPosition&&f.getQsWidgetSummaryPriceSymbolElement(g).insertAfter(f.getQsWidgetSummaryPriceFractionElement(g));x=f.getQsWidgetSummaryAtcButtonAsComponent(g);a.isStepper(g)?x.text(f.replaceNbspWithPlainTextNbsp(r.bottomSheetUpdateCartText)):
x.text(f.replaceNbspWithPlainTextNbsp(r.bottomSheetAddToCartText));e.declarative.create(f.getQsWidgetSummaryAtcButton(g),c.getQsWidgetSummaryAtcDecl(),{qsUID:g})}}})});"use strict";v.when("QSAssetDuplicationGuard").execute("qsUtils-duplication-guard",function(p){p.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps","QuantitySelectorMetrics").register("QuantitySelectorUtils",function(e,a,c,g,f){function h(b){return"true"==b||1==b?!0:!1}function p(b){b=a.getQsWidgetConfiguration(b);
return b.clientId?b.clientId:"unrec-client"}function x(b){return"mobile"==a.getQsWidgetConfiguration(b).viewType.toLowerCase()?!0:!1}function r(b){return a.getQsWidgetConfiguration(b).shapeType===c.getQsWidgetSimplifiedStepperShapeType()}function d(b){var c=a.getQsWidgetConfiguration(b);return r(b)||"undefined"!=typeof c.showATCButtonWhenZeroQuantity&&c.showATCButtonWhenZeroQuantity?!0:!1}function m(b){b=a.getQsWidgetConfiguration(b);return h(b.showConfirmationView)?!0:!1}function t(b){b=a.getQsWidgetConfiguration(b);
return h(b.allowZeroQuantity)?!0:!1}function l(b){return a.getQsWidgetConfiguration(b).initialView.toLowerCase()==c.getQsWidgetInitialViewChooseQuantity()?!0:!1}function z(b){b=w(b);return null==b||1>b.length?!1:!0}function k(b){if(b)try{var c=a.getQsWidgetConfiguration(b);return JSON.parse(c.staticData).storeId}catch(E){}}function n(b){b=a.getQsWidgetConfiguration(b).variationSelectorListsMap;if(null==b)return null;b=Object.keys(b);return null==b||1>b.length?null:b[0]}function u(b,c){var q=a.getQsWidgetConfiguration(b).variationSelectorListsMap;
if(null==q)return null;null==c&&(c=n(b));return null==c?null:q[c]}function w(b,a){b=u(b,a);return null==b?null:b.selectorItems}function v(b){return a.getQsWidgetConfiguration(b).bottomSheetChangeCurrentQuantityText}function G(b,a){b=C(b,a).quantityText;return"+"==b.substr(b.length-1)?{result:!0,initialQuantityText:b.substr(0,b.length-1)}:{result:!1}}function B(b,c){var q=a.getQsWidgetConfiguration(b),d=q.qsItems.length;q=q.allowZeroQuantity;if(D(b)){if(1==c||q&&2==c)return!0}else if(c==d||c==d-1&&
q)return!0;return!1}function H(b,c){var q=a.getQsWidgetConfiguration(b).qsItems;if(D(b)){if(c==q.length)return!0}else if(1==c)return!0;return!1}function D(b){b=a.getQsWidgetConfiguration(b).qsItems;return A(b[b.length-1])>A(b[0])?!0:!1}function M(b){var a=N(b);a&&e.trigger(c.getQsWidgetEventSelectQuantity(),b,a,!1);Q(b);e.trigger(c.getQsWidgetEventInitialized(),b)}function R(b){b.removeClass("aok-hidden")}function ea(b){var a=e.$("#"+c.getQsWidgetQuantityChangelinkId(b));b=e.$("#"+c.getQsWidgetTextInputUpdateButtonId(b));
a.attr("draggable","false");b.attr("draggable","false")}function J(b){return e.$("#"+c.getQsWidgetContainerId(b))}function fa(b){return e.$("#"+c.getQsWidgetButtonContainerId(b))}function K(b){return g.aButton("#"+c.getQsWidgetButtonId(b))}function S(b){return e.$("#"+c.getQsWidgetStepperId(b))}function T(b){return g.aButton("#"+c.getQsWidgetAtcButtonId(b))}function U(b){return g.aButton("#"+c.getQsWidgetPlusButtonId(b))}function O(b){return e.$("#"+c.getQsWidgetButtonId(b)+"-announce")}function ha(b){return e.$("#"+
c.getQsWidgetDropdownContainerId(b))}function ia(b){return e.$("#"+c.getQsWidgetDropdownViewId(b))}function P(b){return e.$("#"+c.getQsWidgetVariationDropdownViewId(b))}function V(b){return e.$("#"+c.getQsWidgetDropdownUnorderedListId(b))}function ja(b,a){return e.$("#"+c.getQsWidgetDropdownItemId(b,a))}function ka(b){return e.$("#"+c.getQsWidgetTextInputContainerId(b))}function L(b){return e.$("#"+c.getQsWidgetTextInputId(b))}function la(b){return e.$("#"+c.getQsWidgetTextInputUpdateButtonContainerId(b))}
function ma(b){return e.$("#"+c.getQsWidgetSummaryAtcId(b))}function na(b){return g.aButton("#"+c.getQsWidgetSummaryAtcId(b))}function oa(b){return e.$("#"+c.getQsWidgetBottomSheetPriceTextId(b))}function W(b){return e.$("#"+c.getQsWidgetStepperDecrementMinusIconId(b))}function X(b){return e.$("#"+c.getQsWidgetStepperDecrementTrashIconId(b))}function C(b,c){try{var q=a.getQsWidgetConfiguration(b);if(q.qsItems){var d=q.qsItems[parseInt(c)-1];return d.id===c?d:pa(b,c)}}catch(Ea){return pa(b,c)}}function pa(b,
c){b=a.getQsWidgetConfiguration(b);for(var d=0;d<b.qsItems.length;d++)if(b.qsItems[d].id==c)return b.qsItems[d]}function A(b){return parseFloat(JSON.parse(b.data).quantity)}function qa(b,a){var d=u(b,a);if(null==d)return null;d=d[c.getQsWidgetVariationSelectorSelectedIdKey()];if(null==d)return ra(b);b=w(b,a);if(null==b)return null;for(a=0;a<b.length;a++)if(b[a].id==d)return b[a];return null}function ra(b,a){b=w(b,a);if(null==b)return null;for(a=0;a<b.length;a++)if(h(b[a].isSelected))return b[a];return null}
function Y(b){var c=a.getQsWidgetConfiguration(b).selectedId;return c?c:sa(b)}function sa(b){b=a.getQsWidgetConfiguration(b);if(b.qsItems&&0!=b.qsItems.length){for(var c=0;c<b.qsItems.length;c++)if(h(b.qsItems[c].isSelected))return b.qsItems[c].id;return b.qsItems[0].id}}function ta(b,a){var d=u(b,a);if(null==d)return null;d=d[c.getQsWidgetVariationSelectorSelectedIdKey()];return null!=d?d:ua(b,a)}function ua(b,a){b=ra(b);return null==b?null:b.id}function N(b){return a.getQsWidgetConfiguration(b).selectedQuantity}
function va(b,a){return 0>a?b[0].id:a>=b.length?b[b.length-1].id:b[a].id}function wa(b,a){if(null==b)return 0;for(var c=0;c<b.length;c++)if(a==b[c].id)return c}function Z(b,a){return(b=v(b))?a+b:"Current quantity "+a}function aa(b,a){return(t(b)?/^(([0-9]\d{0,2}))$/:/^(([1-9]\d{0,2})|(0[1-9]\d?)|(00[1-9]))$/).test(a)}function xa(b,a){var c=ka(b),d=la(b);fa(b).addClass("aok-hidden");R(c);var q=L(b);a&&q.val(a);a=q.val();aa(b,a)&&N(b)!==a?R(d):d.addClass("aok-hidden");x(b)?q.focus():setTimeout(function(){q.focus()},
200)}function Q(b){if(b){var a=e.$("#"+c.getQsWidgetCheckboxId(b)),d=J(b);b=e.$("#"+c.getQsWidgetSpinnerId(b))}else a=e.$(c.getQsWidgetInputSelectorQueryForCheckboxes()),b=e.$(c.getQsWidgetDivSelectorQueryForSpinners()),d=e.$(c.getQsWidgetDivSelectorQueryForWidgetContainers());a.remove();b.remove();d.removeClass("qs-widget-hidden")}function ya(b,c){c=c.displayTextWithQuantityList;var d=a.getQsWidgetConfiguration(b).qsItems;b=Y(b);for(var q=0;q<d.length;q++)if(d[q].id==b)return c[q];return null}function za(b,
a){null==a&&(a=n(b));if(null==a)return{};var d=qa(b,a);if(null==d)return{};var q=x(b)?d.displayTextForMobile:d.dissplayTextForDesktop;b=ya(b,d);var e={};e[a]=JSON.parse(d.data);e[a][c.getQsWidgetVariationSelectorDisplayTextKey()]=q;e[a][c.getQsWidgetVariationSelectorDisplayTextWithQuantityKey()]=b;return e}function Aa(b,a){b=u(b,a);return null==b||null==b.actionTriggerId||""==b.actionTriggerId?null:b.actionTriggerId}function ba(b,d,k,n,m){m=a.getQsWidgetConfiguration(b);var q=m.selectedId,g=m.selectedQuantity,
f=a.isStepper(b);n=f&&n!=c.getQsWidgetStepperAddToCartReftag();var E=a.getQsWidgetConfiguration(b);var l=E.previousSelectedQuantity;E=E.previousSelectedId;l=l?l:E?A(C(b,E)):null;E=JSON.parse(m.staticData);var da=m.sellingUnit,u=m.sellingDimension;if(q)for(var h=0;h<m.qsItems.length;h++)if(m.qsItems[h].id==q){var t=JSON.parse(m.qsItems[h].data);t=e.$.extend({qsUID:b,prevSelectedQty:l,isStepperFlag:f,setQuantityFlag:n,tunneledData:d,quantityData:t,sellingUnit:da,sellingDimension:u},E,t);z(b)&&(t=e.$.extend(t,
za(b,k)))}if(g||0==g)t=e.$.extend({qsUID:b,prevSelectedQty:l,isStepperFlag:f,setQuantityFlag:n,tunneledData:d,sellingUnit:da,sellingDimension:u},E,{quantity:g}),z(b)&&(t=e.$.extend(t,za(b,k)));return t}function Ba(b){var c=a.getQsWidgetConfiguration(b);if(r(b))return c.pricePerUnitText?c.pricePerUnitText:"bcPrice";b=C(b,1);if(!b||!b.price)return"";b=b.price;return b.currencySymbol+b.wholeValue+b.decimalSeparator+b.fractionValue}function ca(b){return b.replace(/&nbsp;/g," ")}var I=[];e.on(c.getQsWidgetEventTriggerAction(),
function(b,d,k,m,n){var q=a.getQsWidgetConfiguration(b);d||(d=q.actionId);q="mobile"==q.viewType.toLowerCase();var g=!1;(b=ba(b,k,null,m,n))&&b.ref&&null!=m&&(b.reftag=b.ref+m);b&&(e.trigger(c.getQsWidgetEventAction(d),b),f.incrementTriggerActionCount(d,!0,q),g=!0);g||f.incrementTriggerActionCount(d,!1,q)});e.on(c.getQsWidgetVariationEventTriggerAction(),function(b,d,k,m){var q="mobile"==a.getQsWidgetConfiguration(b).viewType.toLowerCase();k=ba(b,k);null==d&&(d=Aa(b,m));null!=d&&(e.trigger(c.getQsWidgetEventAction(d),
k),f.incrementTriggerActionCount(d,!1,q))});return{isInitialized:function(b){return(b=a.getQsWidgetConfiguration(b))?b.initialized:!1},isMobile:x,isSimplifiedStepper:r,isQsWidgetEnabled:function(b){b=a.getQsWidgetConfiguration(b);return b.hasOwnProperty("enable")?h(b.enable):!0},isQsWidgetQuantityZero:function(b){var c=a.getQsWidgetConfiguration(b);return c.selectedId&&0==A(C(b,c.selectedId))||c.selectedQuantity&&"0"==c.selectedQuantity?!0:!1},isConfirmationViewEnabled:m,isAllowZeroQuantityEnabled:t,
isInitialViewDropdown:function(b){return a.getQsWidgetConfiguration(b).initialView.toLowerCase()==c.getQsWidgetInitialViewDropdown()?!0:!1},isInitialViewTextLink:function(b){return a.getQsWidgetConfiguration(b).initialView.toLowerCase()==c.getQsWidgetInitialViewTextLink()?!0:!1},isInitialViewChooseQuantity:l,isVariationSelectorEnabled:z,getVariationSelectorItemList:u,getQsWidgetBottomSheetConfig:function(b){var d=a.getQsWidgetConfiguration(b),e=c.getQsWidgetBottomSheetHeightConfig(d.enabledBottomSheetWith2DSupport),
k=0;d.summaryDisclaimerText||(k=m(b)?e.disclaimerTextAdjustmentWithAtc:e.disclaimerTextAdjustment);return m(b)?{closeMessage:d.bottomSheetCancelText,height:e.heightWithAtc-k}:{closeMessage:d.bottomSheetDoneText,height:e.height-k}},getQsWidgetBottomSheetChangeCurrentQuantityText:v,isActionTriggerOnConfirmation:function(b){return a.getQsWidgetConfiguration(b).actionTrigger.toLowerCase()==c.getQsWidgetActionTriggerOnConfirmation()?!0:!1},isActionTriggerOnSelect:function(b){return a.getQsWidgetConfiguration(b).actionTrigger.toLowerCase()==
c.getQsWidgetActionTriggerOnSelect()?!0:!1},isVariationSelectorTriggerOnSelect:function(b){return null==b?!1:b.actionTriggerType.toLowerCase()==c.getQsWidgetActionTriggerOnSelect()},isVariationSelectorTriggerOnConfirmation:function(b){return null==b?!1:b.actionTriggerType.toLowerCase()==c.getQsWidgetActionTriggerOnConfirmation()},isTextInputRequired:G,isOrderMin:B,isOrderMax:H,isAscending:D,initializeWidget:function(b){if(r(b))M(b);else{var d=Y(b),k=N(b),m=a.getQsWidgetConfiguration(b);if(m.qsItems)for(var n=
0;n<m.qsItems.length;n++)parseFloat(k)===A(m.qsItems[n])&&(d=m.qsItems[n].id,k=null);k?e.trigger(c.getQsWidgetEventSelectQuantity(),b,k,!1,function(){ea(b)}):d&&e.trigger(c.getQsWidgetEventSelectId(),b,d,!1,function(){ea(b)});z&&(d=ta(b),null!=d&&e.trigger(c.getQsWidgetVariationEventSelectId(),b,d,!1,function(){}));Q(b);e.trigger(c.getQsWidgetEventInitialized(),b)}},activateWidget:function(b){var a=I.indexOf(b);-1<a&&I.splice(a,1);setTimeout(function(){I.push(b)},c.getQsWidgetActivateDebounce())},
deactivateWidget:function(b){b=I.indexOf(b);-1<b&&I.splice(b,1)},getActivatedQsWidgets:function(){return I},hideComponent:function(b,a){b.addClass("aok-hidden")},showComponent:R,isComponentVisible:function(b){return!b.hasClass("aok-hidden")},isElementVisible:function(b){return"hidden"!==b.css("visibility")},setElementVisibility:function(b,a){a?b.css("visibility","visible"):b.css("visibility","hidden")},setHtml:function(b,a){b.html(a)},setAtcButtonStepperText:function(b){if(a.isStepper(b)&&l(b)){var c=
a.getQsWidgetConfiguration(b),d=na(b);d.text(ca(c.bottomSheetUpdateCartText));(c.selectedId&&0==A(C(b,c.selectedId))||"0"==c.selectedQuantity)&&d.text(ca(c.bottomSheetAddToCartText))}},setQsWidgetContainerMinWidthAndHeight:function(b){b=J(b);b.css("min-width",b.width()+"px");b.css("min-height",b.height()+"px")},resetQsWidgetContainerMinWidthAndHeight:function(b){b=J(b);b.css("min-width","0px");b.css("min-height","0px")},enableQsWidget:function(b){a.setEnable(b,!0);if(!r()){var c=K(b);b=L(b);c.enable();
b.removeClass("a-form-disabled");b.addClass("a-form-normal");b.removeAttr("disabled")}},disableQsWidget:function(b){a.setEnable(b,!1);if(!r()){var c=K(b);b=L(b);c.disable();b.removeClass("a-form-normal");b.addClass("a-form-disabled");b.attr("disabled","disabled")}},popOutDropDownContainer:function(b){var c=J(b),d=c.offset(),k=ha(b),m=d.left,n=d.top,g="unset",f=e.$(y).height(),l=a.getQsWidgetConfiguration(b).dropdownAnchorId;b=l.startsWith("qs-widget-container")?c:e.$("#"+l);if(l&&b.length){for(l=
b;!l.is(document)&&"static"===l.css("position");)l=l.parent();n-=null===l.offset()?0:l.offset().top;m-=null===l.offset()?0:l.offset().left;k.appendTo(b);l.is(document)||(f=l.height())}else k.appendTo(document.body);m+k.width()>y.scrollX+e.$(y).width()&&(m=m+c.width()-k.width());d.top-y.scrollY+k.height()>e.$(y).height()&&(g=f-n-c.height(),n="unset");k.css({left:m,top:n,bottom:g})},getQsWidgetContainer:J,getQsWidgetButtonContainer:fa,getQsWidgetButtonAsComponent:K,getQsWidgetStepperElement:S,getQsWidgetAtcButtonAsComponent:T,
getQsWidgetButton:O,getQsWidgetDropdownContainer:ha,getQsWidgetDropdownElement:function(b){return e.$("#"+c.getQsWidgetDropdownId(b))},getQsWidgetDropdownViewSelector:ia,getQsWidgetVariationDropdownViewSelector:P,getQsWidgetDropdownUnorderedListElement:V,getQsWidgetDropdownVariationUnorderedListElement:function(b){return e.$("#"+c.getQsWidgetDropdownVariationUnorderedListId(b))},getQsWidgetDropdownItemElement:ja,getQsWidgetPlusButtonAsComponent:U,getQsWidgetTextInputContainer:ka,getQsWidgetTextInputElement:L,
getQsWidgetTextInputUpdateButtonContainer:la,getQsWidgetQuantityContainer:function(b){return e.$("#"+c.getQsWidgetQuantityContainerId(b))},getQsWidgetQuantityElement:function(b){return e.$("#"+c.getQsWidgetQuantityId(b))},getQsWidgetQuantitySuffixElement:function(b){return e.$("#"+c.getQsWidgetQuantitySuffixId(b))},getQsWidgetInitialViewSuffixElement:function(b){return e.$("#"+c.getQsWidgetInitialViewSuffixId(b))},getQsWidgetSummaryAtcButton:ma,getQsWidgetSummaryAtcButtonAsComponent:na,getQsWidgetSummaryPriceContainerElement:function(b){return e.$("#"+
c.getQsWidgetSummaryPriceId(b))},getQsWidgetSummaryPriceSymbolElement:function(b){return e.$("#"+c.getQsWidgetSummaryPriceSymbolId(b))},getQsWidgetSummaryPriceWholeElement:function(b){return e.$("#"+c.getQsWidgetSummaryPriceWholeId(b))},getQsWidgetSummaryPriceFractionElement:function(b){return e.$("#"+c.getQsWidgetSummaryPriceFractionId(b))},getQsWidgetSummaryPriceDecimalElement:function(b){return e.$("#"+c.getQsWidgetSummaryPriceDecimalId(b))},getQsWidgetSummaryDisclaimerElement:function(b){return e.$("#"+
c.getQsWidgetSummaryDisclaimerId(b))},getQsWidgetSummaryDisclaimerContainerElement:function(b){return e.$("#"+c.getQsWidgetSummaryDisclaimerContainerId(b))},getQsWidgetFooterPriceContainer:function(b){return e.$("#"+c.getQsWidgetFooterPriceContainerId(b))},getQsWidgetFooterPriceSymbolElement:function(b){return e.$("#"+c.getQsWidgetFooterPriceSymbolId(b))},getQsWidgetFooterPriceWholeElement:function(b){return e.$("#"+c.getQsWidgetFooterPriceWholeId(b))},getQsWidgetFooterPriceFractionElement:function(b){return e.$("#"+
c.getQsWidgetFooterPriceFractionId(b))},getQsWidgetFooterPriceDecimalElement:function(b){return e.$("#"+c.getQsWidgetFooterPriceDecimalId(b))},getQsWidgetFooterQuantitySuffixContainer:function(b){return e.$("#"+c.getQsWidgetFooterQuantitySuffixContainerId(b))},getQsWidgetFooterQuantitySuffixElement:function(b){return e.$("#"+c.getQsWidgetFooterQuantitySuffixId(b))},getQsWidgetBottomSheetQuantitySuffixElement:function(b){return e.$("#"+c.getQsWidgetBottomSheetQuantitySuffixId(b))},getQsWidgetBottomSheetPriceTextElement:oa,
getQsWidgetBottomSheetTemplateElement:function(){return e.$("#"+c.getQsWidgetBottomSheetTemplateId())},getQsWidgetBottomSheetSelectQuantityTextElement:function(b){return e.$("#"+c.getQsWidgetBottomSheetSelectQuantityTextId(b))},getQsWidgetBottomSheetImageElement:function(b){return e.$("#"+c.getQsWidgetBottomSheetImageId(b))},getQsWidgetBottomSheetUnitTextElement:function(b){return e.$("#"+c.getQsWidgetBottomSheetUnitTextId(b))},getQsWidgetBottomSheetTableElement:function(b){return e.$("#"+c.getQsWidgetBottomSheetTableId(b))},
getQsWidgetBottomSheetPpuTextElement:function(b){return e.$("#"+c.getQsWidgetBottomSheetPpuTextId(b))},getQsWidgetInitialViewTextLinkElement:function(b){return e.$("#"+c.getQsWidgetInitialViewTextLinkId(b))},getQsWidgetAtcButton:function(b){return e.$("#"+c.getQsWidgetAtcButtonId(b))},getQsWidgetPlusButton:function(b){return e.$("#"+c.getQsWidgetPlusButtonId(b))},getQsWidgetMinusButton:function(b){return e.$("#"+c.getQsWidgetMinusButtonId(b))},getQsWidgetStepperDecrementMinusIconElement:W,getQsWidgetStepperDecrementTrashIconElement:X,
getQsItem:C,getQsItemQuantity:A,getClientId:p,getClosestDecrementalQsItem:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;for(var d=Number.MAX_SAFE_INTEGER,k=0,e=0;e<b.length;e++){var q=c-A(b[e]);0<=q&&q<d&&(d=q,k=e)}return b[k]},getClosestIncrementalQsItem:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;for(var d=Number.MAX_SAFE_INTEGER,k=0,e=0;e<b.length;e++){var q=A(b[e])-c;0<=q&&q<d&&(d=q,k=e)}return b[k]},getNextDecrementQsItem:function(b,c){var d=a.getQsWidgetConfiguration(b).qsItems;
c=parseInt(c);D(b)&&0<c-1?--c:!D(b)&&c+1<=d.length&&(c+=1);return C(b,c)},getNextIncrementQsItem:function(b,c){var d=a.getQsWidgetConfiguration(b).qsItems;c=parseInt(c);D(b)&&c+1<=d.length?c+=1:!D(b)&&0<c-1&&--c;return C(b,c)},getVariationSelectorItemById:function(b,a,c){b=w(b,c);if(null==b)return null;for(c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null},getSelectedVariationSelectorItem:qa,getSelectedQsItemId:Y,getInitialSelectedQsItemId:sa,getSelectedQuantity:N,getInitialSelectedVariationSelectorItemId:ua,
getSelectedVariationSelectorItemIdData:function(b,a,d){null==d&&(d=n(b));if(null==d)return null;b={};b[c.getQsWidgetVariationSelectorSelectedIdKey()]=a;a={};a[c.getQsWidgetVariationSelectorListMapKey()]={};a[c.getQsWidgetVariationSelectorListMapKey()][d]=b;return a},getSelectedVariationSelectorItemId:ta,getQsItemFromQuantityTextOrQuantity:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return null;for(var d=0;d<b.length;d++)if("string"===typeof c&&c.toLowerCase()==b[d].quantityText.toLowerCase()||
parseFloat(c)==A(b[d]))return b[d]},getQsItemFromQuantity:function(b,c){b=a.getQsWidgetConfiguration(b);b=b.qsItems?b.qsItems:{};c=parseFloat(c);for(var d=0;d<b.length;d++)if(A(b[d])==c)return b[d]},getFocusedQsItemIdInBottomSheet:function(b){var d=ia(b).scrollTop(),e=c.getQsWidgetBottomSheetDropDownScrollFactor();d=parseInt((d-e.constant+e.adjustment)/e.increment);b=a.getQsWidgetConfiguration(b).qsItems;return va(b,d)},getFocusedVariationSelectorItemIdInBottomSheet:function(b,a){var d=P(b);if(null==
d)return null;d=d.scrollTop();var e=c.getQsWidgetBottomSheetDropDownScrollFactor();d=parseInt((d-e.constant+e.adjustment)/e.increment);b=w(b,a);return va(b,d)},getIndexFromIdInBottomSheet:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;return wa(b,c)},getAriaLabelTextForSelectOption:Z,getVariationSelectorIndexFromIdInBottomSheet:function(b,a,c){b=w(b,c);return wa(b,a)},saveQsWidgetDropdownTopPosition:function(b){var c=V(b);c&&c.position()&&(c=c.position().top,a.setData(b,{scrollTop:c}));return!1},
setQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:-65536})},clearQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:c.getQsWidgetDropdownScrollMetricThreshold()})},isQsWidgetDropdownScrolled:function(b){var d=V(b);return d?(d=d.position().top,(b=a.getQsWidgetConfiguration(b).scrollTop)?Math.abs(d-b)>c.getQsWidgetDropdownScrollMetricThreshold():!1):!1},generateQsDropdownDOM:function(b){var d="",e=a.getQsWidgetConfiguration(b),k=e.qsItems;e=e.selectedId;var m=x(b);if(!k)return f.incrementQsWidgetFailToRender(),
"";for(var n=0;n<k.length;n++){var g=k[n].id,l=k[n].quantityText,t=k[n].quantityTextAbbreviatedSuffix,h=k[n].id==e;if(m){var u=b;var w=t,r=C(u,g);t=l;if(w){var p=w.indexOf("\x3c");if(-1!=p){var v=w.indexOf("\x3c",p+1);if(w=w.substring(p,v))w=w.split("\x3e")[1],t+=". ",p=w,w=a.getQsWidgetConfiguration(u).estText,t+=w?w+" "+p:"Total est. "+p}else t=t+"."+w}r=r.price;w=oa(u).html();t=t+". "+w+" "+(r.currencySymbol+r.wholeValue+r.decimalSeparator+r.fractionValue);r=z(u)?c.getQsWidget2DBottomSheetQuantitySelectorCssClass():
c.getQsWidget1DBottomSheetSelectorCssClass();u=c.getQsWidgetDropdownItemId(u,g);u='\x3cli aria-selected\x3d"'+h+'" tabindex\x3d"-1" role\x3d"option" id\x3d"'+u+'" aria-label\x3d"'+t+'" class\x3d"'+r+'"\x3e'+l+"\x3c/li\x3e"}else{u=b;r=c.getQsWidgetDropdownItemId(u,g);w=c.getQsWidgetDropdownItemAriaId(u,g);var y=c.getQsWidgetDropdownItemQuantitySuffixId(u,g);p=c.getQsWidgetDropdownDecl(u);v="";t&&(v='\x3cspan id\x3d"'+y+'" class\x3d"a-size-mini a-color-tertiary"\x3e'+t+"\x3c/span\x3e");t="qs-widget-dropdown-link";
h&&(t+=" qs-widget-dropdown-link-active aok-block aok-nowrap");u='\x3cspan class\x3d"a-declarative" data-action\x3d"'+p+'" data-'+p+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+u+"\x26quot;,\x26quot;id\x26quot;:"+g+'}"\x3e\x3cli tabindex\x3d"0" role\x3d"option" id\x3d"'+r+'" aria-labelledby\x3d"'+w+'" aria-selected\x3d"'+h+'" class\x3d"qs-widget-dropdown-item"\x3e\x3ca tabindex\x3d"-1" aria-hidden\x3d"true" href\x3d"javascript:void(0)" draggable\x3d"false" id\x3d"'+w+'" class\x3d"'+t+'"\x3e'+l+"\x26nbsp;\x26nbsp;"+
v+"\x3c/a\x3e\x3c/li\x3e\x3c/span\x3e"}d+=u}return d},generateVariationSelectorDOM:function(a,d){if(!x(a))return"";d=w(a,d);for(var b="",e=0;e<d.length;e++){var k=a,m=d[e].id,n=d[e].displayTextForMobile,g=d[e].ariaLabelText,l=c.getQsWidget2DBottomSheetVariationSelectorCssClass(),f=c.getQsWidgetCadenceDropdownItemId(k,m);c.getQsWidgetDropdownItemAriaId(k,m);var q=c.getQsWidgetVariationDropdownItemDecl();b+='\x3cspan class\x3d"a-declarative" data-action\x3d"'+q+'" data-'+q+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+
k+"\x26quot;,\x26quot;id\x26quot;:\x26quot;"+m+'\x26quot;}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+f+'" aria-label\x3d"'+g+'" class\x3d"'+l+'"\x3e'+n+"\x3c/li\x3e\x3c/span\x3e"}return b},isQsWidgetTextInputValid:aa,validateQsWidgetTextInput:function(a){var b=L(a),d=b.val();a=aa(a,d);var e=b.parent().hasClass(c.getQsWidgetAuiInputTextWrapperClass())?b.parent():b;if(a)return b.val(d.replace(/^0{2,}$/,"0").replace(/^0+(\d+)/g,"$1")),e.removeClass("a-form-error"),e.addClass("a-form-normal"),
!0;e.removeClass("a-form-normal");e.addClass("a-form-error");return!1},isUserClickInDropdown:function(a){var b=c.getQsWidgetDropdownContainerGenericId();for(a=null==a?null:a.target;null!=a;){if(a.id.substring(0,b.length)===b)return!0;a=a.parentElement}return!1},updateQsWidgetStepper:function(b,c){if(a.isStepper(b)){var e=C(b,c),k=e.selectedText;K(b).text(k);O(b).attr("aria-label",Z(b,k));var m=W(b),n=X(b),g=U(b);k=S(b);var l=T(b);B(b,c)||0==A(e)?(m.addClass("aok-hidden"),n.removeClass("aok-hidden")):
(m.removeClass("aok-hidden"),n.addClass("aok-hidden"));H(b,c)?(c=G(b,c),c.result?xa(b,c.initialQuantityText):"icdp"==p(b)?g.hide():g.disable()):"icdp"==p(b)?g.show():g.enable();c=a.getQsWidgetConfiguration(b);d(b)&&(0==A(e)||"0"==c.selectedQuantity?(k.addClass("aok-hidden"),l.show()):(l.hide(),k.removeClass("aok-hidden")))}},updateSimplifiedQsWidgetStepper:function(b,c){if(r(b)){var d=a.getQsWidgetConfiguration(b);K(b).text(c);O(b).attr("aria-label",Z(b,c));var e=W(b),k=X(b),m=U(b),n=S(b);b=T(b);
0==c||1==c?(e.addClass("aok-hidden"),k.removeClass("aok-hidden")):(e.removeClass("aok-hidden"),k.addClass("aok-hidden"));c>=d.maxQuantity?m.disable():m.enable();0==c?(n.addClass("aok-hidden"),b.show()):(b.hide(),n.removeClass("aok-hidden"))}},showTextInput:xa,hideSpinner:Q,EnableVariationSelector:function(a){a&&P(a).removeClass("qs-widget-disable")},DisableVariationSelector:function(a){a&&P(a).addClass("qs-widget-disable")},getVariationSelectorDisplayTextWithQuantity:ya,getVariationSelectorActionTriggerId:Aa,
getQsWidgetSelectionPayload:ba,isSUPU:function(b){var c=a.getQsWidgetConfiguration(b).qsCsm;if(c&&(b=c.sellingUomDimension,c=c.pricingUomDimension,b&&c))return"count"==b&&"count"==c?!0:!1},showATCButtonWhenZeroQuantity:d,isConfirmationVisible:function(a){return ma(a).is(":visible")},isBottomSheetExist:function(a){return g.aSheet.get(c.getQsWidgetBottomSheetId(a))?!0:!1},getStoreId:k,syncStepperQuantities:function(b,d,m,n,g,l,f){(b=a.getQsWidgetMapSet(b))&&(d||0==d)&&b.forEach(function(b){var t=k(b),
u=p(b).includes("fresh-dp"),h=a.isStepper(b)&&(f||n!=b),q;if(!(q=u||!n))a:{if(n&&b){q=Ba(n);var w=Ba(b);if("bcPrice"==q||"bcPrice"==w){q=!0;break a}if(q&&w){q=q===w;break a}}q=!1}h&&q&&(m&&t&&!u?m==t&&e.trigger(c.getQsWidgetEventSelectQuantityClientUpdate(),b,d,g,l):e.trigger(c.getQsWidgetEventSelectQuantityClientUpdate(),b,d,g,l))})},isStepper:function(b){return a.isStepper(b)},replaceNbspWithPlainTextNbsp:ca,getQsUidsFromDom:function(){var a=[],c=document.querySelectorAll('[id^\x3d"qs-widget-container-"]');
if(c)for(var d=0;d<c.length;d++)a.push(c[d].id.replace("qs-widget-container-",""));return a},setAriaExpanded:function(a,c){O(a).attr("aria-expanded",c)},parseQsItemIdFromDropdownItemId:function(a){var b=c.getQsWidgetDropdownItemIdPrefix().length,d=a.indexOf("-",b);a=a.substring(b,d);a=parseInt(a,10);return isNaN(a)?null:a},getQsWidgetCadenceMobileDropdownItemElement:function(a,d){return e.$("#"+c.getQsWidgetCadenceDropdownItemId(a,d))},initializeMobileDropdownItemsDeclaratives:function(b,d){var k=
x(d);a.getQsWidgetConfiguration(d).qsItems.forEach(function(a){a=a.id;var b=ja(d,a);k&&e.declarative.create(b,c.getQsWidgetDropdownItemDecl(),{qsUID:d,id:a})})},getBottomSheetCloseButton:function(){return e.$(".a-sheet-close")},getQsWidgetAriaLabelQuantitySelectorBottomSheet:function(b){return a.getQsWidgetConfiguration(b).bottomSheetAriaLabel},getQsWidgetAtcButtonElement:function(a){return e.$("#"+c.getQsWidgetAtcButtonId(a)+"-announce")}}})});"use strict";v.when("QSAssetDuplicationGuard").execute("qsWidget-duplication-guard",
function(p){p.when("A","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics").register("QuantitySelectorWidget",function(e,a,c,g,f){function h(c){a.deactivateWidget(c);a.setAriaExpanded(c,!1);var d=a.getQsWidgetButtonContainer(c),f=a.getQsWidgetDropdownContainer(c),l=a.getQsWidgetDropdownElement(c),h=a.getQsWidgetQuantityContainer(c),k=a.getQsWidgetSummaryAtcButton(c),n=a.getQsWidgetFooterPriceContainer(c),u=a.getQsWidgetFooterQuantitySuffixContainer(c);
a.setElementVisibility(n,!0);a.setElementVisibility(u,!0);n=a.getQsWidgetTextInputContainer(c);a.isComponentVisible(n)||a.showComponent(d);a.hideComponent(f);a.hideComponent(l);a.hideComponent(h);a.hideComponent(k);a.resetQsWidgetContainerMinWidthAndHeight(c);e.trigger(g.getQsWidgetEventHideDropdown(),c);c=a.getQsWidgetButton(c);c.length&&c.focus()}function p(d,m,f){var l=a.getQsItem(d,m),t=l.quantityText,k=l.quantityTextAbbreviatedSuffix,n=l.quantityTextFullSuffix,u=l.selectedText;l=l.price;var h=
a.getQsWidgetSummaryPriceSymbolElement(d),p=a.getQsWidgetSummaryPriceWholeElement(d),r=a.getQsWidgetSummaryPriceFractionElement(d),v=a.getQsWidgetSummaryPriceDecimalElement(d);a.setHtml(h,l.currencySymbol);a.setHtml(p,l.wholeValue);a.setHtml(r,l.fractionValue);a.setHtml(v,l.decimalSeparator);h=a.getQsWidgetQuantityElement(d);a.setHtml(h,t);t=a.getQsWidgetQuantitySuffixElement(d);k&&n?(a.setHtml(t,k),k=a.getQsWidgetInitialViewSuffixElement(d),a.setHtml(k,n)):a.setHtml(t,"");k=a.getQsWidgetFooterPriceSymbolElement(d);
t=a.getQsWidgetFooterPriceWholeElement(d);h=a.getQsWidgetFooterPriceFractionElement(d);p=a.getQsWidgetFooterPriceDecimalElement(d);a.setHtml(k,l.currencySymbol);a.setHtml(t,l.wholeValue);a.setHtml(h,l.fractionValue);a.setHtml(p,l.decimalSeparator);n&&(l=a.getQsWidgetFooterQuantitySuffixElement(d),a.setHtml(l,n));n="Current quantity "+u;a.isInitialViewDropdown(d)?(a.getQsWidgetButtonAsComponent(d).text(u),a.getQsWidgetButton(d).attr("aria-label",n+". Click to change quantity")):a.isInitialViewTextLink(d)&&
(l=a.getQsWidgetInitialViewTextLinkElement(d),l.text(u),l.attr("aria-label",n));a.setAtcButtonStepperText(d);c.setPreviousSelectedId(d,c.getQsWidgetConfiguration(d).selectedId);c.setSelectedId(d,m);c.isStepper(d)&&a.updateQsWidgetStepper(d,m);f&&e.trigger(g.getQsWidgetEventTriggerAction(),d)}function v(d,m){if(!a.isSimplifiedStepper(d)){var f=a.getQsWidgetTextInputElement(d),l=f.val(),h=a.getQsWidgetButtonContainer(d),k=a.getQsWidgetTextInputContainer(d),n=a.getQsWidgetTextInputUpdateButtonContainer(d),
u=a.getQsItemFromQuantityTextOrQuantity(d,l),w=c.isStepper(d);a.hideComponent(n);w&&a.getQsWidgetButtonAsComponent(d).text(l);u?(a.hideComponent(k),a.showComponent(h),p(d,u.id,m)):(a.hideComponent(h),a.showComponent(k),f.blur(),c.setSelectedQuantity(d,l),f=c.getQsWidgetConfiguration(d),w&&a.isInitialViewChooseQuantity(d)&&0==f.selectedQuantity&&(f=a.getQsWidgetStepperElement(d),n=a.getQsWidgetAtcButtonAsComponent(d),a.hideComponent(k),a.showComponent(h),a.hideComponent(f),n.show()),m&&e.trigger(g.getQsWidgetEventTriggerAction(),
d));w&&a.isInitialViewChooseQuantity(d)&&0<l&&(f=a.getQsWidgetStepperElement(d),n=a.getQsWidgetAtcButtonAsComponent(d),d=a.getQsWidgetAtcButton(d),a.isComponentVisible(d)&&(a.showComponent(f),n.hide()))}}var r=null;e.on(g.getQsWidgetEventSelectId(),function(c,e,g,f){p(c,e,g);e=a.getQsWidgetButtonContainer(c);g=a.getQsWidgetTextInputContainer(c);c=a.getQsWidgetTextInputUpdateButtonContainer(c);a.hideComponent(c);a.hideComponent(g);a.showComponent(e);f&&f()});e.on(g.getQsWidgetEventSelectQuantity(),
function(d,e,g,l){a.isSimplifiedStepper(d)?(e=e.toString(),c.setSelectedQuantity(d,e),a.updateSimplifiedQsWidgetStepper(d,e)):(f.incrementQsItemNotFound(!0,a.getClientId(d)),a.getQsWidgetTextInputElement(d).val(e),v(d,g));l&&l()});e.on(g.getQsWidgetEventSyncStepperQuantity(),function(c,e,g,f,h,k,n){a.syncStepperQuantities(c,e,g,f,h,k,n)});e.on("commit-c5d19d5c",function(){});e.on(g.getQsWidgetEventSelectQuantityClientUpdate(),function(d,m,h,l){var t=a.getQsItemFromQuantityTextOrQuantity(d,m);t?e.trigger(g.getQsWidgetEventSelectId(),
d,t.id,h,l):a.isSimplifiedStepper(d)?(m=m.toString(),c.setSelectedQuantity(d,m),a.updateSimplifiedQsWidgetStepper(d,m)):(f.incrementQsItemNotFound(!0,a.getClientId(d)),a.getQsWidgetTextInputElement(d).val(m),v(d,h));l&&l()});return{hideAllPopover:function(){for(var c=a.getActivatedQsWidgets(),e=0;e<c.length;e++)h(c[e])},showPopover:function(d){a.activateWidget(d);a.setQsWidgetContainerMinWidthAndHeight(d);a.setAriaExpanded(d,!0);var e=a.getQsWidgetDropdownUnorderedListElement(d),g=a.getQsWidgetButtonContainer(d),
f=a.getQsWidgetDropdownContainer(d),h=a.getQsWidgetDropdownElement(d),k=a.getQsWidgetQuantityContainer(d),n=a.getQsWidgetSummaryAtcButton(d);a.setHtml(e,a.generateQsDropdownDOM(d));e=a.getQsWidgetFooterPriceContainer(d);var u=a.getQsWidgetFooterQuantitySuffixContainer(d);a.setElementVisibility(e,!1);a.setElementVisibility(u,!1);a.showComponent(h);a.hideComponent(k);a.hideComponent(n);a.showComponent(f);a.hideComponent(g);a.popOutDropDownContainer(d);f=c.getQsWidgetConfiguration(d);if((g=f.qsItems)||
0!==g.length)f=f.selectedId,null===f&&(f=g[0].id),a.getQsWidgetDropdownItemElement(d,f).focus()},showConfirmation:function(c){a.activateWidget(c);var d=a.getQsWidgetButtonContainer(c),e=a.getQsWidgetDropdownContainer(c),g=a.getQsWidgetDropdownElement(c),f=a.getQsWidgetQuantityContainer(c);c=a.getQsWidgetSummaryAtcButton(c);a.hideComponent(g);a.showComponent(f);a.showComponent(c);c.find("button").focus();a.showComponent(e);a.hideComponent(d)},showPrice:function(c,e){e=a.getQsItem(c,e).price;var d=
a.getQsWidgetSummaryPriceSymbolElement(c),g=a.getQsWidgetSummaryPriceWholeElement(c),f=a.getQsWidgetSummaryPriceFractionElement(c);c=a.getQsWidgetSummaryPriceDecimalElement(c);a.setHtml(d,e.currencySymbol);a.setHtml(g,e.wholeValue);a.setHtml(f,e.fractionValue);a.setHtml(c,e.decimalSeparator)},selectOption:p,validateAndSelectQuantity:v,selectConfirmation:function(d){if(a.isActionTriggerOnConfirmation(d)){if(c.isStepper(d)){var f=a.getSelectedQsItemId(d);a.updateQsWidgetStepper(d,f)}e.trigger(g.getQsWidgetEventTriggerAction(),
d)}h(d)},stepperIncrement:function(d){var f=c.getQsWidgetConfiguration(d),h=a.isQsWidgetQuantityZero(d);if(a.isSimplifiedStepper(d)){var l=f.selectedQuantity;if(!l)return;l=(parseInt(l)+1).toString();c.setSelectedQuantity(d,l);a.updateSimplifiedQsWidgetStepper(d,l)}else{if(f.selectedId){l=f.selectedId;var p=a.getNextIncrementQsItem(d,f.selectedId).id}else f.selectedQuantity||"0"==f.selectedQuantity?(l=f.selectedQuantity,p=a.getClosestIncrementalQsItem(d,f.selectedQuantity).id,a.getQsItemQuantity(a.getQsItem(d,
p))==f.selectedQuantity&&(p=a.getNextIncrementQsItem(d,p).id)):p=a.getSelectedQsItemId(d);if(l===p)return;c.setSelectedId(d,p);a.updateQsWidgetStepper(d,p)}if(a.showATCButtonWhenZeroQuantity(d)&&(l=a.getQsWidgetButton(d),a.getClientId(d).includes("p13n-buyagain-cards")&&(a.getQsWidgetPlusButton(d).find('input[type\x3d"submit"]').is(":focus")||l.length&&l.focus()),h)){c.isStepper(d)?(e.trigger(g.getQsWidgetEventTriggerAction(),d,null,null,g.getQsWidgetStepperAddToCartReftag()),l.length&&l.focus()):
e.trigger(g.getQsWidgetEventTriggerAction(),d);return}null!=r&&clearTimeout(r);r=setTimeout(function(){e.trigger(g.getQsWidgetEventTriggerAction(),d)},f.stepperDebounceTime)},stepperDecrement:function(d){var f=c.getQsWidgetConfiguration(d);if(a.isSimplifiedStepper(d)){var h=f.selectedQuantity;if(!h)return;h=parseInt(h)-1;var l=h.toString();if(0>=h){c.setSelectedQuantity(d,"0");e.trigger(g.getQsWidgetEventTriggerAction(),d);f=a.getQsWidgetStepperElement(d);f.addClass("aok-hidden");f=a.getQsWidgetAtcButtonAsComponent(d);
f.show();return}c.setSelectedQuantity(d,l);a.updateSimplifiedQsWidgetStepper(d,l)}else{if(f.selectedId){if(h=a.getNextDecrementQsItem(d,f.selectedId).id,h==f.selectedId){c.setSelectedId(d,null);c.setSelectedQuantity(d,"0");e.trigger(g.getQsWidgetEventTriggerAction(),d);a.showATCButtonWhenZeroQuantity(d)&&(f=a.getQsWidgetStepperElement(d),f.addClass("aok-hidden"),f=a.getQsWidgetAtcButtonAsComponent(d),f.show());return}}else if(f.selectedQuantity||"0"==f.selectedQuantity){if(h=a.getClosestDecrementalQsItem(d,
f.selectedQuantity).id,"0"==f.selectedQuantity){c.setSelectedQuantity(d,"0");e.trigger(g.getQsWidgetEventTriggerAction(),d);a.showATCButtonWhenZeroQuantity(d)&&(f=a.getQsWidgetStepperElement(d),f.addClass("aok-hidden"),f=a.getQsWidgetAtcButtonAsComponent(d),f.show());return}}else h=a.getSelectedQsItemId(d);a.updateQsWidgetStepper(d,h);c.setSelectedId(d,h)}null!=r&&clearTimeout(r);r=setTimeout(function(){e.trigger(g.getQsWidgetEventTriggerAction(),d)},f.stepperDebounceTime)}}})});"use strict";v.when("QSAssetDuplicationGuard").execute("QuantitySelector-duplication-guard",
function(p){p.when("A","QuantitySelectorWidget","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps","QuantitySelectorMetadata","QuantitySelectorTemplates").register("QuantitySelector",function(e,a,c,g,f,h,p,x,r){function d(d,e){var k=c.isActionTriggerOnSelect(d),f=c.isTextInputRequired(d,e),g=c.isConfirmationViewEnabled(d),n=c.isQsWidgetDropdownScrolled(d);g?n?(c.setQsWidgetDropdownScrolled(d),h.logCsm(d,"dcq_scl")):(c.clearQsWidgetDropdownScrolled(d),
h.logCsm(d,"dcq")):n?h.logCsm(d,"dsq_scl"):h.logCsm(d,"dsq");a.selectOption(d,e,k&&!f.result);f.result?(c.showTextInput(d,f.initialQuantityText),a.hideAllPopover()):g?a.showConfirmation(d):a.hideAllPopover()}function m(d){d?0!=c.getActivatedQsWidgets().length&&(d=c.getActivatedQsWidgets()[0],c.isConfirmationVisible(d)&&g.setSelectedId(d,g.getQsWidgetConfiguration(d).previousSelectedId),a.hideAllPopover()):console.warn("Event object is required for handlePopoverClose")}function t(a,d){try{var e=c.isMobile(d)}catch(G){G instanceof
TypeError&&h.incrementInvalidIdCount();return}try{if(!c.isInitialized(d)||a){if(!c.isSimplifiedStepper(d)){var k=c.getQsWidgetButton(d),f=c.getQsWidgetAtcButtonElement(d);k&&k.attr("aria-haspopup","listbox");f&&f.attr("aria-haspopup","listbox")}eval(x.getMetaConfiguration(d,"script"));g.setInitialized(d);c.initializeWidget(d);c.isQsWidgetEnabled(d)?c.enableQsWidget(d):c.disableQsWidget(d);h.incrementInitializeCount(!0,e)}}catch(G){h.incrementInitializeCount(!1,e)}}function l(a){g.loadQsWidgetStateConfiguration(a);
t(!0,a)}function z(){for(var a=g.getQsUIDs(),d=0;d<a.length;d++){var e=a[d];c.isInitialized(e)||l(e)}}e.declarative(f.getQsWidgetButtonDecl(),"click",function(d){var e=d.data.qsUID;d=c.isMobile(e);var k=g.isStepper(e),f=c.isSimplifiedStepper(e),l=c.isSUPU(e),m=g.getQsWidgetConfiguration(e).selectedId,p=c.isElementVisible(c.getQsWidgetAtcButton(e));if(f||l&&k&&!m){if(c.showATCButtonWhenZeroQuantity(e)&&!p)return;d&&!c.isBottomSheetExist(e)&&a.getBottomSheet(e);a.stepperIncrement(e)}else d?a.showBottomSheet(e):
a.showPopover(e);h.incrementShowPopup(d);c.isInitialViewDropdown(e)?h.logCsm(e,"cqd"):h.logCsm(e,"ccq");setTimeout(function(){c.saveQsWidgetDropdownTopPosition(e)},250)});e.declarative(f.getQsWidgetDropdownDecl(),"keydown",function(a){var e=a.data.qsUID,k=a.$event.which,g=a.data.id;38===k&&(a.$event.preventDefault(),c.getQsWidgetDropdownItemElement(e,g-1).focus());40===k&&(a.$event.preventDefault(),c.getQsWidgetDropdownItemElement(e,g+1).focus());k===f.getReturnKeyCode()&&(a.$event.preventDefault(),
d(e,g))});e.declarative(f.getQsWidgetDropdownDecl(),"click",function(a){d(a.data.qsUID,a.data.id)});e.declarative(f.getQsWidgetStepperIncrementDecl(),"click",function(d){d=d.data.qsUID;var e=c.getQsWidgetPlusButtonAsComponent(d),k=c.getQsWidgetPlusButton(d);c.isElementVisible(k)&&e.isEnabled()&&a.stepperIncrement(d)});e.declarative(f.getQsWidgetStepperDecrementDecl(),"click",function(d){d=d.data.qsUID;var e=c.getQsWidgetMinusButton(d);c.isElementVisible(e)&&a.stepperDecrement(d)});e.declarative(f.getQsWidgetDropdownItemDecl(),
"click",function(d){var e=d.data.qsUID;a.alignQsItem(e,d.data.id);c.isConfirmationViewEnabled(e)?c.getQsWidgetSummaryAtcButton(e).attr("tabindex","-1").focus():a.getBottomSheetContainer(e).attr("tabindex","-1").focus()});e.declarative(f.getQsWidgetDropdownItemDecl(),"keydown",function(d){var e=d.data.qsUID;d=d.$event.which;37<=d&&40>=d&&setTimeout(function(){var d=document.activeElement,f=d.getAttribute("aria-selected");d&&d.id&&d.id.startsWith("qs-widget-dropdown-item")&&"false"===f&&(d=c.parseQsItemIdFromDropdownItemId(d.id))&&
a.alignQsItem(e,d)},50)});e.declarative(f.getQsWidgetVariationDropdownItemDecl(),"click",function(c){a.alignVariationSelectorItem(c.data.qsUID,c.data.id)});e.declarative(f.getQsWidgetDropdownDecl(),"focusin",function(c){a.showPrice(c.data.qsUID,c.data.id)});e.declarative(f.getQsWidgetDropdownDecl(),"mouseenter",function(c){a.showPrice(c.data.qsUID,c.data.id)});e.declarative(f.getQsWidgetDropdownDecl(),"mouseleave",function(d){d=d.data.qsUID;var e=c.getSelectedQsItemId(d);a.showPrice(d,e)});e.declarative(f.getQsWidgetQuantityChangelinkDecl(),
"click",function(d){d=d.data.qsUID;g.setSelectedId(d,g.getQsWidgetConfiguration(d).previousSelectedId);a.showPopover(d);h.incrementChangeLinkCount();c.saveQsWidgetDropdownTopPosition(d);h.logCsm(d,"ccl")});e.declarative(f.getQsWidgetSummaryAtcDecl(),"click",function(d){d=d.data.qsUID;a.selectConfirmation(d);c.isQsWidgetDropdownScrolled(d)?h.logCsm(d,"atc_scl"):h.logCsm(d,"atc")});e.declarative(f.getQsWidgetTextInputDecl(),"keydown",function(a){var d=a.data.qsUID,e=a.$event.which;8==e||9==e||13==e||
37<=e&&40>=e||46==e||(!(48<=e&&57>=e||96<=e&&105>=e)||a.$event.shiftKey||a.$event.altKey||a.$event.ctrlKey||a.$event.metaKey?a.$event.preventDefault():3<=c.getQsWidgetTextInputElement(d).val().length&&a.$event.preventDefault())});e.declarative(f.getQsWidgetTextInputDecl(),"keyup",function(d){var e=d.data.qsUID;c.validateQsWidgetTextInput(e)&&13==d.$event.keyCode?(d=c.isActionTriggerOnSelect(e)||g.isStepper(e),a.validateAndSelectQuantity(e,d)):c.showTextInput(e)});e.declarative(f.getQsWidgetTextInputDecl(),
"focusout",function(a){a=a.data.qsUID;if(""===c.getQsWidgetTextInputElement(a).val()){var d=(d=g.getQsWidgetConfiguration(a).selectedId)?c.getQsItem(a,d).selectedText:c.getSelectedQuantity(a);c.showTextInput(a,d);c.validateQsWidgetTextInput(a)}});e.declarative(f.getQsWidgetTextInputDecl(),"change",function(a){c.showTextInput(a.data.qsUID)});e.declarative(f.getQsWidgetTextInputUpdateButtonDecl(),"click",function(d){var e=d.data.qsUID;c.validateQsWidgetTextInput(e)&&(e=d.data.qsUID,d=c.isActionTriggerOnSelect(e)||
c.isActionTriggerOnConfirmation(e),a.validateAndSelectQuantity(e,d))});e.$(document).click(function(a){c.isUserClickInDropdown(a)||m(a)});e.$(document).keyup(function(a){27===a.keyCode&&m(a)});e.$(y).resize(function(){a.hideAllPopover()});e.on(f.getQsWidgetEventInitialize(),function(a,c){p.initialize();if("string"==typeof c)t(a,c);else{c=g.getQsUIDs();for(var d=0;d<c.length;d++)t(a,c[d])}});e.on(f.getQsWidgetEventLoadStatesAndInitialize(),function(){try{z()}catch(k){if(k instanceof SyntaxError)e.delay(function(){try{z()}catch(n){v.logError(n)}},
200);else throw k;}});e.on(f.getQsWidgetEventConfigureEnable(),function(a){c.enableQsWidget(a)});e.on(f.getQsWidgetEventConfigureDisable(),function(a){c.disableQsWidget(a)});e.on(f.getQsWidgetEventConfigureReset(),function(a){for(var c=g.getQsUIDs(),d=0;d<c.length;d++){var h=c[d];if("string"!==typeof a||a==h)g.reloadQsWidgetStateConfiguration(h),e.trigger(f.getQsWidgetEventInitialize(),!0,h)}});c.hideSpinner();r=e.now();h.logLatencyMetric("JSReady",r);return{loadStateAndInitializeWidget:l}})})});
/* ******** */
(function(e){var h=window.AmazonUIPageJS||window.P,g=h._namespace||h.attributeErrors,l=g?g("ConsumablesATCActionAssets@core","ConsumablesATCActionAssets"):h;l.guardFatal?l.guardFatal(e)(l,window):l.execute(function(){e(l,window)})})(function(e,h,g){function l(b,a){try{e.register(b,a)}catch(c){c.message.indexOf("reregistered by ConsumablesATCActionAssets")}}function z(b,a,c){a in b?Object.defineProperty(b,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):b[a]=c;return b}e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-common-metrics",
function(){return{logCounter:function(a){var c=1<arguments.length&&arguments[1]!==g?arguments[1]:1;h.ue&&h.ue.count&&h.ue.count("geex:"+a,c)},emitEvent:function(a,c){"function"==typeof uet&&uet(c,"geex-"+a,{wb:1})},publishEvents:function(a){"function"==typeof uex&&uex("ld","geex-"+a,{wb:1})}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A").register("geex-core-common-util",function(a){return{getPagePathname:function(){return h.location.pathname.replace(/\/+$/,
"")},getCustomerId:function(){if(!a.objectIsEmpty(h.fwcimData))return h.fwcimData.customerId}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-common-localStorage",function(){try{return h.localStorage}catch(a){return g}});b.when("A","geex-core-common-localStorage").register("geex-core-common-util-localStorage",function(a,c){var b=function(){if(!a.capabilities.localStorage||!c)return!1;try{c.getItem("geex_test_key")}catch(n){return!1}return!0};
return{isSupported:b,get:function(a){if(b()&&"string"===typeof a&&0!==a.length){a="geex:"+a;var d=c.getItem(a);if(d)if(d=JSON.parse(d),!d.data||d.expiry&&d.expiry<Date.now())c.removeItem(a);else return d.data}},set:function(a,d,f){if(b()&&d&&"string"===typeof a&&0!==a.length&&0!==f)return d={data:d},f&&(d.expiry=(new Date(Date.now()+1E3*f)).valueOf()),c.setItem("geex:"+a,JSON.stringify(d)),d},deleteItem:function(a){b()&&a&&c.removeItem("geex:"+a)}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("3p-promise").register("geex-core-polyfill-promise",
function(a){"function"!==typeof a.any&&(a.any=function(c){return new a(function(b,n){var d=[],f=c.length;c.forEach(function(c){a.resolve(c).then(b).catch(function(a){d.push(a);f--;0===f&&n(d)})})})});return a})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-common-bottomSheet",function(){return!1})});"use strict";l("ConsumablesATCActionAssetsDuplicationGuard",function(){return{register:l,when:function(){var b=arguments;return{register:function(a,
c){try{e.when.apply(e,b).register(a,c)}catch(f){f.message.indexOf("reregistered by ConsumablesATCActionAssets")}}}}}});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","3p-promise").register("geex-core-registry-program-base",function(a,c){return a.createClass({_isEligible:!1,_programType:g,_atcEvents:[],_atcDecrementEvents:[],_atcIncrementEvents:[],_widgets:[],_context:{},_targetWidgetDivMap:{},init:function(a){var c=1<arguments.length&&arguments[1]!==
g?arguments[1]:[],b=2<arguments.length&&arguments[2]!==g?arguments[2]:[],f=3<arguments.length&&arguments[3]!==g?arguments[3]:[],e=4<arguments.length&&arguments[4]!==g?arguments[4]:[],h=5<arguments.length&&arguments[5]!==g?arguments[5]:{};this._programType=a;this._widgets=c;this._atcEvents=b;this._atcDecrementEvents=f;this._atcIncrementEvents=e;this._targetSlotDivMap=h},getProgramType:function(){return this._programType},getContext:function(a){return a?this._context[a]:this._context},setContext:function(a){this._context=
a},setContextByKey:function(a,c){this._context[a]=c},getWidgets:function(){return this._widgets},setEligible:function(){this._isEligible=0<arguments.length&&arguments[0]!==g?arguments[0]:!0},isEligible:function(){return c.reject(this)},getAtcEvents:function(){return this._atcEvents},getAtcIncrementEvents:function(){return this._atcIncrementEvents},getAtcDecrementEvents:function(){return this._atcDecrementEvents},getTargetSlotDiv:function(a){return a?this._targetSlotDivMap[a]:this._targetSlotDivMap},
setTargetSlotDivMap:function(a){this._targetSlotDivMap=a}})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-registry-program-base").register("geex-core-registry-program-everydayEssentials",function(a){var c=[];return a.extend({init:function(){this._super("EverydayEssentials",c)}})})});"use strict";var C=function(){return function(b,a){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){var c=[],f=!0,e=!1,d=g;try{for(var k=b[Symbol.iterator](),
h;!(f=(h=k.next()).done)&&(c.push(h.value),!a||c.length!==a);f=!0);}catch(q){e=!0,d=q}finally{try{if(!f&&k["return"])k["return"]()}finally{if(e)throw d;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-widget-constants","geex-core-registry-program-base").register("geex-core-registry-program-haul",function(a,c,b){function f(){return a.$("#nav-subnav.haul-subnav").length?
!0:!1}function d(){return new Promise(function(a){var c=Date.now();(function y(){f()?a(!0):5E3<=Date.now()-c?a(!1):setTimeout(y,500)})()})}function e(){var a=h.location.href;if(!a||"string"!==typeof a)return!1;var c=a.toLowerCase();return[function(){var a=new URLSearchParams(h.location.search);return Object.entries(r).some(function(c){c=C(c,2);var b=c[1];return a.get(c[0])===b})},function(){return t.some(function(a){return c.includes(a)})}].some(function(a){return a()})}var g,q=["haul-add-to-cart-update:success"],
p=["haul-remove-from-cart-update:success"],m=["cartProgressIndicator","yourRewards"],r={s:"bazaar",i:"bazaar",isHaul:"1",ishaul:"1"},t=["/cart/haul","/haul/store","/haul/categories","/haul/me"],u=(g={},z(g,c.SLOT_NAME.TopBar,"#bazaar-cart-buy-box-top"),z(g,c.SLOT_NAME.DesktopNavBar,"#nav-subnav.haul-subnav"),g);return b.extend({init:function(){this._super("HAUL",m,[],p,q,u)},isEligible:function(){var a=this;return new Promise(function(c,b){f()?c(a):e()&&d().then(function(d){d?c(a):b()})})}})})});
"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-registry-program-base").register("geex-core-registry-program-inPharmacy",function(a){var c=[];return a.extend({init:function(){this._super("IN_PHARMACY",c)}})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-ufg-page-eligibility-config",function(){return{INELIGIBLE_PAGES:["/fmc/orderingschedule","/fmc/recurring-reservation","/alm/groceryme"]}})});
"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-ufg-page-eligibility-config").register("geex-core-ufg-page-eligibility",function(a){return{isPageEligible:function(){for(var c=0;c<a.INELIGIBLE_PAGES.length;c++)if(-1!==h.location.href.indexOf(a.INELIGIBLE_PAGES[c]))return!1;c=new URLSearchParams(h.location.search);return"true"===c.get("instore")||"grocery_regulars_storefront"===c.get("source")?!1:!0}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-ufg-configuration",
function(){var a={A21TJRUUN4KGV:{bottomWidgets:["savingsIngress","cartProgressIndicator"]},DEFAULT:{bottomWidgets:[]}};return a[h.ue_mid]||a.DEFAULT})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","3p-promise","geex-core-registry-program-base","geex-core-ufg-configuration","geex-core-ufg-page-eligibility").register("geex-core-registry-program-ufg",function(a,c,b,n,d){function f(){return new c(function(a){var c=m.get("almBrandId");c?a(c):x().then(a)})}
function x(){return new c(function(c){var b=a.delay(function(){b&&clearTimeout(b);c(g)},5E3);try{e.when("s-metadata").execute("promotionupsellmessage-search-metadata",function(a){b&&clearTimeout(b);c(r[a.store||a.searchAlias])})}catch(A){b&&clearTimeout(b),c(g)}})}var q=["consumables-atc:success","sc:localmarket:ajaxupdate:complete"],p=[],m=new URLSearchParams(h.location.search),r={nowstore:"ctnow",freshmeat:"foq3ZnlEaO",amazonfresh:"QW1hem9uIEZyZXNo",amazonyalla:"sAuWWBROaG"};return b.extend({init:function(){this._super("UFG",
n.bottomWidgets,q,p)},isEligible:function(){var a=this;return new c(function(c,b){a._isEligible?c(a):d.isPageEligible()?f().then(function(b){a:{for(d in r)if(r[d]===b){var d=!0;break a}d=!1}d?(a.setContextByKey("brandId",b),(b=m.get("gsc"))&&a.setContextByKey("gscId",b),c(a)):c()}):b()})}})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-polyfill-promise","geex-core-registry-program-haul").register("geex-core-registry-programs",function(a,
c){var b=new c;return{getEligibleProgram:function(){return a.any([b.isEligible()])}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-registry-program-base").register("geex-core-registry-program-bazaar",function(a){var c=[];return a.extend({init:function(){this._super("BAZAAR",c)}})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-widget-constants",function(){return{WIDGET_NAME:{CartProgressIndicator:"cartProgressIndicator",
SavingsIngress:"savingsIngress",LiveOrderTracking:"liveOrderTracking",YourRewards:"yourRewards"},SLOT_NAME:{FloatingBottom:"floatingBottomSlot",TopBar:"topBar",DesktopNavBar:"desktopNavBar"}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A").register("geex-core-registry-widget-base",function(a){return a.createClass({_name:g,_eligibleSlots:[],init:function(a){var c=1<arguments.length&&arguments[1]!==g?arguments[1]:[];this._name=a;this._eligibleSlots=
c},getName:function(){return this._name},getEligibleSlots:function(){return this._eligibleSlots},isEligible:function(a,b){return!1},initialize:function(){return null},destroy:function(){return null},triggerEvents:[]})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-common-bottomSheet","geex-core-registry-widget-base","geex-core-storage-persistent-context-class","geex-core-common-metrics","geex-core-widget-constants").register("geex-core-registry-widget-cartProgressIndicator",
function(a,c,b,n,d,k){var f=k.WIDGET_NAME.CartProgressIndicator,q=a.capabilities.mobile?[k.SLOT_NAME.FloatingBottom]:[k.SLOT_NAME.DesktopNavBar],p=c?c.create({name:"geex-cpi-sheet",inlineContent:'\x3ccenter style\x3d"height:100%"\x3e\x3cspan style\x3d"height:100%" class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/center\x3e',closeType:"icon",height:75}):null;b=b.extend({_cachedResponse:g,init:function(){this._super(f,q);this._cachedResponse=new n("cpi-response",15)},isEligible:function(c,
b){return-1===this._eligibleSlots.indexOf(b)||a.objectIsEmpty(c)?!1:!0},initialize:function(){d.emitEvent(f,"bb");u(v,l,g,this._cachedResponse,!0);t(v,l,this._cachedResponse);c&&r()}});var m=function(a){var c=[a.getProgramType()];a.getContext("brandId")&&c.push(a.getContext("brandId"));return c},r=function(){c&&p&&a.declarative("geex-floatingwidget-click","click",function(b){b=b.data;c.showSheet(p);a.post(b.url,{params:b.request,paramsFormat:"json",contentType:"application/json;charset\x3dutf-8",
success:function(c){var b=a.$(c).find("li").length;p.getContentContainer().html(b?c:"No milestones found, try again later");p.changeHeight({height:25+50*Math.max(b,1),duration:.3})},error:function(a){p.getContentContainer().html("We are facing some issue, try again later")}})})},t=function(c){var b=1<arguments.length&&arguments[1]!==g?arguments[1]:g,d=arguments[2];e.when("geex-core-storage-context-program").execute(function(f){var e=f.get("instance");["promotionupsellwidget:showCPI"].concat(e.getAtcEvents()).forEach(function(e){if(e)a.on(e,
function(a){return u(c,b,a,d)})});e.getAtcIncrementEvents().forEach(function(f){if(f)a.on(f,function(){var f=0<arguments.length&&arguments[0]!==g?arguments[0]:{};d.delete(m(e));a.objectIsEmpty(f.atcAction)&&(f.atcAction={numberOfItems:"1",operationType:"ADD"});u(c,b,f,d)})});e.getAtcDecrementEvents().forEach(function(f){if(f)a.on(f,function(){var f=0<arguments.length&&arguments[0]!==g?arguments[0]:{};d.delete(m(e));a.objectIsEmpty(f.atcAction)&&(f.atcAction={numberOfItems:"1",operationType:"DECREMENT"});
u(c,b,f,d)})});a.$(h).bind("visibilitychange",function(){document.hidden||u(c,b,{},d)})})},u=a.throttle(function(c){var b=1<arguments.length&&arguments[1]!==g?arguments[1]:g,n=2<arguments.length&&arguments[2]!==g?arguments[2]:{},w=arguments[3],k=4<arguments.length&&arguments[4]!==g?arguments[4]:!1;e.when("geex-core-storage-context-program").execute(function(e){var g=e.get("instance");if(g){a.state.replace("geex-cpi-isCached",null,!0);if(k&&(d.emitEvent(f,"be"),e=w.get(m(g)),!a.objectIsEmpty(e))){c(e,
!0);a.state("geex-cpi-isCached",{timestamp:Date.now()},!0);return}a.post("/consumables/cpi/"+g.getProgramType()+"/widget",{params:A(g,n),paramsFormat:"json",contentType:"application/json;charset\x3dutf-8",accepts:"text/html",success:function(a){w.set(m(g),a);c(a);k&&(d.emitEvent(f,"ld"),d.publishEvents(f))},error:function(a){b&&b(a)}})}})},1E3),A=function(c){var b=1<arguments.length&&arguments[1]!==g?arguments[1]:{},d={operation:{pageType:h.ue_pty,subPageType:h.ue_spty},programDetails:{programType:c.getProgramType(),
brandId:c.getContext("brandId"),gscId:c.getContext("gscId")}};a.objectIsEmpty(b.atcAction)||(d.atcAction=b.atcAction);b=a.state("geex-cpi-state");a.objectIsEmpty(b)||(d.currentState=b);b=a.state("geex-cpi-assets");a.objectIsEmpty(b)||(d.availableAssets=b);return d},l=function(a){y(!1);e.when("geex-core-storage-context-floatingBottomWidget").execute(function(a){(a=a.get("dom"))&&a.slideUp()});e.when("geex-core-storage-context-desktopNavBar").execute(function(a){(a=a.get("dom"))&&a.slideUp()})},v=function(b){var c=
1<arguments.length&&arguments[1]!==g?arguments[1]:!1;e.when("geex-core-storage-context-floatingBottomWidget").execute(function(d){if(d=d.get("dom"))a.onScreen(d)||d.slideDown(),c?d.addClass("geex-cached"):d.removeClass("geex-cached"),w(d,b,c)});e.when("geex-core-storage-context-desktopNavBar").execute(function(d){if(d=d.get("dom"))a.onScreen(d)||d.slideDown(),c?d.addClass("geex-cached"):d.removeClass("geex-cached"),w(d,b,c)})},y=function(){var c=0<arguments.length&&arguments[0]!==g?arguments[0]:!0,
b=1<arguments.length&&arguments[1]!==g?arguments[1]:!0;a.state.replace("geex-cpi-state",null,b);c&&a.state.replace("geex-cpi-assets",null,b)},w=function(b,c){y();a.objectIsEmpty(b)||a.objectIsEmpty(c)||(b.html(c),a.state.parse())};return{name:k.WIDGET_NAME.CartProgressIndicator,class:b}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-registry-widget-base","geex-core-storage-persistent-context-class","geex-core-common-util","geex-core-common-metrics",
"geex-core-widget-constants","geex-core-yourRewards-configuration").register("geex-core-registry-widget-yourRewards",function(a,b,f,n,d,k,l){var c=k.WIDGET_NAME.YourRewards,p=[k.SLOT_NAME.TopBar];b=b.extend({_cachedResponse:g,init:function(){this._super(c,p);this._cachedResponse=new f("yr-response",15)},isEligible:function(b,c){var d=l.allowedPrograms[b.getProgramType()];return!n.getPagePathname().includes(d.pagePath)||-1===this._eligibleSlots.indexOf(c)||a.objectIsEmpty(b)?!1:!0},initialize:function(){d.emitEvent(c,
"bb");t(B,x,g,this._cachedResponse,!0);r(B,x,this._cachedResponse)}});var m=function(a){var b=[a.getProgramType()];a.getContext("brandId")&&b.push(a.getContext("brandId"));return b},r=function(b){var c=1<arguments.length&&arguments[1]!==g?arguments[1]:g,d=arguments[2];e.when("geex-core-storage-context-program").execute(function(f){var e=f.get("instance");["your-reward-widget:showYourRewards"].concat(e.getAtcEvents()).forEach(function(e){if(e)a.on(e,function(a){return t(b,c,a,d)})});e.getAtcIncrementEvents().forEach(function(f){if(f)a.on(f,
function(){var f=0<arguments.length&&arguments[0]!==g?arguments[0]:{};d.delete(m(e));a.objectIsEmpty(f.atcAction)&&(f.atcAction={numberOfItems:"1",operationType:"ADD"});t(b,c,f,d)})});e.getAtcDecrementEvents().forEach(function(f){if(f)a.on(f,function(){var f=0<arguments.length&&arguments[0]!==g?arguments[0]:{};d.delete(m(e));a.objectIsEmpty(f.atcAction)&&(f.atcAction={numberOfItems:"1",operationType:"DECREMENT"});t(b,c,f,d)})});a.$(h).bind("visibilitychange",function(){document.hidden||t(b,c,{},d)})})},
t=a.throttle(function(b){var f=1<arguments.length&&arguments[1]!==g?arguments[1]:g,n=2<arguments.length&&arguments[2]!==g?arguments[2]:{},k=arguments[3],h=4<arguments.length&&arguments[4]!==g?arguments[4]:!1;e.when("geex-core-storage-context-program").execute(function(e){var g=e.get("instance");if(g){a.state.replace("geex-yr-isCached",null,!0);if(h&&(d.emitEvent(c,"be"),e=k.get(m(g)),!a.objectIsEmpty(e))){b(e);a.state("geex-yr-isCached",{timestamp:Date.now()},!0);return}a.post("/consumables/cpi/"+
g.getProgramType()+"/yourRewards",{params:u(g,n),paramsFormat:"json",contentType:"application/json;charset\x3dutf-8",accepts:"text/html",success:function(a){k.set(m(g),a);b(a);h&&(d.emitEvent(c,"ld"),d.publishEvents(c))},error:function(a){f&&f(a)}})}})},1E3),u=function(b){var c=1<arguments.length&&arguments[1]!==g?arguments[1]:{},d={programDetails:{programType:b.getProgramType()}};a.objectIsEmpty(c.atcAction)||(d.atcAction=c.atcAction);c=a.state("geex-yr-state");a.objectIsEmpty(c)||(d.currentState=
c);return d},x=function(b){v();e.when("geex-core-storage-context-topBar").execute(function(b){b=b.get("dom");a.objectIsEmpty(b)||b.widget.removeClass("expanded")})},B=function(b){e.when("geex-core-storage-context-topBar").execute(function(c){v();c=c.get("dom");a.objectIsEmpty(c)||a.objectIsEmpty(b)||(c.widget.html(b),c.widget.addClass("expanded"),a.state.parse())})},v=function(){a.state.replace("geex-yr-state",null,0<arguments.length&&arguments[0]!==g?arguments[0]:!0)};return{name:k.WIDGET_NAME.YourRewards,
class:b}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-yourRewards-configuration",function(){var a={DEFAULT:{HAUL:{pagePath:["/cart/haul"]}}};return{allowedPrograms:a[h.ue_mid]||a.DEFAULT}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-savingsIngress-configuration",function(){var a={A21TJRUUN4KGV:{UFG:{brand:["ctnow"],pagePath:["/alm/storefront"]}}};return{allowedPrograms:a[h.ue_mid]||
a.DEFAULT}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-registry-widget-base","geex-core-widget-constants").register("geex-core-registry-widget-savingsIngress",function(a,b,f){b=b.extend({init:function(){this._super(f.WIDGET_NAME.SavingsIngress)},isEligible:function(b){a.objectIsEmpty(b);return!1}});return{name:f.WIDGET_NAME.SavingsIngress,class:b}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.register("geex-core-liveOrderTracking-configuration",
function(){return{allowedPrograms:{A2VIGQ35RCS4UG:{UFG:{brand:["sAuWWBROaG"],pagePath:["/alm/storefront"]}}}[h.ue_mid]}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-registry-widget-base","geex-core-widget-constants").register("geex-core-registry-widget-liveOrderTracking",function(a,b){var c=b.WIDGET_NAME.LiveOrderTracking;a=a.extend({_cachedResponse:g,init:function(){this._super(c)}});return{name:b.WIDGET_NAME.LiveOrderTracking,class:a}})});
"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-registry-widget-cartProgressIndicator","geex-core-registry-widget-savingsIngress","geex-core-registry-widget-liveOrderTracking","geex-core-registry-widget-yourRewards").register("geex-core-registry-widgets",function(a,b,f,e){var c={};c[b.name]=new b.class;c[a.name]=new a.class;c[f.name]=new f.class;c[e.name]=new e.class;return{get:function(a){return a?c[a]:c},initializeWidget:function(a,b,d,f){return(a=
c[a])&&a.isEligible(f,b)?(b=d.get("instance"),b!==a&&(b&&b.destroy(),d.set("instance",a),d.initialize(f),a.initialize()),!0):!1}}})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A").register("geex-core-storage-context-class",function(a){return a.createClass({_context:g,init:function(a){this._context=a},get:function(a){return this._context?a?this._context[a]:this._context:g},set:function(b,f){b?(a.objectIsEmpty(this._context)&&(this._context={}),this._context[b]=
f):this._context=f},delete:function(a){this._context&&(a?delete this._context[a]:this._context=g)}})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-common-util-localStorage").register("geex-core-storage-persistent-context-class",function(a,b){function c(a,b){a=[a];"string"===typeof b?a.push(b):a=a.concat(b);return a.join(":")}return a.createClass({_ttl:0,_namespace:g,init:function(a,b){this._namespace=a;this._ttl=b},get:function(a){return b.get(c(this._namespace,
a))},set:function(a,d){b.set(c(this._namespace,a),d,this._ttl)},delete:function(a){b.deleteItem(c(this._namespace,a))}})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-storage-context-class").register("geex-core-storage-context-floatingBottomWidget",function(a,b){var c=new b({});c.initialize=function(){a.objectIsEmpty(c.get("dom"))&&function(){var b=a.$('\x3cdiv id\x3d"geex-floatingBottomWidget"\x3e\x3c/div\x3e'),d=a.$('\x3cdiv id\x3d"geex-floatingBottomWidget-offset"\x3e\x3c/div\x3e');
a.$("body").append(b).append(d);c.set("dom",b);c.set("offsetDom",d);c.get("positionHelperAttached")||e.when("geex-core-helper-positionhelper").execute(function(a){c.set("positionHelperAttached",!0);a.registerBottomMarginHandlers(b,d)})}()};return c})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-storage-context-class","geex-core-widget-constants").register("geex-core-storage-context-topBar",function(a,b,e){var c=new b({});c.initialize=
function(b){if(a.objectIsEmpty(c.get("dom"))&&b&&b.getTargetSlotDiv(e.SLOT_NAME.TopBar)){b=b.getTargetSlotDiv(e.SLOT_NAME.TopBar);var d=a.$("\x3cdiv\x3e",{id:"geex-yourRewardsWidget"});a.$(b).prepend(d);b={widget:a.$(d)};c.set("dom",b)}};return c})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A","geex-core-storage-context-class","geex-core-widget-constants").register("geex-core-storage-context-desktopNavBar",function(a,b,e){var c=new b({});c.initialize=
function(b){if(a.objectIsEmpty(c.get("dom"))&&b&&b.getTargetSlotDiv(e.SLOT_NAME.DesktopNavBar)){b=b.getTargetSlotDiv(e.SLOT_NAME.DesktopNavBar);var d=a.$("\x3cdiv\x3e",{id:"geex-desktopNavBarWidget"});a.$(b).prepend(d);c.set("dom",d)}};return c})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("geex-core-storage-context-class").register("geex-core-storage-context-program",function(a){return new a({})})});"use strict";e.when("ConsumablesATCActionAssetsDuplicationGuard").execute(function(b){b.when("A",
"geex-core-registry-programs","geex-core-registry-widgets","geex-core-storage-context-program","geex-core-storage-context-floatingBottomWidget","geex-core-storage-context-topBar","geex-core-storage-context-desktopNavBar","geex-core-widget-constants","bodyBegin").register("geex-core-registry-orchestrator",function(a,b,e,h,d,k,l,q,p){function c(a,b,c){var d=!0,f=!1,h=g;try{for(var k=a.getWidgets()[Symbol.iterator](),l;!(d=(l=k.next()).done)&&!e.initializeWidget(l.value,b,c,a);d=!0);}catch(D){f=!0,h=
D}finally{try{!d&&k.return&&k.return()}finally{if(f)throw h;}}}b.getEligibleProgram().then(function(b){a.objectIsEmpty(b)||(h.set("instance",b),c(b,q.SLOT_NAME.FloatingBottom,d),c(b,q.SLOT_NAME.TopBar,k),c(b,q.SLOT_NAME.DesktopNavBar,l))}).catch(function(){})})})});
/* ******** */
(function(e){var h=window.AmazonUIPageJS||window.P,n=h._namespace||h.attributeErrors,r=n?n("ALMCartActionAssets",""):h;r.guardFatal?r.guardFatal(e)(r,window):r.execute(function(){e(r,window)})})(function(e,h,n){function r(c,b){try{e.register(c,b)}catch(d){if(!d.message.includes("reregistered by ALMCartActionAssets"))throw d;}}function F(){var c=arguments;return{register:function(b,d){try{e.when.apply(e,c).register(b,d)}catch(a){if(!a.message.includes("reregistered by ALMCartActionAssets"))throw a;
}}}}e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","afx-csm-metrics-utils").register("alm-cart-action-query-string-utils",function(b,d){function a(a,d){var k=f(a),c=g(a);k?d["discoveredAsins.0"]=a.asin:c&&(a=b.filter(a.items,function(a){return f(a)}),a=b.map(a,function(a){return a.asin}),b.each(a,function(a,b){d["discoveredAsins."+b.toString()]=a}));return d}function g(a){return a&&a.items&&b.$.isArray(a.items)&&0<a.items.length}function f(a){return a&&a.asin&&"string"===
typeof a.asin&&""!==a.asin}return{addQueryStringParamsToUrl:function(g,f){var c={};if(f&&f.reftag){var k=f.reftag;"string"===typeof k&&""!==k&&(c.ref_=k)}if(f&&f.queryLogInfoParams){k=f.queryLogInfoParams;for(var e in k)k.hasOwnProperty(e)&&"string"===typeof e&&""!==e&&"string"===typeof k[e]&&""!==k[e]&&(c[e]=k[e])}a(f,c);try{var l=(new URLSearchParams(h.location.search)).get("almBrandId");l&&(c.almBrandId=l)}catch(x){d.increment("ATFC_INVALID_URL_ALMBRANDID")}try{var q=(new URLSearchParams(h.location.search)).get("gsc");
q&&(c.gsc=q)}catch(x){d.increment("ATFC_INVALID_URL_GSC")}(f=b.$.param(c))&&"string"===typeof f&&""!==f&&(g+="?"+f);return g}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","jQuery").register("afx-add-all-helper",function(b,d){return{updateQuantityForAsin:function(a,b,f){a&&b&&!isNaN(f)&&d("#"+a).closest("form").find("#afx-add-all-"+b+"-quantity").attr("value",f)}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A",
"jQuery","a-button").register("fx-atfc-button-utils",function(b,d,a){function g(a){return"atfc-spinner-"+(a.asin?a.asin:a.clientId?a.clientId:"noAsin")}var f=!1;return{hideButtonAndRenderSpinner:function(a){var b=a.$currentTarget.find(".a-button");if(b&&b.length){f=!0;a=g(a.data);var c=b.not(".aok-hidden").not(".non-spinner");c&&a.length&&(c.wrap('\x3cdiv id\x3d"'+a+'" class\x3d"atfc-spinner"\x3e\x3c/div\x3e'),d("#"+a).css({width:c.outerWidth()+"px"}),d("#"+a).css({height:c.outerHeight()+"px"}));
b.css("visibility","hidden")}},showButtonAndRemoveSpinner:function(a){var b=a.$currentTarget.find(".a-button"),c=g(a.data);c=d("#"+c);b&&b.length&&c&&c.length&&(f=!1,b.each(function(){d(this).parent().hasClass("atfc-spinner")&&d(this).unwrap()}),b.css("visibility","visible"));a.data&&a.data.qsUID&&!1===a.data.setQuantityFlag&&e.when("QuantitySelectorUtils").execute(function(b){b=b.getQsWidgetButton(a.data.qsUID);b.length&&b.focus()})},shouldDisableButtonClicks:function(){return f}}})});"use strict";
e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("fresh-shared-add-to-cart-v2","qs-fresh-shared-add-to-cart").register("fresh-add-to-cart",function(b,d){function a(a){b.attachCallbacks(a)}b.initialize("desktop");d.initialize("desktop");return{addToFreshCart:function(b){a(b)},attachCallbacks:a,attachPrehooks:function(a){b.attachPrehooks(a)},updateAddAllQuantityForAsin:b.updateAddAllQuantityForAsin,updateQuantity:b.updateQuantity}})});e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A",
"alm-cart-action-assets-device","afx-metrics-helper","afx-csm-metrics-utils").register("alm-cart-action-assets-metrics",function(b,d,a,g){b=a.getMetricsForDevice(d.getDevice());g.increment(b.ATFC_ASSET_LOAD);return{}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("shared-alm-multi-add-to-cart").register("alm-multi-add-to-cart",function(b){function d(a){b.attachCallbacks(a)}b.initialize("desktop");return{multiAddToCart:function(a){d(a)},attachCallbacks:d,attachPreHandler:function(a){b.attachPreHandler(a)}}})});
"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","alm-cart-action-query-string-utils").register("afx-atfc-v2-proxy",function(b,d){return{addToFreshCart:function(a){var g=d.addQueryStringParamsToUrl("/alm/addtofreshcart",a.data);b.$.ajax(g,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){b.post("/alm/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}})});
"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("fx-atfo-proxy",function(b){return{addToFreshOrder:function(d){var a="/fom/add-to-fresh-order";d.reftag!==n&&(a+="/ref\x3d"+d.reftag);d.data!==n&&d.data.csrfToken&&(a+="?csrf\x3d"+encodeURIComponent(d.data.csrfToken));b.post(a,{success:d.success,error:d.error,params:JSON.stringify(d.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",
errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your order.\x3c/b\x3e Please try again.",footer:"\x3cspan class\x3d'a-declarative' data-action\x3d'a-popover-close'data-a-popover-close\x3d'{}'\x3e\n\x3cspan class\x3d'a-button primary-fresh-btn'\x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cinput class\x3d'a-button-input'type\x3d'submit'\x3e\x3cspan class\x3d'a-button-text' aria-hidden\x3d'true'\x3eOK\n\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e"}}}})});
"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("afx-atfc-cart-conflicts-proxy",function(b){function d(a){a.ref=a.reftag;a.client="atfc";return a}return{getConflictSummary:function(a){var g=d(a.data);b.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:g})},resolve:function(a){var g=d(a.data);b.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:g})},substitute:function(a){a=
d(a.data);a.sourceUrl=h.location.pathname+h.location.search;a=b.$.param(a);h.location.href="/afx/cartconflicts/resolve/substitute?"+a}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("afx-get-cart-count",function(b){return function(d){b.get("/alm/addtofreshcart/cartcount",{timeout:5E3,success:function(a){d.success&&d.success({isOK:!0,total:{numActiveItem:a.cartCount}})},error:function(a){d.error&&d.error(a)}})}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A",
"alm-cart-action-query-string-utils").register("alm-multi-add-to-cart-proxy",function(b,d){return{multiAddToCart:function(a){var g=d.addQueryStringParamsToUrl("/alm/addtocart/multiple",a.data);b.$.ajax(g,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)}}})});"use strict";r("ALMCartActionAssetDuplicationGuard",function(){return{register:r,when:F}});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.register("afx-callbacks-helper",
function(b){function d(b){var g=b in a;!g&&e.log("Unable to retrieve callback for "+b,"Error");return g}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,c,e){b=b in a?b:"default";d(b)&&a[b].success&&a[b].success(c,e)},error:function(b,c,e,l){b=b in a?b:"default";d(b)&&a[b].error&&a[b].error(c,e,l)}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("alm-cart-action-assets-device",function(b){return{getDevice:function(){return"desktop"}}})});
"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.register("afx-preHandler-helper",function(b){var d={};return{addPreHandler:function(a){d[a.clientID||"default"]=a},getPreHandler:function(a){return d[a]}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.register("afx-prehooks-helper",function(b){function d(b){var d=b in a?b:"default";d=d in a&&a[d].invoke;!d&&e.log("Unable to retrieve prehook for "+b,"Error");return d}var a={};return{addPrehooks:function(b){a[b.clientID||
"default"]=b},invoke:function(b,c){var g=b.clientId in a?b.clientId:"default";d(b.clientId)&&a[g].invoke(b.triggerEvent,c,b.scope,b.success,b.failure,b.device)},validatePrehook:d,prehooksWeblabEnabled:!1}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.register("afx-csm-metrics-utils",function(){var b={},d=function(a,b){h.ue&&h.ue.count&&a&&b&&h.ue.count(a,b)};return{startWidgetTimer:function(a){b[a]=Date.now()},endWidgetTimer:function(a,c){a=Date.now()-b[a];d(c,
a)},setWidgetClickTimestamp:function(a){h.ue&&h.uet&&a&&h.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,b){h.ue&&h.uet&&a&&b&&h.uet(a,b,{wb:1})},increment:function(a){h.ue&&h.ue.count&&a&&h.ue.count(a,(h.ue.count(a)||0)+1)},setCount:d,sendWidgetMetrics:function(a){h.ue&&h.uex&&a&&h.uex("ld",a,{wb:1})}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.register("add-to-cart-common-utils",function(){return{vibrate:function(){return h.amazon&&h.amazon.cordova&&h.amazon.cordova.notification&&
h.amazon.cordova.notification.vibrate&&h.amazon.cordova.notification.vibrate(50)}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","a-modal").register("fresh-atfc-modal-utils",function(b,d){return{removeModal:function(){var a=d.get("fresh-add-to-cart-modal");a&&d.remove(a)},showModal:function(a,c,e){c&&(c={name:"fresh-add-to-cart-modal",header:c.header,inlineContent:c.body,footer:c.footer},"desktop"===e&&(c.width=325),d.create(a.$currentTarget,c).show(),
b.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(a){d.remove(a.popover)}))}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","jQuery","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","fresh-atfc-ewc-helper","fresh-atfc-fallback-error-modal-helper").register("fresh-atfc-error-modal-utils",function(b,d,a,c,f,k,l,h){function g(a,c,d,f){e.when("a-modal").execute("showModal",function(v){c||m(a);a.data.quantity&&
(k.updateQuantity("fresh-clear-slot-button",a.data.quantity),k.updateQuantity("alcohol-warning-fresh-add-to-cart-button",a.data.quantity),k.updateQuantity("regions-out-of-sync-inline-fresh-add-to-cart-button",a.data.quantity));var e={name:"fresh-add-to-cart-error-modal",header:c.header,inlineContent:c.errorMessage,footer:c.footer,data:{event:a,response:f}};"desktop"===d&&(e.width=325);v.create(a.$currentTarget,e).show();b.on("a:popover:afterHide:".concat("fresh-add-to-cart-error-modal"),function(b){l.refreshCart(a.data.sessionID);
v.remove(b.popover)})})}function m(c,v){a.showGenericErrorModal({success:function(a,b,e){a&&(a=d.parseJSON(e.http.response),q(c,a,v))},error:function(){e.log("Failed to get the generic error modal","Error");var a=h.getFallbackErrorModal();c.data.qsUID&&c.data.prevSelectedQty&&c.data.isStepperFlag&&(b.isListening("quantity-selector-widget:sync-stepper-quantity")?b.trigger("quantity-selector-widget:sync-stepper-quantity",c.data.asin,c.data.prevSelectedQty,c.data.storeId):b.trigger("quantity-selector-widget:selectQuantity:clientUpdate",
c.data.qsUID,c.data.prevSelectedQty,!1));g(c,a,v)}})}function t(a,b){if(a.data.asin&&a.data.storeId&&b.clientResponseModel&&b.clientResponseModel.items){var c=b.clientResponseModel.items.filter(function(b){return b.ASIN===a.data.asin});1<c.length&&(c=c.filter(function(b){return b.ASIN===a.data.asin&&b.storeId===a.data.storeId}));if(1===c.length&&c[0].hasOwnProperty("amountInCart"))return parseFloat(c[0].amountInCart);if(b.clientResponseModel.uberCartStatus&&a.data.prevSelectedQty&&"INTERNAL_SERVER_ERROR"===
b.clientResponseModel.uberCartStatus.errorStatusCode)return parseFloat(a.data.prevSelectedQty)}return 0}function q(a,d,e){var v=d.errorModalHtml,k=f.getMetricsForDevice(e);d.clientResponseModel&&d.clientResponseModel.uberCartStatus&&d.clientResponseModel.uberCartStatus.errorStatusCode in k&&c.increment(k[d.clientResponseModel.uberCartStatus.errorStatusCode]);a.data.qsUID&&(k=t(a,d),null!=k&&a.data.isStepperFlag&&(b.isListening("quantity-selector-widget:sync-stepper-quantity")?b.trigger("quantity-selector-widget:sync-stepper-quantity",
a.data.asin,k,a.data.storeId):b.trigger("quantity-selector-widget:selectQuantity:clientUpdate",a.data.qsUID,k,!1)));g(a,v,e,d)}return{removeModal:function(){e.when("a-modal").execute("removeModal",function(a){var b=a.get("fresh-add-to-cart-error-modal");b&&a.remove(b)})},showModal:g,showGenericErrorModal:m,parseResponseAndShowErrorModal:q,getItemInCartQuantityFromResponse:t}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count").register("fresh-atfc-ewc-helper",
function(b,c,a,g){function d(a){g({sessionID:a,success:function(a){a&&a.isOK&&a.total&&k(a.total.numActiveItem)},error:function(){e.log("Failed to get cart count","Error",a)}})}function k(a){e.when("nav.setCartCount").execute(function(b){b(a)});e.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var l;e.when("EWC").execute("add-to-cart-refresh",function(a){l=a});e.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){l!==
n&&"function"===typeof l.refresh?l.refresh():d(a)}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","afx-storeIntroductionSheet-helper","afx-cpi-helper","afx-notification-helper").register("f3-consumables-atc-helper",function(b,c,a,e){return{handleAddToCart:function(d,g,l){g.storeIntroductionSheetHtml&&g.storeIntroductionSheetHtml.content||d.additionalParams&&d.additionalParams.shouldRenderSIS?c.render(d,g,l):g.renderUFGCartProgressIndicator?a.render(d):
b.trigger("fresh-atfc:success","false",{almBrandId:d.brandId});e.handleAddToCart(g,l)}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.register("afx-metrics-helper",function(){var b={ATFC_COUNT:"afxAddToFreshCartCount",ALM_MULTI_ATC_COUNT:"almMultiAddToCartCount",ATFC_ASSET_LOAD:"almAssetLoadCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ALM_MULTI_ATC_COUNT_SUCCESS:"almMultiAddToCartCountSuccess",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",
ALM_MULTI_ATC_COUNT_ERROR_MODAL:"almMultiAddToCartCountErrorModal",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED:"almMultiAddToCartCountErrorUnexpected",ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",ATFC_STORE_INTRODUCTION_SHEET:"afxStoreIntroductionSheet",ATFC_OCX_STORE_INTRODUCTION_SHEET:"afxOfferComparisonStoreIntroductionSheet",
CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ATFC_NOTIFICATION_RETRY:"afxAddToCartNotificationRetryCount",ATFC_NOTIFICATION_FAILURE:"afxAddToCartNotificationFailureCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",
INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(c){var a={};Object.keys(b).forEach(function(d){a[d]=b[d]+":"+c});return a}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("afx-quantity-helper",
function(b){var c={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(c[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?c[a.attr("id")]||1:1}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","afx-csm-metrics-utils","afx-metrics-helper","f3-glowchangeaddress").register("afx-storeIntroductionSheet-helper",function(b,c,a,g){function d(a){e.when("a-sheet").execute(function(b){b.create({inlineContent:a,
closeType:"icon",height:190}).show();h("mobile",!1)})}function k(a,c,d){var f=a.additionalParams;if(a.asin&&a.brandId&&a.offerListingDiscriminator&&a.storeId){var g={almBrandId:a.brandId,almStoreId:a.storeId,asin:a.asin,isDelivery:c.delivery,offerListingDiscriminator:a.offerListingDiscriminator,isAlmDetailPageBopis:c.almDetailPageBopis};c.newGlowAddressId&&(g.newGlowAddressId=c.newGlowAddressId);a.clientID&&(g.clientId=a.clientID);f&&f.sisDeliveryMessage&&(g.deliveryMessage="DELIVERY_MESSAGE_PLACEHOLDER");
b.get("/fmc/sis",{params:g,accepts:"text/html; charset\x3dutf-8",timeout:3E3,success:function(a){var b=document.getElementById("almStoreIntroductionSheet");b||(b=document.createElement("div"),b.setAttribute("id","almStoreIntroductionSheet"),document.body.appendChild(b));l(b,a,f.sisDeliveryMessage);h(d,!0)},error:function(a,b,c){e.log("Failed to render store introduction sheet: "+c,"Error")}})}else e.log("Failed to render store introduction sheet: Missing Parameters","Error")}function l(a,b,c){a.innerHTML=
b;if(b=a.querySelector("#store-introduction-sheet-delivery-message span"))b.innerHTML=c;a.querySelectorAll("script").forEach(function(a){var b=document.createElement("script");Array.from(a.attributes).forEach(function(a){b.setAttribute(a.name,a.value)});b.appendChild(document.createTextNode(a.innerHTML));a.parentNode.replaceChild(b,a)})}function h(b,d){b=a.getMetricsForDevice(b);d?c.increment(b.ATFC_OCX_STORE_INTRODUCTION_SHEET):c.increment(b.ATFC_STORE_INTRODUCTION_SHEET)}function n(a,c){var d=a.newGlowAddressId,
e=a.storeFrontUrl,f=a.isAlmDetailPageBopis;if(d)if(g.setAddress({addressId:d,almBrandId:a.almBrandId}),b.capabilities.isAmazonApp)m(e,f,c);else b.on("packard:glow:destinationChangeNavAck",function(){m(e,f,c)});else m(e,f,c)}function m(a,b,c){b?c?q():p():a&&(location.href=a)}function p(){e.when("a-sheet").execute(function(a){var b=a.get("alm-store-introduction-sheet");a.hideSheet(b);b.destroy()})}function q(){var a=b.$("#store-introduction-sheet-side-sheet-container").width()+30;x({right:"-"+a+"px"},
function(){b.$("#store-introduction-sheet-side-sheet-container").remove()});b.$("body").css({overflow:"visible"});b.hide(b.$("#store-introduction-sheet-background"));b.$("#store-introduction-sheet-background").remove()}function x(a,c){b.animate(b.$("#store-introduction-sheet-side-sheet-container"),a,300,"ease-out",c)}b.declarative("sis-storefront-button-action","click",function(a){n(a.data,!0)});b.declarative("sis-storefront-button-action-mobile","click",function(a){n(a.data,!1)});return{render:function(a,
b,c){a.additionalParams&&a.additionalParams.shouldRenderSIS?b&&b.storeIntroductionSheetEnabled&&k(a,b,c):"mobile"===c&&d(b.storeIntroductionSheetHtml.content)}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("afx-cpi-helper",function(b){return{render:function(b){}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("f3-glowchangeaddress",function(b){function c(c,d){var f={};c=g(c);""==c?e.log("CSRF Token not available in response from get-rendered-address-selections response",
"Error"):(f.addressId=d.addressId,f.almBrandId=d.almBrandId,f.actionSource="f3-pickup-conflict",f.locationType="ACCOUNT_ADDRESS",f.deviceType="web",f.pageType=h.ue_pty,b.post("/portal-migration/hz/glow/address-change?actionSource\x3dglow",{headers:{"Content-Type":"application/json","anti-csrftoken-a2z":c},params:f,paramsFormat:"json",success:function(b){a()},error:function(){e.log("Unable to set GLOW address","ERROR")}}))}function a(){b.capabilities.isAmazonApp?e.when("BottomSheetPlugin").execute(function(a){a.UpdateGlowIngress({})}.bind(this)):
b.trigger("packard:glow:destinationChangeNav")}function g(a){var b=a.indexOf('"',a.indexOf("CSRF_TOKEN"))+1;if(0!=b){var c=a.indexOf('"',b);return a.substring(b,c)}return""}return{setAddress:function(a){b.get("/portal-migration/hz/glow/get-rendered-address-selections?deviceType\x3ddesktop\x26pageType\x3dDetail\x26storeContext\x3dgrocery\x26actionSource\x3ddesktop-modal",{headers:{"Content-Type":"application/json","anti-csrftoken-a2z":b.$("#glowValidationToken").val()||""},success:function(b){c(b,
a)},error:function(){e.log("Unable to get rendered address content","ERROR")}})},refreshGlowIngress:a}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A").register("search-add-to-cart-helper",function(b){return{start:function(){e.now("rush-framework","rush-dispatcher").execute(function(b,a){b!==n&&a!==n&&a.trigger("search-add-to-cart:start",{})})},success:function(b,a){e.now("rush-framework","rush-dispatcher").execute(function(c,d){c!==n&&d!==n&&d.trigger("search-add-to-cart:success",
{response:a,event:b})})},error:function(){e.now("rush-framework","rush-dispatcher").execute(function(b,a){b!==n&&a!==n&&a.trigger("search-add-to-cart:error",{})})}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","afx-csm-metrics-utils","afx-metrics-helper").register("afx-notification-helper",function(b,c,a){return{handleAddToCart:function(a,b){}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",
function(b,c){return{execute:function(a){c.getConflictSummary({data:a.data,success:function(d,e,h){!0===d.isSuccess?!0===d.hasConflicts?c.substitute({data:a.data}):c.resolve({data:a.data,success:function(){b.trigger("fresh-cart-conflict-resolution:success");location.reload()},error:a.error}):a.error(h,e,"Failed to call getconflictsummary")},error:a.error})}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","afx-atfc-v2-proxy","fx-atfo-proxy","fx-atfc-button-utils",
"afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-prehooks-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","f3-consumables-atc-helper","add-to-cart-common-utils","f3-glowchangeaddress","search-add-to-cart-helper").register("fresh-shared-add-to-cart-v2",function(b,c,a,g,f,k,l,t,y,m,p,q,x,v,r,G,B){return{updateQuantity:l.updateQuantity,attachPrehooks:t.addPrehooks,attachCallbacks:y.addCallbacks,
updateAddAllQuantityForAsin:x.updateQuantityForAsin,initialize:function(d){function x(a){return a.isItemSoldByCount?!JSON.parse(a.isItemSoldByCount):a.pickingStrategy?"bulk"===a.pickingStrategy||"catch"===a.pickingStrategy:!1}function A(a,b,c,e){r.vibrate();a.data.amountInUom===n&&x(a.data)&&(a.data.amountInUom=a.data.quantity,a.data.quantity=1);var u={clientId:a.data.clientID,triggerEvent:a,scope:b,success:c,failure:e,device:d};h.ue_pty&&(a.data.pageType=h.ue_pty);h.ue_spty&&(a.data.subPageType=
h.ue_spty);var g=D(a,b,e);t&&t.prehooksWeblabEnabled&&t.validatePrehook(u.clientId)?t.invoke(u,{success:E,error:function(a,b,c){g(a,b,c)}}):E(a,b,c,e)}function D(a,b,c){return function(e,u,h){var k=w.ATFC_CTCF,m=e.responseText;p.removeModal();if(m){var l=JSON.parse(m);k=w.ATFC_CTCF+":lineItemBucket:"+C(l.clientResponseModel)}400===e.status&&l?(f.increment(w.ATFC_ERROR_MODAL_COUNT),p.parseResponseAndShowErrorModal(a,l,d)):403===e.status?location.reload():(f.increment(w.ATFC_UNEXPECTED_ERROR_COUNT),
p.showGenericErrorModal(a,d),y.error(a.data.clientID,a,e,u,h),B.error());f.endWidgetTimer(b,k);a.data.setQuantityFlag||g.showButtonAndRemoveSpinner(a);c&&c()}}function E(a,e,h,k){var u=D(a,e,k);B.start();c.addToFreshCart({data:a.data,success:function(c,u,k){if(200===k.status)if(f.increment(w.ATFC_SUCCESSFUL_ADD_COUNT),u=w.ATFC_CTCF+":lineItemBucket:"+C(c),f.endWidgetTimer(e,u),u=p.getItemInCartQuantityFromResponse(a,c),b.isListening("commit-c5d19d5c")&&a.data.setQuantityFlag!==n&&a.data.qsUID?b.trigger("quantity-selector-widget:sync-stepper-quantity",
a.data.asin,u,a.data.storeId,a.data.qsUID,!1,!1,!a.data.setQuantityFlag,a.data.clientID):a.data.setQuantityFlag&&a.data.qsUID?b.trigger("quantity-selector-widget:sync-stepper-quantity",a.data.asin,u,a.data.storeId,a.data.qsUID):b.trigger("quantity-selector-widget:sync-stepper-quantity",a.data.asin,u,a.data.storeId),q.refreshCart(a.data.sessionID),y.success(a.data.clientID,a,c.clientResponseModel),B.success(a,c.clientResponseModel),c.refreshGlowLabel){if(G.refreshGlowIngress(),c.storefrontUrl)if(b.capabilities.isAmazonApp)location.href=
c.storefrontUrl;else b.on("packard:glow:destinationChangeNavAck",function(){location.href=c.storefrontUrl})}else c.shouldRedirectToOgs?c.ogsUrl?setTimeout(function(){location.href=c.ogsUrl},3E3):location.reload():v.handleAddToCart(a.data,c,d);p.removeModal();a.data.setQuantityFlag||g.showButtonAndRemoveSpinner(a);h&&h()},error:function(a,b,c){u(a,b,c)}})}function H(a,c){f.startWidgetTimer(c);b.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){a.data.quantity=
l.getQuantity(a.$target);A(a,c,function(){location.reload()})},error:function(){e.log("Failed to clear reservation");p.showGenericErrorModal(a,d)}})}function C(a){return a.items&&Math.ceil(a.items.length/5)}var w=k.getMetricsForDevice(d),z=w.ATFC_LATENCY_SCOPE+Date.now();b.on("quantity-selector-widget:action:AddToCartAction",function(a){a.additionalParams&&(a.additionalParams=b.$.parseJSON(a.additionalParams));a.queryLogInfoParams&&(a.queryLogInfoParams=b.$.parseJSON(a.queryLogInfoParams));var c=
{data:a};if(a.tunneledData&&a.tunneledData.$target){var d=a.tunneledData.$target;c=b.$.extend(c,{$target:d,$currentTarget:d,$declarativeTarget:d});delete a.tunneledData}else a=b.$("#qs-widget-button-container-"+a.qsUID),c=b.$.extend(c,{$target:a,$currentTarget:a,$declarativeTarget:a}),c.data.setQuantityFlag||g.hideButtonAndRenderSpinner(c);A(c,z)});b.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;H(a,z)});b.declarative("fresh-add-to-cart","click",function(a){f.startWidgetTimer(z);
f.increment(w.ATFC_COUNT);g.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||(a.data.setQuantityFlag||g.hideButtonAndRenderSpinner(a),a.data.qsUID?b.trigger("quantity-selector-widget:triggerAction",a.data.qsUID,"AddToCartAction",{$target:a.$currentTarget}):(a.data.quantity=l.getQuantity(a.$target),A(a,z)))});b.declarative("fresh-add-to-cart-alcohol","click",function(a){a.$currentTarget.context.disabled=!0;f.startWidgetTimer(z);a.data.quantity=l.getQuantity(a.$target);b.trigger("quantity-selector-widget:sync-stepper-quantity",
a.data.asin,a.data.quantity);A(a,z)});b.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;p.removeModal();m.execute({data:a.data,error:function(b,c,e){p.showGenericErrorModal(a,d);y.error(a.data.clientID,a,b,c,e)}})});b.declarative("fresh-add-to-order","click",function(b){g.shouldDisableButtonClicks()||(g.hideButtonAndRenderSpinner(b),r.vibrate(),a.addToFreshOrder({data:b.data,success:function(a,c,d){200===d.http.status&&y.success(b.data.clientID,
b,a.clientResponseModel);g.showButtonAndRemoveSpinner(b)},error:function(c,e,f){p.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),p.parseResponseAndShowErrorModal(b,c,d);else if(401===c.http.status)location.reload();else{var h=a.getFallbackErrorModalHtml();p.showModal(b,h,d);y.error(b.data.clientID,b,c,e,f)}g.showButtonAndRemoveSpinner(b)}}))})}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A","alm-multi-add-to-cart-proxy","fx-atfc-button-utils",
"afx-csm-metrics-utils","afx-metrics-helper","afx-callbacks-helper","afx-preHandler-helper","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("shared-alm-multi-add-to-cart",function(b,c,a,e,f,h,l,t,r,m,p){return{attachCallbacks:h.addCallbacks,attachPreHandler:l.addPreHandler,initialize:function(d){function g(f,g,l,q){p.vibrate();c.multiAddToCart({data:f.data,success:function(c,g,p){200===p.status&&(e.increment(k.ALM_MULTI_ATC_COUNT_SUCCESS),
r.refreshCart(f.data.sessionID),b.trigger("multipleAddToCart:success",f.data),h.success(f.data.clientId,f,c),m.handleAddToCart(f.data,c,d));t.removeModal();a.showButtonAndRemoveSpinner(f);l&&l()},error:function(b,c,g){a.showButtonAndRemoveSpinner(f);t.removeModal();if(b.responseText)try{var m=JSON.parse(b.responseText)}catch(C){m=n}400===b.status&&m?(e.increment(k.ALM_MULTI_ATC_COUNT_ERROR_MODAL),t.parseResponseAndShowErrorModal(f,m,d)):403===b.status?location.reload():(e.increment(k.ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED),
t.showGenericErrorModal(f,d));h.error(f.data.clientId,f,b,c,g);q&&q()}})}var k=f.getMetricsForDevice(d),q=k.ATFC_LATENCY_SCOPE+Date.now();b.declarative("alm-multi-add-to-cart","click",function(b){e.increment(k.ALM_MULTI_ATC_COUNT);var c=l.getPreHandler(b.data.clientId);c&&c.preHandle&&(c=c.preHandle(b))&&(b=c);c=b.$currentTarget.find("input");!b.data.items||1>b.data.items.length||a.shouldDisableButtonClicks()||c.is(":disabled")||(a.hideButtonAndRenderSpinner(b),g(b,q))})}}})});e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){c.when("A",
"f3-consumables-atc-helper","fresh-atfc-ewc-helper","afx-callbacks-helper","fresh-atfc-error-modal-utils","add-to-cart-common-utils").register("qs-fresh-shared-add-to-cart",function(b,c,a,e,f,h){return{initialize:function(d){function g(a){return"UFG"==a.cartType&&a.response&&a.request&&a.request.additionalInput?!0:!1}function k(b){if(g(b)&&b.response.rawResponse){var h=b.response.rawResponse,k=h.jqXHR,l=b.request,m=l.triggeringEvent;m.data=l.additionalInput;m.data&&(m.data.isDecreaseQuantityAction=
b.isDecreaseQuantityAction);200===k.status&&(a.refreshCart(l.sessionId),e.success(b.clientName,m,h.clientResponseModel),c.handleAddToCart(m.data,h,d));f.removeModal()}}b.on("quantity-slider:add-to-cart-start",function(a){h.vibrate()});b.on("quantity-slider:remove-from-cart-start",function(a){h.vibrate()});b.on("quantity-slider:remove-from-cart-success",function(a){k(a)});b.on("quantity-slider:add-to-cart-success",function(a){k(a)});b.on("quantity-slider:cart-submit-error",function(a){if(g(a)){var b=
a.request.triggeringEvent,c=a.response,h=c.responseText,k;f.removeModal();h&&(k=JSON.parse(h));b.data=a.request.additionalInput;400===c.status&&k?f.showModal(b,k.errorModalHtml,d):403===c.status?location.reload():(f.showGenericErrorModal(b,d),e.error(a.clientName,b,c,"error",c.statusText))}})}}})});"use strict";e.when("ALMCartActionAssetDuplicationGuard").execute(function(c){var b={en:{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your cart.\x3c/b\x3e Please try again.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},es:{header:"Producto no añadido a la cesta",errorMessage:"Se ha producido un error y este producto \x3cb\x3eno se ha añadido a tu cesta.\x3c/b\x3e Inténtalo de nuevo.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eAceptar\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},ar:{header:"لم تتم إضافة السلعة إلى عربة التسوق",errorMessage:"عذرًا، حدث خطأ ولم تتم إضافة هذه السلعة إلى عربة التسوق الخاصة بك. يرجى المحاولة مرة أخرى",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e\nموافق \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},bn:{header:"কার্টে আইটেম যোগ করা হয়নি",errorMessage:"আমরা দুঃখিত, একটি ত্রুটি ছিল এবং এই আইটেমটি আপনার কার্টে যোগ করা হয় নি। অনুগ্রহ করে পুনরায় চেষ্টা করুন।",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eঠিক আছে\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},cs:{header:"Artikel nicht zum Einkaufswagen hinzufgefügt",errorMessage:"Leider ist ein Fehler aufgetreten und dieser Artikel wurde nicht zu Ihrem Einkaufswagen hinzugefügt. Bitte versuchen Sie es erneut.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},da:{header:"Artikel nicht zum Einkaufswagen hinzufgefügt",errorMessage:"Leider ist ein Fehler aufgetreten und dieser Artikel wurde nicht zu Ihrem Einkaufswagen hinzugefügt. Bitte versuchen Sie es erneut.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},de:{header:"Artikel nicht zum Einkaufswagen hinzufgefügt",errorMessage:"Leider ist ein Fehler aufgetreten und dieser Artikel wurde nicht zu Ihrem Einkaufswagen hinzugefügt. Bitte versuchen Sie es erneut.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},fr:{header:"Article non ajouté au panier",errorMessage:"Nous sommes désolés, il y a eu une erreur et cet article n'a pas été ajouté à votre panier. Veuillez réessayer.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},hi:{header:"आइटम कार्ट से नहीं जोड़ा गया",errorMessage:"हमें खेद है, एक त्रुटि हुई थी और यह आइटम आपके कार्ट में जोड़ा नहीं गया था. कृपया फिर से कोशिश करें।",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eठीक है\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},it:{header:"Articolo non aggiunto al carrello",errorMessage:"Desculpe, ocorreu um erro e este item \x3cb\x3enão foi adicionado ao seu carrinho.\x3c/b\x3e Por favor, tente novamente.",
footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},ja:{header:"商品がカートに追加されていません",errorMessage:"申し訳ございません。エラーが発生したため、\x3cb\x3eこの商品はカートに追加されませんでした。\x3c/b\x3eもう一度お試しください。",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
kn:{header:"ಐಟಂ ಅನ್ನು ಕಾರ್ಟ್‍ಗೆ ಸೇರಿಸಿಲ್ಲ",errorMessage:"ನಮ್ಮನ್ನು ಕ್ಷಮಿಸಿ, ಇದರಲ್ಲಿ ಒಂದು ದೋಷವಿದೆ ಮತ್ತು ಈ ಐಟಂ ಅನ್ನು ನಿಮ್ಮ ಕಾರ್ಟ್‍ಗೆ ಸೇರಿಸಿಲ್ಲ. ದಯವಿಟ್ಟು ಪುನಃ ಪ್ರಯತ್ನಿಸಿ.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eಸರಿ\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
ml:{header:"ബാസ്കറ്റിൽ ചേർക്കാത്ത ഇനം",errorMessage:"ക്ഷമിക്കണം,ഒരു പിശക് ഉണ്ടായി,നിങ്ങളുടെ കാർട്ടിൽ ഈ ഇനം ചേർത്തിട്ടില്ല. വീണ്ടും ശ്രമിക്കുക.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eശരി\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
mr:{header:"आयटम कार्टला जोडले गेलेले नाही",errorMessage:"आम्ही दिलगीर आहोत, एक चूक झाली आणि हे आयटम आपल्या कार्टमध्ये जोडले गेले नाही. कृपया पुन्हा प्रयत्न करा.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eठीक\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
nl:{header:"Artikel nicht zum Einkaufswagen hinzufgefügt",errorMessage:"Leider ist ein Fehler aufgetreten und dieser Artikel wurde nicht zu Ihrem Einkaufswagen hinzugefügt. Bitte versuchen Sie es erneut.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
pl:{header:"Artikel nicht zum Einkaufswagen hinzufgefügt",errorMessage:"Leider ist ein Fehler aufgetreten und dieser Artikel wurde nicht zu Ihrem Einkaufswagen hinzugefügt. Bitte versuchen Sie es erneut.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
pt:{header:"O item não foi adicionado ao carrinho",errorMessage:"Desculpe, ocorreu um erro e este item \x3cb\x3enão foi adicionado ao seu carrinho.\x3c/b\x3e Por favor, tente novamente.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
ta:{header:"பொருள் கார்ட்டில் சேர்க்கப்படவில்லை",errorMessage:"மன்னிக்கவும், பிழை ஏற்பட்டது, இந்த உருப்படி உங்கள் கார்ட்டில் சேர்க்கப்படவில்லை. மீண்டும் முயற்சிக்கவும்.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eசரி\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
te:{header:"వస్తువుని బాస్కెట్‌లో చేర్చలేదు",errorMessage:"మమ్మల్ని క్షమించండి, అక్కడ ఏదో ఎర్రర్ ఏర్పడింది అందుచేత మీ బాస్కెట్‌లో ఈ వస్తువును జోడించలేదు. దయచేసి మళ్లీ ప్రయత్నించండి.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eసరే\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
tr:{header:"Artikel nicht zum Einkaufswagen hinzufgefügt",errorMessage:"Leider ist ein Fehler aufgetreten und dieser Artikel wurde nicht zu Ihrem Einkaufswagen hinzugefügt. Bitte versuchen Sie es erneut.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
zh:{header:"商品未加入购物车",errorMessage:"很抱歉，出现错误，\x3cb\x3e该商品未添加至您的购物车。\x3c/b\x3e请重试。",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e好\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'}};c.when("A").register("fresh-atfc-fallback-error-modal-helper",
function(c){return{getFallbackErrorModal:function(){var a=document.querySelector("html[lang]");return a&&(a=a.getAttribute("lang"),a!==n&&(a=a.split("-"),a.length))?b[a[0]]:b.en}}})})});
/* ******** */
(function(g){var k=window.AmazonUIPageJS||window.P,l=k._namespace||k.attributeErrors,b=l?l("PulseStaplesActionAssets",""):k;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,k,l){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(b,f){f=0<f?f|0:0;return this.substring(f,f+b.length)===b}});"use strict";g.when("A","pulse-staple-action-constants").register("pulse-staples-action-proxy",function(b,f){var c=function(a,d){var c=
a.success,e=a.error;b.$.ajax({url:d,type:"POST",data:JSON.stringify(a.data),contentType:"application/json; charset\x3dutf-8",dataType:"json",success:c,error:e,timeout:1E4})};return{addStaples:function(a){var d=f.addStaplesBaseUrl+"?"+b.$.param({reftag_:a.data.reftag});c(a,d)},updateStaple:function(a){var d=f.updateStapleBaseUrl+"?"+b.$.param({reftag_:a.data.reftag});c(a,d)}}});"use strict";g.when("A","a-dropdown","pulse-staple-action-error-modal-utils","pulse-staple-action-constants").register("pulse-add-action-state-util",
function(b,f,c,a){var d=function(a){return a.prop("enabled")===l||!0===a.prop("enabled")},g=function(e,c){return setTimeout(function(){var d=e.$currentTarget.closest(a.stapleActionRowSelector),h=d.nextAll(a.eduContentInitialViewSelector);h=0<h.length?b.$.makeArray(d,h):d;b.fadeOut(h,150,a.auiEaseOutAnimation,function(){var e=b.$(c);e.height(d.outerHeight());var h=e.filter(a.stapleActionRowSelector),g=d.nextAll(a.eduContentManageStaplesViewSelector);h=0<g.length?b.$.makeArray(h,g):h;d.replaceWith(e);
e=e.find(".a-dropdown-container select");(e=f.getSelect(e))&&e.val(e.val());b.fadeIn(h,150,a.auiEaseOutAnimation)})},1E3)};return{addActionSuccessTransition:function(e,d){var c=e.$currentTarget.nextAll(a.spinnerSelector),h=e.$currentTarget.nextAll(a.successSelector);e.data&&Array.isArray(e.data.templates)&&e.data.templates.includes("DO_NOT_RENDER_QUANTITY_CADENCE_SELECTOR")?g(e,d):b.fadeOut(c,150,a.auiEaseOutAnimation,function(){b.fadeIn(h,150,a.auiEaseOutAnimation,function(){return g(e,d)})})},addActionFailureTransition:function(e,
b){var h=e.$currentTarget.nextAll(a.spinnerSelector),f=e.$currentTarget.find(a.auiButtonSelector);d(f)||(h.toggleClass(a.auiHiddenCssClass),f.prop("enabled",!0),f.show(),c.showModal(e.$target,b))},addActionInProgressTransition:function(b){var e=b.$currentTarget.nextAll(a.spinnerSelector),c=b.$currentTarget.find(a.auiButtonSelector);if(d(c)){var f=b.$currentTarget.find(a.auiButtonSelector).outerHeight();b.$currentTarget.closest(a.stapleActionRowSelector).height(f);e.toggleClass(a.auiHiddenCssClass);
c.prop("enabled",!1);c.hide()}},itemAlreadyRepeatedTransition:function(e,d){var c=e.$currentTarget.closest(a.stapleActionRowSelector);e=c.nextAll(a.eduContentInitialViewSelector);e=b.$.makeArray(c,e);b.fadeOut(e,150,a.auiEaseOutAnimation,function(){var e=b.$(d);e.height(c.outerHeight());c.replaceWith(e);b.fadeIn(e,150,a.auiEaseOutAnimation)})},isAddActionInProgress:function(b){return!d(b.$currentTarget.find(a.auiButtonSelector))}}});"use strict";g.when("A","pulse-staple-action-error-modal-utils",
"pulse-staple-action-constants").register("pulse-update-action-state-util",function(b,f,c){return{renderUpdatedNextDropDate:function(a,d){d&&b.$(c.nextAddDateRowTextSelectorPrefix+"-"+a).text(d)},showErrorModalOnFailure:function(a,b){return f.showModal(a,b)},renderUpdatedQuantityAndCadence:function(a,d){d&&b.$(c.cadenceRowTextSelectorPrefix+"-"+a).text(d)},toggleInProgressCx:function(a){var d=b.$(c.updateStapleComponentSelectorPrefix+"-"+a),f=d.outerHeight();d.height(f);b.$(c.updateSpinnerContainerSelectorPrefix+
"-"+a).add(c.updateActionRowSelectorPrefix+"-"+a).toggleClass(c.auiHiddenCssClass)}}});"use strict";g.when("A","a-modal").register("pulse-staple-action-error-modal-utils",function(b,f){b.on("a:popover:afterHide:pulse-staple-action-error-modal",function(b){f.remove(b.popover)});var c=function(a){try{return JSON.parse(a.responseText).errorModalHtml}catch(d){return b.state("pulse-staple-action-error-messages").generic}};return{removeModal:function(){var b=f.get("pulse-staple-action-error-modal");b&&
f.remove(b)},showModal:function(b,d){f.create(b,{name:"pulse-staple-action-error-modal",inlineContent:c(d)}).show()}}});"use strict";g.when("A","a-popover","pulse-staple-action-constants").register("pulse-staple-action-educational-content",function(b,f,c){b.declarative(c.educationalContentLearnMoreDecAction,["click","mouseenter"],function(b){f.create(b.$target,{url:c.educationalContentBaseUrl+"?learnMoreManageStaplesLink\x3d"+b.data.learnMoreManageStaplesLink,position:"triggerLeft",width:320,closeButton:!1,
padding:"none"}).show()})});"use strict";g.when("A").register("pulse-staple-action-constants",function(){return{addStaplesBaseUrl:"/repeatitems/psa/v1/add",updateStapleBaseUrl:"/repeatitems/psa/v1/update",educationalContentBaseUrl:"/repeatitems/psa/v1/educontent",educationalContentLearnMoreDecAction:"pulse-staple-action-learn-more",educationalContentBottomSheetName:"pulse-staple-action-learn-more-bottom-sheet",spinnerSelector:".atsl-spinner-element",successSelector:".atsl-success-element",stapleActionRowSelector:".staple-action-row",
eduContentInitialViewSelector:".staple-action-learn-more-initial-view",eduContentManageStaplesViewSelector:".update-staple-action-manage-staples-link",auiButtonSelector:".a-button",auiHiddenCssClass:"aok-hidden",auiEaseOutAnimation:"ease-out",nextAddDateRowTextSelectorPrefix:"#pulse-staples-action-next-add-date-row-text",cadenceRowTextSelectorPrefix:"#pulse-staple-action-qty-cadence-row-text",updateSpinnerContainerSelectorPrefix:"#pulse-staple-update-spinner-container",updateActionRowSelectorPrefix:"#pulse-staple-update-action-row",
updateStapleComponentSelectorPrefix:"#update-staple-component",updateStapleSuccessfulEventId:"UpdateStapleSuccessfulEvent"}});"use strict";g.when("A").register("pulse-staple-action-metric-util",function(){return{logAddStapleLatencyMetric:function(b,f){k.ue&&k.ue.count&&"undefined"!==typeof k.ue_t0&&ue.count("AddStaple-TimeTo-"+b,f-k.ue_t0)}}});"use strict";g.when("A","pulse-staples-action-proxy","pulse-add-action-state-util","pulse-staple-action-metric-util").register("pulse-add-staple-action",function(b,
f,c,a){var d=function(a){return b.$.extend({},a,{clientContext:a,asins:[a.asin]})};b.declarative("pulse-add-to-staples-action","click",function(a){c.isAddActionInProgress(a)||(c.addActionInProgressTransition(a),f.addStaples({data:d(a.data),success:function(d){"ItemAlreadyRepeated"===d.addOperationStatus?c.itemAlreadyRepeatedTransition(a,d.nextViewHtml):(c.addActionSuccessTransition(a,d.nextViewHtml),b.trigger("AddToStaplesSuccessfulEvent",a.data.asin))},error:function(b){return c.addActionFailureTransition(a,
b)}}))});var g=b.now();a.logAddStapleLatencyMetric("JSReady",g)});"use strict";g.when("A","pulse-staples-action-proxy","pulse-update-action-state-util","QuantitySelectorWidget","QuantitySelectorConstants","QuantitySelectorState","QuantitySelectorUtils","QuantitySelectorAUIDeps","a-dropdown","a-modal","pulse-staple-action-constants").register("pulse-update-staple-action",function(b,f,c,a,d,g,e,h,k,l,m){var n=function(b){return k.getSelect("pulse-staple-cadence-selector-desktop-"+b)},q=function(a){var d=
g.getQsWidgetConfiguration(a).selectedId;d=e.getQsItem(a,d);d=JSON.parse(d.data);var c=g.getQsWidgetConfiguration(a);c=JSON.parse(c.staticData);return b.$.extend({},c,d,{quantity:{quantity:d.quantity,unit:c.quantityUnit},cadence:JSON.parse(n(a).val()),clientContext:c})},p=function(a){var c=b.state("pulse-original-cadence-"+a);n(a).val(JSON.stringify(c));c=d.getQsWidgetConfigurationId(a)+"-original";(c=h.aState.state(c))&&c.id&&h.aState.state.replace(d.getQsWidgetConfigurationId(a),c);b.trigger(d.getQsWidgetEventInitialize(),
!0,a)};b.on("a:popover:afterShow",function(a){if((a=a.popover)&&a.name&&a.name.startsWith("pulse-staple-action-qs")){a=a.name.replace("pulse-staple-action-qs-","");var c=d.getQsWidgetConfigurationId(a)+"-original";h.aState.state(c);var e=g.getQsWidgetConfiguration(a);h.aState.state(c,e);b.state("pulse-original-cadence-"+a,JSON.parse(n(a).val()))}});b.on("a:popover:hide",function(a){(a=a.popover)&&a.name&&a.name.startsWith("pulse-staple-action-qs")&&(a=a.name.replace("pulse-staple-action-qs-",""),
b.$(m.updateSpinnerContainerSelectorPrefix+"-"+a).hasClass(m.auiHiddenCssClass)&&p(a))});b.declarative("pulse-update-staple-action","click",function(a){var d=a.data.qsUID,e=a.$currentTarget.closest(".a-popover-modal");e=l.get(e);c.toggleInProgressCx(d);e.hide();f.updateStaple({data:q(d),success:function(a){c.renderUpdatedQuantityAndCadence(d,a.renderableQuantityCadence);c.renderUpdatedNextDropDate(d,a.renderableNextDropDate);b.trigger(m.updateStapleSuccessfulEventId);c.toggleInProgressCx(d)},error:function(b){c.showErrorModalOnFailure(a.$target,
b);p(d);c.toggleInProgressCx(d)}})})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,e=b._namespace||b.attributeErrors,a=e?e("ALMCustomizationAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,e){c.when("fresh-add-to-cart","customization-service","fresh-atfc-error-modal-utils","fx-atfc-button-utils").execute(function(a,c,e,q){var g=/^(?:[a-zA-Z0-9 .!$&?]{1,30})?$/,f=document.getElementById("customTextArea"),h=document.getElementById("customCakeProfanityMessage"),r=document.getElementById("customCakeSpecialCharErrorMessage"),
t=document.getElementById("customCakeErrorPopupTitle");f&&a.attachPrehooks({invoke:function(d,a,l,k,m,p){function n(a){b.ue&&b.ue.count&&a&&b.ue.count("WFMOAC_CakeCustomization_ATC",a)}"a-form-error"===f.getAttribute("class")?(a=g.test(f.value)?h.innerHTML:r.innerHTML,e.showModal(d,{header:t.innerHTML,errorMessage:a,footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button a-button-primary"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
p),q.showButtonAndRemoveSpinner(d)):f.value?(n(1),c.saveCustomization(a,{asin:d.data.asin,almStoreId:d.data.storeId,price:d.data.price,personalizedMessage:f.value,csrfToken:d.data.csrfToken},d,l,function(){f.value="";k&&k()},m)):(n(0),a.success(d,l,k,m))}})});"use strict";c.when("A").register("customization-service",function(a){return{saveCustomization:function(c,b,e,g,f,h){a.post("/alm/customization",{success:function(a){e.data.additionalParams=Object.assign(e.data.additionalParams||{},{customizationToken:a.customizationToken});
c.success(e,g,f,h)},error:function(a,b,d){c.error(a,b,d)},contentType:"application/json",params:b,paramsFormat:"json"})}}})});
/* ******** */
(function(e){var g=window.AmazonUIPageJS||window.P,m=g._namespace||g.attributeErrors,a=m?m("F3GLOWAssets",""):g;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,g,m){e.when("f3-glow-utils","f3-glow-url-utils","f3-glow-constants","f3-glow-window-utils").register("f3-glow-manager",function(a,d,b,h){var c=function(){var c="true"===d.getUrlParameter(b.OPEN_GLOW),f=d.getUrlParameter(b.ACTIVE_TAB),l=d.getUrlParameter(b.STORE_CONTEXT);return c&&null!==f?(a.openGlowToActiveTab(f,
l),h.ue.count(b.OPENING_GLOW_METRIC,1),!0):c?(a.openGlowToActiveTab(b.DELIVERY,l),h.ue.count(b.OPENING_GLOW_METRIC,1),!0):!1};if(c()){var f=d.getUrlWithoutParameters(b.OPEN_GLOW,b.ACTIVE_TAB,b.STORE_CONTEXT);g.history.replaceState(null,null,f)}return{openGlowGivenUrlParameters:c}});"use strict";e.register("f3-glow-constants",function(){var a=["FreshMerchandisedContent","FreshMerchandisedContentMobile","Detail","DetailAW","DetailWebView"],d={nowstore:a},b={amazonfresh:a,dia:a},h={amazonfresh:a,u2supermercato:a,
pampanorama:a},c={amazonfresh:a,watsons:a,littlefarms:a};return{OPEN_GLOW:"openGlow",ACTIVE_TAB:"activeTab",GLOW_CLASS_NAME:"#nav-global-location-slot",STORE_CONTEXT:"storeContext",DELIVERY:"deliveryTab",WAITING_FOR_STORE_CONTEXT_EVENT:"glow.waitingForStoreContext",STORE_CONTEXT_EVENT:"glow.storeContext",GLUX_BOTTOMSHEET_NAME:"glux_bottom_sheet",GET_ADDRESS_SELECTIONS_ENDPOINT:"/gp/glow/get-address-selections.html",GLOW_BOTTOMSHEET_ID:"#glow-bottom-sheet",OPENING_GLOW_METRIC:"f3glowassets.glow.open",
ALM_BRAND_ID:"almBrandId",MAP_BRAND_ID_TO_ALIAS:{ctnow:"nowstore",QW1hem9uIEZyZXNo:"amazonfresh",TGEgUGxhemEgZGUgRGlh:"dia",VTIgU3VwZXJtZXJjYXRv:"u2supermercato",UGFtIFBBTk9SQU1B:"pampanorama",TW9ub3ByaXg:"monoprix",Q2FzaW5v:"casino",TW9ycmlzb25z:"morrisons",Q29vcA:"co-op",ejEjkXsQmO:"iceland",dGVndXQuLi4:"tegut","5oiQ5Z1O551z5LqV":"seijoishii","44OQ44Ot44O8":"valor","44Op44Kk44OV":"life",KQENHJywk4:"watsons",WDpqStVxNA:"littlefarms",VUZHIFdob2xlIEZvb2Rz:"wholefoods"},CLOSING_BRACES:"}",WEBLAB_MAP_KEY:"WEBLABS",
PROGRAM_SPECIFIC_MODAL_NAME:"program_specific_modal",PROGRAM_SPECIFIC_SHEET_NAME:"program_specific_bottom_sheet",PROGRAM_SPECIFIC_MODAL_WIDTH:475,PROGRAM_SPECIFIC_SHEET_DEFAULT_HEIGHT:400,GLOW_DESTINATION_TYPE_ID:"#glowDestinationType",CONDO_DIV_ID:"#Condo",NO_PAGE_TYPE:"NoPageType",WEBLAB_TREATMENTS:{C:"C",T1:"T1",T2:"T2"},PROGRAM_SPECIFIC_SHEET_ENABLED_PAGES:{A21TJRUUN4KGV:d,A2XZLSVIQ0F4JT:d,A1RKKUPIHCS9HS:b,AJZF8LZ1EJVJN:b,APJ6JRA9NG5V4:h,A3HOBANJMCMD83:h,A13V1IB3VIYZZH:{monoprix:a,casino:a},A1F83G8C2ARO7P:{amazonfresh:a,
morrisons:a,"co-op":a,iceland:a},A1PA6795UKMFR9:{amazonfresh:a,tegut:a},A1VC38T7YXB528:{amazonfresh:a,seijoishii:a,valor:a,life:a},A19VAU5U5O7RUS:c,A1DQ6JV7I20JSG:c,ATVPDKIKX0DER:{amazonfresh:a,wholefoods:a}},PROGRAM_SPECIFIC_SHEET_ENABLED_PAGE_TYPES_BASED_ON_URL:["storefront","dp","gp/product"],GLOW_NOT_SET_LOCATION_TYPES:["IP2LOCATION","REALM_DEFAULT","COUNTRY"],GET_LOCATION_LABEL_ENDPOINT:"/portal-migration/hz/glow/get-location-label",PROGRAM_SPECIFIC_SHEET_LOCAL_STORAGE_KEY:"programSpecificSheetGenerationTime",
PROGRAM_SPECIFIC_SHEET_TTL:2592E6,CURRENT_TIME:(new Date).getTime(),SKIP_ID:"GLUXProgramSpecificSheetSkipLink",DEVICE_TYPE:{DESKTOP:"desktop",WEBVIEW:"webview",APP:"mobile"},PROGRAM_SPECIFIC_ACTION_SOURCE:{DESKTOP:"desktop-programspecific-modal",WEBVIEW:"mweb-programspecific-bottomsheet",APP:"mobile-app-programspecific-bottomsheet"},GLOW_ACTION_SOURCE:"glow",GET_REQUEST_TYPE:"GET",ADDRESS_SELECTIONS_VIEW_MODEL_ENDPOINT:"/portal-migration/hz/glow/get-address-selections-view-model",UNREC_ALM_BOTTOM_SHEET_WEBLAB:"UNREC_BOTTOM_SHEET_ALM_516161",
PROGRAM_SPECIFIC_SHEET_OPEN_METRICS:"f3glowassets.programspecificsheet.open",PROGRAM_SPECIFIC_SHEET_SKIP_METRICS:"f3glowassets.programspecificsheet.skip",ADDRESS_SELECTION_AJAX_CALL_FAILED_METRICS:"f3glowassets.programspecificsheet.addressselectionscall.failed",PROGRAM_SPECIFIC_MODAL_CLOSE_EVENT:"a:popover:afterHide:program_specific_modal",PROGRAM_SPECIFIC_SHEET_CLOSE_EVENT:"a:sheet:afterHide:program_specific_bottom_sheet",PROGRAM_SPECIFIC_SHEET_AFTER_OPEN_EVENT:"a:sheet:afterShow:program_specific_bottom_sheet"}});
"use strict";e.when("A","mash","f3-glow-constants").execute(function(a,d,b){function h(b){var a=!1;e.now(b).execute(function(b){a=!!b});return a}d.addEventListener(b.STORE_CONTEXT_EVENT,function(b){h("store-context")||e.register("store-context",function(){return{getStoreContext:function(){return b.detail.storeContext}}})});d.dispatchEvent({type:b.WAITING_FOR_STORE_CONTEXT_EVENT})});"use strict";e.when("f3-glow-common-utils","f3-glow-program-specific-sheet-utils","f3-glow-program-specific-sheet-renderer").execute("f3-glow-program-specific-sheet-manager",
function(a,d,b){a.getStoreContext(b.DEVICE_TYPE).then(function(a){a&&d.shouldRender(a).then(function(c){c&&b.renderSheet(a)})})});"use strict";e.when("A").register("f3-glow-address-selections-constants",function(a){return{REQUEST_TYPE:"GET",ENDPOINT:"/portal-migration/hz/glow/get-rendered-address-selections"}});"use strict";e.when("3p-promise","f3-glow-constants","f3-glow-window-utils").register("f3-glow-common-utils",function(a,d,b){return{getPageType:function(){return b.ue_pty?b.ue_pty:d.NO_PAGE_TYPE},
getStoreContext:function(b){return new a(function(a){switch(b){case d.DEVICE_TYPE.DESKTOP:e.when("packardGlowStoreName").execute(function(b){a(b)});break;case d.DEVICE_TYPE.WEBVIEW:e.when("glowMobileStoreName").execute(function(b){a(b)});break;case d.DEVICE_TYPE.APP:e.when("store-context").execute(function(b){a(b.getStoreContext())});e.when("f3-glow-url-utils").execute(function(b){a(d.MAP_BRAND_ID_TO_ALIAS[b.getUrlParameter(d.ALM_BRAND_ID)])});break;default:e.log("Invalid device type: "+b,"ERROR",
"F3GLOWAssets"),a(null)}})},logEvent:function(a){b.ue&&b.ue.count(a,(b.ue.count(a)||0)+1)}}});"use strict";e.when("A","a-modal","f3-glow-constants").register("f3-glow-utils",function(a,d,b){return{openGlowToActiveTab:function(h){var c=a.$(b.GLOW_CLASS_NAME),f=d.get(c);if(null===f||0===c.length)e.log("Unable to get GLOW on Desktop","ERROR","F3GLOWAssets");else try{var n=f.attributes.url;f.attributes.url+="\x26"+b.ACTIVE_TAB+"\x3d"+h;f.show();f.attributes.url=n}catch(k){e.log("Unable to open GLOW on Desktop: "+
k,"ERROR","F3GLOWAssets")}}}});"use strict";e.when("A","a-modal","f3-glow-address-selections-constants","f3-glow-common-utils","f3-glow-constants","f3-glow-program-specific-sheet-utils","f3-glow-window-utils").register("f3-glow-program-specific-sheet-renderer",function(a,d,b,e,c,f,n){return{DEVICE_TYPE:c.DEVICE_TYPE.DESKTOP,renderSheet:function(k){f.getResponse(b.ENDPOINT,b.REQUEST_TYPE,c.DEVICE_TYPE.DESKTOP,k,c.PROGRAM_SPECIFIC_ACTION_SOURCE.DESKTOP).then(function(b){var a=f.getWeblabTreatment(b,
c.UNREC_ALM_BOTTOM_SHEET_WEBLAB);!b||a!==c.WEBLAB_TREATMENTS.T1&&a!==c.WEBLAB_TREATMENTS.T2?a===c.WEBLAB_TREATMENTS.C&&f.storeSheetGenerationTime():(b={name:c.PROGRAM_SPECIFIC_MODAL_NAME,inlineContent:b,hideHeader:!0,width:c.PROGRAM_SPECIFIC_MODAL_WIDTH,closeButton:!1},d.create(document.createElement("span"),b).show(),f.storeSheetGenerationTime(),e.logEvent(c.PROGRAM_SPECIFIC_SHEET_OPEN_METRICS+":"+c.DEVICE_TYPE.DESKTOP))});a.declarative(c.SKIP_ID,"click touchend",function(){d.get(c.PROGRAM_SPECIFIC_MODAL_NAME).hide();
e.logEvent(c.PROGRAM_SPECIFIC_SHEET_SKIP_METRICS+":"+c.DEVICE_TYPE.DESKTOP)});a.on(c.PROGRAM_SPECIFIC_MODAL_CLOSE_EVENT,function(){n.refresh()})}}});"use strict";e.when("A","3p-promise","f3-glow-constants","f3-glow-common-utils","f3-glow-window-utils").register("f3-glow-program-specific-sheet-utils",function(a,d,b,g,c){var f=function(a,d){return d!==b.NO_PAGE_TYPE?a.includes(d):c.location.href?b.PROGRAM_SPECIFIC_SHEET_ENABLED_PAGE_TYPES_BASED_ON_URL.some(function(b){return c.location.href.includes(b)}):
!1};return{getResponse:function(c,f,l,h,p){return new d(function(d){a.ajax(c,{method:f,params:{deviceType:l,pageType:g.getPageType(),storeContext:h,actionSource:p,showProgramSpecificSheet:!0},headers:{"anti-csrftoken-a2z":a.$("#glowValidationToken").val()||""},success:function(b){d(b)},error:function(a){e.log("Unable to get response from "+c+" : "+a,"ERROR","F3GLOWAssets");g.logEvent(b.ADDRESS_SELECTION_AJAX_CALL_FAILED_METRICS+":"+l);d(null)}})})},getWeblabTreatment:function(a,c){if(a&&-1===a.indexOf(b.WEBLAB_MAP_KEY)&&
-1===a.indexOf(c))return null;var d=a.indexOf(b.WEBLAB_MAP_KEY)+b.WEBLAB_MAP_KEY.length,f=a.substring(d).indexOf(b.CLOSING_BRACES);try{return JSON.parse(a.substring(d+3,d+f+1))[c]}catch(p){return e.log("Failed to fetch the "+c+" weblab treatment : "+a,"ERROR","F3GLOWAssets"),null}},shouldRender:function(h){var k=b.PROGRAM_SPECIFIC_SHEET_ENABLED_PAGES[c.ue_mid];return new d(function(d){if(k&&k[h]&&f(k[h],g.getPageType()))if(c.isLocalStorageEnabled())if(b.CURRENT_TIME-c.localStorage.getItem(b.PROGRAM_SPECIFIC_SHEET_LOCAL_STORAGE_KEY)<
b.PROGRAM_SPECIFIC_SHEET_TTL)d(!1);else if(!a.capabilities.isAmazonApp&&a.$(b.GLOW_DESTINATION_TYPE_ID).length){var l=a.$(b.GLOW_DESTINATION_TYPE_ID).val()||"";d(b.GLOW_NOT_SET_LOCATION_TYPES.includes(l))}else a.get(b.GET_LOCATION_LABEL_ENDPOINT,{path:b.GET_LOCATION_LABEL_ENDPOINT,success:function(a){a.customerIntent?d(b.GLOW_NOT_SET_LOCATION_TYPES.includes(a.customerIntent.locationType)):(e.log("LocationType is not present","ERROR","F3GLOWAssets"),d(!1))},error:function(a){e.log("Unable to get response from get-location-label: "+
a,"ERROR","F3GLOWAssets");d(!1)}});else d(!1);else d(!1)})},storeSheetGenerationTime:function(){c.isLocalStorageEnabled()&&c.localStorage.setItem(b.PROGRAM_SPECIFIC_SHEET_LOCAL_STORAGE_KEY,b.CURRENT_TIME)}}});"use strict";e.when("A","f3-glow-window-utils").register("f3-glow-url-utils",function(a,d){return{getUrlParameter:function(a){a=(new RegExp("[?\x26]"+a+"\x3d([^\x26#]*)")).exec(d.location.href);return null===a?null:decodeURI(a[1])||0},getUrlWithoutParameters:function(){for(var a=arguments.length,
e=Array(a),c=0;c<a;c++)e[c]=arguments[c];return e.reduce(function(a,b){var d=a.split("?")[0];a=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==a){var c=a.split("\x26");for(var e=c.length-1;0<=e;--e)a=c[e].split("\x3d")[0],a===b&&c.splice(e,1);d=d+"?"+c.join("\x26")}return d},d.location.href)}}});"use strict";e.when("A").register("f3-glow-window-utils",function(){var a=function(){try{var a=g.localStorage;a.setItem("__storage_test__","__storage_test__");a.removeItem("__storage_test__");return!0}catch(b){return e.log("Unable to access localStorage",
"WARN","F3GLOWAssets"),!1}};return{ue_pty:g.ue_pty,ue_mid:g.ue_mid,location:{href:g.location.href},lang:function(){if(g.top&&g.top.document&&g.top.document.documentElement)return g.top.document.documentElement.lang},ue:{count:g.ue.count},isLocalStorageEnabled:a,localStorage:a()?g.localStorage:null,refresh:function(){g.location.reload()}}})});
/* ******** */
(function(d){var f=window.AmazonUIPageJS||window.P,h=f._namespace||f.attributeErrors,a=h?h("FreshDetailPageDesktopAssets",""):f;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,f,h){d.when("A","afx-update-cart-count","fresh-dp-prevent-atc-default","ready").register("fresh-dp-add-to-cart",function(a,c,b){var e=!1;return{init:function(a){e||(d.when("fresh-atc-handler").execute(function(a){a.addToFreshCart({success:function(a){},error:function(a,e,g,c){d.log("Error adding to Cart on Fresh Detail Page",
"Error")}})}),e=!0);b.init()}}});d.when("A","afx-utils","ready").register("fresh-show-atc-changeover",function(a,c){var b=a.$,e=b("#afx-atc-changeover");return function(b){if(b&&0<e.length&&c.isFunction(e.find)){var g=a.state("fresh-atc-toast-text");g&&g.atcToastTextString&&(b=g.atcToastTextString.replace("FreshATCToastQuantity",b),(g=e.find(".a-changeover-inner"))&&c.isFunction(g.text)&&(g.text(b),c.isFunction(e.show)&&e.show()))}}});d.when("A","afx-utils","ready").register("fresh-show-atl-changeover",
function(a,c){a=a.$;var b=a("#afx-atl-changeover");return function(){0<b.length&&c.isFunction(b.show)&&b.show()}});"use strict";d.when("jQuery","ready").register("fresh-featurebullets",function(a){var c=function(){var a=!1;return{getIsExpanded:function(){return a},toggleExpanded:function(b){a=!a;b&&b(a)}}}(),b=function(b){var c=function(){var c=a("#fbSection");c.fadeTo(200,.75,null,function(){b.toggleExpanded(function(b){if(b){b=a("#fbSection");var d=a("#feature-bullets");d.find(".a-vertical").removeClass("collapsedFeatureBullets");
b.addClass("expandedFeatureBullets");a("#fbExpandableSection").addClass("expanded");b.find("h1").addClass("expandedFBHeader");a("#featureBulletsPlaceholder").addClass("FBplaceholder");d.find("#fbExpanderMoreButtonSection").hide();a("#feature-bullets")[0].offsetHeight<a("#feature-bullets")[0].scrollHeight&&(a(".fadeTextTopforFB").show(),a(".fadeTextBottomforFB").show());b.find(".closeFB").removeClass("aok-hidden")}else b=a("#fbSection"),d=a("#feature-bullets"),b.find(".closeFB").addClass("aok-hidden"),
a("#featureBulletsPlaceholder").removeClass("FBplaceholder"),d.find(".a-vertical").addClass("collapsedFeatureBullets"),a("#fbExpandableSection").removeClass("expanded"),b.removeClass("expandedFeatureBullets"),b.find("h1").removeClass("expandedFBHeader"),a(".fadeTextTopforFB").hide(),a(".fadeTextBottomforFB").hide(),d.find("#fbExpanderMoreButtonSection").show();c.fadeTo(200,1)})})};return{init:function(){a(".fadeTextTopforFB").hide();a(".fadeTextBottomforFB").hide();var d=a("#fbExpandableSection"),
f=a("#fbExpandableSectionContent");f.height()>d.height()&&(f.addClass("expandableSection"),f.click(c),a("#fbExpanderMoreButtonSection").removeClass("aok-hidden"),a("#feature-bullets").find(".moreFB").click(c),d=a("#fbSection"),d.find(".closeFB").click(c),d.hover(null,function(){b.getIsExpanded()&&c()}))}}};return{init:function(){(new b(c)).init()}}});d.when("A","a-modal","ready").execute(function(a,c){var b=a.$;a=a.state("glowEligibilityState");a!==h&&a.glowModalDisplayEligible&&"desktop"===a.deviceType&&
(c=c.get(b("#dpGlowModal")),c.attrs("ajaxHeaders",{"anti-csrftoken-a2z":b("#glowValidationToken").val()||""}),c.show())})});
/* ******** */
(function(c){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,b=h?h("DetailPageBuyBoxTabularLayoutDesktopAssets",""):e;b.guardFatal?b.guardFatal(c)(b,window):b.execute(function(){c(b,window)})})(function(c,e,h){c.when("A").execute("show-tabular-buybox-side-sheet",function(b){function f(a){g&&g.count&&g.count(a,(g.count(a)||0)+1)}function c(){d(".tabular-buybox").each(function(a,c){a=d(c);var k=!1;a.find(".tabular-buybox-text").each(function(a,b){a=d(b);if(a.css("line-clamp")!==
(3).toString()&&a.css("-webkit-line-clamp")!==(3).toString()){a=d(b).find(".tabular-buybox-text-message");var c=a.text();a.text("...");var e=b.offsetHeight;a.text(c);for(c=!1;b.offsetHeight>3*e;)c=!0,a.text(a.text().replace(/\W*\s(\S)*$/,"..."));k=c||b}else if(k=b.scrollHeight>b.clientHeight)return!1});a=a.find(".tabular-buybox-show-more");k?(b.show(a),f("DesktopTabularBuyBoxContentTruncated")):(b.hide(a),f("DesktopTabularBuyBoxContentExpanded"))})}var d=b.$,g=e.ue;d("#tabular-buybox-side-sheet-content a").attr("target",
"_blank");d("#tabular-buybox #sellerProfileTriggerId").click(function(){f("BuyBoxTabularLayoutDesktopLinkClicked")});b.declarative("close-tabular-buybox-side-sheet","click",function(a){function c(a){a.siblings("#tabular-buybox-side-sheet-content").show(function(){d(this).removeClass("tabular-buybox-side-sheet-content-display")})}(function(a){c(a);b.hide(a.find("#tabular-buybox-background"))})(d(a&&a.$currentTarget&&a.$currentTarget[0]));f("DesktopTabularSideSheetClosed")});b.declarative("show-tabular-buybox-side-sheet",
"click",function(a){function c(a){a.siblings("#tabular-buybox-side-sheet-content").show(function(){d(this).addClass("tabular-buybox-side-sheet-content-display")})}(function(a){var d=a.siblings('[data-action\x3d"close-tabular-buybox-side-sheet"]').find("#tabular-buybox-background");b.show(d);c(a)})(d(a&&a.$currentTarget&&a.$currentTarget[0]).closest("#tabular-buybox"));f("DesktopTabularSideSheetOpened")});c();b.on("a:accordion:buybox-accordion:select",c);b.on("a:tabs:offerDisplayGroup_tabs:select",
c);b.on("a:pageUpdate",c)})});
/* ******** */
(function(c){var e=window.AmazonUIPageJS||window.P,f=e._namespace||e.attributeErrors,a=f?f("DetailPageDeepCheckPromiseAssets",""):e;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,e,f){c.when("A","deep-check-promise-container","deep-check-promise-loader").register("deep-check-promise",function(a,k,d){return{asyncRequestDeepCheckPromise:function(b){var a=e.ue,c=e.uet,f=e.uex,l=b.url,g={},h=k.getDcpContainer(b);h.length?(h.hide(),g.params={asin:b.asin,buyingOptionIndex:b.buyingOptionIndex,
buyingOptionType:b.buyingOptionType,customerId:b.customerId,device:b.device,marketplaceId:b.marketplaceId,merchantId:b.merchantId,requestId:b.requestId,sessionId:b.sessionId,slateToken:b.slateToken},g.headers={"Accept-Language":b.language,"csrf-token":b.csrfToken},g.success=function(b){h.html(b.content);h.show();a&&a.count&&a.count("dcp_ajax_success",1);"function"===typeof c&&c("cf","DeepCheckPromise",{wb:1});"function"===typeof f&&f("ld","DeepCheckPromise",{wb:1})},g.error=function(b){h.hide();a&&
a.count&&a.count("dcp_ajax_error",1)},"function"===typeof c&&c("bb","DeepCheckPromise",{wb:1}),d.load(l,g)):a&&a.count&&a.count("dcp_container_not_found",1)}}});"use strict";c.when("A").register("deep-check-promise-container",function(a){return{getDcpContainer:function(c){var d=a.$;c=c.buyingOptionIndex;var b=d("[id\x3ddelivery-block-ags-dcp-container_"+c+"]");return b.length?b:d("[id\x3dags-dcp-container_"+c+"]")}}});"use strict";c.when("A").register("deep-check-promise-loader",function(a){return{load:function(c,
d){d=d||{};d.method="post";d.contentType="application/json";d.paramsFormat="json";d.withCredentials=!0;a.ajax(c,d)}}})});
/* ******** */
(function(f){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,m=l?l("AllOffersDisplayIngressAssets",""):h;m.guardFatal?m.guardFatal(f)(m,window):m.execute(function(){f(m,window)})})(function(f,h,l){f.execute("all-offers-display-ingress-init",function(){var m=h.uet,n=h.uex;"function"===typeof m&&m("bb","aod-ingress-assets-load-time",{wb:1});f.when("A","jQuery","all_offers_display_ingress_utils","all-offers-display-register-state","all_offers_display_ingress_csm_counters").execute("all_offers_display_ingress_load_AOD_assets",
function(a,d,c,g,e){function k(b){f.now().execute(function(c){c!==l||g.isMarkerOverrideRegistered()||("function"===typeof q&&q("bb","aod-main-assets-injection",{wb:1}),f.register("aodIngressClick"),f.register("aodDeclarativeEvent",function(){return b}),g.setMarkerOverrideTriggered())})}var q=h.uet;a.state("aod:assetsLoaded",{isAodAssetsLoaded:!0});e.triggerUnitCounter("aodIngressAssetsLoadCtr");a.declarative("show-all-offers-display","click keydown",function(b){if("click"===b.type||"keydown"===b.type&&
(32===b.$event.keyCode||32===b.$event.key))b.$event.preventDefault(),b.$event.stopPropagation(),b&&b.data&&b.data.ingressName&&e.incrementAndTriggerCounter(b.data.ingressName+"LoadAod"),!a.state("aod:assets2Loaded")&&c.isClickOnAODIngressSupported(b)&&(k(b),f.when("aod-load-event-handler","aodDeclarativeEvent").execute(function(c,b){b&&b.data&&(b.data.pc="dp");c.renderAodAction(b)}))});a.declarative("s-show-all-offers-display","click",function(b){b.$event.preventDefault();b.$event.stopPropagation();
!a.state("aod:assets2Loaded")&&c.isClickOnAODIngressSupported(b)&&(k(b),f.when("search-all-offers-display-util","aodDeclarativeEvent").execute(function(b,c){b.searchOnClickHandler(c)}))});a.declarative("all-offers-display-show-from-morpheus","click",function(b){b.$event.preventDefault();b.$event.stopPropagation();!a.state("aod:assets2Loaded")&&c.isClickOnAODIngressSupported(b)&&(k(b),f.when("all-offers-display-morpheus-util","aodDeclarativeEvent").execute(function(b,c){b.openAODFromMorpheus(c)}))})});
f.when("A","jQuery","all-offers-display-register-state","all_offers_display_ingress_csm_counters").execute("all-offers-display-enable-compare",function(a,d,c,g){var e=h.uet;a.state("aod:assets2Loaded")||(a=h.location.href.split("?"),1<a.length&&(a=a[1].toLowerCase().split(/[&,#]/))&&-1!==a.indexOf("aod\x3d1")&&f.now().execute(function(d){d===l&&(c.isMarkerOverrideRegistered()?g.incrementAndTriggerCounter("aodAutoLoadMarkerOverrideSetCtr"):(g.triggerUnitCounter("aodAutoLoadAssetsRequestedCtr"),"function"===
typeof e&&e("bb","aod-main-assets-injection-auto-load",{wb:1}),f.register("aodIngressClick"),c.setMarkerOverrideTriggered()))}))});f.when("A","jQuery","all_offers_display_ingress_olp_hyperlink").register("all_offers_display_ingress_utils",function(a,d,c){return{isClickOnAODIngressSupported:function(d){return c.getOlpHyperlink(d)?!0:!1}}});f.register("all_offers_display_ingress_csm_counters",function(){var a=h.ue;return{incrementAndTriggerCounter:function(d){a&&a.count&&a.count(d,(a.count(d)||0)+1)},
triggerUnitCounter:function(d){a&&a.count&&a.count(d,1)}}});f.when("all_offers_display_ingress_csm_counters").register("all_offers_display_ingress_aod_supported",function(a){return{isPropertySupported:function(d,c,g){var e=typeof d[c]===g;if(!e){var k={};d.tagName&&(k.tagName=d.tagName);d.getAttribute&&"function"===typeof d.getAttribute&&(d.getAttribute("id")&&(k.id=d.getAttribute("id")),d.getAttribute("class")&&(k.class=d.getAttribute("class")),d.getAttribute("href")&&(k.href=d.getAttribute("href")));
d="aodPropertyUnsupportedMessage, element: "+JSON.stringify(k);f.log(d+(", propertyName: "+c+", propertyType: "+g),"WARN","aodPropertyUnsupportedMessage");a.triggerUnitCounter("aodPropertyUnsupportedMessage")}return e}}});f.when("A","jQuery","all_offers_display_ingress_aod_supported").register("all_offers_display_ingress_olp_hyperlink",function(a,d,c){return{getOlpHyperlink:function(a){if(a&&a.$event&&a.$event.target){var e=a.$event.target;if("A"===e.nodeName&&e.href)return e.href;if(c.isPropertySupported(a.$event.target,
"closest","function"))return(a=e.closest("a"))?a.href:null;if(a=d(e).closest("a"))return a.attr("href")}return null}}});f.when().register("all-offers-display-register-state",function(){var a=!1;return{isMarkerOverrideRegistered:function(){return a},setMarkerOverrideTriggered:function(){a=!0}}});"use strict";f.when("A","mbc_constants","all_offers_display_ingress_csm_counters").register("mbc_atc_cart_api_ajax_controller",function(a,d,c){var g=l,e;return{mbcAtcAjaxCall:function(e){g?c.incrementAndTriggerCounter(d.MBC_ATC_CLICK_CANCELLED_CSM_METRIC):
g=a.$.ajax({url:e.url,type:e.type,data:e.data,cache:!1,headers:e.headers,xhrFields:e.xhrFields,success:e.successHandler,error:e.errorHandler,timeout:e.timeout||1E4})},updateCartCount:function(a){f.when("EWC").execute(function(c){e=c});e!==l&&"function"===typeof e.refresh?(e.refresh(),c.triggerUnitCounter(d.MBC_EWC_REFRESH_API_CSM_METRIC_SCOPE_NAME)):(f.when("nav.setCartCount").execute(function(c){c(a)}),c.triggerUnitCounter(d.MBC_NAV_API_CSM_METRIC_SCOPE_NAME))},resetAjaxHandler:function(){g=l}}});
"use strict";f.when("A","mbc_constants","mbc_cart_api_handler").execute("mbc_atc_action_handler",function(a,d,c){a.declarative("mbc-atc-action",d.MBC_WIDGET_TRIGGER_EVENTS,function(a){c.addToCart(a.data,!0)})});"use strict";f.when("A","jQuery","mbc_constants","all_offers_display_ingress_csm_counters","mbc_atc_cart_api_ajax_controller").register("mbc_cart_api_handler",function(a,d,c,f,e){function g(b){f.triggerUnitCounter(c.MBC_CART_API_ATC_CSM_FAILURE_METRIC_SCOPE_NAME);var a=b.offerIndex;d(c.MBC_OFFER_ADDED_TO_CART+
a).addClass(c.AUI_HIDE_ELEMENT_CSS_NAME);d(c.MBC_OFFER_NOT_ADDED_TO_CART+a).removeClass(c.AUI_HIDE_ELEMENT_CSS_NAME);h(b.offerIndex)}function h(a){d(c.MBC_OFFER_VIEW_CART_BUTTON+a).removeClass(c.AUI_HIDE_ELEMENT_CSS_NAME);d(c.MBC_OFFER_ATC_BUTTON_ID+a).addClass(c.AUI_HIDE_ELEMENT_CSS_NAME)}return{addToCart:function(a,k){var b=d(c.MBC_ATC_AJAX_ENDPOINT).val(),l=d(c.MBC_ATC_CSRF_TOKEN).val(),m=d(c.MBC_LANGUAGE_HEADER).val(),n={items:[{asin:a.asin,offerListingId:a.oid,quantity:a.minQty}]},p=document.querySelector('meta[name\x3d"encrypted-slate-token"]');
b={url:"https://"+b+"?ref\x3d"+a.refTag+"\x26sr\x3d"+a.sr+"\x26qid\x3d"+a.qid,type:"POST",data:JSON.stringify(n),headers:{"Accept-Language":m,Accept:c.MBC_ATC_CART_API_HEADER_ACCEPT,"x-api-csrf-token":l,"Content-Type":c.MBC_ATC_CART_API_HEADER_CONTENT_TYPE,"x-amzn-encrypted-slate-token":p&&p.content?p.content:""},xhrFields:{withCredentials:!0},timeout:1E4,successHandler:function(b){b&&b.entity&&b.entity.items&&b.entity.items[0]&&0<b.entity.items[0].quantity?(b.entity.count&&b.entity.count.entity&&
b.entity.count.entity.items?e.updateCartCount(b.entity.count.entity.items):(f.triggerUnitCounter(c.MBC_CART_API_SUCCESS_COUNT_FAILURE_CSM_METRIC),e.updateCartCount(b.entity.items[0].quantity)),f.triggerUnitCounter(c.MBC_CART_API_ATC_CSM_SUCCESS_METRIC_SCOPE_NAME),k&&d(c.MBC_OFFER_ADDED_TO_CART+a.offerIndex).removeClass(c.AUI_HIDE_ELEMENT_CSS_NAME),h(a.offerIndex)):g(a);e.resetAjaxHandler()},errorHandler:function(b){422===b.status&&(b=JSON.parse(b.responseText))&&b.entity&&b.entity.items&&b.entity.items[0]&&
(b.entity.count&&b.entity.count.entity&&b.entity.count.entity.items?e.updateCartCount(b.entity.count.entity.items):(f.triggerUnitCounter(c.MBC_CART_API_ERROR_COUNT_FAILURE_CSM_METRIC),e.updateCartCount(b.entity.items[0].quantity)));g(a);e.resetAjaxHandler()}};e.mbcAtcAjaxCall(b)}}});f.register("mbc_constants",function(){return{MBC_ATC_AJAX_ENDPOINT:"#mbc-atc-ajax-endpoint",MBC_ATC_CSRF_TOKEN:"#mbc-atc-csrf-token",MBC_LANGUAGE_HEADER:"#mbc-language",MBC_OFFER_ADDED_TO_CART:"#mbc-offer-added-to-cart-",
MBC_OFFER_NOT_ADDED_TO_CART:"#mbc-offer-not-added-to-cart-",MBC_OFFER_VIEW_CART_BUTTON:"#mbc-offer-view-cart-",MBC_OFFER_ATC_BUTTON_ID:"#mbc-buybutton-addtocart-",MBC_ATC_CLICK_CANCELLED_CSM_METRIC:"mbc-atc-click-cancelled",MBC_ATC_CART_API_HEADER_ACCEPT:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',MBC_ATC_CART_API_HEADER_CONTENT_TYPE:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',MBC_NAV_API_CSM_METRIC_SCOPE_NAME:"mbc-nav-api-called",MBC_EWC_REFRESH_API_CSM_METRIC_SCOPE_NAME:"mbc-ewc-refresh-api-called",
MBC_CART_API_SUCCESS_COUNT_FAILURE_CSM_METRIC:"mbc-cart-api-success-response-count-failure",MBC_CART_API_ERROR_COUNT_FAILURE_CSM_METRIC:"mbc-cart-api-error-response-count-failure",MBC_CART_API_ATC_CSM_SUCCESS_METRIC_SCOPE_NAME:"mbc-cart-api-atc-success",MBC_CART_API_ATC_CSM_FAILURE_METRIC_SCOPE_NAME:"mbc-cart-api-atc-failure",MBC_WIDGET_TRIGGER_EVENTS:"click",AUI_HIDE_ELEMENT_CSS_NAME:"aok-hidden"}});"function"===typeof n&&n("ld","aod-ingress-assets-load-time",{wb:1})})});
/* ******** */
(function(h){var p=window.AmazonUIPageJS||window.P,n=p._namespace||p.attributeErrors,c=n?n("DetailPageOfferDisplayFeatureCommonAssets",""):p;c.guardFatal?c.guardFatal(h)(c,window):c.execute(function(){h(c,window)})})(function(h,p,n){h.when("A","odf-metric-utils").register("progressive-display-utils",function(c,g){function m(b,f){e(".offer-display-features-expander").each(function(d,a){d=e(a);a=d.find(".a-expander-header.odf-expander-heading");if(a.is(":visible")){var c=d.attr("data-a-expander-collapsed-height");
if("undefined"===typeof c||!1===c||!0===f){var r=d.find(".offer-display-features-container").attr("displayable-row-count"),l=a.height()+4+6;d.find(".offer-display-feature-label").each(function(b,d){if(b>=parseInt(r))return!1;l+=e(d).outerHeight(!0)});d.attr("data-a-expander-collapsed-height",l);0<d.find('div[data-expanded\x3d"false"]').length&&(d.height(l),d.find(".a-expander-content-fade").remove());g.publishCountMetrics(b+"ProgressiveDisplayHeightSet")}g.publishCountMetrics(b+"ProgressiveDisplayAvailable")}else g.publishCountMetrics(b+
"ProgressiveDisplayNotAvailable")})}function h(b){e(".offer-display-features-expander").each(function(f,d){f=e(d);d=f.find(".offer-display-features-container").attr("displayable-row-count");var c=f.find(".offer-display-feature-label").not(".show-more .offer-display-feature-label").length;"undefined"!==typeof d&&c<=d?(d=f.find(".offer-display-features-show-more"),d.length&&d[0].classList.remove("a-spacing-small"),d=f.find(".a-expander-header.odf-expander-heading"),d.length&&d[0].classList.add("aok-hidden"),
f=f.find(".show-more"),0<f.length&&f.find(".offer-display-feature-label")[0].classList.add("aok-hidden"),g.publishCountMetrics(b+"ProgressiveDisplayHidden")):"undefined"!==typeof d&&a(f)})}function k(b){var f=0;e(".offer-display-dynamic-features").each(function(b,e){e.classList.remove("aok-hidden");f+=1});g.publishCountMetrics(b+"UnHidingDynamicFeatures",f)}function l(b){e(".collapsed-offer-display-features").each(function(f,d){f=e(d);var a=f.find(".offer-display-features-container").attr("displayable-row-count");
d=f.find(".offer-display-feature-label").length;"undefined"!==typeof a&&d>a&&(f.find(".offer-display-feature-label").each(function(b,d){b>=a&&e(d).parent()[0].classList.add("aok-hidden")}),g.publishCountMetrics(b+"FeaturesHiddenInCollapsedAccordion",d-a))})}function a(b){var a=b.find(".offer-display-features-container").attr("displayable-row-count");"undefined"!==typeof a&&b.find(".offer-display-feature-label").each(function(b,f){b>=a&&e(f).parent()[0].classList.add("aok-hidden")})}function q(b,a){b=
g.buildMetricPrefix(b,a);k(b);h(b);m(b,!1);l(b)}var e=c.$;return{initializeAndSetEventListeners:function(b){q(b,"pageLoad");c.on("a:pageUpdate",function(){q(b,"pageUpdate")});c.on("a:accordion:buybox-accordion:select",function(){m(g.buildMetricPrefix(b,"accordionSelect"),!1)});c.on("a:tabs:offerDisplayGroup_tabs:select",function(){m(g.buildMetricPrefix(b,"tabSelect"),!1)});c.on("a:odf:resetHeightForProgressiveFaceOut",function(){m(g.buildMetricPrefix(b,"resetHeightForProgressiveFaceOut"),!0)})},alignOverlappingElements:function(b,
a){var d=b.find(".a-expander-header.odf-expander-heading a")[0].getBoundingClientRect(),e=b.find(".offer-display-features-show-more a")[0].getBoundingClientRect();d=d.right-e.left;-10<=d&&(b.find(".offer-display-features-show-more a").css("paddingLeft",d+10),b=g.buildMetricPrefix(a),g.publishCountMetrics(b+"AlignedOverlappingElements"))},showFeaturesUnderProgressiveDisplay:function(b){var a=b.find(".offer-display-features-container").attr("displayable-row-count");"undefined"!==typeof a&&b.find(".offer-display-feature-label").each(function(b,
f){b>=a&&e(f).parent()[0].classList.remove("aok-hidden")})},hideFeaturesUnderProgressiveDisplay:a}});"use strict";h.when("A","odf-metric-utils").register("truncation-utils",function(c,g){function m(a,c){var e=l(a),b=!1;if(e.css("line-clamp")!==(3).toString()&&e.css("-webkit-line-clamp")!==(3).toString()){e=e.children("a").length?e.children("a").first():e;var f=e.text();e.text("...");var d=a.offsetHeight;for(e.text(f);a.offsetHeight>3*d;)b=!0,-1<e.text().indexOf(" ")?e.text(e.text().replace(/\W*\s(\S)*$/,
"...")):e.text(e.text().substring(0,e.text().length-6)+"...");c||e.text(f)}else b=a.scrollHeight>a.clientHeight;return b}function h(a,c,e){a.closest(".offer-display-feature-text[offer-display-attribute-name],.offer-display-feature-text[offer-display-feature-name]").find(".odf-truncation-popover").each(function(b,a){b=l(a);b.is(".offer-display-feature-text")?c?b.addClass("aok-hidden"):b.removeClass("aok-hidden"):c?(b.removeClass("aok-hidden"),g.publishCountMetrics(e+"TruncationPopoverShown")):(b.addClass("aok-hidden"),
g.publishCountMetrics(e+"TruncationPopoverNotShown"))})}function k(a,c){var e=g.buildMetricPrefix(a,c);l(".offer-display-features-container").each(function(b,a){var d=!1;l(a).find(".offer-display-feature-text-message").each(function(b,a){b=l(a);b.parent().is(".odf-truncation-popover")&&b.parent().is(".offer-display-feature-text")?(b.parent().removeClass("aok-hidden"),a=m(a,!1),h(b,a,e)):a=m(a,!0);a&&(d=!0)});d?g.publishCountMetrics(e+"ContentTruncated"):g.publishCountMetrics(e+"ContentNotTruncated")})}
var l=c.$;return{setEventsToUpdateTextVisibility:function(a){k(a,"pageLoad");if("Mobile"===a)c.on(c.constants.BROWSER_EVENTS.RESIZE,function(){k(a,"pageResize")});c.on("a:accordion:buybox-accordion:select",function(){k(a,"accordionSelect")});c.on("a:tabs:offerDisplayGroup_tabs:select",function(){k(a,"tabSelect")});c.on("a:pageUpdate",function(){k(a,"pageUpdate")})}}});"use strict";h.when("A").register("odf-metric-utils",function(c){function g(c,a){c="ODF."+c+".";a&&(c+=a+".");return c}function h(c,
a){k&&k.count&&k.count(c,a?a:1)}var n=c.$,k=p.ue;return{buildMetricPrefix:g,publishCountMetrics:h,publishFeatureLevelMetrics:function(c){n(".offer-display-features").find(".offer-display-feature-label").not(".show-more .offer-display-feature-label").each(function(a,k){a=n(k).attr("offer-display-feature-name");a=g(c)+a+".Display";h(a)})}}})});
/* ******** */
(function(b){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,c=g?g("DetailPageOfferDisplayFeatureDesktopAssets",""):f;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,f,g){b.when("A","progressive-display-utils","odf-metric-utils").execute("offer-display-features-expander",function(c,e,d){e.initializeAndSetEventListeners("Desktop");c.on("a:expander:offer-display-features-expander:toggle:expand",function(a){a=a.expander.$expander;var c=a.find(".a-expander-header.odf-expander-heading").height();
a.children(".a-row").css("paddingTop",c);e.showFeaturesUnderProgressiveDisplay(a);d.publishCountMetrics(d.buildMetricPrefix("Desktop")+"ProgressiveDisplayExpand")});c.on("a:expander:offer-display-features-expander:toggle:collapse",function(a){a=a.expander.$expander;var c=a.attr("data-a-expander-collapsed-height");a.children(".a-row").css("paddingTop","0px");a.height(c);e.hideFeaturesUnderProgressiveDisplay(a);d.publishCountMetrics(d.buildMetricPrefix("Desktop")+"ProgressiveDisplayCollapse")})});"use strict";
b.when("A","odf-metric-utils").execute("publish-feature-metrics",function(c,e){e.publishFeatureLevelMetrics("Desktop")});"use strict";b.when("A","truncation-utils","odf-metric-utils").execute("truncate-offer-display-features",function(c,e,d){var a=c.$,b=d.buildMetricPrefix("Desktop");e.setEventsToUpdateTextVisibility("Desktop");a("#offer-display-features #sellerProfileTriggerId").click(function(){d.publishCountMetrics(b+"SellerProfileTriggerIdClicked");0===a(this).closest(".offer-display-feature-text .odf-truncation-popover").length&&
d.publishCountMetrics(b+"TruncationPopoverSellerProfileTriggerIdClicked")});c.on("a:popover:visible",function(c){c.popover.$trigger.find(".odf-truncation-popover").length&&d.publishCountMetrics(b+"TruncationPopoverInteracted")})});"use strict";b.when("A","jQuery","odf-metric-utils").execute("giftingInfo",function(c,e,d){function a(){var a=e(".odf-gift-wrap input[type\x3d'checkbox']");1<a.length&&d.publishCountMetrics(d.buildMetricPrefix("Desktop")+"GiftingMultipleBOWithCheckbox");a.each(function(){e(this).change(function(){if(0<
e(this).closest("div.odf-gift-wrap").length){var a=e(this).closest("div.odf-gift-wrap").attr("data-bo-index"),b=e('.offer-display-feature-text-message.gift-wrap-message[data-bo-index\x3d"'+a+'"]'),f=e('.gift-wrap-unchecked-message[data-bo-index\x3d"'+a+'"]'),g=e('.gift-wrap-checked-message[data-bo-index\x3d"'+a+'"]');a=e('div[data-bo-index\x3d"'+a+'"] input[type\x3d"checkbox"][id\x3d"gift-wrap"]');0<b.length&&e(this).is(":checked")?(0<g.length&&(b.text(g.text()),d.publishCountMetrics(d.buildMetricPrefix("Desktop")+
"GiftingCheckedTextUpdate")),d.publishCountMetrics(d.buildMetricPrefix("Desktop")+"GiftingCheckboxChecked")):(0<f.length&&(b.text(f.text()),d.publishCountMetrics(d.buildMetricPrefix("Desktop")+"GiftingUncheckedTextUpdate")),d.publishCountMetrics(d.buildMetricPrefix("Desktop")+"GiftingCheckboxUnchecked"));if(b=0<a.length)b=e(this),b=b.is(":checked")&&!a.is(":checked")||!b.is(":checked")&&a.is(":checked");b&&a.click();c.trigger("a:odf:resetHeightForProgressiveFaceOut")}})})}a();c.on("a:pageUpdate",
function(){a()})})});
/* ******** */
