/*

 slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 Copyright (c) 2014 David Bj?rklund
 Available under the MIT license
 <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 Programatically add the following
 @name m3u8-parser @version 4.5.2 @license Apache-2.0  @name mpd-parser @version 0.15.4 @license Apache-2.0  @name @videojs/http-streaming @version 2.6.4 @license Apache-2.0  @name pkcs7 @version 1.0.4 @license Apache-2.0  @name aes-decrypter @version 3.1.2 @license Apache-2.0 */
'use strict';mix_d("VSEDistributionCards__vse-vw-dp-card:vse-vw-dp-card__aAU-2ygG","exports tslib @p/A @c/scoped-dom @c/metrics @c/logger @p/a-modal @c/aui-untrusted-ajax @c/navigation @c/aui-carousel @c/browser-window".split(" "),function(pi,pb,dn,en,Sc,fn,gn,hn,jn,kn,ln){function Cc(z){return z&&"object"===typeof z&&"default"in z?z:{"default":z}}var U=Cc(dn),tb=Cc(en),mn=Cc(fn),nn=Cc(gn),qi=Cc(hn),ri=Cc(jn),on=Cc(kn),Dc=Cc(ln),si,ti,ui,vi=function(z,G){si={schemaId:z,producerId:G,requiredNumOfFields:14}},
Wb=function(z){Mf(z,si)},Qa=function(z){Mf(z,ti)},Mf=function(z,G){Object.keys(z).length<G.requiredNumOfFields&&Sc.count("invalidNumOfFields-"+G.producerId,1);URLSearchParams&&"1"===(new URLSearchParams(window.location.search)).get("iveDebug")&&(window.DistributionMetricsDebugInfo?window.DistributionMetricsDebugInfo.push(z):window.DistributionMetricsDebugInfo=[z]);z=JSON.stringify(z).replace(/\\\\/g,"");Sc.event(JSON.parse(z),G.producerId,G.schemaId,{ssd:!1})},pn=function(z){return function(G){var w=
z.eventSource,Y=z.placementContext,Z=z.clientId,S=new Date,X=navigator.userAgent;var ha=z.stringPayload;if(ba.pageAsin)ha=ba.pageAsin;else{var pa=window.location.href.match(/\/dp\/([A-Z0-9]{10})|\/gp\/product\/([A-Z0-9]{10})|\/gp\/aw\/d\/([A-Z0-9]{10})/);ha=pa&&(pa[1]||pa[2]||pa[3])?pa[1]||pa[2]||pa[3]:ha}return U["default"].$.extend({eventSource:w,placementContext:Y,clientId:Z,timestamp:S,userAgentData:X,titleSessionId:"0",videoAsin:"",pageAsin:ha,videoAsinList:z.videoAsinList||"",rankingStrategy:z.rankingStrategy||
"",creativeId:z.creativeId,stringPayload:z.stringPayload||"",customerId:z.customerId||""},G)}},qn=function(){return function(z,G,w,Y){var Z=this;this.onIntersectionObserved=function(S,X){S.forEach(function(ha){if(X){var pa=ha.target;if(ha.isIntersecting)ha=setTimeout(function(){var xa=Z.childElems.indexOf(pa);Z.callback(xa);Z.viewTimeoutMap.delete(pa)},1E3),Z.viewTimeoutMap.set(pa,ha);else if(ha=Z.viewTimeoutMap.get(pa))clearTimeout(ha),Z.viewTimeoutMap.delete(pa)}else ha.isIntersecting&&(ha=Z.childElems.indexOf(ha.target),
Z.callback(ha))})};void 0===z&&(z=null);this.callback=w;this.childElems=Array.from(document.querySelectorAll(G)).filter(function(S){return null!==S.offsetParent});this.optionsForIntersection={root:z,rootMargin:"0px",threshold:.5};this.viewTimeoutMap=new Map;this.intersectionObserver=new IntersectionObserver(function(S){return Z.onIntersectionObserved(S,Y)},this.optionsForIntersection);this.childElems.forEach(function(S){Z.intersectionObserver.observe(S)})}}(),hd=function(z){return U["default"].objectIsEmpty(z)||
""===z},ya;(function(z){z[z.loadstart=0]="loadstart";z[z.ended=1]="ended";z[z.error=2]="error";z[z.invokeplay=3]="invokeplay";z[z.pause=4]="pause";z[z.playing=5]="playing";z[z.rebuffering=6]="rebuffering";z[z.seeked=7]="seeked";z[z.seeking=8]="seeking";z[z.timeupdate=9]="timeupdate";z[z.requestmute=10]="requestmute";z[z.requestunmute=11]="requestunmute";z[z.requestpause=12]="requestpause";z[z.requestplay=13]="requestplay";z[z.click=14]="click"})(ya||(ya={}));var wi;(function(z){z.ATVPDKIKX0DER="https://unagi-na.amazon.com";
z.A21TJRUUN4KGV="https://unagi-eu.amazon.com"})(wi||(wi={}));var xi={accepts:"*/*",contentType:"application/json;charset=UTF-8",timeout:15E3},ve;(function(z){z.GET="GET";z.POST="POST"})(ve||(ve={}));var Nf=function(z,G,w,Y,Z,S){void 0===Z&&(Z=3);void 0===S&&(S=ve.POST);Z--;(S===ve.POST?qi["default"].post(z,xi,G):qi["default"].get(z,xi)).then(function(X){w(X)}).catch(function(X){0<Z?Nf(z,G,w,Y,Z,S):(0===X.statusCode&&Xb("Request has failed with unknown status code. Payload: "+JSON.stringify(G),"ERROR"),
Y(X))})},ba={pageType:"",clientPrefix:"",deviceType:"",placement:"",metricsPlacement:"",cardId:"",creativeId:"",requester:"",buildCsmPayload:function(z){},clientName:"",isIvxOpen:!1,enableWidgetMetricsAfterOneSecond:!1,isDesktopIngressCXUpdated:!1,showSocialShare:!1,isSingleVideoPresent:!1,isClosedCaptionsEnabled:!0,playerInstance:void 0,isHeroPopoverVisible:!1,customerId:"",hideSponsoredProducts:!1,pageAsin:""},yi=function(z,G,w,Y){var Z,S,X,ha,pa,xa;void 0===w&&(w="vse_cards");void 0===Y&&(Y="");
ba.deviceType=G;ba.pageType=z.client||"Gateway";ba.clientName=null!==(Z=z.clientName)&&void 0!==Z?Z:"";G=ba;(Z=null===(S=z.clientPrefix)||void 0===S?void 0:S.toLowerCase())||(S=ba,Z="IVE_VFTP"===S.clientName||"VFTPHero"===S.clientName?S.clientName.toLowerCase():S.pageType.toLowerCase());G.clientPrefix=Z;ba.isDesktopIngressCXUpdated="true"===z.desktopIngressCxUpdated;ba.placement=(""!==ba.clientName?ba.clientName:ba.pageType)+"Card-"+ba.deviceType;S=ba;G=ba.placement;Y=Y&&0<Y.length?Y+"Card-"+ba.deviceType:
"";S.metricsPlacement=(U["default"].capabilities.mobile?U["default"].capabilities.isAmazonApp?"mobile_app":"mobile_web":U["default"].capabilities.tablet?U["default"].capabilities.isAmazonApp?"tablet_app":"tablet_web":"desktop_web")+"."+(Y&&0<Y.length?Y:G)+"."+w;ba.cardId=null!==(X=z.cardId)&&void 0!==X?X:"";ba.creativeId=null!==(ha=z.creativeId)&&void 0!==ha?ha:"";ba.requester=z.requester||"VSEWidgetCards";ba.enableWidgetMetricsAfterOneSecond="T1"===z.enableWidgetMetricsAfterOneSecond;ba.customerId=
null!==(pa=z.customerId)&&void 0!==pa?pa:"";ba.hideSponsoredProducts="true"===z.hideSponsoredProducts;ba.pageAsin=null!==(xa=z.pageAsin)&&void 0!==xa?xa:""},Ya=function(z,G){void 0===G&&(G=1);try{Sc.count("vse:csm:cards:"+ba.clientPrefix+":"+z,G)}catch(w){Xb("failed to post CSM metric","ERROR")}},Tc=function(z,G){void 0===G&&(G=1);Ya(z+":"+ba.deviceType,G)},Xb=function(z,G){mn["default"].log("VSEWidgetCards: "+z+". Client prefix: "+ba.clientPrefix+", Page type: "+ba.pageType,G,"VSEDistributionCards")},
zi=function(z,G){ba.buildCsmPayload=pn({placementContext:ba.metricsPlacement,clientId:"VSE",eventSource:null!==z&&void 0!==z?z:"VSEWidgetCards",stringPayload:null!==G&&void 0!==G?G:"",creativeId:ba.creativeId,customerId:ba.customerId})},we,Ai=function(z,G,w){try{var Y=U["default"].$("."+ba.cardId);we&&U["default"].off(we.event,we.callback);if(Y.length){var Z=!1,S=G.map(function(Aa){return Aa.contentId}).join(","),X=G.filter(function(Aa){return""!==Aa.metadata.rankingStrategy}).map(function(Aa){return Aa.metadata.rankingStrategy}).join(","),
ha=ba.buildCsmPayload({eventName:ba.clientPrefix+":cardWidgetRendered",intPayload:1,videoAsinList:S,rankingStrategy:X});Wb(ha);Ya("cardWidgetRendered",1);Y=function(Aa){rn(G,Aa)};var pa=function(){for(var Aa=w.carouselItemClassName,ia=0;ia<G.length;ia++)if(!G[ia].impressionRecorded){var Ca=U["default"].$("."+ba.cardId+" ."+Aa+":nth-child("+(ia+1)+")");if(U["default"].onScreen(Ca,0)){var La=ba.buildCsmPayload({eventName:ba.clientPrefix+":thumbnailImpression",intPayload:ia,videoAsin:G[ia].contentId,
rankingStrategy:G[ia].metadata.rankingStrategy,titleSessionId:Of()});Wb(La);sn(Ca,G[ia]);G[ia].impressionRecorded=!0}else break}},xa=function(){if(Z)U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,xa);else{var Aa=ba.buildCsmPayload({eventName:ba.clientPrefix+":cardWidgetScrolledInView",intPayload:1,videoAsinList:S,rankingStrategy:X}),ia=U["default"].$("."+ba.cardId+" ."+w.carouselItemClassName).first(),Ca=function(){if(!Z){Wb(Aa);var Ma=U["default"].now()-z;Ya("cardWidgetScrolledInViewTime",
Ma);Tc("cardWidgetScrolledInView")}Z=!0;pa()};if(ba.enableWidgetMetricsAfterOneSecond){var La,gc=function(){ia&&U["default"].onScreen(ia,0)?La||(La=setTimeout(function(){ia&&U["default"].onScreen(ia,0)&&(Ca(),U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,gc))},1E3)):La&&(clearTimeout(La),La=null)};gc()}else ia&&U["default"].onScreen(ia,0)&&Ca()}};xa();we=U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,xa);U["default"].on("vse:"+ba.clientPrefix+":searchform:focus",function(){var Aa=
ba.buildCsmPayload({eventName:ba.clientPrefix+":serchFormFocus",intPayload:1,videoAsinList:S,rankingStrategy:X});Wb(Aa)});w.widgetMetricsHandler(pa,function(Aa){var ia=ba.buildCsmPayload({eventName:ba.clientPrefix+":"+Aa+":paginationButtonClicked",intPayload:1});Ya(Aa+":paginationButtonClicked",1);Wb(ia)});window.IntersectionObserver&&window.IntersectionObserverEntry&&new qn(null,"."+w.carouselItemClassName,Y,ba.enableWidgetMetricsAfterOneSecond)}}catch(Aa){Xb("Error occurred while emitting widget metrics "+
Aa,"ERROR"),Ya("widgetMetricsEmissionError")}},tn=function(z){document.addEventListener("visibilitychange",function(G){return z("visible"===document.visibilityState)},!1)},sn=function(z,G){try{var w=z.find("[data-pfoasin!=''][data-pfoasin]");U["default"].each(w,function(Y,Z){Y=Y.getAttribute("data-pfoasin");Z=ba.buildCsmPayload({eventName:ba.clientPrefix+":productElementImpression",intPayload:Z,videoAsin:G.contentId,stringPayload:Y});Wb(Z)})}catch(Y){Xb("Unable to log pfo render metric "+G,"WARN")}},
rn=function(z,G){z=ba.buildCsmPayload({eventName:ba.clientPrefix+":videoThumbnailImpression",intPayload:ba.isDesktopIngressCXUpdated?Math.max(0,z.findIndex(function(w){var Y,Z;return w.contentId===(null===(Z=null===(Y=ba.playerInstance)||void 0===Y?void 0:Y.getActiveAsset())||void 0===Z?void 0:Z.contentId)})):G,videoAsin:z[G].contentId,rankingStrategy:z[G].metadata.rankingStrategy,titleSessionId:Of()});Wb(z)},Of=function(){return ba.playerInstance?ba.playerInstance.getTitleSessionId():"0"},un=function(z,
G){var w=[];z=z.split(",");0<z.length&&z.forEach(function(Y){Y=Y.split(":");1<Y.length&&w.push({name:Y[0],assignment:Y[1],ignoreForG2S2Key:G})});return w},Bi=function(z,G){z=U["default"].$("."+z+" "+G);if(!z.length)return"";z=z[0].firstElementChild;if(!z)return"";z=z.getAttribute("data-a-popover")||"";return JSON.parse(z).name||""},Pf=function(z){return tb["default"].cardRoot.querySelector(""+z)},vn=function(z){var G=document.querySelectorAll("."+z.thumbnailUpdates+" ."+z.vseVideoTitleText),w=document.querySelectorAll("."+
z.thumbnailUpdates+" ."+z.vseVideoCreatorName);if(0!==G.length){var Y=function(ha){return parseFloat(window.getComputedStyle(ha).fontSize)},Z=Array.from(G).map(Y),S=function(){G.forEach(function(ha,pa){var xa=Y(ha);xa!==Z[pa]&&(Z[pa]=xa,pa=w[pa],15<xa?(ha.style.webkitLineClamp="1",ha.style.lineHeight="normal",pa.style.lineHeight="normal"):(ha.style.webkitLineClamp="2",ha.style.lineHeight="1.31em",pa.style.lineHeight="unset"))})},X=function(){S();requestAnimationFrame(X)};X()}},wn=function(z,G){z=
"/gp/mobile/tag/?ref=vse_cards_ingress"+z+G.replace("/?_encoding=UTF8","");Nf(z,{},function(){},function(){})},Ci=function(z,G,w,Y,Z,S){void 0===S&&(S=!0);var X=z.map(function(ha){delete ha.htmlEl;return ha});G||(G=xe(z[0],{}));z=[];w.weblabContext&&(z=un(w.weblabContext,!0));Nf(w.nilgiriEndpoint,{requester:ba.requester,clientPrefix:ba.clientPrefix,page:ba.pageType,placement:ba.placement,device:ba.deviceType,metadata:{id:"vse-video-widget-card-"+ba.clientPrefix,celQueryStringParam:w.celQueryStringParam,
requestHasVideoData:"true",hideSponsoredProducts:ba.hideSponsoredProducts},videoDataList:S?X:void 0,video:{contentID:G.contentId,contentIDType:"VIDEO_ID",videoURL:G.videoUrl,imageURL:G.imageUrl,vendorCode:G.vendorCode,vendorTrackingId:G.vendorTrackingId,videoReferenceId:G.videoReferenceId,videoTitle:G.title,altText:G.altText,aciContentId:G.aciContentId,videoAge:G.videoAge},marketplaceID:w.marketplaceId,locale:w.locale,product:{contentID:G.productAsin,contentIDType:"ASIN",parentContentID:G.parentAsin,
parentContentIDType:"ASIN"},creativeId:ba.creativeId,weblabContext:z},Y,Z)},xe=function(z,G){var w=z.productAsin;w||U["default"].objectIsEmpty(z.metadata.relatedProductsAsins)||(w=z.metadata.relatedProductsAsins.split(",")[0]);var Y=z.contentId,Z=z.metadata.title,S=z.metadata.altText,X=z.metadata.vendorName,ha=z.metadata.vendorCode,pa=z.metadata.entityId,xa=z.metadata.entityType,Aa=z.metadata.creatorType,ia=z.metadata.disclosureText,Ca=z.metadata.disclosureLink,La=z.metadata.disclosureLabel,gc=z.metadata.fullReviewLink,
Ma=z.metadata.title,qc=z.metadata.videoURL,Na=z.metadata.formattedDuration,ub=z.metadata.videoImageUrl,Za=z.parentAsin,rc="vse-cards-ingress"+z.index,ye=z.metadata.relatedProductsAsins,ze=z.metadata.vendorTrackingId,Yb=z.metadata.referenceId,Ae=z.index,Be=z.metadata.videoAge,Db=z.metadata.closedCaptions,Ec=[];if(Db&&(Db=Db.split(","),0===Db.length%2))for(var Zb=0;Zb<Db.length;Zb+=2)void 0!==Db[Zb+1]&&Ec.push({locale:Db[Zb],url:Db[Zb+1]});Db=z.metadata.videoDetailPageLink;Zb=z.impressionRecorded;var Ce=
z.lastPlayingTimestamp,Kd=z.htmlEl,De=z.metadata.rankingStrategy,Ld=z.metadata.aciContentId,Ee=z.metadata.videoMimeType,Fc=z.metadata.profileLink,Md=z.metadata.profileImageUrl,Nd=""===z.metadata.source?"VSE":z.metadata.source,Fe=z.metadata.highlightedAsin,Od=z.metadata.status,id=z.metadata.orientation,wb=z.metadata.channelId,fb=z.metadata.carouselItems,sc=[];fb&&(sc=JSON.parse(fb));return{contentId:Y,title:Z,altText:S,vendorName:X,vendorCode:ha,entityId:pa,entityType:xa,creatorType:Aa,disclosureText:ia,
disclosureLink:Ca,disclosureLabel:La,referenceUrl:gc,referenceLinkTitle:Ma,videoUrl:qc,duration:Na,imageUrl:ub,videoVoteContainer:{},productAsin:w,parentAsin:Za,refTag:rc,relatedProducts:ye,vendorTrackingId:ze,videoReferenceId:Yb,index:Ae,$el:G,videoAge:Be,closedCaptions:Ec,videoDetailPageLink:Db,impressionRecorded:Zb,lastPlayingTimestamp:Ce,htmlEl:Kd,rankingStrategy:De,aciContentId:Ld,videoMimeType:Ee,profileLink:Fc,profileImageUrl:Md,source:Nd,highlightedAsin:Fe,status:Od,orientation:id,channelId:wb,
carouselItems:sc,jumppointOffsetMs:z.metadata.jumppointOffsetMs,jumppointAsin:z.metadata.jumppointAsin,relatedCarouselItems:z.metadata.relatedCarouselItems}},Qf=function(z,G,w){var Y=[];[].forEach.call(z,function(Z,S){var X=Z.dataset.asin,ha=Z.dataset;X&&(Z={contentId:X,productAsin:ha.productAsin||"",parentAsin:ha.parentAsin||"",metadata:Di(ha,X,G),impressionRecorded:!1,lastPlayingTimestamp:0,index:S,htmlEl:Z},Y.push(Z))});return Y},Ei=function(z,G,w){var Y=[];z.forEach(function(Z,S){var X=Z.asin;
X&&(Z={contentId:X,productAsin:Z.productAsin||"",parentAsin:Z.parentAsin||"",metadata:Di(Z,X,G),impressionRecorded:!1,lastPlayingTimestamp:0,index:S,htmlEl:Z},Y.push(Z))});return Y},Di=function(z,G,w){return{videoImageUrl:z.videoImageUrlUnchanged||z.videoImageUrl||"",videoURL:z.videoUrl||z.videoURL||"",title:z.title||"",altText:z.altText||"",formattedDuration:z.formattedDuration||"",vendorName:z.vendorName||"",vendorCode:z.vendorCode||"",referenceId:z.referenceId||"",fullReviewLink:z.referenceUrl||
z.fullReviewLink||"",videoDetailPageLink:z.videoDetailPageLink||"vdp/"+G+w.celQueryStringParam,asin:z.asin||"",vendorTrackingId:z.vendorTrackingId||"",relatedProductsAsins:z.relatedProductsAsins||"",videoAge:z.videoAge||"",closedCaptions:z.closedCaptions||"",creatorType:z.creatorType||"",publicName:z.publicName||"",profileLink:z.profileLink||"",profileImageUrl:z.profileImageUrl||"",rankingStrategy:z.rankingStrategy||"",aciContentId:z.csaCItemId||z.aciContentId||"",disclosureText:z.disclosureText||
"",disclosureLabel:z.disclosureLabel||"",disclosureLink:z.disclosureLink||"",videoMimeType:z.videoMimeType||"",entityId:z.entityId||"",entityType:z.entityType||"",videoImageHeight:z.videoImageHeight||"",videoImageWidth:z.videoImageWidth||"",videoImagePhysicalId:z.videoImagePhysicalId||"",videoImageExtension:z.videoImageExtension||"",groupType:z.groupType||"",source:z.source||"VSE",highlightedAsin:z.highlightedAsin||"",status:z.status||"",orientation:z.orientation||"",channelId:z.channelId||"",carouselItems:z.carouselItems||
"",isHotspotsEligible:z.isHotspotsEligible||!1,jumppointOffsetMs:z.jumppointOffsetMs,jumppointAsin:z.jumppointAsin,relatedCarouselItems:z.relatedCarouselItems||""}},Fi=function(z,G){void 0===G&&(G=!1);var w=Dc["default"].innerHeight*(400<=z.height()?.1:.2),Y=Dc["default"].innerHeight-z.height()-w;return G?Rf(z):Dc["default"].scrollY+Y>=z.offset().top&&Dc["default"].scrollY+w<=z.offset().top},Rf=function(z){var G;try{var w=z[0].getBoundingClientRect();if(0>=w.width||0>=w.height)return!1;var Y=void 0,
Z=(null===(G=document.getElementById("btf-sub-nav-desktop-tabs"))||void 0===G?void 0:G.offsetHeight)||0;Y=0<w.top?Math.min(z.outerHeight(),Dc["default"].innerHeight-Z-w.top):Math.min(w.bottom-Z,Dc["default"].innerHeight-Z);Y=Math.max(0,Y);return Y>=.5*z.outerHeight()}catch(S){return!1}},Ge=function(){return Dc["default"].innerWidth>Dc["default"].innerHeight},Kb,He=!1,Pd,Sf,tc,jb,jd,Tf=!1,Uf,Qd,kd,uc,hc,$b,Vf,ic,Ie=!1,Wf=!0,Gi=!1,Xf,Yf=0,Je,Ke,Hi,Ii=null,Zf=!1,Cn=function(z,G,w,Y,Z,S,X,ha){void 0===
Z&&(Z=!1);void 0===S&&(S=!0);void 0===X&&(X=!1);void 0===ha&&(ha=null);return pb.__awaiter(void 0,void 0,void 0,function(){var pa,xa,Aa,ia;return pb.__generator(this,function(Ca){try{if(jd=w,jb=G,tc=z,Ie=Z,Wf=S,Gi=X,pa=U["default"].now(),vi("vse.VSECardsEvents.9","vsemetrics_widgetcards"),0<U["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview").length?(Ke=U["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview"),U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,
$f),$f()):0<U["default"].$(".vse-image-thumbnail-wrapper").length&&(U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,ag),ag()),vn(jb),(xa=tb["default"].cardRoot.getElementsByClassName(jb.vseWidgetPageState))&&xa[0]&&xa[0].dataset){hc=xa[0].dataset;Zf="true"===hc.lazyLoadComponentBuilderCall;yi(hc,tc?"Mobile":"Desktop",Y.widgetMetricsSuffix,Y.overrideMetricsPlacement);ba.isDesktopIngressCXUpdated?(Je=ha,U["default"].$("."+ba.cardId+" .a-fixed-right-grid-inner").addClass(jb.vseFlex),Hi=
tb["default"].cardRoot.querySelector(".video-items-metadata"),(Aa=Hi.getAttribute("data-video-items"))&&(Vf=JSON.parse(Aa)),Kb=Ei(Vf,hc,jb),U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,bg),bg()):($b=tb["default"].cardRoot.getElementsByClassName(jb.vseVideoDataItem),Kb=Qf($b,hc,jb));if(!$b&&!Vf)return Ya("noCardsIngressDom"),ld(),[2];Uf="vse-component-feed-carousel-"+ba.cardId;kd="vse-widget-popover-"+ba.cardId;if(!U["default"].capabilities.video)return Ya("videoNotSupported"),[2];
Tc("cardWidgetRendered");zi(void 0,Kb[0].productAsin?Kb[0].productAsin:"");if(tc||"Detail"===ba.pageType)Ai(pa,Kb,Y);else{U["default"].$("."+ba.cardId+" [class*=vsePlaceholder] .a-fixed-right-grid-inner").addClass(jb.vseNoRightPadding);Ca=pa;try{Ji(Ca,Y,"vse-carousel-items-added-"+Uf),Ji(Ca,Y,"vse:cards:"+ba.clientPrefix+":quad:ready")}catch(La){cg(La)}U["default"].trigger("vse-card-ready-"+Uf)}(ia=U["default"].capabilities.isAmazonApp&&U["default"].capabilities.android&&(U["default"].capabilities.androidVersion+
"").startsWith("8"))?(Ya("useMshopAutoplayFallback"),ld()):(xn(),yn(),zn(),An(),Bn());"gatewayquad"===ba.clientPrefix&&U["default"].trigger("vse:cards:"+ba.clientPrefix+":quad:ready");Ie&&!Zf&&(dg(null,U["default"].now()),ba.isDesktopIngressCXUpdated||eg())}else Ya("pageStateNotFound"),ld()}catch(La){Xb("fatal exception has occurred. Exception details: "+La,"FATAL"),Ya("widgetFatalException"),ld()}return[2]})})},bg=function(){U["default"].onScreen(U["default"].$("."+ba.cardId+" .vse-hero-widget"),
100)&&(Dn(),U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,bg))},En=function(){U["default"].on(ba.clientPrefix+":vse:metadata:registered",function(){ic=xe(Kb[0],null);U["default"].trigger("vse:"+ba.clientPrefix+":page:lightBoxOpened",{assetSpec:ic,showHeroExperience:!0,player:Je,templateId:"vftphero",lightBoxId:"vftphero"})})},Ji=function(z,G,w){U["default"].off(w);U["default"].on(w,function(){He||(He=!0,Kb=Qf($b,hc),Ai(z,Kb,G))})},yn=function(z){void 0===z&&(z="click touch");U["default"].declarative("vse-widget-carousel-see-more-"+
ba.cardId,z,function(){return Ki()});U["default"].declarative("vse-widget-carousel-custom-action-"+ba.cardId,z,function(G){var w;(G=null===(w=G.data)||void 0===w?void 0:w.link)?(Li("widgetCustomActionClicked"),ri["default"].setLocation(G)):Ki()})},Ki=function(){tc&&(Tf=!0);U["default"].$("."+ba.cardId+" .vse-cards-ingress-carousel").find(".vse-carousel-item").first().click();Li("seeMoreLinkClicked")},Li=function(z){Tc(z);z=ba.buildCsmPayload({eventName:ba.clientPrefix+":"+z,intPayload:1});Wb(z)},
zn=function(){var z=0;U["default"].off("a:popover:afterShow:vse-widget-popover-"+ba.cardId);U["default"].on("a:popover:afterShow:vse-widget-popover-"+ba.cardId,function(G){try{if(U["default"].$(G.popover.$popover).addClass(U["default"].$("#"+kd).data("cssClass")),z++,Sf=!0,1===z){U["default"].$(G.popover.$popover).addClass(jb.vseVerticalLightbox);var w=U["default"].now();uc&&uc.refresh();Ie&&Pd?(U["default"].$(G.popover.$popover).addClass(jb.vseRemoveAbsolute),fg()):(dg(G.popover.$popover,w),eg())}else fg()}catch(Y){cg(Y)}})},
dg=function(z,G){U["default"].on(ba.clientPrefix+":vse:player:registered",function(){U["default"].$("#"+kd+" [class*=_vseWidgetLbVideoBlock_]").first().animate({opacity:1});if(Sf){fg();U["default"].$(z).addClass(jb.vseRemoveAbsolute);var w=U["default"].now()-G;Tc("cardWidgetPopoverContentWaitTime",w)}});U["default"].on("vse:cards:"+ba.clientPrefix+":componentbuilder:failed",function(){Mi();uc?uc.hide():U["default"].trigger("vse:cards:"+ba.cardId+":secondary:view:close");Ie||U["default"].delay(function(){ri["default"].setLocation(ic.videoDetailPageLink)},
500)})},fg=function(){Tf&&U["default"].trigger("vse:"+ba.clientPrefix+":page:watchAllClicked");Tf=!1;var z={assetSpec:ic,lightBoxId:""+kd};!0===Gi&&Ii!==ic.contentId&&(Ii=ic.contentId,z.lazyLoadProductAsin=ic.productAsin);U["default"].trigger("vse:"+ba.clientPrefix+":page:lightBoxOpened",z);z=U["default"].$("#"+kd+" [class*=_vseWidgetLbVideoBlock_]");0<z.length&&(Qd=z.get(0),null!=jd&&(Fn(Qd),jd.elect(Qd)))},An=function(){U["default"].off("a:popover:beforeHide:vse-widget-popover-"+ba.cardId);U["default"].on("a:popover:beforeHide:vse-widget-popover-"+
ba.cardId,function(){Sf=!1;Pd?(U["default"].trigger("vse:"+ba.clientPrefix+":page:lightBoxClosed"),null!=jd&&Qd&&jd.unsubscribe(Qd)):Tc("cardWidgetLBClosedBeforeAjax")})},eg=function(){Ci(Kb,ic,hc,function(z){Pd=!0;Ya("preloadSuccess");U["default"].$("#"+kd+" [class*=_vseWidgetLbVideoBlock_]").html(z.responseBody)},function(z){Ni(z)},Wf)},Dn=function(){Ci(Kb,ic,hc,function(z){Pd=!0;Ya("preloadSuccess");var G=tb["default"].cardRoot.querySelector("#vse-placeholder-related-videos");G.classList.remove(jb.skeletalVideo);
for(ba.isSingleVideoPresent&&G.classList.add("aok-hidden");G.firstChild;)G.removeChild(G.firstChild);U["default"].$("."+ba.cardId+" ."+jb.vseWidgetPageState).html(z.responseBody);En();gg("vftphero-vse-related-videos","vse-placeholder-related-videos");gg("vse-vftphero-feedback-container","vse-overlay-features");gg("ive-vftphero-action-share","vse-overlay-features");Oi(Bi(ba.cardId,"#ive-vftphero-action-share"));Oi(Bi(ba.cardId,".vse-fb-trigger-container"));Gn()},function(z){var G,w,Y;null===(G=Pf("#vse-placeholder-related-videos"))||
void 0===G?void 0:G.classList.add("aok-hidden");null===(w=Pf("#vse-placeholder-related-products-config"))||void 0===w?void 0:w.classList.add("aok-hidden");ba.isSingleVideoPresent||(G=tb["default"].cardRoot.querySelector("."+jb.iveHeroRowGrid),null===G||void 0===G?void 0:G.style.setProperty("margin-right","-336px"));null===(Y=Pf(".vse-hero-widget"))||void 0===Y?void 0:Y.style.setProperty("height","415px");Ni(z)},Wf)},Oi=function(z){U["default"].off("a:popover:show:"+z);U["default"].on("a:popover:show:"+
z,function(G){ba.isHeroPopoverVisible=!0;U["default"].$("."+ba.cardId+" #ive-hero-video-player").addClass("ppvr-vsbl")});U["default"].off("a:popover:hide:"+z);U["default"].on("a:popover:hide:"+z,function(){ba.isHeroPopoverVisible=!1;U["default"].$("."+ba.cardId+" #ive-hero-video-player").removeClass("ppvr-vsbl")});U["default"].off("a:popover:invisible:"+z);U["default"].on("a:popover:invisible:"+z,function(){null!=Je&&Je.resume()})},Gn=function(){U["default"].$("."+ba.cardId).delegate("#ive-hero-video-player",
"mouseenter",function(){Ya("hoverIntoPlayer")});U["default"].$("."+ba.cardId).delegate("#ive-hero-video-player","mouseleave",function(){ba.showSocialShare||Ya("hoverOutOfThePlayer")})},gg=function(z,G){G=tb["default"].cardRoot.querySelector("#"+G);z=U["default"].$("."+ba.cardId+" #"+z);z.length&&G&&G.prepend(z[0])},Ni=function(z){U["default"].trigger("vse:cards:"+ba.clientPrefix+":componentbuilder:failed");Tc("preloadFailed");Ya("preloadFailed:"+z.statusCode);ld()},ld=function(){var z=tb["default"].cardRoot.getElementsByClassName(jb.vseSeeMoreLink)[0];
z&&z.classList&&z.classList.add("aok-hidden")},xn=function(){try{$b&&0<$b.length&&[].forEach.call($b,function(z){z.children[0].removeAttribute("target")}),Pi(),U["default"].$("."+ba.cardId+" .vse-cards-ingress-carousel").delegate(".vse-carousel-item","click",function(z){He||(Kb=Qf($b,hc),He=!0);if(!U["default"].$(z.target).closest("."+jb.vseProfilePlaceholder).length){z.preventDefault();var G=U["default"].$(z.currentTarget);z=G.closest("li").index();var w=Kb[z];w.metadata&&(ic=xe(w,G),G=ba.buildCsmPayload({eventName:ba.clientPrefix+
":cardWidgetClicked",intPayload:1,videoAsin:w.contentId,rankingStrategy:w.metadata.rankingStrategy}),Tc("cardWidgetClicked"),Wb(G),wn(z,hc.celQueryStringParam),tc?U["default"].trigger("vse:cards:"+ba.cardId+":secondary:view:open"):(uc=nn["default"].get(U["default"].$("."+ba.cardId+" #vse-widget-popover-trigger")),U["default"].objectIsEmpty(uc)?Ya("lbNotFoundDesktop"):uc.show()))}})}catch(z){cg(z)}},cg=function(z){Xb("fatal exception has occurred in LB. Exception details: "+z,"FATAL");Ya("lightboxOpenFatalException");
ld();Mi();uc&&uc.hide()},Mi=function(){Pi();$b&&0<$b.length&&[].forEach.call($b,function(z,G){z.children&&z.children[0]&&z.children[0].setAttribute("target",Kb[G].metadata.videoDetailPageLink)})},Pi=function(){U["default"].$("."+ba.cardId+" .vse-cards-ingress-carousel").undelegate(".vse-carousel-item","click")},Fn=function(z){jd.subscribe(z,function(G){},{buffer:0})},Bn=function(){U["default"].on(ba.clientPrefix+"-leave-pip",function(z){U["default"].$("."+ba.cardId+" .vse-cards-ingress-carousel .vse-carousel-item")[z.index].click()})},
Qi=function(z,G){Xf[G]||(z=ba.buildCsmPayload({eventName:ba.clientPrefix+":thumbnailPreviewPlaybackStart",intPayload:G,videoAsin:z}),void 0!==z&&null!==z&&(Wb(z),Xf[G]=!0))},ag=function(){U["default"].onScreen(U["default"].$(".vse-image-thumbnail-wrapper"),100)&&(U["default"].loadImageManually(".vse-img-manual-load:not(img)"),U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,ag))},$f=function(){U["default"].onScreen(U["default"].$(".vse-video-thumbnail-wrapper"),100)&&(U["default"].loadImageManually(".vse-img-manual-load:not(img)"),
Zf&&!Pd&&(dg(null,U["default"].now()),eg()),U["default"].each(Ke,function(z){var G=z.getAttribute("data-src");var w=void 0;void 0===w&&(w=1);w=3*(w-1);G=G.split(",")[w];z.src=G;z.addEventListener("ended",Hn)}),U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,$f),Xf=Array(Ke.length).fill(!1),tc||In(),Jn(),U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,Rd),Rd())},In=function(){U["default"].$(".vse-video-widget-container").delegate("."+jb.vseVideoDataItem,"mouseenter",function(){Le();
var z=U["default"].$(this).find("video"),G=U["default"].$(this).find(".vse-video-thumbnail-img");Ri(G);0<z.length&&(z[0].play(),G=U["default"].$(this).closest("li").index(),Qi(z[0].getAttribute("data-video-asin"),G),Yf=0)});U["default"].$(".vse-video-widget-container").delegate("."+jb.vseVideoDataItem,"mouseleave",function(){var z=U["default"].$(this).find(".vse-video-thumbnail-img");hg(z);z=U["default"].$(this).find("video");0<z.length&&ig(z[0])})},hg=function(z){z&&0<z.length&&U["default"].fadeIn(z,
300,"ease-in")},Ri=function(z){z&&0<z.length&&U["default"].fadeOut(z,300,"ease-in")},Si=function(z){z=U["default"].$(".vse-video-widget-container ol li").eq(z);if(!z||0!=z.length)return U["default"].$(z).find("video")[0]},Ti=function(z){z=U["default"].$(".vse-video-widget-container ol li").eq(z);if(!z||0!=z.length)return U["default"].$(z).find(".vse-video-thumbnail-img")},kg=function(z){var G=Si(z);if(G){var w=Ti(z);Ri(w);G.play().then().catch(function(){U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,
Rd);U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,jg);Le(!0)});Yf=z;Qi(G.getAttribute("data-video-asin"),z)}},Rd=function(){var z=U["default"].$(".vse-video-widget-container");if(0<z.length&&(!Ge()&&U["default"].onScreen(z)&&Fi(z)||Ge()&&U["default"].onScreen(z))){U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,Rd);U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,jg);z=tc?Ui():Yf;var G=Si(z);if(!G||G.paused)Le(),kg(z)}},jg=function(){var z=U["default"].$(".vse-video-widget-container");
0!=z.length&&(!Fi(z)&&!Ge()||Ge()&&!U["default"].onScreen(z))&&(U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,Rd),U["default"].off(U["default"].constants.BROWSER_EVENTS.SCROLL,jg))},Le=function(z){void 0===z&&(z=!1);U["default"].each(Ke,function(G){if(0!==G.currentTime||z){var w=U["default"].$(G).closest(".vse-video-thumbnail-wrapper").find(".vse-video-thumbnail-img");hg(w);ig(G)}})},ig=function(z){setTimeout(function(){z.currentTime=0;z.load()},300)},Ui=function(){var z=0;try{var G=
U["default"].$(".vse-video-widget-container"),w=parseInt(G.find("li").css("width").replace("px",""))+8,Y=G.find("ol").css("-webkit-transform").split(/[()]/)[1],Z=Math.abs(parseInt(Y.split(",")[4]));z=Math.round(Z/w)}catch(S){Xb("Error has occurred while finding the current focussed Element. Exception details: "+S,"ERROR")}return z},Hn=function(z){try{var G=z.target.closest("li");ig(z.target);var w=U["default"].$(G).index()+1;z=0;try{var Y=U["default"].$(".vse-video-widget-container"),Z=parseInt(Y.find("li").css("width").replace("px",
"")),S=tc?U["default"].$(window).width():U["default"].$(".vse-video-widget-container .a-carousel-viewport").width();z=Math.floor(S/(Z+8))}catch(Aa){Xb("Error has occurred while finding the no of Thumbnails on screen. Exception details: "+Aa,"ERROR")}var X=z;var ha=Math.ceil(w/X),pa=Math.ceil((w+1)/X),xa=Ti(w-1);hg(xa);ha===pa&&kg(w)}catch(Aa){Xb("Error has occurred while playing the next preview. Exception details: "+Aa,"ERROR")}},Jn=function(){var z=U["default"].$(".vse-cards-carousel-container");
on["default"].getCarousel(z).on("change:pageNumber",function(){Le();setTimeout(function(){kg(Ui())},tc?100:310)})},Vi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},os=function(z){return z&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z["default"]:z}(function(z,G,w){return w={path:G,exports:{},require:function(Y,Z){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}},z(w,w.exports),w.exports}(function(z){function G(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h["default"]:h}function w(h,d){return d={exports:{}},h(d,d.exports),d.exports}function Y(h){var d="info",c=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];b("log",d,e)};var b=Kn(h,c);c.createLogger=function(a){return Y(h+": "+a)};c.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",
error:"error",DEFAULT:d};c.level=function(a){if("string"===typeof a){if(!c.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');d=a}return d};c.history=function(){return Eb?[].concat(Eb):[]};c.history.filter=function(a){return(Eb||[]).filter(function(e){return(new RegExp(".*"+a+".*")).test(e[0])})};c.history.clear=function(){Eb&&(Eb.length=0)};c.history.disable=function(){null!==Eb&&(Eb.length=0,Eb=null)};c.history.enable=function(){null===Eb&&(Eb=[])};c.error=function(){for(var a=
arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];return b("error",d,e)};c.warn=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];return b("warn",d,e)};c.debug=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];return b("debug",d,e)};return c}function Z(h,d){Wi(h).forEach(function(c){return d(h[c],c)})}function S(h,d,c){void 0===c&&(c=0);return Wi(h).reduce(function(b,a){return d(b,h[a],a)},c)}function X(h){for(var d=arguments.length,
c=Array(1<d?d-1:0),b=1;b<d;b++)c[b-1]=arguments[b];if(Object.assign)return Me.apply(void 0,[h].concat(c));c.forEach(function(a){a&&Z(a,function(e,n){h[n]=e})});return h}function ha(h){return!!h&&"object"===typeof h}function pa(h){return ha(h)&&"[object Object]"===Ln.call(h)&&h.constructor===Object}function xa(h,d){return h&&d?"function"===typeof da.getComputedStyle?(h=da.getComputedStyle(h))?h.getPropertyValue(d)||h[d]:"":"":""}function Aa(h){if(0<=h.indexOf(" "))throw Error("class has illegal whitespace characters");
}function ia(){return qa===da.document}function Ca(h){return ha(h)&&1===h.nodeType}function La(){try{return da.parent!==da.self}catch(h){return!0}}function gc(h){return function(d,c){if("string"!==typeof d||!d.trim())return qa[h](null);"string"===typeof c&&c.trim()&&(c=qa.querySelector(c));c=Ca(c)?c:qa;return c[h]&&c[h](d)}}function Ma(h,d,c,b){void 0===h&&(h="div");void 0===d&&(d={});void 0===c&&(c={});var a=qa.createElement(h);Object.getOwnPropertyNames(d).forEach(function(e){var n=d[e];if(-1!==
e.indexOf("aria-")||"role"===e||"type"===e)Ga.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+(e+" to "+n+".")),a.setAttribute(e,n);else if("textContent"===e)qc(a,n);else if(a[e]!==n||"tabIndex"===e)a[e]=n});Object.getOwnPropertyNames(c).forEach(function(e){a.setAttribute(e,c[e])});b&&Ld(a,b);return a}function qc(h,d){"undefined"===typeof h.textContent?h.innerText=d:h.textContent=
d;return h}function Na(h,d){d.firstChild?d.insertBefore(h,d.firstChild):d.appendChild(h)}function ub(h,d){Aa(d);return h.classList?h.classList.contains(d):(new RegExp("(^|\\s)"+d+"($|\\s)")).test(h.className)}function Za(h,d){h.classList?h.classList.add(d):ub(h,d)||(h.className=(h.className+" "+d).trim());return h}function rc(h,d){h.classList?h.classList.remove(d):(Aa(d),h.className=h.className.split(/\s+/).filter(function(c){return c!==d}).join(" "));return h}function ye(h,d,c){var b=ub(h,d);"function"===
typeof c&&(c=c(h,d));"boolean"!==typeof c&&(c=!b);if(c!==b)return c?Za(h,d):rc(h,d),h}function ze(h,d){Object.getOwnPropertyNames(d).forEach(function(c){var b=d[c];null===b||"undefined"===typeof b||!1===b?h.removeAttribute(c):h.setAttribute(c,!0===b?"":b)})}function Yb(h){var d={};if(h&&h.attributes&&0<h.attributes.length)for(var c=h.attributes,b=c.length-1;0<=b;b--){var a=c[b].name,e=c[b].value;if("boolean"===typeof h[a]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+
a+","))e=null!==e?!0:!1;d[a]=e}return d}function Ae(){qa.body.focus();qa.onselectstart=function(){return!1}}function Be(){qa.onselectstart=function(){return!0}}function Db(h){if(h&&h.getBoundingClientRect&&h.parentNode){var d=h.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(b){void 0!==d[b]&&(c[b]=d[b])});c.height||(c.height=parseFloat(xa(h,"height")));c.width||(c.width=parseFloat(xa(h,"width")));return c}}function Ec(h){if(!h||h&&!h.offsetParent)return{left:0,
top:0,width:0,height:0};for(var d=h.offsetWidth,c=h.offsetHeight,b=0,a=0;h.offsetParent&&h!==qa[Ne.fullscreenElement];)b+=h.offsetLeft,a+=h.offsetTop,h=h.offsetParent;return{left:b,top:a,width:d,height:c}}function Zb(h,d){var c=0,b=0;if(Lb)for(var a=h;a&&"html"!==a.nodeName.toLowerCase();){var e=xa(a,"transform");/^matrix/.test(e)?(e=e.slice(7,-1).split(/,\s/).map(Number),c+=e[4],b+=e[5]):/^matrix3d/.test(e)&&(e=e.slice(9,-1).split(/,\s/).map(Number),c+=e[12],b+=e[13]);a=a.parentNode}a={};e=Ec(d.target);
h=Ec(h);var n=h.width,q=h.height,t=d.offsetY-(h.top-e.top);e=d.offsetX-(h.left-e.left);d.changedTouches&&(e=d.changedTouches[0].pageX-h.left,t=d.changedTouches[0].pageY+h.top,Lb&&(e-=c,t-=b));a.y=1-Math.max(0,Math.min(1,t/q));a.x=Math.max(0,Math.min(1,e/n));return a}function Ce(h){return ha(h)&&3===h.nodeType}function Kd(h){for(;h.firstChild;)h.removeChild(h.firstChild);return h}function De(h){"function"===typeof h&&(h=h());return(Array.isArray(h)?h:[h]).map(function(d){"function"===typeof d&&(d=
d());if(Ca(d)||Ce(d))return d;if("string"===typeof d&&/\S/.test(d))return qa.createTextNode(d)}).filter(function(d){return d})}function Ld(h,d){De(d).forEach(function(c){return h.appendChild(c)});return h}function Ee(h,d){return Ld(Kd(h),d)}function Fc(h){return void 0===h.button&&void 0===h.buttons||0===h.button&&void 0===h.buttons||"mouseup"===h.type&&0===h.button&&0===h.buttons?!0:0!==h.button||1!==h.buttons?!1:!0}function Md(h,d){d&&(lg=d);da.setTimeout(Mn,h)}function Nd(){Xi=!0;da.removeEventListener("load",
Nd)}function Fe(h,d){if(xb.has(h)){var c=xb.get(h);0===c.handlers[d].length&&(delete c.handlers[d],h.removeEventListener?h.removeEventListener(d,c.dispatcher,!1):h.detachEvent&&h.detachEvent("on"+d,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,delete c.dispatcher,delete c.disabled);if(0===Object.getOwnPropertyNames(c).length)xb["delete"](h)}}function Od(h,d,c,b){c.forEach(function(a){h(d,a,b)})}function id(h){function d(){return!0}function c(){return!1}if(h.fixed_)return h;
if(!h||!h.isPropagationStopped){var b=h||da.event;h={};for(var a in b)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&b.preventDefault||(h[a]=b[a]));h.target||(h.target=h.srcElement||qa);h.relatedTarget||(h.relatedTarget=h.fromElement===h.target?h.toElement:h.fromElement);h.preventDefault=function(){b.preventDefault&&b.preventDefault();h.returnValue=!1;b.returnValue=!1;h.defaultPrevented=!0};h.defaultPrevented=!1;h.stopPropagation=function(){b.stopPropagation&&
b.stopPropagation();h.cancelBubble=!0;b.cancelBubble=!0;h.isPropagationStopped=d};h.isPropagationStopped=c;h.stopImmediatePropagation=function(){b.stopImmediatePropagation&&b.stopImmediatePropagation();h.isImmediatePropagationStopped=d;h.stopPropagation()};h.isImmediatePropagationStopped=c;if(null!==h.clientX&&void 0!==h.clientX){a=qa.documentElement;var e=qa.body;h.pageX=h.clientX+(a&&a.scrollLeft||e&&e.scrollLeft||0)-(a&&a.clientLeft||e&&e.clientLeft||0);h.pageY=h.clientY+(a&&a.scrollTop||e&&e.scrollTop||
0)-(a&&a.clientTop||e&&e.clientTop||0)}h.which=h.charCode||h.keyCode;null!==h.button&&void 0!==h.button&&(h.button=h.button&1?0:h.button&4?1:h.button&2?2:0)}h.fixed_=!0;return h}function wb(h,d,c){if(Array.isArray(d))return Od(wb,h,d,c);xb.has(h)||xb.set(h,{});var b=xb.get(h);b.handlers||(b.handlers={});b.handlers[d]||(b.handlers[d]=[]);c.guid||(c.guid=Gc++);b.handlers[d].push(c);b.dispatcher||(b.disabled=!1,b.dispatcher=function(a,e){if(!b.disabled){a=id(a);var n=b.handlers[a.type];if(n){n=n.slice(0);
for(var q=0,t=n.length;q<t&&!a.isImmediatePropagationStopped();q++)try{n[q].call(h,a,e)}catch(v){Ga.error(v)}}}});1===b.handlers[d].length&&(h.addEventListener?(c=!1,Nn()&&-1<On.indexOf(d)&&(c={passive:!0}),h.addEventListener(d,b.dispatcher,c)):h.attachEvent&&h.attachEvent("on"+d,b.dispatcher))}function fb(h,d,c){if(xb.has(h)){var b=xb.get(h);if(b.handlers){if(Array.isArray(d))return Od(fb,h,d,c);if(void 0===d)for(var a in b.handlers)Object.prototype.hasOwnProperty.call(b.handlers||{},a)&&(d=h,c=
a,b.handlers[c]=[],Fe(d,c));else if(a=b.handlers[d]){if(!c)b.handlers[d]=[];else if(c.guid)for(b=0;b<a.length;b++)a[b].guid===c.guid&&a.splice(b--,1);Fe(h,d)}}}}function sc(h,d,c){var b=xb.has(h)?xb.get(h):{},a=h.parentNode||h.ownerDocument;"string"===typeof d?d={type:d,target:h}:d.target||(d.target=h);d=id(d);b.dispatcher&&b.dispatcher.call(h,d,c);if(a&&!d.isPropagationStopped()&&!0===d.bubbles)sc.call(null,a,d,c);else if(!a&&!d.defaultPrevented&&d.target&&d.target[d.type]&&(xb.has(d.target)||xb.set(d.target,
{}),h=xb.get(d.target),d.target[d.type])){h.disabled=!0;if("function"===typeof d.target[d.type])d.target[d.type]();h.disabled=!1}return!d.defaultPrevented}function Oe(h,d,c){if(Array.isArray(d))return Od(Oe,h,d,c);var b=function e(){fb(h,d,e);c.apply(this,arguments)};b.guid=c.guid=c.guid||Gc++;wb(h,d,b)}function Yi(h,d,c){var b=function e(){fb(h,d,e);c.apply(this,arguments)};b.guid=c.guid=c.guid||Gc++;wb(h,d,b)}function mg(h,d){void 0===d&&(d={});if(d=d.eventBusKey){if(!h[d].nodeName)throw Error('The eventBusKey "'+
d+'" does not refer to an element.');h.eventBusEl_=h[d]}else h.eventBusEl_=Ma("span",{className:"vjs-event-bus"});X(h,Pn);h.eventedCallbacks&&h.eventedCallbacks.forEach(function(c){c()});h.on("dispose",function(){h.off();da.setTimeout(function(){h.eventBusEl_=null},0)});return h}function Zi(h,d){X(h,Qn);h.state=X({},h.state,d);if("function"===typeof h.handleStateChanged&&vc(h))h.on("statechanged",h.handleStateChanged);return h}function Ta(){for(var h={},d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=
arguments[b];c.forEach(function(a){a&&Z(a,function(e,n){pa(e)?(pa(h[n])||(h[n]={}),h[n]=Ta(h[n],e)):h[n]=e})});return h}function $i(h,d,c,b){var a=c.length-1;if("number"!==typeof b||0>b||b>a)throw Error("Failed to execute '"+h+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+a+").");return c[b][d]}function ng(h){return void 0===h||0===h.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");
}}:{length:h.length,start:$i.bind(null,"start",0,h),end:$i.bind(null,"end",1,h)}}function Uc(h,d){return Array.isArray(h)?ng(h):void 0===h||void 0===d?ng():ng([[h,d]])}function aj(h,d){var c=0;if(!d)return 0;h&&h.length||(h=Uc(0,0));for(var b=0;b<h.length;b++){var a=h.start(b);var e=h.end(b);e>d&&(e=d);c+=e-a}return c/d}function yb(h){if(h instanceof yb)return h;"number"===typeof h?this.code=h:"string"===typeof h?this.message=h:ha(h)&&("number"===typeof h.code&&(this.code=h.code),X(this,h));this.message||
(this.message=yb.defaultMessages[this.code]||"")}function Sd(h){return void 0!==h&&null!==h&&"function"===typeof h.then}function Hc(h){Sd(h)&&h.then(null,function(d){})}function Rn(h){for(var d in h)if(h.hasOwnProperty(d))return!1;return!0}function bj(h,d,c){var b=h,a=Sn.call(d);"[object Function]"===a||"function"===typeof d&&"[object RegExp]"!==a||"undefined"!==typeof window&&(d===window.setTimeout||d===window.alert||d===window.confirm||d===window.prompt)?(c=d,"string"===typeof h&&(b={uri:h})):b=
Me({},d,{uri:h});b.callback=c;return b}function ac(h,d,c){d=bj(h,d,c);return cj(d)}function cj(h){function d(g){clearTimeout(l);g instanceof Error||(g=Error(""+(g||"Unknown XMLHttpRequest Error")));g.statusCode=0;var k=f;b||(b=!0,h.callback(g,k,void 0))}function c(){if(!n){clearTimeout(l);var g=h.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var k=f,u=null;if(0!==g){if(a.response)k=a.response;else if(!(k=a.responseText))a:{try{if("document"===a.responseType){k=a.responseXML;break a}var x=
a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!x){k=a.responseXML;break a}}catch(A){}k=null}if(m)try{k=JSON.parse(k)}catch(A){}k={body:k,statusCode:g,method:t,headers:{},url:q,rawRequest:a};a.getAllResponseHeaders&&(k.headers=Tn(a.getAllResponseHeaders()))}else u=Error("Internal XMLHttpRequest Error");g=k.body;b||(b=!0,h.callback(u,k,g))}}if("undefined"===typeof h.callback)throw Error("callback argument missing");var b=!1,a=h.xhr||null;a||(a=h.cors||
h.useXDR?new ac.XDomainRequest:new ac.XMLHttpRequest);var e,n,q=a.url=h.uri||h.url,t=a.method=h.method||"GET",v=h.body||h.data,r=a.headers=h.headers||{},p=!!h.sync,m=!1,l,f={body:void 0,headers:{},statusCode:0,method:t,url:q,rawRequest:a};"json"in h&&!1!==h.json&&(m=!0,r.accept||r.Accept||(r.Accept="application/json"),"GET"!==t&&"HEAD"!==t&&(r["content-type"]||r["Content-Type"]||(r["Content-Type"]="application/json"),v=JSON.stringify(!0===h.json?v:h.json)));a.onreadystatechange=function(){4===a.readyState&&
setTimeout(c,0)};a.onload=c;a.onerror=d;a.onprogress=function(){};a.onabort=function(){n=!0};a.ontimeout=d;a.open(t,q,!p,h.username,h.password);p||(a.withCredentials=!!h.withCredentials);!p&&0<h.timeout&&(l=setTimeout(function(){if(!n){n=!0;a.abort("timeout");var g=Error("XMLHttpRequest timeout");g.code="ETIMEDOUT";d(g)}},h.timeout));if(a.setRequestHeader)for(e in r)r.hasOwnProperty(e)&&a.setRequestHeader(e,r[e]);else if(h.headers&&!Rn(h.headers))throw Error("Headers cannot be set on an XDomainRequest object");
"responseType"in h&&(a.responseType=h.responseType);"beforeSend"in h&&"function"===typeof h.beforeSend&&h.beforeSend(a);a.send(v||null);return a}function Un(){}function Mb(h,d){this.name="ParsingError";this.code=h.code;this.message=d||h.message}function og(h){h=h.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!h)return null;if(h[3]){var d=h[3].replace(":","");return 3600*(h[1]|0)+60*(h[2]|0)+(d|0)+(h[4]|0)/1E3}return 59<h[1]?3600*(h[1]|0)+60*(h[2]|0)+(h[4]|0)/1E3:60*(h[1]|0)+(h[2]|0)+(h[4]|0)/1E3}
function Td(){this.values=pg(null)}function Ud(h,d,c,b){h=b?h.split(b):[h];for(var a in h)"string"===typeof h[a]&&(b=h[a].split(c),2===b.length&&d(b[0],b[1]))}function Vn(h,d,c){function b(){var n=og(h);if(null===n)throw new Mb(Mb.Errors.BadTimeStamp,"Malformed timestamp: "+e);h=h.replace(/^[^\sa-zA-Z-]+/,"");return n}function a(){h=h.replace(/^\s+/,"")}var e=h;a();d.startTime=b();a();if("--\x3e"!==h.substr(0,3))throw new Mb(Mb.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+
e);h=h.substr(3);a();d.endTime=b();a();(function(n,q){var t=new Td;Ud(n,function(v,r){switch(v){case "region":for(var p=c.length-1;0<=p;p--)if(c[p].id===r){t.set(v,c[p].region);break}break;case "vertical":t.alt(v,r,["rl","lr"]);break;case "line":r=r.split(",");p=r[0];t.integer(v,p);t.percent(v,p)?t.set("snapToLines",!1):null;t.alt(v,p,["auto"]);2===r.length&&t.alt("lineAlign",r[1],["start","center","end"]);break;case "position":r=r.split(",");t.percent(v,r[0]);2===r.length&&t.alt("positionAlign",
r[1],["start","center","end"]);break;case "size":t.percent(v,r);break;case "align":t.alt(v,r,["start","center","end","left","right"])}},/:/,/\s/);q.region=t.get("region",null);q.vertical=t.get("vertical","");try{q.line=t.get("line","auto")}catch(v){}q.lineAlign=t.get("lineAlign","start");q.snapToLines=t.get("snapToLines",!0);q.size=t.get("size",100);try{q.align=t.get("align","center")}catch(v){q.align=t.get("align","middle")}try{q.position=t.get("position","auto")}catch(v){q.position=t.get("position",
{start:0,left:0,center:50,middle:50,end:100,right:100},q.align)}q.positionAlign=t.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},q.align)})(h,d)}function dj(h,d){function c(){if(!d)return null;var p=d.match(/^([^<]*)(<[^>]*>?)?/);p=p[1]?p[1]:p[2];d=d.substr(p.length);return p}function b(p){qg.innerHTML=p;p=qg.textContent;qg.textContent="";return p}function a(p,m){var l=Wn[p];if(!l)return null;l=h.document.createElement(l);(p=Xn[p])&&m&&(l[p]=
m.trim());return l}for(var e=h.document.createElement("div"),n=e,q,t=[];null!==(q=c());)if("<"===q[0])if("/"===q[1])t.length&&t[t.length-1]===q.substr(2).replace(">","")&&(t.pop(),n=n.parentNode);else{var v=og(q.substr(1,q.length-2));if(v){var r=h.document.createProcessingInstruction("timestamp",v);n.appendChild(r)}else if(q=q.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(r=a(q[1],q[3]))||ej[r.localName]&&ej[r.localName]!==n.localName||(q[2]&&(v=q[2].split("."),v.forEach(function(p){var m=
/^bg_/.test(p);p=m?p.slice(3):p;fj.hasOwnProperty(p)&&(r.style[m?"background-color":"color"]=fj[p])}),r.className=v.join(" ")),t.push(q[1]),n.appendChild(r),n=r)}else n.appendChild(h.document.createTextNode(b(q)));return e}function Yn(h){for(var d=0;d<gj.length;d++){var c=gj[d];if(h>=c[0]&&h<=c[1])return!0}return!1}function Zn(h){function d(n,q){for(var t=q.childNodes.length-1;0<=t;t--)n.push(q.childNodes[t])}function c(n){if(!n||!n.length)return null;var q=n.pop(),t=q.textContent||q.innerText;if(t)return(q=
t.match(/^.*(\n|\r)/))?(n.length=0,q[0]):t;if("ruby"===q.tagName)return c(n);if(q.childNodes)return d(n,q),c(n)}var b=[],a="";if(!h||!h.childNodes)return"ltr";for(d(b,h);a=c(b);)for(var e=0;e<a.length;e++)if(h=a.charCodeAt(e),Yn(h))return"rtl";return"ltr"}function rg(){}function Pe(h,d,c){this.cue=d;this.cueDiv=dj(h,d.text);var b={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===d.vertical?"horizontal-tb":
"lr"===d.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(b,this.cueDiv);this.div=h.document.createElement("div");b={direction:Zn(this.cueDiv),writingMode:""===d.vertical?"horizontal-tb":"lr"===d.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===d.align?"center":d.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(b);this.div.appendChild(this.cueDiv);h=0;switch(d.positionAlign){case "start":h=d.position;break;
case "center":h=d.position-d.size/2;break;case "end":h=d.position-d.size}""===d.vertical?this.applyStyles({left:this.formatStyle(h,"%"),width:this.formatStyle(d.size,"%")}):this.applyStyles({top:this.formatStyle(h,"%"),height:this.formatStyle(d.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,
"px")})}}function zb(h){if(h.div){var d=h.div.offsetHeight;var c=h.div.offsetWidth;var b=h.div.offsetTop;var a=(a=h.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();h=h.div.getBoundingClientRect();var e=a?Math.max(a[0]&&a[0].height||0,h.height/a.length):0}this.left=h.left;this.right=h.right;this.top=h.top||b;this.height=h.height||d;this.bottom=h.bottom||b+(h.height||d);this.width=h.width||c;this.lineHeight=void 0!==e?e:h.lineHeight}function md(){}function sg(h){return"string"!==typeof h?
!1:$n[h.toLowerCase()]?h.toLowerCase():!1}function hj(h,d,c){this.hasBeenReset=!1;var b="",a=!1,e=h,n=d,q=c,t=null,v="",r=!0,p="auto",m="start",l="auto",f="auto",g=100,k="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return b},set:function(u){b=""+u}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(u){a=!!u}},startTime:{enumerable:!0,get:function(){return e},set:function(u){if("number"!==typeof u)throw new TypeError("Start time must be set to a number.");
e=u;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return n},set:function(u){if("number"!==typeof u)throw new TypeError("End time must be set to a number.");n=u;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return q},set:function(u){q=""+u;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return t},set:function(u){t=u;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(u){u="string"!==typeof u?!1:ao[u.toLowerCase()]?u.toLowerCase():
!1;if(!1===u)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=u;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return r},set:function(u){r=!!u;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(u){if("number"!==typeof u&&"auto"!==u)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=u;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(u){(u=sg(u))?
(m=u,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return l},set:function(u){if(0>u||100<u)throw Error("Position must be between 0 and 100.");l=u;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(u){(u=sg(u))?(f=u,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(u){if(0>
u||100<u)throw Error("Size must be between 0 and 100.");g=u;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return k},set:function(u){u=sg(u);if(!u)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");k=u;this.hasBeenReset=!0}}});this.displayState=void 0}function Vd(h){return"number"===typeof h&&0<=h&&100>=h}function bo(h,d,c){h.setTimeout(function(){return Vc(d,Wc[d.type],c,h)},1)}function co(h,d){h.forEach(function(c){return c.setTech&&c.setTech(d)})}
function ij(h,d,c,b){void 0===b&&(b=null);var a="call"+$a(c);a=h.reduce(tg(a),b);d=(b=a===Qe)?null:d[c](a);for(a=h.length-1;0<=a;a--){var e=h[a];if(e[c])e[c](b,d)}return d}function tg(h){return function(d,c){return d===Qe?Qe:c[h]?c[h](d):d}}function eo(h,d){var c=ug[h.id()],b=null;if(void 0===c||null===c)return b=d(h),ug[h.id()]=[[d,b]],b;for(var a=0;a<c.length;a++){var e=c[a];e[0]===d&&(b=e[1])}null===b&&(b=d(h),c.push([d,b]));return b}function Vc(h,d,c,b,a,e){void 0===h&&(h={});void 0===d&&(d=[]);
void 0===a&&(a=[]);void 0===e&&(e=!1);var n=d[0],q=d.slice(1);if("string"===typeof n)Vc(h,Wc[n],c,b,a,e);else if(n){var t=eo(b,n);if(!t.setSource)return a.push(t),Vc(h,q,c,b,a,e);t.setSource(X({},h),function(v,r){if(v)return Vc(h,q,c,b,a,e);a.push(t);Vc(r,h.type===r.type?q:Wc[r.type],c,b,a,e)})}else q.length?Vc(h,q,c,b,a,e):e?c(h,a):Vc(h,Wc["*"],c,b,a,!0)}function jj(h){if(!h.type){var d=Re(h.src);d&&(h.type=d)}return h}function vg(h,d){if(4===h.length)h=h[1]+h[1]+h[2]+h[2]+h[3]+h[3];else if(7===
h.length)h=h.slice(1);else throw Error("Invalid color code provided, "+h+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(h.slice(0,2),16)+","+parseInt(h.slice(2,4),16)+","+parseInt(h.slice(4,6),16)+","+d+")"}function nd(h,d){void 0===d&&(d=h);return wg(h,d)}function kj(h,d){d&&(h=d(h));if(h&&"none"!==h)return h}function V(h,d,c){var b=V.getPlayer(h);if(b)return d&&Ga.warn('Player "'+h+'" is already initialised. Options will not be applied.'),c&&b.ready(c),b;var a="string"===
typeof h?Ic("#"+lj(h)):h;if(!Ca(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||Ga.warn("The element supplied is not included in the DOM");d=d||{};V.hooks("beforesetup").forEach(function(e){e=e(a,Ta(d));!ha(e)||Array.isArray(e)?Ga.error("please return an object in beforesetup hooks"):d=Ta(d,e)});b=new (ja.getComponent("Player"))(a,d,c);V.hooks("setup").forEach(function(e){return e(b)});return b}function mj(h){h=
Jc.atob?Jc.atob(h):Buffer.from(h,"base64").toString("binary");for(var d=new Uint8Array(h.length),c=0;c<h.length;c++)d[c]=h.charCodeAt(c);return d}function nj(){}function fo(h,d,c,b,a){function e(ea){var ka=ea.slice(1,-1);if(ka in c)return c[ka];if("#"===ka.charAt(0))return ea=parseInt(ka.substr(1).replace("x","0x")),65535<ea?(ea-=65536,ea=String.fromCharCode(55296+(ea>>10),56320+(ea&1023))):ea=String.fromCharCode(ea),ea;a.error("entity not found:"+ea);return ea}function n(ea){if(ea>l){var ka=h.substring(l,
ea).replace(/&#?\w+;/g,e);p&&q(l);b.characters(ka,0,ea-l);l=ea}}function q(ea,ka){for(;ea>=v&&(ka=r.exec(h));)t=ka.index,v=t+ka[0].length,p.lineNumber++;p.columnNumber=ea-t+1}var t=0,v=0,r=/.*(?:\r\n?|\n)|.*$/g,p=b.locator;d=[{currentNSMap:d}];for(var m={},l=0;;){try{var f=h.indexOf("<",l);if(0>f){if(!h.substr(l).match(/^\s*$/)){var g=b.doc,k=g.createTextNode(h.substr(l));g.appendChild(k);b.currentElement=k}break}f>l&&n(f);switch(h.charAt(f+1)){case "/":var u=h.indexOf(">",f+3),x=h.substring(f+2,
u),A=d.pop();0>u?(x=h.substring(f+2).replace(/[\s<].*/,""),a.error("end tag name: "+x+" is not complete:"+A.tagName),u=f+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,""),a.error("end tag name: "+x+" maybe not complete"),u=f+1+x.length);var H=A.localNSMap,R=A.tagName==x;if(R||A.tagName&&A.tagName.toLowerCase()==x.toLowerCase()){b.endElement(A.uri,A.localName,x);if(H)for(var W in H)b.endPrefixMapping(W);R||a.fatalError("end tag name: "+x+" is not match the current start tagName:"+A.tagName)}else d.push(A);
u++;break;case "?":p&&q(f);u=go(h,f,b);break;case "!":p&&q(f);u=ho(h,f,b,a);break;default:p&&q(f);var M=new oj,T=d[d.length-1].currentNSMap;u=io(h,f,M,T,e,a);var Q=M.length;!M.closed&&jo(h,u,M.tagName,m)&&(M.closed=!0,c.nbsp||a.warning("unclosed xml attribute"));if(p&&Q){for(var na=pj(p,{}),oa=0;oa<Q;oa++){var za=M[oa];q(za.offset);za.locator=pj(p,{})}b.locator=na;qj(M,b,T)&&d.push(M);b.locator=p}else qj(M,b,T)&&d.push(M);"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?u++:u=ko(h,u,M.tagName,e,b)}}catch(ea){a.error("element parse error: "+
ea),u=-1}u>l?l=u:n(Math.max(f,l)+1)}}function pj(h,d){d.lineNumber=h.lineNumber;d.columnNumber=h.columnNumber;return d}function io(h,d,c,b,a,e){for(var n,q,t=++d,v=0;;){var r=h.charAt(t);switch(r){case "=":if(1===v)n=h.slice(d,t),v=3;else if(2===v)v=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===v||1===v)if(1===v&&(e.warning('attribute value must after "="'),n=h.slice(d,t)),d=t+1,t=h.indexOf(r,d),0<t)q=h.slice(d,t).replace(/&#?\w+;/g,a),c.add(n,q,d-1),v=5;
else throw Error("attribute value no end '"+r+"' match");else if(4==v)q=h.slice(d,t).replace(/&#?\w+;/g,a),c.add(n,q,d),e.warning('attribute "'+n+'" missed start quot('+r+")!!"),d=t+1,v=5;else throw Error('attribute value must after "="');break;case "/":switch(v){case 0:c.setTagName(h.slice(d,t));case 5:case 6:case 7:v=7,c.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return e.error("unexpected end of input"),0==v&&c.setTagName(h.slice(d,
t)),t;case ">":switch(v){case 0:c.setTagName(h.slice(d,t));case 5:case 6:case 7:break;case 4:case 1:q=h.slice(d,t),"/"===q.slice(-1)&&(c.closed=!0,q=q.slice(0,-1));case 2:2===v&&(q=n);4==v?(e.warning('attribute "'+q+'" missed quot(")!!'),c.add(n,q.replace(/&#?\w+;/g,a),d)):("http://www.w3.org/1999/xhtml"===b[""]&&q.match(/^(?:disabled|checked|selected)$/i)||e.warning('attribute "'+q+'" missed value!! "'+q+'" instead!!'),c.add(q,q,d));break;case 3:throw Error("attribute value missed!!");}return t;
case "\u0080":r=" ";default:if(" ">=r)switch(v){case 0:c.setTagName(h.slice(d,t));v=6;break;case 1:n=h.slice(d,t);v=2;break;case 4:q=h.slice(d,t).replace(/&#?\w+;/g,a),e.warning('attribute "'+q+'" missed quot(")!!'),c.add(n,q,d);case 5:v=6}else switch(v){case 2:c.tagName;"http://www.w3.org/1999/xhtml"===b[""]&&n.match(/^(?:disabled|checked|selected)$/i)||e.warning('attribute "'+n+'" missed value!! "'+n+'" instead2!!');c.add(n,n,d);d=t;v=1;break;case 5:e.warning('attribute space is required"'+n+'"!!');
case 6:v=1;d=t;break;case 3:v=4;d=t;break;case 7:throw Error("elements closed character '/' and '>' must be connected to");}}t++}}function qj(h,d,c){for(var b=h.tagName,a=null,e=h.length;e--;){var n=h[e],q=n.qName,t=n.value,v=q.indexOf(":");if(0<v){var r=n.prefix=q.slice(0,v);v=q.slice(v+1);r="xmlns"===r&&v}else v=q,r="xmlns"===q&&"";n.localName=v;if(!1!==r){if(null==a){a={};v=void 0;q=c;var p=c={};for(v in q)p[v]=q[v]}c[r]=a[r]=t;n.uri="http://www.w3.org/2000/xmlns/";d.startPrefixMapping(r,t)}}for(e=
h.length;e--;)if(n=h[e],r=n.prefix)"xml"===r&&(n.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==r&&(n.uri=c[r||""]);v=b.indexOf(":");0<v?(r=h.prefix=b.slice(0,v),v=h.localName=b.slice(v+1)):(r=null,v=h.localName=b);e=h.uri=c[r||""];d.startElement(e,v,b,h);if(h.closed){if(d.endElement(e,v,b),a)for(r in a)d.endPrefixMapping(r)}else return h.currentNSMap=c,h.localNSMap=a,!0}function ko(h,d,c,b,a){if(/^(?:script|textarea)$/i.test(c)){var e=h.indexOf("</"+c+">",d);h=h.substring(d+1,e);if(/[&<]/.test(h)){if(/^script$/i.test(c))return a.characters(h,
0,h.length),e;h=h.replace(/&#?\w+;/g,b);a.characters(h,0,h.length);return e}}return d+1}function jo(h,d,c,b){var a=b[c];null==a&&(a=h.lastIndexOf("</"+c+">"),a<d&&(a=h.lastIndexOf("</"+c)),b[c]=a);return a<d}function ho(h,d,c,b){switch(h.charAt(d+2)){case "-":if("-"===h.charAt(d+3)){var a=h.indexOf("--\x3e",d+4);if(a>d)return c.comment(h,d+4,a-d-4),a+3;b.error("Unclosed comment")}break;default:if("CDATA["==h.substr(d+3,6))return a=h.indexOf("]]\x3e",d+9),c.startCDATA(),c.characters(h,d+9,a-d-9),c.endCDATA(),
a+3;a:{b=[];a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;a.lastIndex=d;for(a.exec(h);d=a.exec(h);)if(b.push(d),d[1]){a=b;break a}a=void 0}var e=a.length;if(1<e&&/!doctype/i.test(a[0][0]))return h=a[1][0],b=d=!1,3<e&&(/^public$/i.test(a[2][0])?(d=a[3][0],b=4<e&&a[4][0]):/^system$/i.test(a[2][0])&&(b=a[3][0])),a=a[e-1],c.startDTD(h,d&&d.replace(/^(['"])(.*?)\1$/,"$2"),b&&b.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),a.index+a[0].length}return-1}function go(h,d,c){var b=h.indexOf("?>",d);return b&&
(h=h.substring(d,b).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(h[0].length,c.processingInstruction(h[1],h[2]),b+2):-1}function oj(h){}function Wd(h,d){for(var c in h)d[c]=h[c]}function Fb(h,d){var c=h.prototype;if(!(c instanceof d)){var b=function(){};b.prototype=d.prototype;b=new b;Wd(c,b);h.prototype=c=b}c.constructor!=h&&("function"!=typeof h&&console.error("unknow Class:"+h),c.constructor=h)}function od(h,d){if(d instanceof Error)var c=d;else c=this,Error.call(this,kb[h]),this.message=kb[h],Error.captureStackTrace&&
Error.captureStackTrace(this,od);c.code=h;d&&(this.message=this.message+": "+d);return c}function Kc(){}function pd(h,d){this._node=h;this._refresh=d;xg(this)}function xg(h){var d=h._node._inc||h._node.ownerDocument._inc;if(h._inc!=d){var c=h._refresh(h._node);rj(h,"length",c.length);Wd(c,h);h._inc=d}}function Se(){}function sj(h,d){for(var c=h.length;c--;)if(h[c]===d)return c}function tj(h,d,c,b){b?d[sj(d,b)]=c:d[d.length++]=c;h&&(c.ownerElement=h,d=h.ownerDocument)&&(b&&uj(d,h,b),d&&d._inc++,"http://www.w3.org/2000/xmlns/"==
c.namespaceURI&&(h._nsMap[c.prefix?c.localName:""]=c.value))}function vj(h,d,c){var b=sj(d,c);if(0<=b){for(var a=d.length-1;b<a;)d[b]=d[++b];d.length=a;h&&(d=h.ownerDocument)&&(uj(d,h,c),c.ownerElement=null)}else throw od(lo,Error(h.tagName+"@"+c));}function wj(h){this._features={};if(h)for(var d in h)this._features=h[d]}function Ab(){}function xj(h){return"<"==h&&"&lt;"||">"==h&&"&gt;"||"&"==h&&"&amp;"||'"'==h&&"&quot;"||"&#"+h.charCodeAt()+";"}function Xd(h,d){if(d(h))return!0;if(h=h.firstChild){do if(Xd(h,
d))return!0;while(h=h.nextSibling)}}function Yd(){}function uj(h,d,c,b){h&&h._inc++;"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete d._nsMap[c.prefix?c.localName:""]}function yg(h,d,c){if(h&&h._inc)if(h._inc++,h=d.childNodes,c)h[h.length++]=c;else{d=d.firstChild;for(c=0;d;)h[c++]=d,d=d.nextSibling;h.length=c}}function yj(h,d){var c=d.previousSibling,b=d.nextSibling;c?c.nextSibling=b:h.firstChild=b;b?b.previousSibling=c:h.lastChild=c;yg(h.ownerDocument,h);return d}function zj(h,d,c){var b=
d.parentNode;b&&b.removeChild(d);if(d.nodeType===wc){b=d.firstChild;if(null==b)return d;var a=d.lastChild}else b=a=d;var e=c?c.previousSibling:h.lastChild;b.previousSibling=e;a.nextSibling=c;e?e.nextSibling=b:h.firstChild=b;null==c?h.lastChild=a:c.previousSibling=a;do b.parentNode=h;while(b!==a&&(b=b.nextSibling));yg(h.ownerDocument||h,h);d.nodeType==wc&&(d.firstChild=d.lastChild=null);return d}function qd(){this._nsMap={}}function Te(){}function Zd(){}function zg(){}function Ag(){}function Bg(){}
function Cg(){}function Aj(){}function Bj(){}function Dg(){}function Ue(){}function Eg(){}function Cj(){}function Dj(h,d){var c=[],b=9==this.nodeType&&this.documentElement||this,a=b.prefix,e=b.namespaceURI;if(e&&null==a&&(a=b.lookupPrefix(e),null==a))var n=[{namespace:e,prefix:null}];rd(this,c,h,d,n);return c.join("")}function Ej(h,d,c){d=h.prefix||"";h=h.namespaceURI;if(!d&&!h||"xml"===d&&"http://www.w3.org/XML/1998/namespace"===h||"http://www.w3.org/2000/xmlns/"==h)return!1;for(var b=c.length;b--;){var a=
c[b];if(a.prefix==d)return a.namespace!=h}return!0}function rd(h,d,c,b,a){if(b)if(h=b(h)){if("string"==typeof h){d.push(h);return}}else return;switch(h.nodeType){case bc:a||(a=[]);a.length;var e=h.attributes,n=e.length,q=h.firstChild,t=h.tagName;c="http://www.w3.org/1999/xhtml"===h.namespaceURI||c;d.push("<",t);for(var v=0;v<n;v++){var r=e.item(v);"xmlns"==r.prefix?a.push({prefix:r.localName,namespace:r.value}):"xmlns"==r.nodeName&&a.push({prefix:"",namespace:r.value})}for(v=0;v<n;v++){r=e.item(v);
if(Ej(r,c,a)){var p=r.prefix||"",m=r.namespaceURI;d.push(p?" xmlns:"+p:" xmlns",'="',m,'"');a.push({prefix:p,namespace:m})}rd(r,d,c,b,a)}Ej(h,c,a)&&(p=h.prefix||"",m=h.namespaceURI,d.push(p?" xmlns:"+p:" xmlns",'="',m,'"'),a.push({prefix:p,namespace:m}));if(q||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(t)){d.push(">");if(c&&/^script$/i.test(t))for(;q;)q.data?d.push(q.data):rd(q,d,c,b,a),q=q.nextSibling;else for(;q;)rd(q,d,c,b,a),q=q.nextSibling;d.push("</",t,">")}else d.push("/>");break;case Fj:case wc:for(q=
h.firstChild;q;)rd(q,d,c,b,a),q=q.nextSibling;break;case sd:return d.push(" ",h.name,'="',h.value.replace(/[<&"]/g,xj),'"');case Ve:return d.push(h.data.replace(/[<&]/g,xj));case Gj:return d.push("<![CDATA[",h.data,"]]\x3e");case Hj:return d.push("\x3c!--",h.data,"--\x3e");case Ij:c=h.publicId;b=h.systemId;d.push("<!DOCTYPE ",h.name);c?(d.push(' PUBLIC "',c),b&&"."!=b&&d.push('" "',b),d.push('">')):b&&"."!=b?d.push(' SYSTEM "',b,'">'):((h=h.internalSubset)&&d.push(" [",h,"]"),d.push(">"));break;case Jj:return d.push("<?",
h.target," ",h.data,"?>");case Kj:return d.push("&",h.nodeName,";");default:d.push("??",h.nodeName)}}function Lj(h,d,c){switch(d.nodeType){case bc:var b=d.cloneNode(!1);b.ownerDocument=h;case wc:break;case sd:c=!0}b||(b=d.cloneNode(!1));b.ownerDocument=h;b.parentNode=null;if(c)for(d=d.firstChild;d;)b.appendChild(Lj(h,d,c)),d=d.nextSibling;return b}function Fg(h,d,c){var b=new d.constructor;for(e in d){var a=d[e];"object"!=typeof a&&a!=b[e]&&(b[e]=a)}d.childNodes&&(b.childNodes=new Kc);b.ownerDocument=
h;switch(b.nodeType){case bc:var e=d.attributes;var n=b.attributes=new Se;a=e.length;n._ownerElement=b;for(n=0;n<a;n++)b.setAttributeNode(Fg(h,e.item(n),!0));break;case sd:c=!0}if(c)for(d=d.firstChild;d;)b.appendChild(Fg(h,d,c)),d=d.nextSibling;return b}function rj(h,d,c){h[d]=c}function Lc(){}var Gb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof Vi?Vi:"undefined"!==typeof self?self:{},da="undefined"!==typeof window?window:"undefined"!==typeof Gb?
Gb:"undefined"!==typeof self?self:{},Mj={},Nj="undefined"!==typeof Gb?Gb:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var Gg=document;else(Gg=Nj["__GLOBAL_DOCUMENT_CACHE@4"])||(Gg=Nj["__GLOBAL_DOCUMENT_CACHE@4"]=Mj);for(var qa=Gg,Ne={prefixed:!0},We=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],Oj=We[0],$d,Xe=0;Xe<We.length;Xe++)if(We[Xe][1]in qa){$d=We[Xe];break}if($d){for(var Ye=0;Ye<$d.length;Ye++)Ne[Oj[Ye]]=$d[Ye];Ne.prefixed=$d[0]!==Oj[0]}var Eb=[],Kn=function(h,d){return function(c,b,a){b=d.levels[b];
var e=new RegExp("^("+b+")$");"log"!==c&&a.unshift(c.toUpperCase()+":");a.unshift(h+":");if(Eb){Eb.push([].concat(a));var n=Eb.length-1E3;Eb.splice(0,0<n?n:0)}if(da.console&&((n=da.console[c])||"debug"!==c||(n=da.console.info||da.console.log),n&&b&&e.test(c)))n[Array.isArray(a)?"apply":"call"](da.console,a)}},Ga=Y("VIDEOJS"),Pj=Ga.createLogger,Me=w(function(h){function d(){h.exports=d=Object.assign||function(c){for(var b=1;b<arguments.length;b++){var a=arguments[b],e;for(e in a)Object.prototype.hasOwnProperty.call(a,
e)&&(c[e]=a[e])}return c};return d.apply(this,arguments)}h.exports=d}),Ln=Object.prototype.toString,Wi=function(h){return ha(h)?Object.keys(h):[]},lb=da.navigator&&da.navigator.userAgent||"",Qj=/AppleWebKit\/([\d.]+)/i.exec(lb),mo=Qj?parseFloat(Qj.pop()):null,Rj=/iPod/i.test(lb),no=function(){var h=lb.match(/OS (\d+)_/i);return h&&h[1]?h[1]:null}(),Mc=/Android/i.test(lb),Hg=function(){var h=lb.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!h)return null;var d=h[1]&&parseFloat(h[1]),c=h[2]&&parseFloat(h[2]);
return d&&c?parseFloat(h[1]+"."+h[2]):d?d:null}(),Sj=Mc&&5>Hg&&537>mo,Tj=/Firefox/i.test(lb),ae=/Edg/i.test(lb),xc=!ae&&(/Chrome/i.test(lb)||/CriOS/i.test(lb)),Uj=function(){var h=lb.match(/(Chrome|CriOS)\/(\d+)/);return h&&h[2]?parseFloat(h[2]):null}(),be=function(){var h=/MSIE\s(\d+)\.\d/.exec(lb);h=h&&parseFloat(h[1]);!h&&/Trident\/7.0/i.test(lb)&&/rv:11.0/.test(lb)&&(h=11);return h}(),Ig=/Safari/i.test(lb)&&!xc&&!Mc&&!ae,Vj=/Windows/i.test(lb),td=!(!ia()||!("ontouchstart"in da||da.navigator.maxTouchPoints||
da.DocumentTouch&&da.document instanceof da.DocumentTouch)),Jg=/iPad/i.test(lb)||Ig&&td&&!/iPhone/i.test(lb),Kg=/iPhone/i.test(lb)&&!Jg,Lb=Kg||Jg||Rj,Ze=(Ig||Lb)&&!xc,oo={__proto__:null,IS_IPOD:Rj,IOS_VERSION:no,IS_ANDROID:Mc,ANDROID_VERSION:Hg,IS_NATIVE_ANDROID:Sj,IS_FIREFOX:Tj,IS_EDGE:ae,IS_CHROME:xc,CHROME_VERSION:Uj,IE_VERSION:be,IS_SAFARI:Ig,IS_WINDOWS:Vj,TOUCH_ENABLED:td,IS_IPAD:Jg,IS_IPHONE:Kg,IS_IOS:Lb,IS_ANY_SAFARI:Ze},Ic=gc("querySelector"),Wj=gc("querySelectorAll"),Xj={__proto__:null,isReal:ia,
isEl:Ca,isInFrame:La,createEl:Ma,textContent:qc,prependTo:Na,hasClass:ub,addClass:Za,removeClass:rc,toggleClass:ye,setAttributes:ze,getAttributes:Yb,getAttribute:function(h,d){return h.getAttribute(d)},setAttribute:function(h,d,c){h.setAttribute(d,c)},removeAttribute:function(h,d){h.removeAttribute(d)},blockTextSelection:Ae,unblockTextSelection:Be,getBoundingClientRect:Db,findPosition:Ec,getPointerPosition:Zb,isTextNode:Ce,emptyEl:Kd,normalizeContent:De,appendContent:Ld,insertContent:Ee,isSingleLeftClick:Fc,
$:Ic,doubleDollar:Wj},Xi=!1,lg,Mn=function(){if(ia()&&!1!==lg.options.autoSetup){var h=Array.prototype.slice.call(qa.getElementsByTagName("video")),d=Array.prototype.slice.call(qa.getElementsByTagName("audio")),c=Array.prototype.slice.call(qa.getElementsByTagName("video-js"));if((h=h.concat(d,c))&&0<h.length)for(d=0,c=h.length;d<c;d++){var b=h[d];if(b&&b.getAttribute)void 0===b.player&&null!==b.getAttribute("data-setup")&&lg(b);else{Md(1);break}}else Xi||Md(1)}};ia()&&("complete"===qa.readyState?
Nd():da.addEventListener("load",Nd));var Yj=function(h){var d=qa.createElement("style");d.className=h;return d},Zj=function(h,d){h.styleSheet?h.styleSheet.cssText=d:h.textContent=d},Gc=3,ak;da.WeakMap||(ak=function(){function h(){this.vdata="vdata"+Math.floor(da.performance&&da.performance.now()||Date.now());this.data={}}var d=h.prototype;d.set=function(c,b){var a=c[this.vdata]||Gc++;c[this.vdata]||(c[this.vdata]=a);this.data[a]=b;return this};d.get=function(c){var b=c[this.vdata];if(b)return this.data[b];
Ga("We have no data for this element",c)};d.has=function(c){return c[this.vdata]in this.data};d["delete"]=function(c){var b=c[this.vdata];b&&(delete this.data[b],delete c[this.vdata])};return h}());var xb=da.WeakMap?new WeakMap:new ak,$e,Nn=function(){if("boolean"!==typeof $e){$e=!1;try{var h=Object.defineProperty({},"passive",{get:function(){$e=!0}});da.addEventListener("test",null,h);da.removeEventListener("test",null,h)}catch(d){}}return $e},On=["touchstart","touchmove"],po={__proto__:null,fixEvent:id,
on:wb,off:fb,trigger:sc,one:Oe,any:Yi},Ia=function(h,d,c){d.guid||(d.guid=Gc++);h=d.bind(h);h.guid=c?c+"_"+d.guid:d.guid;return h},Xc=function(h,d){var c=da.performance.now();return function(){var b=da.performance.now();b-c>=d&&(h.apply(void 0,arguments),c=b)}},qo=function(h,d,c,b){void 0===b&&(b=da);var a,e=function(){var n=this,q=arguments,t=function(){t=a=null;c||h.apply(n,q)};!a&&c&&h.apply(n,q);b.clearTimeout(a);a=b.setTimeout(t,d)};e.cancel=function(){b.clearTimeout(a);a=null};return e},mb=
function(){};mb.prototype.allowedEvents_={};mb.prototype.on=function(h,d){var c=this.addEventListener;this.addEventListener=function(){};wb(this,h,d);this.addEventListener=c};mb.prototype.addEventListener=mb.prototype.on;mb.prototype.off=function(h,d){fb(this,h,d)};mb.prototype.removeEventListener=mb.prototype.off;mb.prototype.one=function(h,d){var c=this.addEventListener;this.addEventListener=function(){};Oe(this,h,d);this.addEventListener=c};mb.prototype.any=function(h,d){var c=this.addEventListener;
this.addEventListener=function(){};Yi(this,h,d);this.addEventListener=c};mb.prototype.trigger=function(h){var d=h.type||h;"string"===typeof h&&(h={type:d});h=id(h);if(this.allowedEvents_[d]&&this["on"+d])this["on"+d](h);sc(this,h)};mb.prototype.dispatchEvent=mb.prototype.trigger;var ce;mb.prototype.queueTrigger=function(h){var d=this;ce||(ce=new Map);var c=h.type||h,b=ce.get(this);b||(b=new Map,ce.set(this,b));var a=b.get(c);b["delete"](c);da.clearTimeout(a);a=da.setTimeout(function(){0===b.size&&
(b=null,ce["delete"](d));d.trigger(h)},0);b.set(c,a)};var af=function(h){return"function"===typeof h.name?h.name():"string"===typeof h.name?h.name:h.name_?h.name_:h.constructor&&h.constructor.name?h.constructor.name:typeof h},vc=function(h){return h instanceof mb||!!h.eventBusEl_&&["on","one","off","trigger"].every(function(d){return"function"===typeof h[d]})},ro=function(h,d){vc(h)?d():(h.eventedCallbacks||(h.eventedCallbacks=[]),h.eventedCallbacks.push(d))},Lg=function(h){return"string"===typeof h&&
/\S/.test(h)||Array.isArray(h)&&!!h.length},bf=function(h,d,c){if(!h||!h.nodeName&&!vc(h))throw Error("Invalid target for "+af(d)+"#"+c+"; must be a DOM node or evented object.");},bk=function(h,d,c){if(!Lg(h))throw Error("Invalid event type for "+af(d)+"#"+c+"; must be a non-empty string or array.");},ck=function(h,d,c){if("function"!==typeof h)throw Error("Invalid listener for "+af(d)+"#"+c+"; must be a function.");},Mg=function(h,d,c){var b=3>d.length||d[0]===h||d[0]===h.eventBusEl_;if(b){var a=
h.eventBusEl_;3<=d.length&&d.shift();var e=d[0];d=d[1]}else a=d[0],e=d[1],d=d[2];bf(a,h,c);bk(e,h,c);ck(d,h,c);d=Ia(h,d);return{isTargetingSelf:b,target:a,type:e,listener:d}},Yc=function(h,d,c,b){bf(h,h,d);if(h.nodeName)po[d](h,c,b);else h[d](c,b)},Pn={on:function(){for(var h=this,d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];d=Mg(this,c,"on");c=d.isTargetingSelf;var a=d.target,e=d.type,n=d.listener;Yc(a,"on",e,n);if(!c){var q=function(){return h.off(a,e,n)};q.guid=n.guid;d=function(){return h.off("dispose",
q)};d.guid=n.guid;Yc(this,"on","dispose",q);Yc(a,"on","dispose",d)}},one:function(){for(var h=this,d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];d=Mg(this,c,"one");var a=d.target,e=d.type,n=d.listener;d.isTargetingSelf?Yc(a,"one",e,n):(d=function t(){h.off(a,e,t);for(var v=arguments.length,r=Array(v),p=0;p<v;p++)r[p]=arguments[p];n.apply(null,r)},d.guid=n.guid,Yc(a,"one",e,d))},any:function(){for(var h=this,d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];d=Mg(this,c,"any");
var a=d.target,e=d.type,n=d.listener;d.isTargetingSelf?Yc(a,"any",e,n):(d=function t(){h.off(a,e,t);for(var v=arguments.length,r=Array(v),p=0;p<v;p++)r[p]=arguments[p];n.apply(null,r)},d.guid=n.guid,Yc(a,"any",e,d))},off:function(h,d,c){!h||Lg(h)?fb(this.eventBusEl_,h,d):(bf(h,this,"off"),bk(d,this,"off"),ck(c,this,"off"),c=Ia(this,c),this.off("dispose",c),h.nodeName?(fb(h,d,c),fb(h,"dispose",c)):vc(h)&&(h.off(d,c),h.off("dispose",c)))},trigger:function(h,d){bf(this.eventBusEl_,this,"trigger");if(!Lg(h&&
"string"!==typeof h?h.type:h)){var c="Invalid event type for "+af(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(h)(this.log||Ga).error(c);else throw Error(c);}return sc(this.eventBusEl_,h,d)}},Qn={state:{},setState:function(h){var d=this;"function"===typeof h&&(h=h());var c;Z(h,function(b,a){d.state[a]!==b&&(c=c||{},c[a]={from:d.state[a],to:b});d.state[a]=b});c&&vc(this)&&this.trigger({changes:c,type:"statechanged"});return c}},cf=function(h){return"string"!==
typeof h?h:h.replace(/./,function(d){return d.toLowerCase()})},$a=function(h){return"string"!==typeof h?h:h.replace(/./,function(d){return d.toUpperCase()})},so=function(h,d){return $a(h)===$a(d)},to=function(){function h(){this.map_={}}var d=h.prototype;d.has=function(c){return c in this.map_};d["delete"]=function(c){var b=this.has(c);delete this.map_[c];return b};d.set=function(c,b){this.map_[c]=b;return this};d.forEach=function(c,b){for(var a in this.map_)c.call(b,this.map_[a],a,this)};return h}(),
uo=da.Map?da.Map:to,vo=function(){function h(){this.set_={}}var d=h.prototype;d.has=function(c){return c in this.set_};d["delete"]=function(c){var b=this.has(c);delete this.set_[c];return b};d.add=function(c){this.set_[c]=1;return this};d.forEach=function(c,b){for(var a in this.set_)c.call(b,a,a,this)};return h}(),Ng=da.Set?da.Set:vo,ja=function(){function h(c,b,a){this.player_=!c&&this.play?c=this:c;this.isDisposed_=!1;this.parentComponent_=null;this.options_=Ta({},this.options_);b=this.options_=
Ta(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=(c&&c.id&&c.id()||"no_player")+"_component_"+Gc++);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());!1!==b.evented&&(mg(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange));Zi(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=
new Ng;this.setIntervalIds_=new Ng;this.rafIds_=new Ng;this.namedRafs_=new uo;this.clearingTimersOnDispose_=!1;!1!==b.initChildren&&this.initChildren();this.ready(a);!1!==b.reportTouchActivity&&this.enableTouchActivity()}var d=h.prototype;d.dispose=function(){if(!this.isDisposed_){this.readyQueue_&&(this.readyQueue_.length=0);this.trigger({type:"dispose",bubbles:!1});this.isDisposed_=!0;if(this.children_)for(var c=this.children_.length-1;0<=c;c--)this.children_[c].dispose&&this.children_[c].dispose();
this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;if(this.el_){this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);if(xb.has(this.el_))xb["delete"](this.el_);this.el_=null}this.player_=null}};d.isDisposed=function(){return!!this.isDisposed_};d.player=function(){return this.player_};d.options=function(c){return c?this.options_=Ta(this.options_,c):this.options_};d.el=function(){return this.el_};d.createEl=function(c,b,a){return Ma(c,b,a)};d.localize=function(c,
b,a){void 0===a&&(a=c);var e=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),q=n&&n[e];e=e&&e.split("-")[0];n=n&&n[e];q&&q[c]?a=q[c]:n&&n[c]&&(a=n[c]);b&&(a=a.replace(/\{(\d+)\}/g,function(t,v){var r=v=b[v-1];"undefined"===typeof v&&(r=t);return r}));return a};d.handleLanguagechange=function(){};d.contentEl=function(){return this.contentEl_||this.el_};d.id=function(){return this.id_};d.name=function(){return this.name_};d.children=function(){return this.children_};
d.getChildById=function(c){return this.childIndex_[c]};d.getChild=function(c){if(c)return this.childNameIndex_[c]};d.getDescendant=function(){for(var c=arguments.length,b=Array(c),a=0;a<c;a++)b[a]=arguments[a];b=b.reduce(function(e,n){return e.concat(n)},[]);c=this;for(a=0;a<b.length;a++)if(c=c.getChild(b[a]),!c||!c.getChild)return;return c};d.addChild=function(c,b,a){void 0===b&&(b={});void 0===a&&(a=this.children_.length);if("string"===typeof c){var e=$a(c);c=b.componentClass||e;b.name=e;var n=
h.getComponent(c);if(!n)throw Error("Component "+c+" does not exist");if("function"!==typeof n)return null;b=new n(this.player_||this,b)}else b=c;b.parentComponent_&&b.parentComponent_.removeChild(b);this.children_.splice(a,0,b);b.parentComponent_=this;"function"===typeof b.id&&(this.childIndex_[b.id()]=b);if(e=e||b.name&&$a(b.name()))this.childNameIndex_[e]=b,this.childNameIndex_[cf(e)]=b;"function"===typeof b.el&&b.el()&&(e=null,this.children_[a+1]&&(this.children_[a+1].el_?e=this.children_[a+1].el_:
Ca(this.children_[a+1])&&(e=this.children_[a+1])),this.contentEl().insertBefore(b.el(),e));return b};d.removeChild=function(c){"string"===typeof c&&(c=this.getChild(c));if(c&&this.children_){for(var b=!1,a=this.children_.length-1;0<=a;a--)if(this.children_[a]===c){b=!0;this.children_.splice(a,1);break}b&&(c.parentComponent_=null,this.childIndex_[c.id()]=null,this.childNameIndex_[$a(c.name())]=null,this.childNameIndex_[cf(c.name())]=null,(b=c.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(c.el()))}};
d.initChildren=function(){var c=this,b=this.options_.children;if(b){var a=this.options_,e=h.getComponent("Tech");var n=Array.isArray(b)?b:Object.keys(b);n.concat(Object.keys(this.options_).filter(function(q){return!n.some(function(t){return"string"===typeof t?q===t:q===t.name})})).map(function(q){if("string"===typeof q){var t=q;q=b[t]||c.options_[t]||{}}else t=q.name;return{name:t,opts:q}}).filter(function(q){return(q=h.getComponent(q.opts.componentClass||$a(q.name)))&&!e.isTech(q)}).forEach(function(q){var t=
q.name;q=q.opts;void 0!==a[t]&&(q=a[t]);!1!==q&&(!0===q&&(q={}),q.playerOptions=c.options_.playerOptions,(q=c.addChild(t,q))&&(c[t]=q))})}};d.buildCSSClass=function(){return""};d.ready=function(c,b){void 0===b&&(b=!1);c&&(this.isReady_?b?c.call(this):this.setTimeout(c,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(c)))};d.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var c=this.readyQueue_;this.readyQueue_=[];c&&0<c.length&&c.forEach(function(b){b.call(this)},
this);this.trigger("ready")},1)};d.$=function(c,b){return Ic(c,b||this.contentEl())};d.doubleDollar=function(c,b){return Wj(c,b||this.contentEl())};d.hasClass=function(c){return ub(this.el_,c)};d.addClass=function(c){Za(this.el_,c)};d.removeClass=function(c){rc(this.el_,c)};d.toggleClass=function(c,b){ye(this.el_,c,b)};d.show=function(){this.removeClass("vjs-hidden")};d.hide=function(){this.addClass("vjs-hidden")};d.lockShowing=function(){this.addClass("vjs-lock-showing")};d.unlockShowing=function(){this.removeClass("vjs-lock-showing")};
d.getAttribute=function(c){return this.el_.getAttribute(c)};d.setAttribute=function(c,b){this.el_.setAttribute(c,b)};d.removeAttribute=function(c){this.el_.removeAttribute(c)};d.width=function(c,b){return this.dimension("width",c,b)};d.height=function(c,b){return this.dimension("height",c,b)};d.dimensions=function(c,b){this.width(c,!0);this.height(b)};d.dimension=function(c,b,a){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[c]=b:this.el_.style[c]=
"auto"===b?"":b+"px";a||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[c];a=b.indexOf("px");return-1!==a?parseInt(b.slice(0,a),10):parseInt(this.el_["offset"+$a(c)],10)}};d.currentDimension=function(c){if("width"!==c&&"height"!==c)throw Error("currentDimension only accepts width or height value");var b=xa(this.el_,c);b=parseFloat(b);if(0===b||isNaN(b))c="offset"+$a(c),b=this.el_[c];return b};d.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};
d.currentWidth=function(){return this.currentDimension("width")};d.currentHeight=function(){return this.currentDimension("height")};d.focus=function(){this.el_.focus()};d.blur=function(){this.el_.blur()};d.handleKeyDown=function(c){this.player_&&(c.stopPropagation(),this.player_.handleKeyDown(c))};d.handleKeyPress=function(c){this.handleKeyDown(c)};d.emitTapEvents=function(){var c=0,b=null,a;this.on("touchstart",function(n){1===n.touches.length&&(b={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},
c=da.performance.now(),a=!0)});this.on("touchmove",function(n){if(1<n.touches.length)a=!1;else if(b){var q=n.touches[0].pageX-b.pageX;n=n.touches[0].pageY-b.pageY;10<Math.sqrt(q*q+n*n)&&(a=!1)}});var e=function(){a=!1};this.on("touchleave",e);this.on("touchcancel",e);this.on("touchend",function(n){b=null;!0===a&&200>da.performance.now()-c&&(n.preventDefault(),this.trigger("tap"))})};d.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var c=Ia(this.player(),this.player().reportUserActivity),
b;this.on("touchstart",function(){c();this.clearInterval(b);b=this.setInterval(c,250)});var a=function(e){c();this.clearInterval(b)};this.on("touchmove",c);this.on("touchend",a);this.on("touchcancel",a)}};d.setTimeout=function(c,b){var a=this;c=Ia(this,c);this.clearTimersOnDispose_();var e=da.setTimeout(function(){if(a.setTimeoutIds_.has(e))a.setTimeoutIds_["delete"](e);c()},b);this.setTimeoutIds_.add(e);return e};d.clearTimeout=function(c){this.setTimeoutIds_.has(c)&&(this.setTimeoutIds_["delete"](c),
da.clearTimeout(c));return c};d.setInterval=function(c,b){c=Ia(this,c);this.clearTimersOnDispose_();c=da.setInterval(c,b);this.setIntervalIds_.add(c);return c};d.clearInterval=function(c){this.setIntervalIds_.has(c)&&(this.setIntervalIds_["delete"](c),da.clearInterval(c));return c};d.requestAnimationFrame=function(c){var b=this;if(!this.supportsRaf_)return this.setTimeout(c,1E3/60);this.clearTimersOnDispose_();c=Ia(this,c);var a=da.requestAnimationFrame(function(){if(b.rafIds_.has(a))b.rafIds_["delete"](a);
c()});this.rafIds_.add(a);return a};d.requestNamedAnimationFrame=function(c,b){var a=this;if(!this.namedRafs_.has(c)){this.clearTimersOnDispose_();b=Ia(this,b);var e=this.requestAnimationFrame(function(){b();if(a.namedRafs_.has(c))a.namedRafs_["delete"](c)});this.namedRafs_.set(c,e);return c}};d.cancelNamedAnimationFrame=function(c){this.namedRafs_.has(c)&&(this.cancelAnimationFrame(this.namedRafs_.get(c)),this.namedRafs_["delete"](c))};d.cancelAnimationFrame=function(c){if(!this.supportsRaf_)return this.clearTimeout(c);
this.rafIds_.has(c)&&(this.rafIds_["delete"](c),da.cancelAnimationFrame(c));return c};d.clearTimersOnDispose_=function(){var c=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var a=b[1];c[b[0]].forEach(function(e,n){return c[a](n)})});c.clearingTimersOnDispose_=!1}))};h.registerComponent=
function(c,b){if("string"!==typeof c||!c)throw Error('Illegal component name, "'+c+'"; must be a non-empty string.');var a=h.getComponent("Tech");a=a&&a.isTech(b);var e=h===b||h.prototype.isPrototypeOf(b.prototype);if(a||!e)throw Error('Illegal component, "'+c+'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");c=$a(c);h.components_||(h.components_={});a=h.getComponent("Player");if("Player"===c&&a&&a.players){var n=a.players;a=Object.keys(n);if(n&&0<
a.length&&a.map(function(q){return n[q]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}h.components_[c]=b;return h.components_[cf(c)]=b};h.getComponent=function(c){if(c&&h.components_)return h.components_[c]};return h}();ja.prototype.supportsRaf_="function"===typeof da.requestAnimationFrame&&"function"===typeof da.cancelAnimationFrame;ja.registerComponent("Component",ja);var Ha=function(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return h};w(function(h){function d(c){"@babel/helpers - typeof";h.exports="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?d=function(b){return typeof b}:d=function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return d(c)}h.exports=d});w(function(h){function d(c){h.exports=d=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return d(c)}h.exports=d});var ua=function(h,d){h.prototype=
Object.create(d.prototype);h.prototype.constructor=h;h.__proto__=d};yb.prototype.code=0;yb.prototype.message="";yb.prototype.status=null;yb.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");yb.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ud=0;ud<yb.errorTypes.length;ud++)yb[yb.errorTypes[ud]]=ud,yb.prototype[yb.errorTypes[ud]]=ud;var Og=function(h){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(d,c,b){h[c]&&(d[c]=h[c]);return d},{cues:h.cues&&Array.prototype.map.call(h.cues,function(d){return{startTime:d.startTime,
endTime:d.endTime,text:d.text,id:d.id}})})},dk={textTracksToJson:function(h){var d=h.doubleDollar("track"),c=Array.prototype.map.call(d,function(b){return b.track});return Array.prototype.map.call(d,function(b){var a=Og(b.track);b.src&&(a.src=b.src);return a}).concat(Array.prototype.filter.call(h.textTracks(),function(b){return-1===c.indexOf(b)}).map(Og))},jsonToTextTracks:function(h,d){h.forEach(function(c){var b=d.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(function(a){return b.addCue(a)})});
return d.textTracks()},trackToJson_:Og},Da=w(function(h,d){function c(q){if(q&&"object"===typeof q){var t=q.which||q.keyCode||q.charCode;t&&(q=t)}if("number"===typeof q)return e[q];q=String(q);if((t=b[q.toLowerCase()])||(t=a[q.toLowerCase()]))return t;if(1===q.length)return q.charCodeAt(0)}c.isEventKey=function(q,t){if(q&&"object"===typeof q){q=q.which||q.keyCode||q.charCode;if(null===q||void 0===q)return!1;if("string"===typeof t){var v=b[t.toLowerCase()];if(v||(v=a[t.toLowerCase()]))return v===q}else if("number"===
typeof t)return t===q;return!1}};d=h.exports=c;var b=d.code=d.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,
"`":192,"[":219,"\\":220,"]":221,"'":222},a=d.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(h=97;123>h;h++)b[String.fromCharCode(h)]=h-32;for(h=48;58>h;h++)b[h-48]=h;for(h=1;13>h;h++)b["f"+h]=h+111;for(h=0;10>h;h++)b["numpad "+h]=h+96;var e=d.names=d.title={};for(h in b)e[b[h]]=h;for(var n in a)b[n]=a[n]});Da.code;Da.codes;Da.aliases;Da.names;
Da.title;var vd=function(h){function d(b,a){b=h.call(this,b,a)||this;b.opened_=b.hasBeenOpened_=b.hasBeenFilled_=!1;b.closeable(!b.options_.uncloseable);b.content(b.options_.content);b.contentEl_=Ma("div",{className:"vjs-modal-dialog-content"},{role:"document"});b.descEl_=Ma("p",{className:"vjs-modal-dialog-description vjs-control-text",id:b.el().getAttribute("aria-describedby")});qc(b.descEl_,b.description());b.el_.appendChild(b.descEl_);b.el_.appendChild(b.contentEl_);return b}ua(d,h);var c=d.prototype;
c.createEl=function(){return h.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};c.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;h.prototype.dispose.call(this)};c.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+h.prototype.buildCSSClass.call(this)};c.label=function(){return this.localize(this.options_.label||"Modal Window")};
c.description=function(){var b=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(b+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return b};c.open=function(){if(!this.opened_){var b=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!b.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&b.pause();
this.on("keydown",this.handleKeyDown);this.hadControls_=b.controls();b.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};c.opened=function(b){if("boolean"===typeof b)this[b?"open":"close"]();return this.opened_};c.close=function(){if(this.opened_){var b=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&b.play();this.off("keydown",this.handleKeyDown);
this.hadControls_&&b.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};c.closeable=function(b){if("boolean"===typeof b){b=this.closeable_=!!b;var a=this.getChild("closeButton");if(b&&!a){var e=this.contentEl_;this.contentEl_=this.el_;a=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=e;this.on(a,"close",this.close)}!b&&a&&(this.off(a,"close",this.close),this.removeChild(a),
a.dispose())}return this.closeable_};c.fill=function(){this.fillWith(this.content())};c.fillWith=function(b){var a=this.contentEl(),e=a.parentNode,n=a.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;e.removeChild(a);this.empty();Ee(a,b);this.trigger("modalfill");n?e.insertBefore(a,n):e.appendChild(a);(b=this.getChild("closeButton"))&&e.appendChild(b.el_)};c.empty=function(){this.trigger("beforemodalempty");Kd(this.contentEl());this.trigger("modalempty")};c.content=function(b){"undefined"!==
typeof b&&(this.content_=b);return this.content_};c.conditionalFocus_=function(){var b=qa.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null;if(a.contains(b)||a===b)this.previouslyActiveEl_=b,this.focus()};c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};c.handleKeyDown=function(b){b.stopPropagation();if(Da.isEventKey(b,"Escape")&&this.closeable())b.preventDefault(),this.close();else if(Da.isEventKey(b,"Tab")){for(var a=
this.focusableEls_(),e=this.el_.querySelector(":focus"),n,q=0;q<a.length;q++)if(e===a[q]){n=q;break}qa.activeElement===this.el_&&(n=0);b.shiftKey&&0===n?(a[a.length-1].focus(),b.preventDefault()):b.shiftKey||n!==a.length-1||(a[0].focus(),b.preventDefault())}};c.focusableEls_=function(){var b=this.el_.querySelectorAll("*");return Array.prototype.filter.call(b,function(a){return(a instanceof da.HTMLAnchorElement||a instanceof da.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof da.HTMLInputElement||
a instanceof da.HTMLSelectElement||a instanceof da.HTMLTextAreaElement||a instanceof da.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof da.HTMLIFrameElement||a instanceof da.HTMLObjectElement||a instanceof da.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return d}(ja);vd.prototype.options_={pauseOnOpen:!0,temporary:!0};ja.registerComponent("ModalDialog",vd);var wd=function(h){function d(b){void 0===b&&(b=[]);var a=
h.call(this)||this;a.tracks_=[];Object.defineProperty(Ha(a),"length",{get:function(){return this.tracks_.length}});for(var e=0;e<b.length;e++)a.addTrack(b[e]);return a}ua(d,h);var c=d.prototype;c.addTrack=function(b){var a=this,e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}});-1===this.tracks_.indexOf(b)&&(this.tracks_.push(b),this.trigger({track:b,type:"addtrack",target:this}));b.labelchange_=function(){a.trigger({track:b,type:"labelchange",
target:a})};vc(b)&&b.addEventListener("labelchange",b.labelchange_)};c.removeTrack=function(b){for(var a,e=0,n=this.length;e<n;e++)if(this[e]===b){a=this[e];a.off&&a.off();this.tracks_.splice(e,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})};c.getTrackById=function(b){for(var a=null,e=0,n=this.length;e<n;e++){var q=this[e];if(q.id===b){a=q;break}}return a};return d}(mb);wd.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};
for(var wo in wd.prototype.allowedEvents_)wd.prototype["on"+wo]=null;var Pg=function(h,d){for(var c=0;c<h.length;c++)Object.keys(h[c]).length&&d.id!==h[c].id&&(h[c].enabled=!1)},xo=function(h){function d(b){void 0===b&&(b=[]);for(var a=b.length-1;0<=a;a--)if(b[a].enabled){Pg(b,b[a]);break}b=h.call(this,b)||this;b.changing_=!1;return b}ua(d,h);var c=d.prototype;c.addTrack=function(b){var a=this;b.enabled&&Pg(this,b);h.prototype.addTrack.call(this,b);b.addEventListener&&(b.enabledChange_=function(){a.changing_||
(a.changing_=!0,Pg(a,b),a.changing_=!1,a.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))};c.removeTrack=function(b){h.prototype.removeTrack.call(this,b);b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)};return d}(wd),Qg=function(h,d){for(var c=0;c<h.length;c++)Object.keys(h[c]).length&&d.id!==h[c].id&&(h[c].selected=!1)},yo=function(h){function d(b){void 0===b&&(b=[]);for(var a=b.length-1;0<=a;a--)if(b[a].selected){Qg(b,
b[a]);break}b=h.call(this,b)||this;b.changing_=!1;Object.defineProperty(Ha(b),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}});return b}ua(d,h);var c=d.prototype;c.addTrack=function(b){var a=this;b.selected&&Qg(this,b);h.prototype.addTrack.call(this,b);b.addEventListener&&(b.selectedChange_=function(){a.changing_||(a.changing_=!0,Qg(a,b),a.changing_=!1,a.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))};
c.removeTrack=function(b){h.prototype.removeTrack.call(this,b);b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)};return d}(wd),ek=function(h){function d(){return h.apply(this,arguments)||this}ua(d,h);var c=d.prototype;c.addTrack=function(b){var a=this;h.prototype.addTrack.call(this,b);this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=
function(){return a.trigger("selectedlanguagechange")});b.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)};c.removeTrack=function(b){h.prototype.removeTrack.call(this,b);b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return d}(wd),
zo=function(){function h(c){void 0===c&&(c=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,a=c.length;b<a;b++)this.addTrackElement_(c[b])}var d=h.prototype;d.addTrackElement_=function(c){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(c)&&this.trackElements_.push(c)};d.getTrackElementByTrack_=function(c){for(var b,
a=0,e=this.trackElements_.length;a<e;a++)if(c===this.trackElements_[a].track){b=this.trackElements_[a];break}return b};d.removeTrackElement_=function(c){for(var b=0,a=this.trackElements_.length;b<a;b++)if(c===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();this.trackElements_.splice(b,1);break}};return h}(),fk=function(){function h(c){h.prototype.setCues_.call(this,
c);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var d=h.prototype;d.setCues_=function(c){var b=this.length||0,a=0,e=c.length;this.cues_=c;this.length_=c.length;c=function(n){""+n in this||Object.defineProperty(this,""+n,{get:function(){return this.cues_[n]}})};if(b<e)for(a=b;a<e;a++)c.call(this,a)};d.getCueById=function(c){for(var b=null,a=0,e=this.length;a<e;a++){var n=this[a];if(n.id===c){b=n;break}}return b};return h}(),Ao={alternative:"alternative",captions:"captions",
main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Bo={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Co={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},gk={disabled:"disabled",hidden:"hidden",showing:"showing"},Rg=function(h){function d(c){void 0===c&&(c={});var b=h.call(this)||this;var a={id:c.id||"vjs_track_"+Gc++,kind:c.kind||
"",language:c.language||""},e=c.label||"";c=function(q){Object.defineProperty(Ha(b),q,{get:function(){return a[q]},set:function(){}})};for(var n in a)c(n);Object.defineProperty(Ha(b),"label",{get:function(){return e},set:function(q){q!==e&&(e=q,this.trigger("labelchange"))}});return b}ua(d,h);return d}(mb),Sg=function(h){var d="protocol hostname port pathname search hash host".split(" "),c=qa.createElement("a");c.href=h;var b=""===c.host&&"file:"!==c.protocol;if(b){var a=qa.createElement("div");a.innerHTML=
'<a href="'+h+'"></a>';c=a.firstChild;a.setAttribute("style","display:none; position:absolute;");qa.body.appendChild(a)}h={};for(var e=0;e<d.length;e++)h[d[e]]=c[d[e]];"http:"===h.protocol&&(h.host=h.host.replace(/:80$/,""));"https:"===h.protocol&&(h.host=h.host.replace(/:443$/,""));h.protocol||(h.protocol=da.location.protocol);b&&qa.body.removeChild(a);return h},hk=function(h){if(!h.match(/^https?:\/\//)){var d=qa.createElement("div");d.innerHTML='<a href="'+h+'">x</a>';h=d.firstChild.href}return h},
Tg=function(h){return"string"===typeof h&&(h=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(h))?h.pop().toLowerCase():""},df=function(h,d){void 0===d&&(d=da.location);h=Sg(h);return(":"===h.protocol?d.protocol:h.protocol)+h.host!==d.protocol+d.host},Do={__proto__:null,parseUrl:Sg,getAbsoluteURL:hk,getFileExtension:Tg,isCrossOrigin:df},ik="undefined"!==typeof window?window:"undefined"!==typeof Gb?Gb:"undefined"!==typeof self?self:{},Sn=Object.prototype.toString,Tn=function(h){var d=
{};if(!h)return d;h.trim().split("\n").forEach(function(c){var b=c.indexOf(":"),a=c.slice(0,b).trim().toLowerCase();c=c.slice(b+1).trim();"undefined"===typeof d[a]?d[a]=c:Array.isArray(d[a])?d[a].push(c):d[a]=[d[a],c]});return d};ac.XMLHttpRequest=ik.XMLHttpRequest||Un;ac.XDomainRequest="withCredentials"in new ac.XMLHttpRequest?ac.XMLHttpRequest:ik.XDomainRequest;(function(h,d){for(var c=0;c<h.length;c++)d(h[c])})("get put post patch head delete".split(" "),function(h){ac["delete"===h?"del":h]=function(d,
c,b){c=bj(d,c,b);c.method=h.toUpperCase();return cj(c)}});ac["default"]=ac;var jk=function(h,d){var c=new da.WebVTT.Parser(da,da.vttjs,da.WebVTT.StringDecoder()),b=[];c.oncue=function(a){d.addCue(a)};c.onparsingerror=function(a){b.push(a)};c.onflush=function(){d.trigger({type:"loadeddata",target:d})};c.parse(h);0<b.length&&(da.console&&da.console.groupCollapsed&&da.console.groupCollapsed("Text Track parsing errors for "+d.src),b.forEach(function(a){return Ga.error(a)}),da.console&&da.console.groupEnd&&
da.console.groupEnd());c.flush()},kk=function(h,d){var c={uri:h};if(h=df(h))c.cors=h;if(h="use-credentials"===d.tech_.crossOrigin())c.withCredentials=h;ac(c,Ia(this,function(b,a,e){if(b)return Ga.error(b,a);d.loaded_=!0;"function"!==typeof da.WebVTT?d.tech_&&d.tech_.any(["vttjsloaded","vttjserror"],function(n){if("vttjserror"===n.type)Ga.error("vttjs failed to load, stopping trying to process "+d.src);else return jk(e,d)}):jk(e,d)}))},de=function(h){function d(b){void 0===b&&(b={});if(!b.tech)throw Error("A tech was not provided.");
b=Ta(b,{kind:Co[b.kind]||"subtitles",language:b.language||b.srclang||""});var a=gk[b.mode]||"disabled",e=b["default"];if("metadata"===b.kind||"chapters"===b.kind)a="hidden";var n=h.call(this,b)||this;n.tech_=b.tech;n.cues_=[];n.activeCues_=[];n.preload_=!1!==n.tech_.preloadTextTracks;var q=new fk(n.cues_),t=new fk(n.activeCues_),v=!1,r=Ia(Ha(n),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,v&&(this.trigger("cuechange"),v=!1))});n.tech_.one("dispose",function(){n.tech_.off("timeupdate",
r)});if("disabled"!==a)n.tech_.on("timeupdate",r);Object.defineProperties(Ha(n),{"default":{get:function(){return e},set:function(){}},mode:{get:function(){return a},set:function(p){if(gk[p]&&a!==p){a=p;this.preload_||"disabled"===a||0!==this.cues.length||kk(this.src,this);this.tech_.off("timeupdate",r);if("disabled"!==a)this.tech_.on("timeupdate",r);this.trigger("modechange")}}},cues:{get:function(){return this.loaded_?q:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;
if(0===this.cues.length)return t;for(var p=this.tech_.currentTime(),m=[],l=0,f=this.cues.length;l<f;l++){var g=this.cues[l];g.startTime<=p&&g.endTime>=p?m.push(g):g.startTime===g.endTime&&g.startTime<=p&&g.startTime+.5>=p&&m.push(g)}v=!1;if(m.length!==this.activeCues_.length)v=!0;else for(p=0;p<m.length;p++)-1===this.activeCues_.indexOf(m[p])&&(v=!0);this.activeCues_=m;t.setCues_(this.activeCues_);return t},set:function(){}}});b.src?(n.src=b.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==
b.kind&&"captions"!==b.kind)&&kk(n.src,Ha(n))):n.loaded_=!0;return n}ua(d,h);var c=d.prototype;c.addCue=function(b){var a=b;if(da.vttjs&&!(b instanceof da.vttjs.VTTCue)){a=new da.vttjs.VTTCue(b.startTime,b.endTime,b.text);for(var e in b)e in a||(a[e]=b[e]);a.id=b.id;a.originalCue_=b}b=this.tech_.textTracks();for(e=0;e<b.length;e++)b[e]!==this&&b[e].removeCue(a);this.cues_.push(a);this.cues.setCues_(this.cues_)};c.removeCue=function(b){for(var a=this.cues_.length;a--;){var e=this.cues_[a];if(e===b||
e.originalCue_&&e.originalCue_===b){this.cues_.splice(a,1);this.cues.setCues_(this.cues_);break}}};return d}(Rg);de.prototype.allowedEvents_={cuechange:"cuechange"};var lk=function(h){function d(c){void 0===c&&(c={});var b=Ta(c,{kind:Bo[c.kind]||""});c=h.call(this,b)||this;var a=!1;Object.defineProperty(Ha(c),"enabled",{get:function(){return a},set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}});b.enabled&&(c.enabled=b.enabled);c.loaded_=!0;return c}ua(d,h);return d}(Rg),
mk=function(h){function d(c){void 0===c&&(c={});var b=Ta(c,{kind:Ao[c.kind]||""});c=h.call(this,b)||this;var a=!1;Object.defineProperty(Ha(c),"selected",{get:function(){return a},set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}});b.selected&&(c.selected=b.selected);return c}ua(d,h);return d}(Rg),xd=function(h){function d(c){void 0===c&&(c={});var b=h.call(this)||this;var a=new de(c);b.kind=a.kind;b.src=a.src;b.srclang=a.language;b.label=a.label;b["default"]=a["default"];
Object.defineProperties(Ha(b),{readyState:{get:function(){return e}},track:{get:function(){return a}}});var e=0;a.addEventListener("loadeddata",function(){e=2;b.trigger({type:"load",target:Ha(b)})});return b}ua(d,h);return d}(mb);xd.prototype.allowedEvents_={load:"load"};xd.NONE=0;xd.LOADING=1;xd.LOADED=2;xd.ERROR=3;var Sb={audio:{ListClass:xo,TrackClass:lk,capitalName:"Audio"},video:{ListClass:yo,TrackClass:mk,capitalName:"Video"},text:{ListClass:ek,TrackClass:de,capitalName:"Text"}};Object.keys(Sb).forEach(function(h){Sb[h].getterName=
h+"Tracks";Sb[h].privateName=h+"Tracks_"});var yd={remoteText:{ListClass:ek,TrackClass:de,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:zo,TrackClass:xd,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Bb=Me({},Sb,yd);yd.names=Object.keys(yd);Sb.names=Object.keys(Sb);Bb.names=[].concat(yd.names).concat(Sb.names);var pg=Object.create||function(){function h(){}return function(d){if(1!==
arguments.length)throw Error("Object.create shim only accepts one parameter.");h.prototype=d;return new h}}();Mb.prototype=pg(Error.prototype);Mb.prototype.constructor=Mb;Mb.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Td.prototype={set:function(h,d){this.get(h)||""===d||(this.values[h]=d)},get:function(h,d,c){return c?this.has(h)?this.values[h]:d[c]:this.has(h)?this.values[h]:d},has:function(h){return h in this.values},
alt:function(h,d,c){for(var b=0;b<c.length;++b)if(d===c[b]){this.set(h,d);break}},integer:function(h,d){/^-?\d+$/.test(d)&&this.set(h,parseInt(d,10))},percent:function(h,d){return d.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(d=parseFloat(d),0<=d&&100>=d)?(this.set(h,d),!0):!1}};var qg=qa.createElement("textarea"),Wn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},fj={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",
magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Xn={v:"title",lang:"lang"},ej={rt:"ruby"},gj=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],
[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],
[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],
[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];rg.prototype.applyStyles=function(h,d){d=d||this.div;for(var c in h)h.hasOwnProperty(c)&&(d.style[c]=h[c])};rg.prototype.formatStyle=function(h,d){return 0===h?0:h+d};Pe.prototype=pg(rg.prototype);Pe.prototype.constructor=Pe;zb.prototype.move=function(h,d){d=void 0!==d?d:this.lineHeight;switch(h){case "+x":this.left+=d;this.right+=d;break;case "-x":this.left-=d;this.right-=d;break;case "+y":this.top+=d;this.bottom+=
d;break;case "-y":this.top-=d,this.bottom-=d}};zb.prototype.overlaps=function(h){return this.left<h.right&&this.right>h.left&&this.top<h.bottom&&this.bottom>h.top};zb.prototype.overlapsAny=function(h){for(var d=0;d<h.length;d++)if(this.overlaps(h[d]))return!0;return!1};zb.prototype.within=function(h){return this.top>=h.top&&this.bottom<=h.bottom&&this.left>=h.left&&this.right<=h.right};zb.prototype.overlapsOppositeAxis=function(h,d){switch(d){case "+x":return this.left<h.left;case "-x":return this.right>
h.right;case "+y":return this.top<h.top;case "-y":return this.bottom>h.bottom}};zb.prototype.intersectPercentage=function(h){return Math.max(0,Math.min(this.right,h.right)-Math.max(this.left,h.left))*Math.max(0,Math.min(this.bottom,h.bottom)-Math.max(this.top,h.top))/(this.height*this.width)};zb.prototype.toCSSCompatValues=function(h){return{top:this.top-h.top,bottom:h.bottom-this.bottom,left:this.left-h.left,right:h.right-this.right,height:this.height,width:this.width}};zb.getSimpleBoxPosition=function(h){var d=
h.div?h.div.offsetHeight:h.tagName?h.offsetHeight:0,c=h.div?h.div.offsetWidth:h.tagName?h.offsetWidth:0,b=h.div?h.div.offsetTop:h.tagName?h.offsetTop:0;h=h.div?h.div.getBoundingClientRect():h.tagName?h.getBoundingClientRect():h;return{left:h.left,right:h.right,top:h.top||b,height:h.height||d,bottom:h.bottom||b+(h.height||d),width:h.width||c}};md.StringDecoder=function(){return{decode:function(h){if(!h)return"";if("string"!==typeof h)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(h))}}};
md.convertCueToDOMTree=function(h,d){return h&&d?dj(h,d):null};md.processCues=function(h,d,c){if(!h||!d||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var b=h.document.createElement("div");b.style.position="absolute";b.style.left="0";b.style.right="0";b.style.top="0";b.style.bottom="0";b.style.margin="1.5%";c.appendChild(b);if(function(q){for(var t=0;t<q.length;t++)if(q[t].hasBeenReset||!q[t].displayState)return!0;return!1}(d)){var a=[],e=zb.getSimpleBoxPosition(b),n={font:Math.round(5*
e.height)/100+"px sans-serif"};(function(){for(var q,t,v=0;v<d.length;v++){t=d[v];q=new Pe(h,t,n);b.appendChild(q.div);var r=void 0,p=void 0,m=q,l=e,f=a,g=new zb(m),k=m.cue;if("number"===typeof k.line&&(k.snapToLines||0<=k.line&&100>=k.line))var u=k.line;else if(k.track&&k.track.textTrackList&&k.track.textTrackList.mediaElement){u=k.track;for(var x=u.textTrackList,A=0,H=0;H<x.length&&x[H]!==u;H++)"showing"===x[H].mode&&A++;u=-1*++A}else u=-1;x=[];if(k.snapToLines){switch(k.vertical){case "":x=["+y",
"-y"];p="height";break;case "rl":x=["+x","-x"];p="width";break;case "lr":x=["-x","+x"],p="width"}A=g.lineHeight;H=A*Math.round(u);p=l[p]+A;var R=x[0];Math.abs(H)>p&&(H=(0>H?-1:1)*Math.ceil(p/A)*A);0>u&&(H+=""===k.vertical?l.height:l.width,x=x.reverse());g.move(R,H)}else{g=g.lineHeight/l.height*100;switch(k.lineAlign){case "center":u-=g/2;break;case "end":u-=g}switch(k.vertical){case "":m.applyStyles({top:m.formatStyle(u,"%")});break;case "rl":m.applyStyles({left:m.formatStyle(u,"%")});break;case "lr":m.applyStyles({right:m.formatStyle(u,
"%")})}x=["+y","-x","+x","-y"];g=new zb(m)}a:{k=g;g=x;p=new zb(k);u=1;for(x=0;x<g.length;x++){for(;k.overlapsOppositeAxis(l,g[x])||k.within(l)&&k.overlapsAny(f);)k.move(g[x]);if(k.within(l)){r=k;break a}A=k.intersectPercentage(l);u>A&&(r=new zb(k),u=A);k=new zb(p)}r=r||p}m.move(r.toCSSCompatValues(l));t.displayState=q.div;a.push(zb.getSimpleBoxPosition(q))}})()}else for(c=0;c<d.length;c++)b.appendChild(d[c].displayState)};md.Parser=function(h,d,c){c||(c=d,d={});d||(d={});this.window=h;this.vttjs=
d;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};md.Parser.prototype={reportOrThrowError:function(h){if(h instanceof Mb)this.onparsingerror&&this.onparsingerror(h);else throw h;},parse:function(h){function d(){for(var v=e.buffer,r=0;r<v.length&&"\r"!==v[r]&&"\n"!==v[r];)++r;var p=v.substr(0,r);"\r"===v[r]&&++r;"\n"===v[r]&&++r;e.buffer=v.substr(r);return p}function c(v){var r=new Td;Ud(v,function(p,m){switch(p){case "id":r.set(p,m);break;case "width":r.percent(p,
m);break;case "lines":r.integer(p,m);break;case "regionanchor":case "viewportanchor":m=m.split(",");if(2!==m.length)break;var l=new Td;l.percent("x",m[0]);l.percent("y",m[1]);if(!l.has("x")||!l.has("y"))break;r.set(p+"X",l.get("x"));r.set(p+"Y",l.get("y"));break;case "scroll":r.alt(p,m,["up"])}},/=/,/\s/);r.has("id")&&(v=new (e.vttjs.VTTRegion||e.window.VTTRegion),v.width=r.get("width",100),v.lines=r.get("lines",3),v.regionAnchorX=r.get("regionanchorX",0),v.regionAnchorY=r.get("regionanchorY",100),
v.viewportAnchorX=r.get("viewportanchorX",0),v.viewportAnchorY=r.get("viewportanchorY",100),v.scroll=r.get("scroll",""),e.onregion&&e.onregion(v),e.regionList.push({id:r.get("id"),region:v}))}function b(v){var r=new Td;Ud(v,function(p,m){switch(p){case "MPEGT":r.integer(p+"S",m);break;case "LOCA":r.set(p+"L",og(m))}},/[^\d]:/,/,/);e.ontimestampmap&&e.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}function a(v){v.match(/X-TIMESTAMP-MAP/)?Ud(v,function(r,p){switch(r){case "X-TIMESTAMP-MAP":b(p)}},
/=/):Ud(v,function(r,p){switch(r){case "Region":c(p)}},/:/)}var e=this;h&&(e.buffer+=e.decoder.decode(h,{stream:!0}));try{if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=d();var q=n.match(/^WEBVTT([ \t].*)?$/);if(!q||!q[0])throw new Mb(Mb.Errors.BadSignature);e.state="HEADER"}for(h=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;h?h=!1:n=d();switch(e.state){case "HEADER":/:/.test(n)?a(n):n||(e.state="ID");continue;case "NOTE":n||(e.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(n)){e.state=
"NOTE";break}if(!n)continue;e.cue=new (e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch(v){e.cue.align="middle"}e.state="CUE";if(-1===n.indexOf("--\x3e")){e.cue.id=n;continue}case "CUE":try{Vn(n,e.cue,e.regionList)}catch(v){e.reportOrThrowError(v);e.cue=null;e.state="BADCUE";continue}e.state="CUETEXT";continue;case "CUETEXT":var t=-1!==n.indexOf("--\x3e");if(!n||t&&(h=!0)){e.oncue&&e.oncue(e.cue);e.cue=null;e.state="ID";continue}e.cue.text&&(e.cue.text+="\n");e.cue.text+=n.replace(/\u2028/g,
"\n").replace(/u2029/g,"\n");continue;case "BADCUE":n||(e.state="ID")}}}catch(v){e.reportOrThrowError(v);if("CUETEXT"===e.state&&e.cue&&e.oncue)e.oncue(e.cue);e.cue=null;e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new Mb(Mb.Errors.BadSignature);}catch(h){this.reportOrThrowError(h)}this.onflush&&this.onflush();return this}};var ao=
{"":1,lr:1,rl:1},$n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};hj.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Eo={"":!0,up:!0},Fo=function(){var h=100,d=3,c=0,b=100,a=0,e=100,n="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return h},set:function(q){if(!Vd(q))throw Error("Width must be between 0 and 100.");h=q}},lines:{enumerable:!0,get:function(){return d},set:function(q){if("number"!==typeof q)throw new TypeError("Lines must be set to a number.");
d=q}},regionAnchorY:{enumerable:!0,get:function(){return b},set:function(q){if(!Vd(q))throw Error("RegionAnchorX must be between 0 and 100.");b=q}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(q){if(!Vd(q))throw Error("RegionAnchorY must be between 0 and 100.");c=q}},viewportAnchorY:{enumerable:!0,get:function(){return e},set:function(q){if(!Vd(q))throw Error("ViewportAnchorY must be between 0 and 100.");e=q}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(q){if(!Vd(q))throw Error("ViewportAnchorX must be between 0 and 100.");
a=q}},scroll:{enumerable:!0,get:function(){return n},set:function(q){q="string"!==typeof q?!1:Eo[q.toLowerCase()]?q.toLowerCase():!1;!1===q?console.warn("Scroll: an invalid or illegal string was specified."):n=q}}})},ee=w(function(h){h=h.exports={WebVTT:md,VTTCue:hj,VTTRegion:Fo};da.vttjs=h;da.WebVTT=h.WebVTT;var d=h.VTTCue,c=h.VTTRegion,b=da.VTTCue,a=da.VTTRegion;h.shim=function(){da.VTTCue=d;da.VTTRegion=c};h.restore=function(){da.VTTCue=b;da.VTTRegion=a};da.VTTCue||h.shim()});ee.WebVTT;ee.VTTCue;
ee.VTTRegion;var Sa=function(h){function d(b,a){void 0===b&&(b={});void 0===a&&(a=function(){});b.reportTouchActivity=!1;var e=h.call(this,null,b,a)||this;e.hasStarted_=!1;e.on("playing",function(){this.hasStarted_=!0});e.on("loadstart",function(){this.hasStarted_=!1});Bb.names.forEach(function(n){n=Bb[n];b&&b[n.getterName]&&(e[n.privateName]=b[n.getterName])});e.featuresProgressEvents||e.manualProgressOn();e.featuresTimeupdateEvents||e.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(n){!1===
b["native"+n+"Tracks"]&&(e["featuresNative"+n+"Tracks"]=!1)});if(!1===b.nativeCaptions||!1===b.nativeTextTracks)e.featuresNativeTextTracks=!1;else if(!0===b.nativeCaptions||!0===b.nativeTextTracks)e.featuresNativeTextTracks=!0;e.featuresNativeTextTracks||e.emulateTextTracks();e.preloadTextTracks=!1!==b.preloadTextTracks;e.autoRemoteTextTracks_=new Bb.text.ListClass;e.initTrackListeners();b.nativeControlsForTouch||e.emitTapEvents();e.constructor&&(e.name_=e.constructor.name||"Unknown Tech");return e}
ua(d,h);var c=d.prototype;c.triggerSourceset=function(b){var a=this;if(!this.isReady_)this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(b)},1)});this.trigger({src:b,type:"sourceset"})};c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};c.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};c.trackProgress=
function(b){this.stopTrackingProgress();this.progressInterval=this.setInterval(Ia(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};c.onDurationChange=function(b){this.duration_=this.duration()};c.buffered=function(){return Uc(0,0)};c.bufferedPercent=function(){return aj(this.buffered(),this.duration_)};c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};c.manualTimeUpdatesOn=
function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},
250)};c.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};c.dispose=function(){this.clearTracks(Sb.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();h.prototype.dispose.call(this)};c.clearTracks=function(b){var a=this;b=[].concat(b);b.forEach(function(e){for(var n=a[e+"Tracks"]()||[],q=n.length;q--;){var t=n[q];"text"===e&&a.removeRemoteTextTrack(t);
n.removeTrack(t)}})};c.cleanupAutoTextTracks=function(){for(var b=this.autoRemoteTextTracks_||[],a=b.length;a--;)this.removeRemoteTextTrack(b[a])};c.reset=function(){};c.crossOrigin=function(){};c.setCrossOrigin=function(){};c.error=function(b){void 0!==b&&(this.error_=new yb(b),this.trigger("error"));return this.error_};c.played=function(){return this.hasStarted_?Uc(0,0):Uc()};c.play=function(){};c.setScrubbing=function(){};c.scrubbing=function(){};c.setCurrentTime=function(){this.manualTimeUpdates&&
this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};c.initTrackListeners=function(){var b=this;Sb.names.forEach(function(a){var e=function(){b.trigger(a+"trackchange")},n=b[Sb[a].getterName]();n.addEventListener("removetrack",e);n.addEventListener("addtrack",e);b.on("dispose",function(){n.removeEventListener("removetrack",e);n.removeEventListener("addtrack",e)})})};c.addWebVttScript_=function(){var b=this;if(!da.WebVTT)if(qa.body.contains(this.el()))if(!this.options_["vtt.js"]&&pa(ee)&&
0<Object.keys(ee).length)this.trigger("vttjsloaded");else{var a=qa.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";a.onload=function(){b.trigger("vttjsloaded")};a.onerror=function(){b.trigger("vttjserror")};this.on("dispose",function(){a.onload=null;a.onerror=null});da.WebVTT=!0;this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)};c.emulateTextTracks=function(){var b=this,a=this.textTracks(),e=this.remoteTextTracks(),n=
function(r){return a.addTrack(r.track)},q=function(r){return a.removeTrack(r.track)};e.on("addtrack",n);e.on("removetrack",q);this.addWebVttScript_();var t=function(){return b.trigger("texttrackchange")},v=function(){t();for(var r=0;r<a.length;r++){var p=a[r];p.removeEventListener("cuechange",t);"showing"===p.mode&&p.addEventListener("cuechange",t)}};v();a.addEventListener("change",v);a.addEventListener("addtrack",v);a.addEventListener("removetrack",v);this.on("dispose",function(){e.off("addtrack",
n);e.off("removetrack",q);a.removeEventListener("change",v);a.removeEventListener("addtrack",v);a.removeEventListener("removetrack",v);for(var r=0;r<a.length;r++)a[r].removeEventListener("cuechange",t)})};c.addTextTrack=function(b,a,e){if(!b)throw Error("TextTrack kind is required but was not provided");var n=void 0;void 0===n&&(n={});var q=this.textTracks();n.kind=b;a&&(n.label=a);e&&(n.language=e);n.tech=this;b=new Bb.text.TrackClass(n);q.addTrack(b);return b};c.createRemoteTextTrack=function(b){b=
Ta(b,{tech:this});return new yd.remoteTextEl.TrackClass(b)};c.addRemoteTextTrack=function(b,a){var e=this;void 0===b&&(b={});var n=this.createRemoteTextTrack(b);!0!==a&&!1!==a&&(Ga.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0);this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);!0!==a&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(n.track)});
return n};c.removeRemoteTextTrack=function(b){var a=this.remoteTextTrackEls().getTrackElementByTrack_(b);this.remoteTextTrackEls().removeTrackElement_(a);this.remoteTextTracks().removeTrack(b);this.autoRemoteTextTracks_.removeTrack(b)};c.getVideoPlaybackQuality=function(){return{}};c.requestPictureInPicture=function(){var b=this.options_.Promise||da.Promise;if(b)return b.reject()};c.disablePictureInPicture=function(){return!0};c.setDisablePictureInPicture=function(){};c.setPoster=function(){};c.playsinline=
function(){};c.setPlaysinline=function(){};c.overrideNativeAudioTracks=function(){};c.overrideNativeVideoTracks=function(){};c.canPlayType=function(){return""};d.canPlayType=function(){return""};d.canPlaySource=function(b,a){return d.canPlayType(b.type)};d.isTech=function(b){return b.prototype instanceof d||b instanceof d||b===d};d.registerTech=function(b,a){d.techs_||(d.techs_={});if(!d.isTech(a))throw Error("Tech "+b+" must be a Tech");if(!d.canPlayType)throw Error("Techs must have a static canPlayType method on them");
if(!d.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");b=$a(b);d.techs_[b]=a;d.techs_[cf(b)]=a;"Tech"!==b&&d.defaultTechOrder_.push(b);return a};d.getTech=function(b){if(b){if(d.techs_&&d.techs_[b])return d.techs_[b];b=$a(b);if(da&&da.videojs&&da.videojs[b])return Ga.warn("The "+b+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),da.videojs[b]}};return d}(ja);Bb.names.forEach(function(h){var d=Bb[h];Sa.prototype[d.getterName]=
function(){this[d.privateName]=this[d.privateName]||new d.ListClass;return this[d.privateName]}});Sa.prototype.featuresVolumeControl=!0;Sa.prototype.featuresMuteControl=!0;Sa.prototype.featuresFullscreenResize=!1;Sa.prototype.featuresPlaybackRate=!1;Sa.prototype.featuresProgressEvents=!1;Sa.prototype.featuresSourceset=!1;Sa.prototype.featuresTimeupdateEvents=!1;Sa.prototype.featuresNativeTextTracks=!1;Sa.withSourceHandlers=function(h){h.registerSourceHandler=function(d,c){var b=h.sourceHandlers;b||
(b=h.sourceHandlers=[]);void 0===c&&(c=b.length);b.splice(c,0,d)};h.canPlayType=function(d){for(var c=h.sourceHandlers||[],b,a=0;a<c.length;a++)if(b=c[a].canPlayType(d))return b;return""};h.selectSourceHandler=function(d,c){for(var b=h.sourceHandlers||[],a,e=0;e<b.length;e++)if(a=b[e].canHandleSource(d,c))return b[e];return null};h.canPlaySource=function(d,c){var b=h.selectSourceHandler(d,c);return b?b.canHandleSource(d,c):""};["seekable","seeking","duration"].forEach(function(d){var c=this[d];"function"===
typeof c&&(this[d]=function(){return this.sourceHandler_&&this.sourceHandler_[d]?this.sourceHandler_[d].apply(this.sourceHandler_,arguments):c.apply(this,arguments)})},h.prototype);h.prototype.setSource=function(d){var c=h.selectSourceHandler(d,this.options_);c||(h.nativeSourceHandler?c=h.nativeSourceHandler:Ga.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==h.nativeSourceHandler&&(this.currentSource_=d);this.sourceHandler_=
c.handleSource(d,this,this.options_);this.one("dispose",this.disposeSourceHandler)};h.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};ja.registerComponent("Tech",Sa);Sa.registerTech("Tech",Sa);Sa.defaultTechOrder_=[];var Wc={},ug={},Qe={},Go={buffered:1,currentTime:1,duration:1,muted:1,
played:1,paused:1,seekable:1,volume:1},Ho={setCurrentTime:1,setMuted:1,setVolume:1},nk={play:1,pause:1},Io={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Re=function(h){void 0===h&&(h="");h=Tg(h);
return Io[h.toLowerCase()]||""},Jo=function(h,d){if(!d)return"";if(h.cache_.source.src===d&&h.cache_.source.type)return h.cache_.source.type;var c=h.cache_.sources.filter(function(a){return a.src===d});if(c.length)return c[0].type;h=h.doubleDollar("source");for(c=0;c<h.length;c++){var b=h[c];if(b.type&&b.src&&b.src===d)return b.type}return Re(d)},Ko=function c(d){if(Array.isArray(d)){var b=[];d.forEach(function(a){a=c(a);Array.isArray(a)?b=b.concat(a):ha(a)&&b.push(a)});d=b}else d="string"===typeof d&&
d.trim()?[jj({src:d})]:ha(d)&&"string"===typeof d.src&&d.src&&d.src.trim()?[jj(d)]:[];return d},Lo=function(d){function c(b,a,e){var n=Ta({createEl:!1},a);e=d.call(this,b,n,e)||this;if(a.playerOptions.sources&&0!==a.playerOptions.sources.length)b.src(a.playerOptions.sources);else for(n=0,a=a.playerOptions.techOrder;n<a.length;n++){var q=$a(a[n]),t=Sa.getTech(q);q||(t=ja.getComponent(q));if(t&&t.isSupported()){b.loadTech_(q);break}}return e}ua(c,d);return c}(ja);ja.registerComponent("MediaLoader",
Lo);var ef=function(d){function c(a,e){a=d.call(this,a,e)||this;a.emitTapEvents();a.enable();return a}ua(c,d);var b=c.prototype;b.createEl=function(a,e,n){void 0===a&&(a="div");void 0===e&&(e={});void 0===n&&(n={});e=X({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},e);"button"===a&&Ga.error("Creating a ClickableComponent with an HTML element of "+a+" is not supported; use a Button instead.");n=X({role:"button"},n);this.tabIndex_=
e.tabIndex;a=d.prototype.createEl.call(this,a,e,n);this.createControlTextEl(a);return a};b.dispose=function(){this.controlTextEl_=null;d.prototype.dispose.call(this)};b.createControlTextEl=function(a){this.controlTextEl_=Ma("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_};b.controlText=function(a,e){void 0===e&&(e=this.el());if(void 0===a)return this.controlText_||"Need Text";var n=
this.localize(a);this.controlText_=a;qc(this.controlTextEl_,n);this.nonIconControl||e.setAttribute("title",n)};b.buildCSSClass=function(){return"vjs-control vjs-button "+d.prototype.buildCSSClass.call(this)};b.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))};
b.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};b.handleLanguagechange=function(){this.controlText(this.controlText_)};b.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,
arguments)};b.handleKeyDown=function(a){Da.isEventKey(a,"Space")||Da.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):d.prototype.handleKeyDown.call(this,a)};return c}(ja);ja.registerComponent("ClickableComponent",ef);var Mo=function(d){function c(a,e){e=d.call(this,a,e)||this;e.update();a.on("posterchange",Ia(Ha(e),e.update));return e}ua(c,d);var b=c.prototype;b.dispose=function(){this.player().off("posterchange",this.update);d.prototype.dispose.call(this)};b.createEl=
function(){return Ma("div",{className:"vjs-poster",tabIndex:-1})};b.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};b.setSrc=function(a){var e="";a&&(e='url("'+a+'")');this.el_.style.backgroundImage=e};b.handleClick=function(a){this.player_.controls()&&(a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(be||ae)&&a||this.player_.tech(!0).focus(),this.player_.paused()?Hc(this.player_.play()):
this.player_.pause())};return c}(ef);ja.registerComponent("PosterImage",Mo);var No={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Oo=function(d){function c(a,e,n){e=d.call(this,
a,e,n)||this;var q=Ia(Ha(e),e.updateDisplay);a.on("loadstart",Ia(Ha(e),e.toggleDisplay));a.on("texttrackchange",q);a.on("loadedmetadata",Ia(Ha(e),e.preselectTrack));a.ready(Ia(Ha(e),function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",q);a.on("playerresize",q);da.addEventListener("orientationchange",q);a.on("dispose",function(){return da.removeEventListener("orientationchange",q)});for(var t=this.options_.playerOptions.tracks||[],v=0;v<t.length;v++)this.player_.addRemoteTextTrack(t[v],
!0);this.preselectTrack()}}));return e}ua(c,d);var b=c.prototype;b.preselectTrack=function(){for(var a={captions:1,subtitles:1},e=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,q,t,v,r=0;r<e.length;r++){var p=e[r];n&&n.enabled&&n.language&&n.language===p.language&&p.kind in a?p.kind===n.kind?v=p:v||(v=p):n&&!n.enabled?t=q=v=null:p["default"]&&("descriptions"!==p.kind||q?p.kind in a&&!t&&(t=p):q=p)}v?v.mode="showing":t?t.mode="showing":q&&(q.mode="showing")};b.toggleDisplay=function(){this.player_.tech_&&
this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};b.clearDisplay=function(){"function"===typeof da.WebVTT&&da.WebVTT.processCues(da,[],this.el_)};b.updateDisplay=function(){var a=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(e){e=[];for(var n=0;n<a.length;++n){var q=a[n];"showing"===q.mode&&
e.push(q)}this.updateForTrack(e)}else{n=e=null;for(q=a.length;q--;){var t=a[q];"showing"===t.mode&&("descriptions"===t.kind?e=t:n=t)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))}};b.updateDisplayState=function(a){var e=this.player_.textTrackSettings.getValues();a=a.activeCues;for(var n=a.length;n--;){var q=a[n];if(q){q=q.displayState;
e.color&&(q.firstChild.style.color=e.color);if(e.textOpacity){var t=vg(e.color||"#fff",e.textOpacity);try{q.firstChild.style.color=t}catch(v){}}e.backgroundColor&&(q.firstChild.style.backgroundColor=e.backgroundColor);if(e.backgroundOpacity){t=vg(e.backgroundColor||"#000",e.backgroundOpacity);try{q.firstChild.style.backgroundColor=t}catch(v){}}if(e.windowColor)if(e.windowOpacity){t=vg(e.windowColor,e.windowOpacity);try{q.style.backgroundColor=t}catch(v){}}else q.style.backgroundColor=e.windowColor;
e.edgeStyle&&("dropshadow"===e.edgeStyle?q.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?q.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===e.edgeStyle?q.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(q.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));e.fontPercent&&1!==e.fontPercent&&(t=da.parseFloat(q.style.fontSize),
q.style.fontSize=t*e.fontPercent+"px",q.style.height="auto",q.style.top="auto");e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?q.firstChild.style.fontVariant="small-caps":q.firstChild.style.fontFamily=No[e.fontFamily])}}};b.updateForTrack=function(a){Array.isArray(a)||(a=[a]);if("function"===typeof da.WebVTT&&!a.every(function(v){return!v.activeCues})){for(var e=[],n=0;n<a.length;++n)for(var q=a[n],t=0;t<q.activeCues.length;++t)e.push(q.activeCues[t]);da.WebVTT.processCues(da,
e,this.el_);for(e=0;e<a.length;++e){n=a[e];for(q=0;q<n.activeCues.length;++q)t=n.activeCues[q].displayState,Za(t,"vjs-text-track-cue"),Za(t,"vjs-text-track-cue-"+(n.language?n.language:e));this.player_.textTrackSettings&&this.updateDisplayState(n)}}};return c}(ja);ja.registerComponent("TextTrackDisplay",Oo);var Po=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);c.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":"Video Player");b=Ma("span",
{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[b])});var a=d.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});a.appendChild(b);return a};return c}(ja);ja.registerComponent("LoadingSpinner",Po);var cc=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);var b=c.prototype;b.createEl=function(a,e,n){void 0===e&&(e={});void 0===n&&(n={});a="button";e=X({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},
e);n=X({type:"button"},n);a=ja.prototype.createEl.call(this,a,e,n);this.createControlTextEl(a);return a};b.addChild=function(a,e){void 0===e&&(e={});Ga.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return ja.prototype.addChild.call(this,a,e)};b.enable=function(){d.prototype.enable.call(this);this.el_.removeAttribute("disabled")};b.disable=function(){d.prototype.disable.call(this);this.el_.setAttribute("disabled",
"disabled")};b.handleKeyDown=function(a){Da.isEventKey(a,"Space")||Da.isEventKey(a,"Enter")?a.stopPropagation():d.prototype.handleKeyDown.call(this,a)};return c}(ef);ja.registerComponent("Button",cc);var ok=function(d){function c(a,e){a=d.call(this,a,e)||this;a.mouseused_=!1;a.on("mousedown",a.handleMouseDown);return a}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-big-play-button"};b.handleClick=function(a){var e=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)a=this.player_.usingPlugin("eme")&&
this.player_.eme.sessions&&0<this.player_.eme.sessions.length,Hc(e),!this.player_.tech(!0)||(be||ae)&&a||this.player_.tech(!0).focus();else{var n=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");n?(a=function(){return n.focus()},Sd(e)?e.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};b.handleKeyDown=function(a){this.mouseused_=!1;d.prototype.handleKeyDown.call(this,a)};b.handleMouseDown=function(a){this.mouseused_=!0};return c}(cc);ok.prototype.controlText_=
"Play Video";ja.registerComponent("BigPlayButton",ok);var Qo=function(d){function c(a,e){a=d.call(this,a,e)||this;a.controlText(e&&e.controlText||a.localize("Close"));return a}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-close-button "+d.prototype.buildCSSClass.call(this)};b.handleClick=function(a){this.trigger({type:"close",bubbles:!1})};b.handleKeyDown=function(a){Da.isEventKey(a,"Esc")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):d.prototype.handleKeyDown.call(this,
a)};return c}(cc);ja.registerComponent("CloseButton",Qo);var pk=function(d){function c(a,e){void 0===e&&(e={});var n=d.call(this,a,e)||this;e.replay=void 0===e.replay||e.replay;n.on(a,"play",n.handlePlay);n.on(a,"pause",n.handlePause);if(e.replay)n.on(a,"ended",n.handleEnded);return n}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-play-control "+d.prototype.buildCSSClass.call(this)};b.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};b.handleSeeked=
function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};b.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};b.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};b.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",
this.handleSeeked)};return c}(cc);pk.prototype.controlText_="Play";ja.registerComponent("PlayToggle",pk);var qk=function(d,c){d=0>d?0:d;var b=Math.floor(d%60),a=Math.floor(d/60%60),e=Math.floor(d/3600),n=Math.floor(c/60%60);c=Math.floor(c/3600);if(isNaN(d)||Infinity===d)e=a=b="-";e=0<e||0<c?e+":":"";return e+(((e||10<=n)&&10>a?"0"+a:a)+":")+(10>b?"0"+b:b)},wg=qk,zd=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,["timeupdate","ended"],e.updateContent);e.updateTextNode_();return e}ua(c,
d);var b=c.prototype;b.createEl=function(){var a=this.buildCSSClass(),e=d.prototype.createEl.call(this,"div",{className:a+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=Ma("span",{className:a+"-display"},{"aria-live":"off",role:"presentation"});e.appendChild(this.contentEl_);return e};b.dispose=function(){this.textNode_=this.contentEl_=null;d.prototype.dispose.call(this)};b.updateTextNode_=
function(a){var e=this;void 0===a&&(a=0);a=nd(a);this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(e.contentEl_){var n=e.textNode_;n&&e.contentEl_.firstChild!==n&&(n=null,Ga.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead."));e.textNode_=qa.createTextNode(e.formattedTime_);e.textNode_&&(n?e.contentEl_.replaceChild(e.textNode_,
n):e.contentEl_.appendChild(e.textNode_))}}))};b.updateContent=function(a){};return c}(ja);zd.prototype.labelText_="Time";zd.prototype.controlText_="Time";ja.registerComponent("TimeDisplay",zd);var Ug=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-current-time"};b.updateContent=function(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();
this.updateTextNode_(a)};return c}(zd);Ug.prototype.labelText_="Current Time";Ug.prototype.controlText_="Current Time";ja.registerComponent("CurrentTimeDisplay",Ug);var Vg=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"durationchange",e.updateContent);e.on(a,"loadstart",e.updateContent);e.on(a,"loadedmetadata",e.updateContent);return e}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-duration"};b.updateContent=function(a){a=this.player_.duration();this.updateTextNode_(a)};
return c}(zd);Vg.prototype.labelText_="Duration";Vg.prototype.controlText_="Duration";ja.registerComponent("DurationDisplay",Vg);var Ro=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);c.prototype.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})};return c}(ja);ja.registerComponent("TimeDivider",Ro);var Wg=function(d){function c(a,e){e=d.call(this,a,e)||this;
e.on(a,"durationchange",e.updateContent);return e}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-remaining-time"};b.createEl=function(){var a=d.prototype.createEl.call(this);a.insertBefore(Ma("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return a};b.updateContent=function(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))};return c}(zd);
Wg.prototype.labelText_="Remaining Time";Wg.prototype.controlText_="Remaining Time";ja.registerComponent("RemainingTimeDisplay",Wg);var So=function(d){function c(a,e){a=d.call(this,a,e)||this;a.updateShowing();a.on(a.player(),"durationchange",a.updateShowing);return a}ua(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=Ma("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+
this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});a.appendChild(this.contentEl_);return a};b.dispose=function(){this.contentEl_=null;d.prototype.dispose.call(this)};b.updateShowing=function(a){Infinity===this.player().duration()?this.show():this.hide()};return c}(ja);ja.registerComponent("LiveDisplay",So);var rk=function(d){function c(a,e){a=d.call(this,a,e)||this;a.updateLiveEdgeStatus();if(a.player_.liveTracker)a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatus);
return a}ua(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=Ma("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});a.appendChild(this.textEl_);return a};b.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):
(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};b.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};b.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;d.prototype.dispose.call(this)};return c}(cc);rk.prototype.controlText_="Seek to live, currently playing live";ja.registerComponent("SeekToLive",rk);var fe=
function(d,c,b){d=Number(d);return Math.min(b,Math.max(c,isNaN(d)?c:d))},Xg=function(d){function c(a,e){a=d.call(this,a,e)||this;a.bar=a.getChild(a.options_.barName);a.vertical(!!a.options_.vertical);a.enable();return a}ua(c,d);var b=c.prototype;b.enabled=function(){return this.enabled_};b.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,
"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};b.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);
this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};b.createEl=function(a,e,n){void 0===e&&(e={});void 0===n&&(n={});e.className+=" vjs-slider";e=X({tabIndex:0},e);n=X({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n);return d.prototype.createEl.call(this,
a,e,n)};b.handleMouseDown=function(a){var e=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||xc||a.preventDefault();Ae();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(e,"mousemove",this.handleMouseMove);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchmove",this.handleMouseMove);this.on(e,"touchend",this.handleMouseUp);this.handleMouseMove(a)};b.handleMouseMove=function(a){};b.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;
Be();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.update()};b.update=function(){var a=this;if(this.el_&&this.bar){var e=this.getProgress();if(e===this.progress_)return e;this.progress_=e;this.requestNamedAnimationFrame("Slider#update",function(){var n=a.vertical()?"height":"width";a.bar.el().style[n]=(100*
e).toFixed(2)+"%"});return e}};b.getProgress=function(){return Number(fe(this.getPercent(),0,1).toFixed(4))};b.calculateDistance=function(a){a=Zb(this.el_,a);return this.vertical()?a.y:a.x};b.handleKeyDown=function(a){Da.isEventKey(a,"Left")||Da.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepBack()):Da.isEventKey(a,"Right")||Da.isEventKey(a,"Up")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):d.prototype.handleKeyDown.call(this,a)};b.handleClick=function(a){a.stopPropagation();
a.preventDefault()};b.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return c}(ja);ja.registerComponent("Slider",Xg);var To=function(d){function c(a,e){e=d.call(this,a,e)||this;e.partEls_=[];e.on(a,"progress",e.update);return e}ua(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),e=Ma("span",{className:"vjs-control-text"}),
n=Ma("span",{textContent:this.localize("Loaded")}),q=qa.createTextNode(": ");this.percentageEl_=Ma("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});a.appendChild(e);e.appendChild(n);e.appendChild(q);e.appendChild(this.percentageEl_);return a};b.dispose=function(){this.percentageEl_=this.partEls_=null;d.prototype.dispose.call(this)};b.update=function(a){var e=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var n=e.player_.liveTracker,q=e.player_.buffered(),
t=n&&n.isLive()?n.seekableEnd():e.player_.duration(),v=e.player_.bufferedEnd();n=e.partEls_;t=fe(v/t*100,0,100).toFixed(2)+"%";e.percent_!==t&&(e.el_.style.width=t,qc(e.percentageEl_,t),e.percent_=t);for(t=0;t<q.length;t++){var r=q.start(t),p=q.end(t),m=n[t];m||(m=e.el_.appendChild(Ma()),n[t]=m);if(m.dataset.start!==r||m.dataset.end!==p)m.dataset.start=r,m.dataset.end=p,m.style.left=fe(r/v*100,0,100).toFixed(2)+"%",m.style.width=fe((p-r)/v*100,0,100).toFixed(2)+"%"}for(v=n.length;v>q.length;v--)e.el_.removeChild(n[v-
1]);n.length=q.length})};return c}(ja);ja.registerComponent("LoadProgressBar",To);var Uo=function(d){function c(a,e){a=d.call(this,a,e)||this;a.update=Xc(Ia(Ha(a),a.update),30);return a}ua(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};b.update=function(a,e,n){var q=Ec(this.el_),t=Db(this.player_.el()),v=a.width*e;t&&q&&(e=a.left-t.left+v,a=a.width-v+(t.right-a.right),t=q.width/2,e<t?t+=t-e:a<t&&(t=a),
0>t?t=0:t>q.width&&(t=q.width),t=Math.round(t),this.el_.style.right="-"+t+"px",this.write(n))};b.write=function(a){qc(this.el_,a)};b.updateTime=function(a,e,n,q){var t=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var v=t.player_.duration();if(t.player_.liveTracker&&t.player_.liveTracker.isLive()){v=t.player_.liveTracker.liveWindow();var r=v-e*v;v=(1>r?"":"-")+nd(r,v)}else v=nd(n,v);t.update(a,e,v);q&&q()})};return c}(ja);ja.registerComponent("TimeTooltip",Uo);var Yg=function(d){function c(a,
e){a=d.call(this,a,e)||this;a.update=Xc(Ia(Ha(a),a.update),30);return a}ua(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};b.update=function(a,e){var n=this.getChild("timeTooltip");if(n){var q=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(a,e,q)}};return c}(ja);Yg.prototype.options_={children:[]};Lb||Mc||Yg.prototype.options_.children.push("timeTooltip");
ja.registerComponent("PlayProgressBar",Yg);var sk=function(d){function c(a,e){a=d.call(this,a,e)||this;a.update=Xc(Ia(Ha(a),a.update),30);return a}ua(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};b.update=function(a,e){var n=this,q=e*this.player_.duration();this.getChild("timeTooltip").updateTime(a,e,q,function(){n.el_.style.left=a.width*e+"px"})};return c}(ja);sk.prototype.options_={children:["timeTooltip"]};ja.registerComponent("MouseTimeDisplay",
sk);var Zg=function(d){function c(a,e){a=d.call(this,a,e)||this;a.setEventHandlers_();return a}ua(c,d);var b=c.prototype;b.setEventHandlers_=function(){this.update_=Ia(this,this.update);this.update=Xc(this.update_,30);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause",
"waiting"],this.disableInterval_);if("hidden"in qa&&"visibilityState"in qa)this.on(qa,"visibilitychange",this.toggleVisibility_)};b.toggleVisibility_=function(a){"hidden"===qa.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())};b.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,
30))};b.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};b.update=function(a){var e=this;if("hidden"!==qa.visibilityState){var n=d.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",
function(){var q=e.player_.ended()?e.player_.duration():e.getCurrentTime_(),t=e.player_.liveTracker,v=e.player_.duration();t&&t.isLive()&&(v=e.player_.liveTracker.liveCurrentTime());e.percent_!==n&&(e.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),e.percent_=n);if(e.currentTime_!==q||e.duration_!==v)e.el_.setAttribute("aria-valuetext",e.localize("progress bar timing: currentTime={1} duration={2}",[nd(q,v),nd(v,v)],"{1} of {2}")),e.currentTime_=q,e.duration_=v;e.bar&&e.bar.update(Db(e.el()),
e.getProgress())});return n}};b.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};b.getPercent=function(){var a=this.getCurrentTime_(),e=this.player_.liveTracker;e&&e.isLive()?(a=(a-e.seekableStart())/e.liveWindow(),e.atLiveEdge()&&(a=1)):a/=this.player_.duration();return a};b.handleMouseDown=function(a){Fc(a)&&(a.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),d.prototype.handleMouseDown.call(this,
a))};b.handleMouseMove=function(a){if(Fc(a)){var e=this.calculateDistance(a);var n=this.player_.liveTracker;if(n&&n.isLive()){if(.99<=e){n.seekToLiveEdge();return}a=n.seekableStart();var q=n.liveCurrentTime();e=a+e*n.liveWindow();e>=q&&(e=q);e<=a&&(e=a+.1);if(Infinity===e)return}else e*=this.player_.duration(),e===this.player_.duration()&&(e-=.1);this.player_.currentTime(e)}};b.enable=function(){d.prototype.enable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.show()};b.disable=function(){d.prototype.disable.call(this);
var a=this.getChild("mouseTimeDisplay");a&&a.hide()};b.handleMouseUp=function(a){d.prototype.handleMouseUp.call(this,a);a&&a.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying?Hc(this.player_.play()):this.update_()};b.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};b.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};b.handleAction=function(a){this.player_.paused()?
this.player_.play():this.player_.pause()};b.handleKeyDown=function(a){Da.isEventKey(a,"Space")||Da.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.handleAction(a)):Da.isEventKey(a,"Home")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(0)):Da.isEventKey(a,"End")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(Da(a))?(a.preventDefault(),a.stopPropagation(),a=10*(Da.codes[Da(a)]-Da.codes["0"])/100,this.player_.currentTime(this.player_.duration()*
a)):Da.isEventKey(a,"PgDn")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Da.isEventKey(a,"PgUp")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):d.prototype.handleKeyDown.call(this,a)};b.dispose=function(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.off(this.player_,
["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);"hidden"in qa&&"visibilityState"in qa&&this.off(qa,"visibilitychange",this.toggleVisibility_);d.prototype.dispose.call(this)};return c}(Xg);Zg.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Lb||Mc||Zg.prototype.options_.children.splice(1,0,"mouseTimeDisplay");ja.registerComponent("SeekBar",Zg);var tk=function(d){function c(a,e){a=d.call(this,a,e)||
this;a.handleMouseMove=Xc(Ia(Ha(a),a.handleMouseMove),30);a.throttledHandleMouseSeek=Xc(Ia(Ha(a),a.handleMouseSeek),30);a.enable();return a}ua(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};b.handleMouseMove=function(a){var e=this.getChild("seekBar");if(e){var n=e.getChild("playProgressBar"),q=e.getChild("mouseTimeDisplay");if(n||q){var t=e.el(),v=Ec(t);a=Zb(t,a).x;a=fe(a,0,1);q&&q.update(v,a);n&&n.update(v,
e.getProgress())}}};b.handleMouseSeek=function(a){var e=this.getChild("seekBar");e&&e.handleMouseMove(a)};b.enabled=function(){return this.enabled_};b.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()});if(this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var a=this.getChild("seekBar");
this.player_.scrubbing(!1);a.videoWasPlaying&&Hc(this.player_.play())}};b.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};b.removeListenersAddedOnMousedownAndTouchstart=function(){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseSeek);this.off(a,"touchmove",this.throttledHandleMouseSeek);
this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};b.handleMouseDown=function(a){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(a);this.on(e,"mousemove",this.throttledHandleMouseSeek);this.on(e,"touchmove",this.throttledHandleMouseSeek);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchend",this.handleMouseUp)};b.handleMouseUp=function(a){var e=this.getChild("seekBar");e&&e.handleMouseUp(a);this.removeListenersAddedOnMousedownAndTouchstart()};
return c}(ja);tk.prototype.options_={children:["seekBar"]};ja.registerComponent("ProgressControl",tk);var uk=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,["enterpictureinpicture","leavepictureinpicture"],e.handlePictureInPictureChange);e.on(a,["disablepictureinpicturechanged","loadedmetadata"],e.handlePictureInPictureEnabledChange);e.disable();return e}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-picture-in-picture-control "+d.prototype.buildCSSClass.call(this)};
b.handlePictureInPictureEnabledChange=function(){qa.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()};b.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture");this.handlePictureInPictureEnabledChange()};b.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return c}(cc);
uk.prototype.controlText_="Picture-in-Picture";ja.registerComponent("PictureInPictureToggle",uk);var vk=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"fullscreenchange",e.handleFullscreenChange);!1===qa[a.fsApi_.fullscreenEnabled]&&e.disable();return e}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-fullscreen-control "+d.prototype.buildCSSClass.call(this)};b.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};
b.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(cc);vk.prototype.controlText_="Fullscreen";ja.registerComponent("FullscreenToggle",vk);var Vo=function(d,c){c.tech_&&!c.tech_.featuresVolumeControl&&d.addClass("vjs-hidden");d.on(c,"loadstart",function(){c.tech_.featuresVolumeControl?d.removeClass("vjs-hidden"):d.addClass("vjs-hidden")})},Wo=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);c.prototype.createEl=
function(){return d.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return c}(ja);ja.registerComponent("VolumeLevel",Wo);var $g=function(d){function c(a,e){var n=d.call(this,a,e)||this;n.on("slideractive",n.updateLastVolume_);n.on(a,"volumechange",n.updateARIAAttributes);a.ready(function(){return n.updateARIAAttributes()});return n}ua(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},
{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};b.handleMouseDown=function(a){Fc(a)&&d.prototype.handleMouseDown.call(this,a)};b.handleMouseMove=function(a){Fc(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};b.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};b.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};b.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};b.stepBack=function(){this.checkMuted();
this.player_.volume(this.player_.volume()-.1)};b.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")};b.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};b.updateLastVolume_=function(){var a=this,e=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(e)})};return c}(Xg);$g.prototype.options_={children:["volumeLevel"],
barName:"volumeLevel"};$g.prototype.playerEvent="volumechange";ja.registerComponent("VolumeBar",$g);var wk=function(d){function c(a,e){void 0===e&&(e={});e.vertical=e.vertical||!1;if("undefined"===typeof e.volumeBar||pa(e.volumeBar))e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical;var n=d.call(this,a,e)||this;Vo(Ha(n),a);n.throttledHandleMouseMove=Xc(Ia(Ha(n),n.handleMouseMove),30);n.on("mousedown",n.handleMouseDown);n.on("touchstart",n.handleMouseDown);n.on(n.volumeBar,["focus","slideractive"],
function(){n.volumeBar.addClass("vjs-slider-active");n.addClass("vjs-slider-active");n.trigger("slideractive")});n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active");n.removeClass("vjs-slider-active");n.trigger("sliderinactive")});return n}ua(c,d);var b=c.prototype;b.createEl=function(){var a="vjs-volume-horizontal";this.options_.vertical&&(a="vjs-volume-vertical");return d.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+
a})};b.handleMouseDown=function(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};b.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};b.handleMouseMove=
function(a){this.volumeBar.handleMouseMove(a)};return c}(ja);wk.prototype.options_={children:["volumeBar"]};ja.registerComponent("VolumeControl",wk);var Xo=function(d,c){c.tech_&&!c.tech_.featuresMuteControl&&d.addClass("vjs-hidden");d.on(c,"loadstart",function(){c.tech_.featuresMuteControl?d.removeClass("vjs-hidden"):d.addClass("vjs-hidden")})},xk=function(d){function c(a,e){e=d.call(this,a,e)||this;Xo(Ha(e),a);e.on(a,["loadstart","volumechange"],e.update);return e}ua(c,d);var b=c.prototype;b.buildCSSClass=
function(){return"vjs-mute-control "+d.prototype.buildCSSClass.call(this)};b.handleClick=function(a){a=this.player_.volume();var e=this.player_.lastVolume_();0===a?(this.player_.volume(.1>e?.1:e),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};b.update=function(a){this.updateIcon_();this.updateControlText_()};b.updateIcon_=function(){var a=this.player_.volume(),e=3;Lb&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?
e=0:.33>a?e=1:.67>a&&(e=2);for(a=0;4>a;a++)rc(this.el_,"vjs-vol-"+a);Za(this.el_,"vjs-vol-"+e)};b.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return c}(cc);xk.prototype.controlText_="Mute";ja.registerComponent("MuteToggle",xk);var yk=function(d){function c(a,e){void 0===e&&(e={});e.inline="undefined"!==typeof e.inline?e.inline:!0;if("undefined"===typeof e.volumeControl||pa(e.volumeControl))e.volumeControl=
e.volumeControl||{},e.volumeControl.vertical=!e.inline;e=d.call(this,a,e)||this;e.on(a,["loadstart"],e.volumePanelState_);e.on(e.muteToggle,"keyup",e.handleKeyPress);e.on(e.volumeControl,"keyup",e.handleVolumeControlKeyUp);e.on("keydown",e.handleKeyPress);e.on("mouseover",e.handleMouseOver);e.on("mouseout",e.handleMouseOut);e.on(e.volumeControl,["slideractive"],e.sliderActive_);e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_);return e}ua(c,d);var b=c.prototype;b.sliderActive_=function(){this.addClass("vjs-slider-active")};
b.sliderInactive_=function(){this.removeClass("vjs-slider-active")};b.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};b.createEl=function(){var a="vjs-volume-panel-horizontal";this.options_.inline||(a="vjs-volume-panel-vertical");return d.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+
a})};b.dispose=function(){this.handleMouseOut();d.prototype.dispose.call(this)};b.handleVolumeControlKeyUp=function(a){Da.isEventKey(a,"Esc")&&this.muteToggle.focus()};b.handleMouseOver=function(a){this.addClass("vjs-hover");wb(qa,"keyup",Ia(this,this.handleKeyPress))};b.handleMouseOut=function(a){this.removeClass("vjs-hover");fb(qa,"keyup",Ia(this,this.handleKeyPress))};b.handleKeyPress=function(a){Da.isEventKey(a,"Esc")&&this.handleMouseOut()};return c}(ja);yk.prototype.options_={children:["muteToggle",
"volumeControl"]};ja.registerComponent("VolumePanel",yk);var ah=function(d){function c(a,e){a=d.call(this,a,e)||this;e&&(a.menuButton_=e.menuButton);a.focusedChild_=-1;a.on("keydown",a.handleKeyDown);a.boundHandleBlur_=Ia(Ha(a),a.handleBlur);a.boundHandleTapClick_=Ia(Ha(a),a.handleTapClick);return a}ua(c,d);var b=c.prototype;b.addEventListenerForItem=function(a){a instanceof ja&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};b.removeEventListenerForItem=
function(a){a instanceof ja&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};b.removeChild=function(a){"string"===typeof a&&(a=this.getChild(a));this.removeEventListenerForItem(a);d.prototype.removeChild.call(this,a)};b.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};b.createEl=function(){this.contentEl_=Ma(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var a=
d.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);wb(a,"click",function(e){e.preventDefault();e.stopImmediatePropagation()});return a};b.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;d.prototype.dispose.call(this)};b.handleBlur=function(a){var e=a.relatedTarget||qa.activeElement;this.children().some(function(n){return n.el()===e})||(a=this.menuButton_)&&a.buttonPressed_&&e!==a.el().firstChild&&
a.unpressButton()};b.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();Array.isArray(e)&&(e=e.filter(function(n){return n.el()===a.target})[0])&&"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus()}};b.handleKeyDown=function(a){if(Da.isEventKey(a,"Left")||Da.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(Da.isEventKey(a,"Right")||Da.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};
b.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};b.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);this.focus(a)};b.focus=function(a){void 0===a&&(a=0);var e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift();0<e.length&&(0>a?a=0:a>=e.length&&(a=e.length-1),this.focusedChild_=a,e[a].el_.focus())};return c}(ja);ja.registerComponent("Menu",ah);var bh=function(d){function c(a,e){void 0===
e&&(e={});var n=d.call(this,a,e)||this;n.menuButton_=new cc(a,e);n.menuButton_.controlText(n.controlText_);n.menuButton_.el_.setAttribute("aria-haspopup","true");a=cc.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+a;n.menuButton_.removeClass("vjs-control");n.addChild(n.menuButton_);n.update();n.enabled_=!0;n.on(n.menuButton_,"tap",n.handleClick);n.on(n.menuButton_,"click",n.handleClick);n.on(n.menuButton_,"keydown",n.handleKeyDown);n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover");
n.menu.show();wb(qa,"keyup",Ia(Ha(n),n.handleMenuKeyUp))});n.on("mouseleave",n.handleMouseLeave);n.on("keydown",n.handleSubmenuKeyDown);return n}ua(c,d);var b=c.prototype;b.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};b.createMenu=function(){var a=new ah(this.player_,
{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var e=Ma("li",{className:"vjs-menu-title",innerHTML:$a(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;e=new ja(this.player_,{el:e});a.addItem(e)}if(this.items=this.createItems())for(e=0;e<this.items.length;e++)a.addItem(this.items[e]);return a};b.createItems=function(){};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};b.buildWrapperCSSClass=function(){var a="vjs-menu-button";
a=!0===this.options_.inline?a+"-inline":a+"-popup";var e=cc.prototype.buildCSSClass();return"vjs-menu-button "+a+" "+e+" "+d.prototype.buildCSSClass.call(this)};b.buildCSSClass=function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";return"vjs-menu-button "+a+" "+d.prototype.buildCSSClass.call(this)};b.controlText=function(a,e){void 0===e&&(e=this.menuButton_.el());return this.menuButton_.controlText(a,e)};b.dispose=function(){this.handleMouseLeave();d.prototype.dispose.call(this)};
b.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};b.handleMouseLeave=function(a){this.removeClass("vjs-hover");fb(qa,"keyup",Ia(this,this.handleMenuKeyUp))};b.focus=function(){this.menuButton_.focus()};b.blur=function(){this.menuButton_.blur()};b.handleKeyDown=function(a){Da.isEventKey(a,"Esc")||Da.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Da.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!Da.isEventKey(a,"Up")&&!Da.isEventKey(a,
"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};b.handleMenuKeyUp=function(a){(Da.isEventKey(a,"Esc")||Da.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")};b.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};b.handleSubmenuKeyDown=function(a){if(Da.isEventKey(a,"Esc")||Da.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),Da.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};b.pressButton=function(){this.enabled_&&(this.buttonPressed_=
!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Lb&&La()||this.menu.focus())};b.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};b.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};b.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};
return c}(ja);ja.registerComponent("MenuButton",bh);var ch=function(d){function c(b,a){var e=a.tracks;b=d.call(this,b,a)||this;1>=b.items.length&&b.hide();if(!e)return Ha(b);var n=Ia(Ha(b),b.update);e.addEventListener("removetrack",n);e.addEventListener("addtrack",n);e.addEventListener("labelchange",n);b.player_.on("ready",n);b.player_.on("dispose",function(){e.removeEventListener("removetrack",n);e.removeEventListener("addtrack",n);e.removeEventListener("labelchange",n)});return b}ua(c,d);return c}(bh);
ja.registerComponent("TrackButton",ch);var Yo="Tab Esc Up Down Right Left".split(" "),ge=function(d){function c(a,e){a=d.call(this,a,e)||this;a.selectable=e.selectable;a.isSelected_=e.selected||!1;a.multiSelectable=e.multiSelectable;a.selected(a.isSelected_);a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem");return a}ua(c,d);var b=c.prototype;b.createEl=function(a,e,n){this.nonIconControl=!0;
return d.prototype.createEl.call(this,"li",X({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},e),n)};b.handleKeyDown=function(a){Yo.some(function(e){return Da.isEventKey(a,e)})||d.prototype.handleKeyDown.call(this,a)};b.handleClick=function(a){this.selected(!0)};b.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=
!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return c}(ef);ja.registerComponent("MenuItem",ge);var he=function(d){function c(a,e){var n=e.track,q=a.textTracks();e.label=n.label||n.language||"Unknown";e.selected="showing"===n.mode;var t=d.call(this,a,e)||this;t.track=n;t.kinds=(e.kinds||[e.kind||t.track.kind]).filter(Boolean);var v=function(){for(var m=arguments.length,l=Array(m),f=0;f<m;f++)l[f]=arguments[f];t.handleTracksChange.apply(Ha(t),
l)},r=function(){for(var m=arguments.length,l=Array(m),f=0;f<m;f++)l[f]=arguments[f];t.handleSelectedLanguageChange.apply(Ha(t),l)};a.on(["loadstart","texttrackchange"],v);q.addEventListener("change",v);q.addEventListener("selectedlanguagechange",r);t.on("dispose",function(){a.off(["loadstart","texttrackchange"],v);q.removeEventListener("change",v);q.removeEventListener("selectedlanguagechange",r)});if(void 0===q.onchange){var p;t.on(["tap","click"],function(){if("object"!==typeof da.Event)try{p=
new da.Event("change")}catch(m){}p||(p=qa.createEvent("Event"),p.initEvent("change",!0,!0));q.dispatchEvent(p)})}t.handleTracksChange();return t}ua(c,d);var b=c.prototype;b.handleClick=function(a){var e=this.track,n=this.player_.textTracks();d.prototype.handleClick.call(this,a);if(n)for(a=0;a<n.length;a++){var q=n[a];-1!==this.kinds.indexOf(q.kind)&&(q===e?"showing"!==q.mode&&(q.mode="showing"):"disabled"!==q.mode&&(q.mode="disabled"))}};b.handleTracksChange=function(a){a="showing"===this.track.mode;
a!==this.isSelected_&&this.selected(a)};b.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};b.dispose=function(){this.track=null;d.prototype.dispose.call(this)};return c}(ge);ja.registerComponent("TextTrackMenuItem",he);var zk=function(d){function c(a,e){e.track=
{player:a,kind:e.kind,kinds:e.kinds,"default":!1,mode:"disabled"};e.kinds||(e.kinds=[e.kind]);e.track.label=e.label?e.label:e.kinds.join(" and ")+" off";e.selectable=!0;e.multiSelectable=!1;return d.call(this,a,e)||this}ua(c,d);var b=c.prototype;b.handleTracksChange=function(a){a=this.player().textTracks();for(var e=!0,n=0,q=a.length;n<q;n++){var t=a[n];if(-1<this.options_.kinds.indexOf(t.kind)&&"showing"===t.mode){e=!1;break}}e!==this.isSelected_&&this.selected(e)};b.handleSelectedLanguageChange=
function(a){a=this.player().textTracks();for(var e=!0,n=0,q=a.length;n<q;n++){var t=a[n];if(-1<["captions","descriptions","subtitles"].indexOf(t.kind)&&"showing"===t.mode){e=!1;break}}e&&(this.player_.cache_.selectedLanguage={enabled:!1})};return c}(he);ja.registerComponent("OffTextTrackMenuItem",zk);var Ad=function(d){function c(b,a){void 0===a&&(a={});a.tracks=b.textTracks();return d.call(this,b,a)||this}ua(c,d);c.prototype.createItems=function(b,a){void 0===b&&(b=[]);void 0===a&&(a=he);var e;this.label_&&
(e=this.label_+" off");b.push(new zk(this.player_,{kinds:this.kinds_,kind:this.kind_,label:e}));this.hideThreshold_+=1;e=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var n=0;n<e.length;n++){var q=e[n];if(-1<this.kinds_.indexOf(q.kind)){var t=new a(this.player_,{track:q,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});t.addClass("vjs-"+q.kind+"-menu-item");b.push(t)}}return b};return c}(ch);ja.registerComponent("TextTrackButton",Ad);var Ak=
function(d){function c(a,e){var n=e.track,q=e.cue,t=a.currentTime();e.selectable=!0;e.multiSelectable=!1;e.label=q.text;e.selected=q.startTime<=t&&t<q.endTime;a=d.call(this,a,e)||this;a.track=n;a.cue=q;n.addEventListener("cuechange",Ia(Ha(a),a.update));return a}ua(c,d);var b=c.prototype;b.handleClick=function(a){d.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};b.update=function(a){a=this.cue;var e=this.player_.currentTime();this.selected(a.startTime<=
e&&e<a.endTime)};return c}(ge);ja.registerComponent("ChaptersTrackMenuItem",Ak);var dh=function(d){function c(a,e,n){return d.call(this,a,e,n)||this}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-chapters-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-chapters-button "+d.prototype.buildWrapperCSSClass.call(this)};b.update=function(a){this.track_&&(!a||"addtrack"!==a.type&&"removetrack"!==a.type)||this.setTrack(this.findChaptersTrack());
d.prototype.update.call(this)};b.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};b.findChaptersTrack=function(){for(var a=
this.player_.textTracks()||[],e=a.length-1;0<=e;e--){var n=a[e];if(n.kind===this.kind_)return n}};b.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize($a(this.kind_))};b.createMenu=function(){this.options_.title=this.getMenuCaption();return d.prototype.createMenu.call(this)};b.createItems=function(){var a=[];if(!this.track_)return a;var e=this.track_.cues;if(!e)return a;for(var n=0,q=e.length;n<q;n++){var t=new Ak(this.player_,{track:this.track_,cue:e[n]});
a.push(t)}return a};return c}(Ad);dh.prototype.kind_="chapters";dh.prototype.controlText_="Chapters";ja.registerComponent("ChaptersButton",dh);var eh=function(d){function c(a,e,n){e=d.call(this,a,e,n)||this;var q=a.textTracks(),t=Ia(Ha(e),e.handleTracksChange);q.addEventListener("change",t);e.on("dispose",function(){q.removeEventListener("change",t)});return e}ua(c,d);var b=c.prototype;b.handleTracksChange=function(a){a=this.player().textTracks();for(var e=!1,n=0,q=a.length;n<q;n++){var t=a[n];if(t.kind!==
this.kind_&&"showing"===t.mode){e=!0;break}}e?this.disable():this.enable()};b.buildCSSClass=function(){return"vjs-descriptions-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+d.prototype.buildWrapperCSSClass.call(this)};return c}(Ad);eh.prototype.kind_="descriptions";eh.prototype.controlText_="Descriptions";ja.registerComponent("DescriptionsButton",eh);var fh=function(d){function c(a,e,n){return d.call(this,a,e,n)||this}ua(c,d);var b=
c.prototype;b.buildCSSClass=function(){return"vjs-subtitles-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+d.prototype.buildWrapperCSSClass.call(this)};return c}(Ad);fh.prototype.kind_="subtitles";fh.prototype.controlText_="Subtitles";ja.registerComponent("SubtitlesButton",fh);var gh=function(d){function c(b,a){a.track={player:b,kind:a.kind,label:a.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};a.selectable=!1;a.name="CaptionSettingsMenuItem";
b=d.call(this,b,a)||this;b.addClass("vjs-texttrack-settings");b.controlText(", opens "+a.kind+" settings dialog");return b}ua(c,d);c.prototype.handleClick=function(b){this.player().getChild("textTrackSettings").open()};return c}(he);ja.registerComponent("CaptionSettingsMenuItem",gh);var hh=function(d){function c(a,e,n){return d.call(this,a,e,n)||this}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-captions-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-captions-button "+
d.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new gh(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return d.prototype.createItems.call(this,a)};return c}(Ad);hh.prototype.kind_="captions";hh.prototype.controlText_="Captions";ja.registerComponent("CaptionsButton",hh);var Bk=function(d){function c(){return d.apply(this,arguments)||this}
ua(c,d);c.prototype.createEl=function(b,a,e){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      ");return d.prototype.createEl.call(this,b,X({innerHTML:n+"</span>"},a),e)};return c}(he);ja.registerComponent("SubsCapsMenuItem",Bk);var ih=function(d){function c(a,e){void 0===
e&&(e={});a=d.call(this,a,e)||this;a.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)&&(a.label_="captions");a.menuButton_.controlText($a(a.label_));return a}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-subs-caps-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+d.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||
!this.player().getChild("textTrackSettings")||(a.push(new gh(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return a=d.prototype.createItems.call(this,a,Bk)};return c}(Ad);ih.prototype.kinds_=["captions","subtitles"];ih.prototype.controlText_="Subtitles";ja.registerComponent("SubsCapsButton",ih);var Ck=function(d){function c(a,e){var n=e.track,q=a.audioTracks();e.label=n.label||n.language||"Unknown";e.selected=n.enabled;var t=d.call(this,a,e)||this;t.track=n;t.addClass("vjs-"+n.kind+"-menu-item");
var v=function(){for(var r=arguments.length,p=Array(r),m=0;m<r;m++)p[m]=arguments[m];t.handleTracksChange.apply(Ha(t),p)};q.addEventListener("change",v);t.on("dispose",function(){q.removeEventListener("change",v)});return t}ua(c,d);var b=c.prototype;b.createEl=function(a,e,n){var q='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(q+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+
this.localize("Descriptions")+"</span>\n      ");return d.prototype.createEl.call(this,a,X({innerHTML:q+"</span>"},e),n)};b.handleClick=function(a){var e=this.player_.audioTracks();d.prototype.handleClick.call(this,a);for(a=0;a<e.length;a++){var n=e[a];n.enabled=n===this.track}};b.handleTracksChange=function(a){this.selected(this.track.enabled)};return c}(ge);ja.registerComponent("AudioTrackMenuItem",Ck);var Dk=function(d){function c(a,e){void 0===e&&(e={});e.tracks=a.audioTracks();return d.call(this,
a,e)||this}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-audio-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-audio-button "+d.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++)a.push(new Ck(this.player_,{track:e[n],selectable:!0,multiSelectable:!1}));return a};return c}(ch);Dk.prototype.controlText_="Audio Track";ja.registerComponent("AudioTrackButton",
Dk);var jh=function(d){function c(a,e){var n=e.rate,q=parseFloat(n,10);e.label=n;e.selected=1===q;e.selectable=!0;e.multiSelectable=!1;e=d.call(this,a,e)||this;e.label=n;e.rate=q;e.on(a,"ratechange",e.update);return e}ua(c,d);var b=c.prototype;b.handleClick=function(a){d.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};b.update=function(a){this.selected(this.player().playbackRate()===this.rate)};return c}(ge);jh.prototype.contentElType="button";ja.registerComponent("PlaybackRateMenuItem",
jh);var Ek=function(d){function c(a,e){e=d.call(this,a,e)||this;e.updateVisibility();e.updateLabel();e.on(a,"loadstart",e.updateVisibility);e.on(a,"ratechange",e.updateLabel);return e}ua(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this);this.labelEl_=Ma("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});a.appendChild(this.labelEl_);return a};b.dispose=function(){this.labelEl_=null;d.prototype.dispose.call(this)};b.buildCSSClass=function(){return"vjs-playback-rate "+
d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-playback-rate "+d.prototype.buildWrapperCSSClass.call(this)};b.createMenu=function(){var a=new ah(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;0<=n;n--)a.addChild(new jh(this.player(),{rate:e[n]+"x"}));return a};b.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};b.handleClick=function(a){a=this.player().playbackRate();for(var e=this.playbackRates(),
n=e[0],q=0;q<e.length;q++)if(e[q]>a){n=e[q];break}this.player().playbackRate(n)};b.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};b.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};b.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};b.updateLabel=
function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return c}(bh);Ek.prototype.controlText_="Playback Rate";ja.registerComponent("PlaybackRateMenuButton",Ek);var Fk=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-spacer "+d.prototype.buildCSSClass.call(this)};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return c}(ja);
ja.registerComponent("Spacer",Fk);var Zo=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-custom-control-spacer "+d.prototype.buildCSSClass.call(this)};b.createEl=function(){var a=d.prototype.createEl.call(this,{className:this.buildCSSClass()});a.innerHTML="\u00a0";return a};return c}(Fk);ja.registerComponent("CustomControlSpacer",Zo);var ff=function(d){function c(){return d.apply(this,arguments)||this}ua(c,d);c.prototype.createEl=
function(){return d.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return c}(ja);ff.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};"exitPictureInPicture"in qa&&ff.prototype.options_.children.splice(ff.prototype.options_.children.length-
1,0,"pictureInPictureToggle");ja.registerComponent("ControlBar",ff);var Gk=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"error",e.open);return e}ua(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-error-display "+d.prototype.buildCSSClass.call(this)};b.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return c}(vd);Gk.prototype.options_=Me({},vd.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});ja.registerComponent("ErrorDisplay",
Gk);var Hk=["#000","Black"],Ik=["#00F","Blue"],Jk=["#0FF","Cyan"],Kk=["#0F0","Green"],Lk=["#F0F","Magenta"],Mk=["#F00","Red"],Nk=["#FFF","White"],Ok=["#FF0","Yellow"],kh=["1","Opaque"],lh=["0.5","Semi-Transparent"],Pk=["0","Transparent"],Zc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Hk,Nk,Mk,Kk,Ik,Ok,Lk,Jk]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[kh,lh,
Pk]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Nk,Hk,Mk,Kk,Ik,Ok,Lk,Jk]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif",
"Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(d){return"1.00"===d?null:Number(d)}},textOpacity:{selector:".vjs-text-opacity > select",
id:"captions-foreground-opacity-%s",label:"Transparency",options:[kh,lh]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Pk,lh,kh]}};Zc.windowColor.options=Zc.backgroundColor.options;var $o=function(d){function c(a,e){e.temporary=!1;var n=d.call(this,a,e)||this;n.updateDisplay=Ia(Ha(n),n.updateDisplay);n.fill();n.hasBeenOpened_=n.hasBeenFilled_=
!0;n.endDialog=Ma("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")});n.el().appendChild(n.endDialog);n.setDefaults();void 0===e.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings);n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings();n.close()});n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults();n.updateDisplay()});Z(Zc,function(q){n.on(n.$(q.selector),"change",n.updateDisplay)});
n.options_.persistTextTrackSettings&&n.restoreSettings();return n}ua(c,d);var b=c.prototype;b.dispose=function(){this.endDialog=null;d.prototype.dispose.call(this)};b.createElSelect_=function(a,e,n){var q=this;void 0===e&&(e="");void 0===n&&(n="label");a=Zc[a];var t=a.id.replace("%s",this.id_),v=[e,t].join(" ").trim();return["<"+n+' id="'+t+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(a.label),"</"+n+">",'<select aria-labelledby="'+v+'">'].concat(a.options.map(function(r){var p=t+"-"+
r[1].replace(/\W+/g,"");return['<option id="'+p+'" value="'+r[0]+'" ','aria-labelledby="'+v+" "+p+'">',q.localize(r[1]),"</option>"].join("")})).concat("</select>").join("")};b.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span></fieldset>"].join("")};
b.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span></fieldset>"].join("")};b.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',
this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span></fieldset>"].join("")};b.createElColors_=function(){return Ma("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};b.createElFont_=function(){return Ma("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',
this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};b.createElControls_=function(){var a=this.localize("restore all settings to the default values");return Ma("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+
a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};b.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};b.label=function(){return this.localize("Caption Settings Dialog")};b.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};b.buildCSSClass=function(){return d.prototype.buildCSSClass.call(this)+
" vjs-text-track-settings"};b.getValues=function(){var a=this;return S(Zc,function(e,n,q){var t=a.$(n.selector);n=kj(t.options[t.options.selectedIndex].value,n.parser);void 0!==n&&(e[q]=n);return e},{})};b.setValues=function(a){var e=this;Z(Zc,function(n,q){var t=e.$(n.selector);q=a[q];n=n.parser;if(q)for(var v=0;v<t.options.length;v++)if(kj(t.options[v].value,n)===q){t.selectedIndex=v;break}})};b.setDefaults=function(){var a=this;Z(Zc,function(e){var n=e.hasOwnProperty("default")?e["default"]:0;
a.$(e.selector).selectedIndex=n})};b.restoreSettings=function(){try{var a=JSON.parse(da.localStorage.getItem("vjs-text-track-settings"))}catch(e){Ga.warn(e)}a&&this.setValues(a)};b.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?da.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):da.localStorage.removeItem("vjs-text-track-settings")}catch(e){Ga.warn(e)}}};b.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");
a&&a.updateDisplay()};b.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,e=a&&a.subsCapsButton;a=a&&a.captionsButton;e?e.focus():a&&a.focus()};return c}(vd);ja.registerComponent("TextTrackSettings",$o);var ap=function(d){function c(a,e){var n=e.ResizeObserver||da.ResizeObserver;null===e.ResizeObserver&&(n=!1);var q=Ta({createEl:!n,reportTouchActivity:!1},e);var t=d.call(this,a,q)||this;t.ResizeObserver=e.ResizeObserver||da.ResizeObserver;t.loadListener_=null;
t.resizeObserver_=null;t.debouncedHandler_=qo(function(){t.resizeHandler()},100,!1,Ha(t));n?(t.resizeObserver_=new t.ResizeObserver(t.debouncedHandler_),t.resizeObserver_.observe(a.el())):(t.loadListener_=function(){if(t.el_&&t.el_.contentWindow){var v=t.debouncedHandler_,r=t.unloadListener_=function(){fb(this,"resize",v);fb(this,"unload",r);r=null};wb(t.el_.contentWindow,"unload",r);wb(t.el_.contentWindow,"resize",v)}},t.one("load",t.loadListener_));return t}ua(c,d);var b=c.prototype;b.createEl=
function(){return d.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};b.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};b.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&
this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;d.prototype.dispose.call(this)};return c}(ja);ja.registerComponent("ResizeManager",ap);var bp={trackingThreshold:30,liveTolerance:15},cp=function(d){function c(a,e){e=Ta(bp,e,{createEl:!1});var n=d.call(this,a,e)||this;n.reset_();n.on(n.player_,"durationchange",n.handleDurationchange);n.one(n.player_,"canplay",function(){return n.toggleTracking()});
if(be&&"hidden"in qa&&"visibilityState"in qa)n.on(qa,"visibilitychange",n.handleVisibilityChange);return n}ua(c,d);var b=c.prototype;b.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(qa.hidden?this.stopTracking():this.startTracking())};b.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){a=Number(da.performance.now().toFixed(4));var e=-1===this.lastTime_?0:(a-this.lastTime_)/1E3;this.lastTime_=a;this.pastSeekEnd_=this.pastSeekEnd()+e;a=this.liveCurrentTime();
e=this.player_.currentTime();e=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-e)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==a||(e=!1);e!==this.behindLiveEdge_&&(this.behindLiveEdge_=e,this.trigger("liveedgechange"))}};b.handleDurationchange=function(){this.toggleTracking()};b.toggleTracking=function(){Infinity===this.player_.duration()&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):
(this.player_.removeClass("vjs-liveui"),this.stopTracking())};b.startTracking=function(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_)this.on(this.player_,"seeked",this.handleSeeked);else this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)};
b.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0;this.on(this.player_,"seeked",this.handleSeeked)};b.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?!1:2<a;this.skipNextSeeked_=!1;this.trackLive_()};b.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};b.reset_=function(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=!0;this.skipNextSeeked_=this.seekedBehindLive_=
this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};b.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))};b.seekableEnd=function(){for(var a=this.player_.seekable(),
e=[],n=a?a.length:0;n--;)e.push(a.end(n));return e.length?e.sort()[e.length-1]:Infinity};b.seekableStart=function(){for(var a=this.player_.seekable(),e=[],n=a?a.length:0;n--;)e.push(a.start(n));return e.length?e.sort()[0]:0};b.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?0:a-this.seekableStart()};b.isLive=function(){return this.isTracking()};b.atLiveEdge=function(){return!this.behindLiveEdge()};b.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()};b.pastSeekEnd=
function(){var a=this.seekableEnd();-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0);this.lastSeekEnd_=a;return this.pastSeekEnd_};b.behindLiveEdge=function(){return this.behindLiveEdge_};b.isTracking=function(){return"number"===typeof this.trackingInterval_};b.seekToLiveEdge=function(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))};b.dispose=function(){this.off(qa,"visibilitychange",this.handleVisibilityChange);
this.stopTracking();d.prototype.dispose.call(this)};return c}(ja);ja.registerComponent("LiveTracker",cp);var mh=function(d){var c=d.el();if(c.hasAttribute("src"))return d.triggerSourceset(c.src),!0;c=d.doubleDollar("source");var b=[],a="";if(!c.length)return!1;for(var e=0;e<c.length;e++){var n=c[e].src;n&&-1===b.indexOf(n)&&b.push(n)}if(!b.length)return!1;1===b.length&&(a=b[0]);d.triggerSourceset(a);return!0},dp=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},
set:function(d){var c=qa.createElement(this.nodeName.toLowerCase());c.innerHTML=d;for(d=qa.createDocumentFragment();c.childNodes.length;)d.appendChild(c.childNodes[0]);this.innerText="";da.Element.prototype.appendChild.call(this,d);return this.innerHTML}}),Qk=function(d,c){for(var b={},a=0;a<d.length&&!((b=Object.getOwnPropertyDescriptor(d[a],c))&&b.set&&b.get);a++);b.enumerable=!0;b.configurable=!0;return b},Rk=function(d){var c=d.el();if(!c.resetSourceWatch_){var b={},a=Qk([d.el(),da.HTMLMediaElement.prototype,
da.Element.prototype,dp],"innerHTML"),e=function(n){return function(){for(var q=arguments.length,t=Array(q),v=0;v<q;v++)t[v]=arguments[v];q=n.apply(c,t);mh(d);return q}};["append","appendChild","insertAdjacentHTML"].forEach(function(n){c[n]&&(b[n]=c[n],c[n]=e(b[n]))});Object.defineProperty(c,"innerHTML",Ta(a,{set:e(a.set)}));c.resetSourceWatch_=function(){c.resetSourceWatch_=null;Object.keys(b).forEach(function(n){c[n]=b[n]});Object.defineProperty(c,"innerHTML",a)};d.one("sourceset",c.resetSourceWatch_)}},
ep=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?hk(da.Element.prototype.getAttribute.call(this,"src")):""},set:function(d){da.Element.prototype.setAttribute.call(this,"src",d);return d}}),fp=function(d){if(d.featuresSourceset){var c=d.el();if(!c.resetSourceset_){var b=Qk([d.el(),da.HTMLMediaElement.prototype,ep],"src"),a=c.setAttribute,e=c.load;Object.defineProperty(c,"src",Ta(b,{set:function(n){n=b.set.call(c,n);d.triggerSourceset(c.src);return n}}));c.setAttribute=
function(n,q){q=a.call(c,n,q);/src/i.test(n)&&d.triggerSourceset(c.src);return q};c.load=function(){var n=e.call(c);mh(d)||(d.triggerSourceset(""),Rk(d));return n};c.currentSrc?d.triggerSourceset(c.currentSrc):mh(d)||Rk(d);c.resetSourceset_=function(){c.resetSourceset_=null;c.load=e;c.setAttribute=a;Object.defineProperty(c,"src",b);c.resetSourceWatch_&&c.resetSourceWatch_()}}}},nh=function(d,c,b,a){void 0===a&&(a=!0);var e=function(q){return Object.defineProperty(d,c,{value:q,enumerable:!0,writable:!0})},
n={configurable:!0,enumerable:!0,get:function(){var q=b();e(q);return q}};a&&(n.set=e);return Object.defineProperty(d,c,n)},va=function(d){function c(a,e){e=d.call(this,a,e)||this;var n=a.source,q=!1;n&&(e.el_.currentSrc!==n.src||a.tag&&3===a.tag.initNetworkState_)?e.setSource(n):e.handleLateInit_(e.el_);a.enableSourceset&&e.setupSourcesetHandling_();e.isScrubbing_=!1;if(e.el_.hasChildNodes()){var t=e.el_.childNodes,v=t.length;for(n=[];v--;){var r=t[v];"track"===r.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?
(e.remoteTextTrackEls().addTrackElement_(r),e.remoteTextTracks().addTrack(r.track),e.textTracks().addTrack(r.track),q||e.el_.hasAttribute("crossorigin")||!df(r.src)||(q=!0)):n.push(r))}for(t=0;t<n.length;t++)e.el_.removeChild(n[t])}e.proxyNativeTracks_();e.featuresNativeTextTracks&&q&&Ga.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");e.restoreMetadataTracksInIOSNativePlayer_();(td||Kg||Sj)&&!0===a.nativeControlsForTouch&&
e.setControls(!0);e.proxyWebkitFullscreen_();e.triggerReady();return e}ua(c,d);var b=c.prototype;b.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();c.disposeMediaElement(this.el_);this.options_=null;d.prototype.dispose.call(this)};b.setupSourcesetHandling_=function(){fp(this)};b.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),e,n=function(){e=[];for(var t=0;t<a.length;t++){var v=a[t];"metadata"===v.kind&&e.push({track:v,storedMode:v.mode})}};
n();a.addEventListener("change",n);this.on("dispose",function(){return a.removeEventListener("change",n)});var q=function v(){for(var r=0;r<e.length;r++){var p=e[r];"disabled"===p.track.mode&&p.track.mode!==p.storedMode&&(p.track.mode=p.storedMode)}a.removeEventListener("change",v)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",n);a.removeEventListener("change",q);a.addEventListener("change",q)});this.on("webkitendfullscreen",function(){a.removeEventListener("change",n);
a.addEventListener("change",n);a.removeEventListener("change",q)})};b.overrideNative_=function(a,e){var n=this;if(e===this["featuresNative"+a+"Tracks"]){var q=a.toLowerCase();this[q+"TracksListeners_"]&&Object.keys(this[q+"TracksListeners_"]).forEach(function(t){n.el()[q+"Tracks"].removeEventListener(t,n[q+"TracksListeners_"][t])});this["featuresNative"+a+"Tracks"]=!e;this[q+"TracksListeners_"]=null;this.proxyNativeTracksForType_(q)}};b.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",
a)};b.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};b.proxyNativeTracksForType_=function(a){var e=this,n=Sb[a],q=this.el()[n.getterName],t=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&q&&q.addEventListener){var v={change:function(p){p={type:"change",target:t,currentTarget:t,srcElement:t};t.trigger(p);"text"===a&&e[yd.remoteText.getterName]().trigger(p)},addtrack:function(p){t.addTrack(p.track)},removetrack:function(p){t.removeTrack(p.track)}},r=function(){for(var p=
[],m=0;m<t.length;m++){for(var l=!1,f=0;f<q.length;f++)if(q[f]===t[m]){l=!0;break}l||p.push(t[m])}for(;p.length;)t.removeTrack(p.shift())};this[n.getterName+"Listeners_"]=v;Object.keys(v).forEach(function(p){var m=v[p];q.addEventListener(p,m);e.on("dispose",function(l){return q.removeEventListener(p,m)})});this.on("loadstart",r);this.on("dispose",function(p){return e.off("loadstart",r)})}};b.proxyNativeTracks_=function(){var a=this;Sb.names.forEach(function(e){a.proxyNativeTracksForType_(e)})};b.createEl=
function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var e=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(e,a);c.disposeMediaElement(a);a=e}else a=qa.createElement("video"),e=this.options_.tag&&Yb(this.options_.tag),e=Ta({},e),td&&!0===this.options_.nativeControlsForTouch||delete e.controls,ze(a,X(e,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",
this.options_.preload);void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);e=["loop","muted","playsinline","autoplay"];for(var n=0;n<e.length;n++){var q=e[n],t=this.options_[q];"undefined"!==typeof t&&(t?a.setAttribute(q,q):a.removeAttribute(q),a[q]=t)}return a};b.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var q=function(){e||this.trigger("loadstart")};
this.on("loadedmetadata",q);this.ready(function(){this.off("loadstart",n);this.off("loadedmetadata",q);e||this.trigger("loadstart")})}else{var t=["loadstart"];t.push("loadedmetadata");2<=a.readyState&&t.push("loadeddata");3<=a.readyState&&t.push("canplay");4<=a.readyState&&t.push("canplaythrough");this.ready(function(){t.forEach(function(v){this.trigger(v)},this)})}};b.setScrubbing=function(a){this.isScrubbing_=a};b.scrubbing=function(){return this.isScrubbing_};b.setCurrentTime=function(a){try{this.isScrubbing_&&
this.el_.fastSeek&&Ze?this.el_.fastSeek(a):this.el_.currentTime=a}catch(e){Ga(e,"Video is not ready. (Video.js)")}};b.duration=function(){var a=this;return Infinity===this.el_.duration&&Mc&&xc&&0===this.el_.currentTime?(this.on("timeupdate",function n(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",n))}),NaN):this.el_.duration||NaN};b.width=function(){return this.el_.offsetWidth};b.height=function(){return this.el_.offsetHeight};b.proxyWebkitFullscreen_=
function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n);this.on("dispose",function(){a.off("webkitbeginfullscreen",n);a.off("webkitendfullscreen",e)})}};b.supportsFullScreen=
function(){if("function"===typeof this.el_.webkitEnterFullScreen){var a=da.navigator&&da.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};b.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)Hc(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{a.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}};b.exitFullScreen=
function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))};b.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};b.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};b.reset=function(){c.resetMediaElement(this.el_)};b.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};b.setControls=function(a){this.el_.controls=!!a};b.addTextTrack=
function(a,e,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,e,n):d.prototype.addTextTrack.call(this,a,e,n)};b.createRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return d.prototype.createRemoteTextTrack.call(this,a);var e=qa.createElement("track");a.kind&&(e.kind=a.kind);a.label&&(e.label=a.label);if(a.language||a.srclang)e.srclang=a.language||a.srclang;a["default"]&&(e["default"]=a["default"]);a.id&&(e.id=a.id);a.src&&(e.src=a.src);return e};b.addRemoteTextTrack=
function(a,e){a=d.prototype.addRemoteTextTrack.call(this,a,e);this.featuresNativeTextTracks&&this.el().appendChild(a);return a};b.removeRemoteTextTrack=function(a){d.prototype.removeRemoteTextTrack.call(this,a);if(this.featuresNativeTextTracks)for(var e=this.doubleDollar("track"),n=e.length;n--;)a!==e[n]&&a!==e[n].track||this.el().removeChild(e[n])};b.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};"undefined"!==
typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);da.performance&&"function"===typeof da.performance.now?a.creationTime=da.performance.now():da.performance&&da.performance.timing&&"number"===typeof da.performance.timing.navigationStart&&(a.creationTime=da.Date.now()-da.performance.timing.navigationStart);return a};return c}(Sa);nh(va,"TEST_VID",
function(){if(ia()){var d=qa.createElement("video"),c=qa.createElement("track");c.kind="captions";c.srclang="en";c.label="English";d.appendChild(c);return d}});va.isSupported=function(){try{va.TEST_VID.volume=.5}catch(d){return!1}return!(!va.TEST_VID||!va.TEST_VID.canPlayType)};va.canPlayType=function(d){return va.TEST_VID.canPlayType(d)};va.canPlaySource=function(d,c){return va.canPlayType(d.type)};va.canControlVolume=function(){try{var d=va.TEST_VID.volume;va.TEST_VID.volume=d/2+.1;return d!==va.TEST_VID.volume}catch(c){return!1}};
va.canMuteVolume=function(){try{var d=va.TEST_VID.muted;va.TEST_VID.muted=!d;va.TEST_VID.muted?va.TEST_VID.setAttribute("muted","muted"):va.TEST_VID.removeAttribute("muted");return d!==va.TEST_VID.muted}catch(c){return!1}};va.canControlPlaybackRate=function(){if(Mc&&xc&&58>Uj)return!1;try{var d=va.TEST_VID.playbackRate;va.TEST_VID.playbackRate=d/2+.1;return d!==va.TEST_VID.playbackRate}catch(c){return!1}};va.canOverrideAttributes=function(){try{var d=function(){};Object.defineProperty(qa.createElement("video"),
"src",{get:d,set:d});Object.defineProperty(qa.createElement("audio"),"src",{get:d,set:d});Object.defineProperty(qa.createElement("video"),"innerHTML",{get:d,set:d});Object.defineProperty(qa.createElement("audio"),"innerHTML",{get:d,set:d})}catch(c){return!1}return!0};va.supportsNativeTextTracks=function(){return Ze||Lb&&xc};va.supportsNativeVideoTracks=function(){return!(!va.TEST_VID||!va.TEST_VID.videoTracks)};va.supportsNativeAudioTracks=function(){return!(!va.TEST_VID||!va.TEST_VID.audioTracks)};
va.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],
["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(d){var c=d[1];nh(va.prototype,d[0],function(){return va[c]()},!0)});va.prototype.movingMediaElementInDOM=!Lb;va.prototype.featuresFullscreenResize=!0;va.prototype.featuresProgressEvents=!0;va.prototype.featuresTimeupdateEvents=!0;var gf;va.patchCanPlayType=function(){4<=Hg&&!Tj&&!xc&&(gf=va.TEST_VID&&va.TEST_VID.constructor.prototype.canPlayType,va.TEST_VID.constructor.prototype.canPlayType=function(d){var c=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;
return d&&c.test(d)?"maybe":gf.call(this,d)})};va.unpatchCanPlayType=function(){var d=va.TEST_VID.constructor.prototype.canPlayType;gf&&(va.TEST_VID.constructor.prototype.canPlayType=gf);return d};va.patchCanPlayType();va.disposeMediaElement=function(d){if(d){for(d.parentNode&&d.parentNode.removeChild(d);d.hasChildNodes();)d.removeChild(d.firstChild);d.removeAttribute("src");if("function"===typeof d.load)try{d.load()}catch(c){}}};va.resetMediaElement=function(d){if(d){for(var c=d.querySelectorAll("source"),
b=c.length;b--;)d.removeChild(c[b]);d.removeAttribute("src");if("function"===typeof d.load)try{d.load()}catch(a){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(d){va.prototype[d]=function(){return this.el_[d]||this.el_.hasAttribute(d)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(d){va.prototype["set"+$a(d)]=function(c){(this.el_[d]=c)?this.el_.setAttribute(d,d):this.el_.removeAttribute(d)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate disablePictureInPicture played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach(function(d){va.prototype[d]=
function(){return this.el_[d]}});"volume src poster preload playbackRate defaultPlaybackRate disablePictureInPicture crossOrigin".split(" ").forEach(function(d){va.prototype["set"+$a(d)]=function(c){this.el_[d]=c}});["pause","load","play"].forEach(function(d){va.prototype[d]=function(){return this.el_[d]()}});Sa.withSourceHandlers(va);va.nativeSourceHandler={};va.nativeSourceHandler.canPlayType=function(d){try{return va.TEST_VID.canPlayType(d)}catch(c){return""}};va.nativeSourceHandler.canHandleSource=
function(d,c){return d.type?va.nativeSourceHandler.canPlayType(d.type):d.src?(d=Tg(d.src),va.nativeSourceHandler.canPlayType("video/"+d)):""};va.nativeSourceHandler.handleSource=function(d,c,b){c.setSrc(d.src)};va.nativeSourceHandler.dispose=function(){};va.registerSourceHandler(va.nativeSourceHandler);Sa.registerTech("Html5",va);var Sk="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),oh={canplay:"CanPlay",canplaythrough:"CanPlayThrough",
playing:"Playing",seeked:"Seeked"},ph="tiny xsmall small medium large xlarge huge".split(" "),hf={};ph.forEach(function(d){var c="x"===d.charAt(0)?"x-"+d.substring(1):d;hf[d]="vjs-layout-"+c});var gp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},db=function(d){function c(a,e,n){a.id=a.id||e.id||"vjs_video_"+Gc++;e=X(c.getTagSettings(a),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof a.closest){var q=a.closest("[lang]");
q&&q.getAttribute&&(e.language=q.getAttribute("lang"))}else for(q=a;q&&1===q.nodeType;){if(Yb(q).hasOwnProperty("lang")){e.language=q.getAttribute("lang");break}q=q.parentNode}var t=d.call(this,null,e,n)||this;t.boundDocumentFullscreenChange_=function(r){return t.documentFullscreenChange_(r)};t.boundFullWindowOnEscKey_=function(r){return t.fullWindowOnEscKey(r)};t.isFullscreen_=!1;t.log=Pj(t.id_);t.fsApi_=Ne;t.isPosterFromTech_=!1;t.queuedCallbacks_=[];t.isReady_=!1;t.hasStarted_=!1;t.userActive_=
!1;t.debugEnabled_=!1;if(!t.options_||!t.options_.techOrder||!t.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");t.tag=a;t.tagAttributes=a&&Yb(a);t.language(t.options_.language);if(e.languages){var v={};Object.getOwnPropertyNames(e.languages).forEach(function(r){v[r.toLowerCase()]=e.languages[r]});t.languages_=v}else t.languages_=c.prototype.options_.languages;t.resetCache_();t.poster_=
e.poster||"";t.controls_=!!e.controls;a.controls=!1;a.removeAttribute("controls");t.changingSrc_=!1;t.playCallbacks_=[];t.playTerminatedQueue_=[];a.hasAttribute("autoplay")?t.autoplay(!0):t.autoplay(t.options_.autoplay);e.plugins&&Object.keys(e.plugins).forEach(function(r){if("function"!==typeof t[r])throw Error('plugin "'+r+'" does not exist');});t.scrubbing_=!1;t.el_=t.createEl();mg(Ha(t),{eventBusKey:"el_"});t.fsApi_.requestFullscreen&&(wb(qa,t.fsApi_.fullscreenchange,t.boundDocumentFullscreenChange_),
t.on(t.fsApi_.fullscreenchange,t.boundDocumentFullscreenChange_));if(t.fluid_)t.on(["playerreset","resize"],t.updateStyleEl_);n=Ta(t.options_);e.plugins&&Object.keys(e.plugins).forEach(function(r){t[r](e.plugins[r])});e.debug&&t.debug(!0);t.options_.playerOptions=n;t.middleware_=[];t.initChildren();t.isAudio("audio"===a.nodeName.toLowerCase());t.controls()?t.addClass("vjs-controls-enabled"):t.addClass("vjs-controls-disabled");t.el_.setAttribute("role","region");t.isAudio()?t.el_.setAttribute("aria-label",
t.localize("Audio Player")):t.el_.setAttribute("aria-label",t.localize("Video Player"));t.isAudio()&&t.addClass("vjs-audio");t.flexNotSupported_()&&t.addClass("vjs-no-flex");td&&t.addClass("vjs-touch-enabled");Lb||t.addClass("vjs-workinghover");c.players[t.id_]=Ha(t);t.addClass("vjs-v7");t.userActive(!0);t.reportUserActivity();t.one("play",t.listenForUserActivity_);t.on("stageclick",t.handleStageClick_);t.on("keydown",t.handleKeyDown);t.on("languagechange",t.handleLanguagechange);t.breakpoints(t.options_.breakpoints);
t.responsive(t.options_.responsive);return t}ua(c,d);var b=c.prototype;b.dispose=function(){var a=this;this.trigger("dispose");this.off("dispose");fb(qa,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);fb(qa,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);c.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);
this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);ug[this.id()]=null;Bb.names.forEach(function(e){(e=a[Bb[e].getterName]())&&e.off&&e.off()});d.prototype.dispose.call(this)};b.createEl=function(){var a=this.tag,e=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();if(e)var q=this.el_=a.parentNode;
else n||(q=this.el_=d.prototype.createEl.call(this,"div"));var t=Yb(a);if(n){q=this.el_=a;for(a=this.tag=qa.createElement("video");q.children.length;)a.appendChild(q.firstChild);ub(q,"video-js")||Za(q,"video-js");q.appendChild(a);e=this.playerElIngest_=q;Object.keys(q).forEach(function(m){try{a[m]=q[m]}catch(l){}})}a.setAttribute("tabindex","-1");t.tabindex="-1";if(be||xc&&Vj)a.setAttribute("role","application"),t.role="application";a.removeAttribute("width");a.removeAttribute("height");"width"in
t&&delete t.width;"height"in t&&delete t.height;Object.getOwnPropertyNames(t).forEach(function(m){n&&"class"===m||q.setAttribute(m,t[m]);n&&a.setAttribute(m,t[m])});a.playerId=a.id;a.id+="_html5_api";a.className="vjs-tech";a.player=q.player=this;this.addClass("vjs-paused");if(!0!==da.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Yj("vjs-styles-dimensions");var v=Ic(".vjs-styles-defaults"),r=Ic("head");r.insertBefore(this.styleEl_,v?v.nextSibling:r.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);
this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);v=a.getElementsByTagName("a");for(r=0;r<v.length;r++){var p=v.item(r);Za(p,"vjs-hidden");p.setAttribute("hidden","hidden")}a.initNetworkState_=a.networkState;a.parentNode&&!e&&a.parentNode.insertBefore(q,a);Na(a,q);this.children_.unshift(a);this.el_.setAttribute("lang",this.language_);return this.el_=
q};b.crossOrigin=function(a){if(!a)return this.techGet_("crossOrigin");"anonymous"!==a&&"use-credentials"!==a?Ga.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"'):this.techCall_("setCrossOrigin",a)};b.width=function(a){return this.dimension("width",a)};b.height=function(a){return this.dimension("height",a)};b.dimension=function(a,e){var n=a+"_";if(void 0===e)return this[n]||0;if(""===e||"auto"===e)this[n]=void 0,this.updateStyleEl_();else{var q=parseFloat(e);isNaN(q)?Ga.error('Improper value "'+
e+'" supplied for for '+a):(this[n]=q,this.updateStyleEl_())}};b.fluid=function(a){var e=this;if(void 0===a)return!!this.fluid_;this.fluid_=!!a;vc(this)&&this.off(["playerreset","resize"],this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),ro(this,function(){e.on(["playerreset","resize"],e.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};b.fill=function(a){if(void 0===a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};
b.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};b.updateStyleEl_=function(){if(!0===da.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,e="number"===typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();n&&(0<=a&&(n.width=
a),0<=e&&(n.height=e))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var q=a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/q:this.videoWidth()||300;e=void 0!==this.height_?this.height_:a*q;n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(n);Zj(this.styleEl_,"\n      ."+n+" {\n        width: "+a+"px;\n        height: "+
e+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*q+"%;\n      }\n    ")}};b.loadTech_=function(a,e){var n=this;this.tech_&&this.unloadTech_();var q=$a(a),t=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==q&&this.tag&&(Sa.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=q;this.isReady_=!1;var v="string"===typeof this.autoplay()?!1:this.autoplay(),r={source:e,autoplay:v,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),
techId:this.id()+"_"+t+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Bb.names.forEach(function(p){p=Bb[p];r[p.getterName]=
n[p.privateName]});X(r,this.options_[q]);X(r,this.options_[t]);X(r,this.options_[a.toLowerCase()]);this.tag&&(r.tag=this.tag);e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(r.startTime=this.cache_.currentTime);a=Sa.getTech(a);if(!a)throw Error("No Tech named '"+q+"' exists! '"+q+"' should be registered using videojs.registerTech()'");this.tech_=new a(r);this.tech_.ready(Ia(this,this.handleTechReady_),!0);dk.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Sk.forEach(function(p){n.on(n.tech_,
p,n["handleTech"+$a(p)+"_"])});Object.keys(oh).forEach(function(p){n.on(n.tech_,p,function(m){if(0===n.tech_.playbackRate()&&n.tech_.seeking())n.queuedCallbacks_.push({callback:n["handleTech"+oh[p]+"_"].bind(n),event:m});else n["handleTech"+oh[p]+"_"](m)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",
this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",
this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===
q&&this.tag||Na(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};b.unloadTech_=function(){var a=this;Bb.names.forEach(function(e){e=Bb[e];a[e.privateName]=a[e.getterName]()});this.textTracksJson_=dk.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};b.tech=function(a){void 0===a&&Ga.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");
return this.tech_};b.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};b.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);
this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};b.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};b.handleTechLoadStart_=function(){this.removeClass("vjs-ended");
this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};b.manualAutoplay_=function(a){var e=this;if(this.tech_&&"string"===typeof a){var n=function(){var t=e.muted();e.muted(!0);var v=function(){e.muted(t)};e.playTerminatedQueue_.push(v);var r=e.play();if(Sd(r))return r["catch"](v)};if("any"===a&&!0!==this.muted()){var q=
this.play();Sd(q)&&(q=q["catch"](n))}else q="muted"===a&&!0!==this.muted()?n():this.play();if(Sd(q))return q.then(function(){e.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(t){e.trigger({type:"autoplay-failure",autoplay:a})})}};b.updateSourceCaches_=function(a){void 0===a&&(a="");var e=a,n="";"string"!==typeof e&&(e=a.src,n=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];e&&!n&&(n=Jo(this,e));this.cache_.source=Ta({},a,{src:e,type:n});
a=this.cache_.sources.filter(function(p){return p.src&&p.src===e});n=[];for(var q=this.doubleDollar("source"),t=[],v=0;v<q.length;v++){var r=Yb(q[v]);n.push(r);r.src&&r.src===e&&t.push(r.src)}t.length&&!a.length?this.cache_.sources=n:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=e};b.handleTechSourceset_=function(a){var e=this;if(!this.changingSrc_){var n=function(v){return e.updateSourceCaches_(v)},q=this.currentSource().src,t=a.src;q&&!/^blob:/.test(q)&&/^blob:/.test(t)&&
(!this.lastSource_||this.lastSource_.tech!==t&&this.lastSource_.player!==q)&&(n=function(){});n(t);a.src||this.tech_.any(["sourceset","loadstart"],function(v){"sourceset"!==v.type&&(v=e.techGet("currentSrc"),e.lastSource_.tech=v,e.updateSourceCaches_(v))})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})};b.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),
this.trigger("firstplay")):this.removeClass("vjs-has-started"))};b.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};b.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};
b.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",function q(){e!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",q))})};b.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};b.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};b.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};
b.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};b.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};b.handleTechFirstPlay_=function(){this.options_.starttime&&(Ga.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};b.handleTechPause_=function(){this.removeClass("vjs-playing");
this.addClass("vjs-paused");this.trigger("pause")};b.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};b.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};b.handleTechClick_=function(a){Fc(a)&&this.controls_&&(this.paused()?Hc(this.play()):this.pause())};b.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.doubleDollar(".vjs-control-bar, .vjs-modal-dialog"),
function(e){return e.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};b.handleTechTap_=function(){this.userActive(!this.userActive())};b.handleTechTouchStart_=
function(){this.userWasActive=this.userActive()};b.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};b.handleTechTouchEnd_=function(a){a.cancelable&&a.preventDefault()};b.handleStageClick_=function(){this.reportUserActivity()};b.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};b.documentFullscreenChange_=function(a){a=a.target.player;if(!a||a===this){a=this.el();var e=qa[this.fsApi_.fullscreenElement]===
a;!e&&a.matches?e=a.matches(":"+this.fsApi_.fullscreen):!e&&a.msMatchesSelector&&(e=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(e)}};b.handleTechFullscreenChange_=function(a,e){e&&(e.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(e.isFullscreen))};b.handleTechFullscreenError_=function(a,e){this.trigger("fullscreenerror",e)};b.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};
b.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)};b.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)};b.handleTechError_=function(){var a=this.tech_.error();this.error(a)};b.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};b.getCache=function(){return this.cache_};b.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,
lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};b.techCall_=function(a,e){this.ready(function(){if(a in Ho)return this.tech_[a](this.middleware_.reduce(tg(a),e));if(a in nk)return ij(this.middleware_,this.tech_,a,e);try{if(this.tech_)this.tech_[a](e)}catch(n){throw Ga(n),n;}},!0)};b.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in Go){var e=this.tech_;return this.middleware_.reduceRight(tg(a),e[a]())}if(a in nk)return ij(this.middleware_,
this.tech_,a);try{return this.tech_[a]()}catch(n){if(void 0===this.tech_[a])throw Ga("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",n),n;if("TypeError"===n.name)throw Ga("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n;Ga(n);throw n;}}};b.play=function(){var a=this,e=this.options_.Promise||da.Promise;return e?new e(function(n){a.play_(n)}):this.play_()};b.play_=function(a){var e=this;void 0===a&&(a=Hc);this.playCallbacks_.push(a);
a=!(this.changingSrc_||!this.src()&&!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(n){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!Ze&&!Lb||this.load())};b.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(e){e()})};
b.runPlayCallbacks_=function(a){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];e.forEach(function(n){n(a)})};b.pause=function(){this.techCall_("pause")};b.paused=function(){return!1===this.techGet_("paused")?!1:!0};b.played=function(){return this.techGet_("played")||Uc(0,0)};b.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;this.techCall_("setScrubbing",this.scrubbing_);a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};
b.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),this.cache_.initTime=0):(this.cache_.initTime=a,this.off("canplay",this.applyInitTime_),this.one("canplay",this.applyInitTime_));else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};b.applyInitTime_=function(){this.currentTime(this.cache_.initTime)};b.duration=function(a){if(void 0===a)return void 0!==
this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))};b.remainingTime=function(){return this.duration()-this.currentTime()};b.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};b.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=Uc(0,0));return a};
b.bufferedPercent=function(){return aj(this.buffered(),this.duration())};b.bufferedEnd=function(){var a=this.buffered(),e=this.duration();a=a.end(a.length-1);a>e&&(a=e);return a};b.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};b.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};b.defaultMuted=
function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1};b.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};b.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};b.isFullscreen=function(a){if(void 0!==a){var e=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_};
b.requestFullscreen=function(a){var e=this.options_.Promise||da.Promise;if(e){var n=this;return new e(function(q,t){function v(){n.off("fullscreenerror",p);n.off("fullscreenchange",r)}function r(){v();q()}function p(l,f){v();t(f)}n.one("fullscreenchange",r);n.one("fullscreenerror",p);var m=n.requestFullscreenHelper_(a);if(m)return m.then(v,v),m})}return this.requestFullscreenHelper_()};b.requestFullscreenHelper_=function(a){var e=this;if(!this.fsApi_.prefixed){var n=this.options_.fullscreen&&this.options_.fullscreen.options||
{};void 0!==a&&(n=a)}if(this.fsApi_.requestFullscreen)return(a=this.el_[this.fsApi_.requestFullscreen](n))&&a.then(function(){return e.isFullscreen(!0)},function(){return e.isFullscreen(!1)}),a;this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()};b.exitFullscreen=function(){var a=this.options_.Promise||da.Promise;if(a){var e=this;return new a(function(n,q){function t(){e.off("fullscreenerror",r);e.off("fullscreenchange",v)}function v(){t();n()}function r(m,l){t();
q(l)}e.one("fullscreenchange",v);e.one("fullscreenerror",r);var p=e.exitFullscreenHelper_();if(p)return p.then(t,t),p})}return this.exitFullscreenHelper_()};b.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var e=qa[this.fsApi_.exitFullscreen]();e&&e.then(function(){return a.isFullscreen(!1)});return e}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()};b.enterFullWindow=function(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=
qa.documentElement.style.overflow;wb(qa,"keydown",this.boundFullWindowOnEscKey_);qa.documentElement.style.overflow="hidden";Za(qa.body,"vjs-full-window");this.trigger("enterFullWindow")};b.fullWindowOnEscKey=function(a){Da.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};b.exitFullWindow=function(){this.isFullscreen(!1);this.isFullWindow=!1;fb(qa,"keydown",this.boundFullWindowOnEscKey_);qa.documentElement.style.overflow=this.docOrigOverflow;rc(qa.body,"vjs-full-window");
this.trigger("exitFullWindow")};b.disablePictureInPicture=function(a){if(void 0===a)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",a);this.options_.disablePictureInPicture=a;this.trigger("disablepictureinpicturechanged")};b.isInPictureInPicture=function(a){if(void 0!==a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};b.requestPictureInPicture=function(){if("pictureInPictureEnabled"in qa&&!1===
this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")};b.exitPictureInPicture=function(){if("pictureInPictureEnabled"in qa)return qa.exitPictureInPicture()};b.handleKeyDown=function(a){var e=this.options_.userActions;if(e&&e.hotkeys){var n=this.el_.ownerDocument.activeElement;var q=n.tagName.toLowerCase();if(n.isContentEditable)n=!0;else{var t="button checkbox hidden radio reset submit".split(" ");n="input"===q?-1===t.indexOf(n.type):-1!==["textarea"].indexOf(q)}n||("function"===
typeof e.hotkeys?e.hotkeys.call(this,a):this.handleHotkeys(a))}};b.handleHotkeys=function(a){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},n=e.fullscreenKey,q=e.muteKey;q=void 0===q?function(t){return Da.isEventKey(t,"m")}:q;e=e.playPauseKey;e=void 0===e?function(t){return Da.isEventKey(t,"k")||Da.isEventKey(t,"Space")}:e;(void 0===n?function(t){return Da.isEventKey(t,"f")}:n).call(this,a)?(a.preventDefault(),a.stopPropagation(),n=ja.getComponent("FullscreenToggle"),!1!==qa[this.fsApi_.fullscreenEnabled]&&
n.prototype.handleClick.call(this,a)):q.call(this,a)?(a.preventDefault(),a.stopPropagation(),ja.getComponent("MuteToggle").prototype.handleClick.call(this,a)):e.call(this,a)&&(a.preventDefault(),a.stopPropagation(),ja.getComponent("PlayToggle").prototype.handleClick.call(this,a))};b.canPlayType=function(a){for(var e,n=0,q=this.options_.techOrder;n<q.length;n++){e=q[n];var t=Sa.getTech(e);t||(t=ja.getComponent(e));if(!t)Ga.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.');
else if(t.isSupported()&&(e=t.canPlayType(a)))return e}return""};b.selectSource=function(a){var e=this,n=this.options_.techOrder.map(function(r){return[r,Sa.getTech(r)]}).filter(function(r){var p=r[0];if(r=r[1])return r.isSupported();Ga.error('The "'+p+'" tech is undefined. Skipped browser support check for that tech.');return!1}),q=function(r,p,m){var l;r.some(function(f){return p.some(function(g){if(l=m(f,g))return!0})});return l},t=function(r){return function(p,m){return r(m,p)}},v=function(r,
p){var m=r[0];if(r[1].canPlaySource(p,e.options_[m.toLowerCase()]))return{source:p,tech:m}};return(this.options_.sourceOrder?q(a,n,t(v)):q(n,a,v))||!1};b.src=function(a){var e=this;if("undefined"===typeof a)return this.cache_.src||"";var n=Ko(a);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),bo(this,n[0],function(q,t){e.middleware_=t;e.cache_.sources=n;e.updateSourceCaches_(q);if(e.src_(q)){if(1<n.length)return e.src(n.slice(1));e.changingSrc_=!1;e.setTimeout(function(){this.error({code:4,
message:this.localize(this.options_.notSupportedMessage)})},0);e.triggerReady()}else co(t,e.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};b.src_=function(a){var e=this,n=this.selectSource([a]);if(!n)return!0;if(!so(n.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){e.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?
this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1};b.load=function(){this.techCall_("load")};b.reset=function(){var a=this,e=this.options_.Promise||da.Promise;this.paused()||!e?this.doReset_():(e=this.play(),Hc(e.then(function(){return a.doReset_()})))};b.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();vc(this)&&
this.trigger("playerreset")};b.resetControlBarUI_=function(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};b.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,e=a.durationDisplay;a=a.remainingTimeDisplay;e&&e.updateContent();a&&a.updateContent()};b.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};b.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};b.currentSources=function(){var a=
this.currentSource(),e=[];0!==Object.keys(a).length&&e.push(a);return this.cache_.sources||e};b.currentSource=function(){return this.cache_.source||{}};b.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};b.currentType=function(){return this.currentSource()&&this.currentSource().type||""};b.preload=function(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")};b.autoplay=function(a){if(void 0===a)return this.options_.autoplay||
!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=a;this.manualAutoplay_(a);var e=!1}else this.options_.autoplay=a?!0:!1;e="undefined"===typeof e?this.options_.autoplay:e;this.tech_&&this.techCall_("setAutoplay",e)};b.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};b.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};
b.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};b.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};b.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==
a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};b.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;
a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};b.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var e=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],e);this.one("loadstart",function(){this.off(["click",
"touchstart"],e)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new yb(a),this.addClass("vjs-error"),Ga.error("(CODE:"+this.error_.code+" "+yb.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};b.reportUserActivity=function(a){this.userActivity_=!0};b.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),
this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};b.listenForUserActivity_=function(){var a,e,n,q=Ia(this,this.reportUserActivity),t=function(r){q();this.clearInterval(a)};this.on("mousedown",function(){q();this.clearInterval(a);a=this.setInterval(q,250)});this.on("mousemove",
function(r){if(r.screenX!==e||r.screenY!==n)e=r.screenX,n=r.screenY,q()});this.on("mouseup",t);this.on("mouseleave",t);!(t=this.getChild("controlBar"))||Lb||Mc||(t.on("mouseenter",function(r){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),t.on("mouseleave",function(r){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",q);this.on("keyup",q);var v;this.setInterval(function(){if(this.userActivity_){this.userActivity_=
!1;this.userActive(!0);this.clearTimeout(v);var r=this.options_.inactivityTimeout;0>=r||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},r))}},250)};b.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};b.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?
this.techGet_("defaultPlaybackRate"):1};b.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};b.addTextTrack=function(a,e,n){if(this.tech_)return this.tech_.addTextTrack(a,e,n)};b.addRemoteTextTrack=function(a,e){if(this.tech_)return this.tech_.addRemoteTextTrack(a,e)};b.removeRemoteTextTrack=function(a){void 0===a&&(a={});var e=a.track;e||(e=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(e)};b.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};
b.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};b.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};b.language=function(a){if(void 0===a)return this.language_;this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),vc(this)&&this.trigger("languagechange"))};b.languages=function(){return Ta(c.prototype.options_.languages,this.languages_)};b.toJSON=function(){var a=Ta(this.options_),
e=a.tracks;a.tracks=[];for(var n=0;n<e.length;n++){var q=e[n];q=Ta(q);q.player=void 0;a.tracks[n]=q}return a};b.createModal=function(a,e){var n=this;e=e||{};e.content=a||"";var q=new vd(this,e);this.addChild(q);q.on("dispose",function(){n.removeChild(q)});q.open();return q};b.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),e=this.currentWidth(),n=0;n<ph.length;n++){var q=ph[n];if(e<=this.breakpoints_[q]){if(a===q)break;a&&this.removeClass(hf[a]);this.addClass(hf[q]);
this.breakpoint_=q;break}}};b.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};b.breakpoints=function(a){if(void 0===a)return X(this.breakpoints_);this.breakpoint_="";this.breakpoints_=X({},gp,a);this.updateCurrentBreakpoint_();return X(this.breakpoints_)};b.responsive=function(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):
(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a};b.currentBreakpoint=function(){return this.breakpoint_};b.currentBreakpointClass=function(){return hf[this.breakpoint_]||""};b.loadMedia=function(a,e){var n=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=Ta(a);a=this.cache_.media;var q=a.poster,t=a.src,v=a.textTracks;!a.artwork&&q&&(this.cache_.media.artwork=[{src:q,type:Re(q)}]);t&&this.src(t);q&&this.poster(q);Array.isArray(v)&&v.forEach(function(r){return n.addRemoteTextTrack(r,
!1)});this.ready(e)}};b.getMedia=function(){if(!this.cache_.media){var a=this.poster(),e=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),function(q){return{kind:q.kind,label:q.label,language:q.language,src:q.src}});e={src:e,textTracks:n};a&&(e.poster=a,e.artwork=[{src:e.poster,type:Re(e.poster)}]);return e}return Ta(this.cache_.media)};c.getTagSettings=function(a){var e={sources:[],tracks:[]},n=Yb(a),q=n["data-setup"];ub(a,"vjs-fill")&&(n.fill=!0);ub(a,"vjs-fluid")&&(n.fluid=
!0);if(null!==q){var t=null;try{var v=JSON.parse(q||"{}",void 0)}catch(r){t=r}v=[t,v];q=v[0];v=v[1];q&&Ga.error(q);X(n,v)}X(e,n);if(a.hasChildNodes())for(a=a.childNodes,n=0,q=a.length;n<q;n++)v=a[n],t=v.nodeName.toLowerCase(),"source"===t?e.sources.push(Yb(v)):"track"===t&&e.tracks.push(Yb(v));return e};b.flexNotSupported_=function(){var a=qa.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};
b.debug=function(a){if(void 0===a)return this.debugEnabled_;a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)};return c}(ja);Bb.names.forEach(function(d){var c=Bb[d];db.prototype[c.getterName]=function(){if(this.tech_)return this.tech_[c.getterName]();this[c.privateName]=this[c.privateName]||new c.ListClass;return this[c.privateName]}});
db.prototype.crossorigin=db.prototype.crossOrigin;db.players={};var ie=da.navigator;db.prototype.options_={techOrder:Sa.defaultTechOrder_,html5:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:ie&&(ie.languages&&ie.languages[0]||ie.userLanguage||ie.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",
fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(d){db.prototype[d]=function(){return this.techGet_(d)}});Sk.forEach(function(d){db.prototype["handleTech"+$a(d)+"_"]=function(){return this.trigger(d)}});ja.registerComponent("Player",db);var Tk=w(function(d){function c(b,a){d.exports=c=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return c(b,a)}d.exports=c}),hp=function(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(d){return!1}},ip=w(function(d){function c(b,a,e){hp()?d.exports=c=Reflect.construct:d.exports=c=function(n,q,t){var v=[null];v.push.apply(v,q);n=new (Function.bind.apply(n,v));t&&Tk(n,t.prototype);return n};return c.apply(null,arguments)}d.exports=c}),yc={},jf=function(d){return yc.hasOwnProperty(d)?yc[d]:
void 0},kf=function(d,c,b){b=(b?"before":"")+"pluginsetup";d.trigger(b,c);d.trigger(b+":"+c.name,c)},jp=function(d,c){var b=function(){kf(this,{name:d,plugin:c,instance:null},!0);var a=c.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[d]=!0;kf(this,{name:d,plugin:c,instance:a});return a};Object.keys(c).forEach(function(a){b[a]=c[a]});return b},Uk=function(d,c){c.prototype.name=d;return function(){kf(this,{name:d,plugin:c,instance:null},!0);for(var b=arguments.length,
a=Array(b),e=0;e<b;e++)a[e]=arguments[e];var n=ip(c,[this].concat(a));this[d]=function(){return n};kf(this,n.getEventHash());return n}},jc=function(){function d(b){if(this.constructor===d)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;this.log||(this.log=this.player.log.createLogger(this.name));mg(this);delete this.trigger;Zi(this,this.constructor.defaultState);var a=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[a]=!0;this.dispose=Ia(this,this.dispose);
b.on("dispose",this.dispose)}var c=d.prototype;c.version=function(){return this.constructor.VERSION};c.getEventHash=function(b){void 0===b&&(b={});b.name=this.name;b.plugin=this.constructor;b.instance=this;return b};c.trigger=function(b,a){void 0===a&&(a={});return sc(this.eventBusEl_,b,this.getEventHash(a))};c.handleStateChanged=function(b){};c.dispose=function(){var b=this.name,a=this.player;this.trigger("dispose");this.off();a.off("dispose",this.dispose);a.activePlugins_[b]=!1;this.player=this.state=
null;a[b]=Uk(b,yc[b])};d.isBasic=function(b){b="string"===typeof b?jf(b):b;return"function"===typeof b&&!d.prototype.isPrototypeOf(b.prototype)};d.registerPlugin=function(b,a){if("string"!==typeof b)throw Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(yc.hasOwnProperty(b))Ga.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(db.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');
if("function"!==typeof a)throw Error('Illegal plugin for "'+b+'", must be a function, was '+typeof a+".");yc[b]=a;"plugin"!==b&&(d.isBasic(a)?db.prototype[b]=jp(b,a):db.prototype[b]=Uk(b,a));return a};d.deregisterPlugin=function(b){if("plugin"===b)throw Error("Cannot de-register base plugin.");yc.hasOwnProperty(b)&&(delete yc[b],delete db.prototype[b])};d.getPlugins=function(b){void 0===b&&(b=Object.keys(yc));var a;b.forEach(function(e){var n=jf(e);n&&(a=a||{},a[e]=n)});return a};d.getPluginVersion=
function(b){return(b=jf(b))&&b.VERSION||""};return d}();jc.getPlugin=jf;jc.BASE_PLUGIN_NAME="plugin";jc.registerPlugin("plugin",jc);db.prototype.usingPlugin=function(d){return!!this.activePlugins_&&!0===this.activePlugins_[d]};db.prototype.hasPlugin=function(d){return!!yc.hasOwnProperty(d)};var kp=function(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}});
c&&Tk(d,c)},lj=function(d){return 0===d.indexOf("#")?d.slice(1):d};V.hooks_={};V.hooks=function(d,c){V.hooks_[d]=V.hooks_[d]||[];c&&(V.hooks_[d]=V.hooks_[d].concat(c));return V.hooks_[d]};V.hook=function(d,c){V.hooks(d,c)};V.hookOnce=function(d,c){V.hooks(d,[].concat(c).map(function(b){return function e(){V.removeHook(d,e);return b.apply(void 0,arguments)}}))};V.removeHook=function(d,c){c=V.hooks(d).indexOf(c);if(-1>=c)return!1;V.hooks_[d]=V.hooks_[d].slice();V.hooks_[d].splice(c,1);return!0};if(!0!==
da.VIDEOJS_NO_DYNAMIC_STYLE&&ia()){var lf=Ic(".vjs-styles-defaults");if(!lf){lf=Yj("vjs-styles-defaults");var qh=Ic("head");qh&&qh.insertBefore(lf,qh.firstChild);Zj(lf,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Md(1,V);V.VERSION="7.11.8";V.options=db.prototype.options_;V.getPlayers=function(){return db.players};V.getPlayer=function(d){var c=db.players;if("string"===typeof d){d=lj(d);var b=c[d];if(b)return b;
d=Ic("#"+d)}if(Ca(d)&&(b=d,d=b.player,b=b.playerId,d||c[b]))return d||c[b]};V.getAllPlayers=function(){return Object.keys(db.players).map(function(d){return db.players[d]}).filter(Boolean)};V.players=db.players;V.getComponent=ja.getComponent;V.registerComponent=function(d,c){Sa.isTech(c)&&Ga.warn("The "+d+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");ja.registerComponent.call(ja,d,c)};V.getTech=Sa.getTech;V.registerTech=Sa.registerTech;
V.use=function(d,c){Wc[d]=Wc[d]||[];Wc[d].push(c)};Object.defineProperty(V,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(V.middleware,"TERMINATOR",{value:Qe,writeable:!1,enumerable:!0});V.browser=oo;V.TOUCH_ENABLED=td;V.extend=function(d,c){void 0===c&&(c={});var b=function(){d.apply(this,arguments)},a={};"object"===typeof c?(c.constructor!==Object.prototype.constructor&&(b=c.constructor),a=c):"function"===typeof c&&(b=c);kp(b,d);d&&(b.super_=d);for(var e in a)a.hasOwnProperty(e)&&
(b.prototype[e]=a[e]);return b};V.mergeOptions=Ta;V.bind=Ia;V.registerPlugin=jc.registerPlugin;V.deregisterPlugin=jc.deregisterPlugin;V.plugin=function(d,c){Ga.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return jc.registerPlugin(d,c)};V.getPlugins=jc.getPlugins;V.getPlugin=jc.getPlugin;V.getPluginVersion=jc.getPluginVersion;V.addLanguage=function(d,c){var b;d=(""+d).toLowerCase();V.options.languages=Ta(V.options.languages,(b={},b[d]=c,b));return V.options.languages[d]};
V.log=Ga;V.createLogger=Pj;V.createTimeRange=V.createTimeRanges=Uc;V.formatTime=nd;V.setFormatTime=function(d){wg=d};V.resetFormatTime=function(){wg=qk};V.parseUrl=Sg;V.isCrossOrigin=df;V.EventTarget=mb;V.on=wb;V.one=Oe;V.off=fb;V.trigger=sc;V.xhr=ac;V.TextTrack=de;V.AudioTrack=lk;V.VideoTrack=mk;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(d){V[d]=function(){Ga.warn("videojs."+d+"() is deprecated; use videojs.dom."+
d+"() instead");return Xj[d].apply(null,arguments)}});V.computedStyle=xa;V.dom=Xj;V.url=Do;V.defineLazyProperty=nh;var lp=w(function(d){d.exports=function(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c};d.exports["default"]=d.exports;d.exports.__esModule=!0}),Tb=G(lp),Vk=w(function(d){function c(b,a){d.exports=c=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};d.exports["default"]=d.exports;d.exports.__esModule=!0;return c(b,
a)}d.exports=c;d.exports["default"]=d.exports;d.exports.__esModule=!0});G(Vk);var mp=w(function(d){d.exports=function(c,b){c.prototype=Object.create(b.prototype);c.prototype.constructor=c;Vk(c,b)};d.exports["default"]=d.exports;d.exports.__esModule=!0}),zc=G(mp),Wk="undefined"!==typeof Gb?Gb:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var rh=document;else(rh=Wk["__GLOBAL_DOCUMENT_CACHE@4"])||(rh=Wk["__GLOBAL_DOCUMENT_CACHE@4"]=Mj);var dc=rh,ra="undefined"!==typeof window?
window:"undefined"!==typeof Gb?Gb:"undefined"!==typeof self?self:{},Xk=w(function(d,c){(function(b){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,e=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,q=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,t={buildAbsoluteURL:function(v,r,p){p=p||{};v=v.trim();r=r.trim();if(!r){if(!p.alwaysNormalize)return v;p=t.parseURL(v);if(!p)throw Error("Error trying to parse base URL.");p.path=t.normalizePath(p.path);return t.buildURLFromParts(p)}var m=
t.parseURL(r);if(!m)throw Error("Error trying to parse relative URL.");if(m.scheme){if(!p.alwaysNormalize)return r;m.path=t.normalizePath(m.path);return t.buildURLFromParts(m)}r=t.parseURL(v);if(!r)throw Error("Error trying to parse base URL.");!r.netLoc&&r.path&&"/"!==r.path[0]&&(v=e.exec(r.path),r.netLoc=v[1],r.path=v[2]);r.netLoc&&!r.path&&(r.path="/");v={scheme:r.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};m.netLoc||(v.netLoc=r.netLoc,"/"!==m.path[0]&&(m.path?
(r=r.path,r=r.substring(0,r.lastIndexOf("/")+1)+m.path,v.path=t.normalizePath(r)):(v.path=r.path,m.params||(v.params=r.params,m.query||(v.query=r.query)))));null===v.path&&(v.path=p.alwaysNormalize?t.normalizePath(m.path):m.path);return t.buildURLFromParts(v)},parseURL:function(v){return(v=a.exec(v))?{scheme:v[1]||"",netLoc:v[2]||"",path:v[3]||"",params:v[4]||"",query:v[5]||"",fragment:v[6]||""}:null},normalizePath:function(v){for(v=v.split("").reverse().join("").replace(n,"");v.length!==(v=v.replace(q,
"")).length;);return v.split("").reverse().join("")},buildURLFromParts:function(v){return v.scheme+v.netLoc+v.path+v.params+v.query+v.fragment}};d.exports=t})()}),Jc="undefined"!==typeof window?window:"undefined"!==typeof Gb?Gb:"undefined"!==typeof self?self:{},kc=function(d,c){if(/^[a-z]+:/i.test(c))return c;/\/\//i.test(d)||(d=Xk.buildAbsoluteURL(Jc.location&&Jc.location.href||"",d));return Xk.buildAbsoluteURL(d,c)},Yk=w(function(d){function c(b,a){d.exports=c=Object.setPrototypeOf||function(e,
n){e.__proto__=n;return e};d.exports["default"]=d.exports;d.exports.__esModule=!0;return c(b,a)}d.exports=c;d.exports["default"]=d.exports;d.exports.__esModule=!0});G(Yk);var np=w(function(d){d.exports=function(c,b){c.prototype=Object.create(b.prototype);c.prototype.constructor=c;Yk(c,b)};d.exports["default"]=d.exports;d.exports.__esModule=!0}),sh=G(np),th=function(){function d(){this.listeners={}}var c=d.prototype;c.on=function(b,a){this.listeners[b]||(this.listeners[b]=[]);this.listeners[b].push(a)};
c.off=function(b,a){if(!this.listeners[b])return!1;a=this.listeners[b].indexOf(a);this.listeners[b]=this.listeners[b].slice(0);this.listeners[b].splice(a,1);return-1<a};c.trigger=function(b){var a=this.listeners[b];if(a)if(2===arguments.length)for(var e=a.length,n=0;n<e;++n)a[n].call(this,arguments[1]);else{e=Array.prototype.slice.call(arguments,1);n=a.length;for(var q=0;q<n;++q)a[q].apply(this,e)}};c.dispose=function(){this.listeners={}};c.pipe=function(b){this.on("data",function(a){b.push(a)})};
return d}(),op=w(function(d){function c(){d.exports=c=Object.assign||function(b){for(var a=1;a<arguments.length;a++){var e=arguments[a],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(b[n]=e[n])}return b};d.exports["default"]=d.exports;d.exports.__esModule=!0;return c.apply(this,arguments)}d.exports=c;d.exports["default"]=d.exports;d.exports.__esModule=!0}),pp=G(op),qp=w(function(d){d.exports=function(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return c};d.exports["default"]=d.exports;d.exports.__esModule=!0}),rp=G(qp),sp=function(d){function c(){var b=d.call(this)||this;b.buffer="";return b}sh(c,d);c.prototype.push=function(b){this.buffer+=b;for(b=this.buffer.indexOf("\n");-1<b;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)};return c}(th),je=function(d){d=d.split.call(d,RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));for(var c={},b=d.length,a;b--;)""!==d[b]&&(a=/([^=]*)=(.*)/.exec(d[b]).slice(1),
a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),c[a[0]]=a[1]);return c},tp=function(d){function c(){var a=d.call(this)||this;a.customParsers=[];a.tagMappers=[];return a}sh(c,d);var b=c.prototype;b.push=function(a){var e=this,n,q;a=a.trim();0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(t,v){v=v(a);return v===a?t:t.concat([v])},[a]).forEach(function(t){for(var v=0;v<e.customParsers.length;v++)if(e.customParsers[v].call(e,
t))return;0!==t.indexOf("#EXT")?e.trigger("data",{type:"comment",text:t.slice(1)}):(t=t.replace("\r",""),(n=/^#EXTM3U/.exec(t))?e.trigger("data",{type:"tag",tagType:"m3u"}):(n=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))?(q={type:"tag",tagType:"inf"},n[1]&&(q.duration=parseFloat(n[1])),n[2]&&(q.title=n[2]),e.trigger("data",q)):(n=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"targetduration"},n[1]&&(q.duration=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))?
(q={type:"tag",tagType:"totalduration"},n[1]&&(q.duration=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"version"},n[1]&&(q.version=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"media-sequence"},n[1]&&(q.number=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(q.number=
parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"playlist-type"},n[1]&&(q.playlistType=n[1]),e.trigger("data",q)):(n=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"byterange"},n[1]&&(q.length=parseInt(n[1],10)),n[2]&&(q.offset=parseInt(n[2],10)),e.trigger("data",q)):(n=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))?(q={type:"tag",tagType:"allow-cache"},n[1]&&(q.allowed=!/NO/.test(n[1])),e.trigger("data",q)):(n=/^#EXT-X-MAP:?(.*)$/.exec(t))?
(q={type:"tag",tagType:"map"},n[1]&&(t=je(n[1]),t.URI&&(q.uri=t.URI),t.BYTERANGE&&(v=t.BYTERANGE.split("@"),t=v[0],v=v[1],q.byterange={},t&&(q.byterange.length=parseInt(t,10)),v&&(q.byterange.offset=parseInt(v,10)))),e.trigger("data",q)):(n=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))?(q={type:"tag",tagType:"stream-inf"},n[1]&&(q.attributes=je(n[1]),q.attributes.RESOLUTION&&(t=q.attributes.RESOLUTION.split("x"),v={},t[0]&&(v.width=parseInt(t[0],10)),t[1]&&(v.height=parseInt(t[1],10)),q.attributes.RESOLUTION=
v),q.attributes.BANDWIDTH&&(q.attributes.BANDWIDTH=parseInt(q.attributes.BANDWIDTH,10)),q.attributes["PROGRAM-ID"]&&(q.attributes["PROGRAM-ID"]=parseInt(q.attributes["PROGRAM-ID"],10))),e.trigger("data",q)):(n=/^#EXT-X-MEDIA:?(.*)$/.exec(t))?(q={type:"tag",tagType:"media"},n[1]&&(q.attributes=je(n[1])),e.trigger("data",q)):(n=/^#EXT-X-ENDLIST/.exec(t))?e.trigger("data",{type:"tag",tagType:"endlist"}):(n=/^#EXT-X-DISCONTINUITY/.exec(t))?e.trigger("data",{type:"tag",tagType:"discontinuity"}):(n=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))?
(q={type:"tag",tagType:"program-date-time"},n[1]&&(q.dateTimeString=n[1],q.dateTimeObject=new Date(n[1])),e.trigger("data",q)):(n=/^#EXT-X-KEY:?(.*)$/.exec(t))?(q={type:"tag",tagType:"key"},n[1]&&(q.attributes=je(n[1]),q.attributes.IV&&("0x"===q.attributes.IV.substring(0,2).toLowerCase()&&(q.attributes.IV=q.attributes.IV.substring(2)),q.attributes.IV=q.attributes.IV.match(/.{8}/g),q.attributes.IV[0]=parseInt(q.attributes.IV[0],16),q.attributes.IV[1]=parseInt(q.attributes.IV[1],16),q.attributes.IV[2]=
parseInt(q.attributes.IV[2],16),q.attributes.IV[3]=parseInt(q.attributes.IV[3],16),q.attributes.IV=new Uint32Array(q.attributes.IV))),e.trigger("data",q)):(n=/^#EXT-X-START:?(.*)$/.exec(t))?(q={type:"tag",tagType:"start"},n[1]&&(q.attributes=je(n[1]),q.attributes["TIME-OFFSET"]=parseFloat(q.attributes["TIME-OFFSET"]),q.attributes.PRECISE=/YES/.test(q.attributes.PRECISE)),e.trigger("data",q)):(n=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"cue-out-cont"},q.data=n[1]?n[1]:"",e.trigger("data",
q)):(n=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"cue-out"},q.data=n[1]?n[1]:"",e.trigger("data",q)):(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"cue-in"},q.data=n[1]?n[1]:"",e.trigger("data",q)):e.trigger("data",{type:"tag",data:t.slice(4)}))}))};b.addParser=function(a){var e=this,n=a.expression,q=a.customType,t=a.dataParser,v=a.segment;"function"!==typeof t&&(t=function(r){return r});this.customParsers.push(function(r){if(n.exec(r))return e.trigger("data",{type:"custom",
data:t(r),customType:q,segment:v}),!0})};b.addTagMapper=function(a){var e=a.expression,n=a.map;this.tagMappers.push(function(q){return e.test(q)?n(q):q})};return c}(th),up=function(d){function c(){var a=d.call(this)||this;a.lineStream=new sp;a.parseStream=new tp;a.lineStream.pipe(a.parseStream);var e=rp(a),n=[],q={},t,v,r=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m=0;a.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var l=0;a.parseStream.on("data",function(f){var g,
k;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=f.allowed;"allowed"in f||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var u={};"length"in f&&(q.byterange=u,u.length=f.length,"offset"in f||(f.offset=l));"offset"in f&&(q.byterange=u,u.offset=f.offset);l=u.offset+u.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",
{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<f.duration&&(q.duration=f.duration);0===f.duration&&(q.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=n},key:function(){f.attributes?"NONE"===f.attributes.METHOD?v=null:f.attributes.URI?"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===
f.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(f.attributes.METHOD)?this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===f.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==f.attributes.URI.substring(0,23)?this.trigger("warn",{message:"invalid key URI provided for Widevine"}):f.attributes.KEYID&&"0x"===f.attributes.KEYID.substring(0,
2)?this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:f.attributes.KEYFORMAT,keyId:f.attributes.KEYID.substring(2)},pssh:mj(f.attributes.URI.split(",")[1])}}:this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(f.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),v={method:f.attributes.METHOD||"AES-128",uri:f.attributes.URI},"undefined"!==typeof f.attributes.IV&&(v.iv=f.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):
this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(f.number)?this.manifest.mediaSequence=f.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+f.number})},"discontinuity-sequence":function(){isFinite(f.number)?m=this.manifest.discontinuitySequence=f.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+f.number})},"playlist-type":function(){/VOD|EVENT/.test(f.playlistType)?this.manifest.playlistType=
f.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+f.playlist})},map:function(){t={};f.uri&&(t.uri=f.uri);f.byterange&&(t.byterange=f.byterange)},"stream-inf":function(){this.manifest.playlists=n;this.manifest.mediaGroups=this.manifest.mediaGroups||p;f.attributes?(q.attributes||(q.attributes={}),pp(q.attributes,f.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||p;if(f.attributes&&
f.attributes.TYPE&&f.attributes["GROUP-ID"]&&f.attributes.NAME){var u=this.manifest.mediaGroups[f.attributes.TYPE];u[f.attributes["GROUP-ID"]]=u[f.attributes["GROUP-ID"]]||{};g=u[f.attributes["GROUP-ID"]];k={"default":/yes/i.test(f.attributes.DEFAULT)};k.autoselect=k["default"]?!0:/yes/i.test(f.attributes.AUTOSELECT);f.attributes.LANGUAGE&&(k.language=f.attributes.LANGUAGE);f.attributes.URI&&(k.uri=f.attributes.URI);f.attributes["INSTREAM-ID"]&&(k.instreamId=f.attributes["INSTREAM-ID"]);f.attributes.CHARACTERISTICS&&
(k.characteristics=f.attributes.CHARACTERISTICS);f.attributes.FORCED&&(k.forced=/yes/i.test(f.attributes.FORCED));g[f.attributes.NAME]=k}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){m+=1;q.discontinuity=!0;this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=f.dateTimeString,this.manifest.dateTimeObject=f.dateTimeObject);q.dateTimeString=
f.dateTimeString;q.dateTimeObject=f.dateTimeObject},targetduration:function(){!isFinite(f.duration)||0>f.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+f.duration}):this.manifest.targetDuration=f.duration},totalduration:function(){!isFinite(f.duration)||0>f.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+f.duration}):this.manifest.totalDuration=f.duration},start:function(){!f.attributes||isNaN(f.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):
this.manifest.start={timeOffset:f.attributes["TIME-OFFSET"],precise:f.attributes.PRECISE}},"cue-out":function(){q.cueOut=f.data},"cue-out-cont":function(){q.cueOutCont=f.data},"cue-in":function(){q.cueIn=f.data}}[f.tagType]||r).call(e)},uri:function(){q.uri=f.uri;n.push(q);!this.manifest.targetDuration||"duration"in q||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),q.duration=this.manifest.targetDuration);v&&(q.key=v);q.timeline=m;t&&(q.map=t);q={}},comment:function(){},
custom:function(){f.segment?(q.custom=q.custom||{},q.custom[f.customType]=f.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[f.customType]=f.data)}})[f.type].call(e)});return a}sh(c,d);var b=c.prototype;b.push=function(a){this.lineStream.push(a)};b.end=function(){this.lineStream.push("\n")};b.addParser=function(a){this.parseStream.addParser(a)};b.addTagMapper=function(a){this.parseStream.addTagMapper(a)};return c}(th),vp=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,
wp=/^application\/dash\+xml/i,Zk=function(d){return vp.test(d)?"hls":wp.test(d)?"dash":"application/vnd.videojs.vhs+json"===d?"vhs-json":null},xp="undefined"!==typeof window?window:"undefined"!==typeof Gb?Gb:"undefined"!==typeof self?self:{},yp={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\u00c0",Aacute:"\u00c1",Acirc:"\u00c2",Atilde:"\u00c3",Auml:"\u00c4",Aring:"\u00c5",AElig:"\u00c6",Ccedil:"\u00c7",Egrave:"\u00c8",Eacute:"\u00c9",Ecirc:"\u00ca",Euml:"\u00cb",Igrave:"\u00cc",Iacute:"\u00cd",
Icirc:"\u00ce",Iuml:"\u00cf",ETH:"\u00d0",Ntilde:"\u00d1",Ograve:"\u00d2",Oacute:"\u00d3",Ocirc:"\u00d4",Otilde:"\u00d5",Ouml:"\u00d6",Oslash:"\u00d8",Ugrave:"\u00d9",Uacute:"\u00da",Ucirc:"\u00db",Uuml:"\u00dc",Yacute:"\u00dd",THORN:"\u00de",szlig:"\u00df",agrave:"\u00e0",aacute:"\u00e1",acirc:"\u00e2",atilde:"\u00e3",auml:"\u00e4",aring:"\u00e5",aelig:"\u00e6",ccedil:"\u00e7",egrave:"\u00e8",eacute:"\u00e9",ecirc:"\u00ea",euml:"\u00eb",igrave:"\u00ec",iacute:"\u00ed",icirc:"\u00ee",iuml:"\u00ef",
eth:"\u00f0",ntilde:"\u00f1",ograve:"\u00f2",oacute:"\u00f3",ocirc:"\u00f4",otilde:"\u00f5",ouml:"\u00f6",oslash:"\u00f8",ugrave:"\u00f9",uacute:"\u00fa",ucirc:"\u00fb",uuml:"\u00fc",yacute:"\u00fd",thorn:"\u00fe",yuml:"\u00ff",nbsp:"\u00a0",iexcl:"\u00a1",cent:"\u00a2",pound:"\u00a3",curren:"\u00a4",yen:"\u00a5",brvbar:"\u00a6",sect:"\u00a7",uml:"\u00a8",copy:"\u00a9",ordf:"\u00aa",laquo:"\u00ab",not:"\u00ac",shy:"\u00ad\u00ad",reg:"\u00ae",macr:"\u00af",deg:"\u00b0",plusmn:"\u00b1",sup2:"\u00b2",
sup3:"\u00b3",acute:"\u00b4",micro:"\u00b5",para:"\u00b6",middot:"\u00b7",cedil:"\u00b8",sup1:"\u00b9",ordm:"\u00ba",raquo:"\u00bb",frac14:"\u00bc",frac12:"\u00bd",frac34:"\u00be",iquest:"\u00bf",times:"\u00d7",divide:"\u00f7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",
"int":"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",
Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",
oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",
larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},uh=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$k=new RegExp("[\\-\\.0-9"+uh.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),al=new RegExp("^"+uh.source+$k.source+
"*(?::"+uh.source+$k.source+"*)?$");nj.prototype={parse:function(d,c,b){var a=this.domBuilder;a.startDocument();var e=c,n=c={},q;for(q in e)n[q]=e[q];fo(d,c,b,a,this.errorHandler);a.endDocument()}};oj.prototype={setTagName:function(d){if(!al.test(d))throw Error("invalid tagName:"+d);this.tagName=d},add:function(d,c,b){if(!al.test(d))throw Error("invalid attribute:"+d);this[this.length++]={qName:d,value:c,offset:b}},length:0,getLocalName:function(d){return this[d].localName},getLocator:function(d){return this[d].locator},
getQName:function(d){return this[d].qName},getURI:function(d){return this[d].uri},getValue:function(d){return this[d].value}};var Hb={},bc=Hb.ELEMENT_NODE=1,sd=Hb.ATTRIBUTE_NODE=2,Ve=Hb.TEXT_NODE=3,Gj=Hb.CDATA_SECTION_NODE=4,Kj=Hb.ENTITY_REFERENCE_NODE=5,zp=Hb.ENTITY_NODE=6,Jj=Hb.PROCESSING_INSTRUCTION_NODE=7,Hj=Hb.COMMENT_NODE=8,Fj=Hb.DOCUMENT_NODE=9,Ij=Hb.DOCUMENT_TYPE_NODE=10,wc=Hb.DOCUMENT_FRAGMENT_NODE=11,Ap=Hb.NOTATION_NODE=12,vb={},kb={};vb.INDEX_SIZE_ERR=(kb[1]="Index size error",1);vb.DOMSTRING_SIZE_ERR=
(kb[2]="DOMString size error",2);var Bp=vb.HIERARCHY_REQUEST_ERR=(kb[3]="Hierarchy request error",3);vb.WRONG_DOCUMENT_ERR=(kb[4]="Wrong document",4);vb.INVALID_CHARACTER_ERR=(kb[5]="Invalid character",5);vb.NO_DATA_ALLOWED_ERR=(kb[6]="No data allowed",6);vb.NO_MODIFICATION_ALLOWED_ERR=(kb[7]="No modification allowed",7);var lo=vb.NOT_FOUND_ERR=(kb[8]="Not found",8);vb.NOT_SUPPORTED_ERR=(kb[9]="Not supported",9);var bl=vb.INUSE_ATTRIBUTE_ERR=(kb[10]="Attribute in use",10);vb.INVALID_STATE_ERR=(kb[11]=
"Invalid state",11);vb.SYNTAX_ERR=(kb[12]="Syntax error",12);vb.INVALID_MODIFICATION_ERR=(kb[13]="Invalid modification",13);vb.NAMESPACE_ERR=(kb[14]="Invalid namespace",14);vb.INVALID_ACCESS_ERR=(kb[15]="Invalid access",15);od.prototype=Error.prototype;Wd(vb,od);Kc.prototype={length:0,item:function(d){return this[d]||null},toString:function(d,c){for(var b=[],a=0;a<this.length;a++)rd(this[a],b,d,c);return b.join("")}};pd.prototype.item=function(d){xg(this);return this[d]};Fb(pd,Kc);Se.prototype={length:0,
item:Kc.prototype.item,getNamedItem:function(d){for(var c=this.length;c--;){var b=this[c];if(b.nodeName==d)return b}},setNamedItem:function(d){var c=d.ownerElement;if(c&&c!=this._ownerElement)throw new od(bl);c=this.getNamedItem(d.nodeName);tj(this._ownerElement,this,d,c);return c},setNamedItemNS:function(d){var c=d.ownerElement;if(c&&c!=this._ownerElement)throw new od(bl);c=this.getNamedItemNS(d.namespaceURI,d.localName);tj(this._ownerElement,this,d,c);return c},removeNamedItem:function(d){d=this.getNamedItem(d);
vj(this._ownerElement,this,d);return d},removeNamedItemNS:function(d,c){d=this.getNamedItemNS(d,c);vj(this._ownerElement,this,d);return d},getNamedItemNS:function(d,c){for(var b=this.length;b--;){var a=this[b];if(a.localName==c&&a.namespaceURI==d)return a}return null}};wj.prototype={hasFeature:function(d,c){return(d=this._features[d.toLowerCase()])&&(!c||c in d)?!0:!1},createDocument:function(d,c,b){var a=new Yd;a.implementation=this;a.childNodes=new Kc;(a.doctype=b)&&a.appendChild(b);c&&(d=a.createElementNS(d,
c),a.appendChild(d));return a},createDocumentType:function(d,c,b){var a=new Cg;a.name=d;a.nodeName=d;a.publicId=c;a.systemId=b;return a}};Ab.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(d,c){return zj(this,d,c)},replaceChild:function(d,c){this.insertBefore(d,c);c&&this.removeChild(c)},removeChild:function(d){return yj(this,
d)},appendChild:function(d){return this.insertBefore(d,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(d){return Fg(this.ownerDocument||this,this,d)},normalize:function(){for(var d=this.firstChild;d;){var c=d.nextSibling;c&&c.nodeType==Ve&&d.nodeType==Ve?(this.removeChild(c),d.appendData(c.data)):(d.normalize(),d=c)}},isSupported:function(d,c){return this.ownerDocument.implementation.hasFeature(d,c)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(d){for(var c=
this;c;){var b=c._nsMap;if(b)for(var a in b)if(b[a]==d)return a;c=c.nodeType==sd?c.ownerDocument:c.parentNode}return null},lookupNamespaceURI:function(d){for(var c=this;c;){var b=c._nsMap;if(b&&d in b)return b[d];c=c.nodeType==sd?c.ownerDocument:c.parentNode}return null},isDefaultNamespace:function(d){return null==this.lookupPrefix(d)}};Wd(Hb,Ab);Wd(Hb,Ab.prototype);Yd.prototype={nodeName:"#document",nodeType:Fj,doctype:null,documentElement:null,_inc:1,insertBefore:function(d,c){if(d.nodeType==wc){for(var b=
d.firstChild;b;){var a=b.nextSibling;this.insertBefore(b,c);b=a}return d}null==this.documentElement&&d.nodeType==bc&&(this.documentElement=d);return zj(this,d,c),d.ownerDocument=this,d},removeChild:function(d){this.documentElement==d&&(this.documentElement=null);return yj(this,d)},importNode:function(d,c){return Lj(this,d,c)},getElementById:function(d){var c=null;Xd(this.documentElement,function(b){if(b.nodeType==bc&&b.getAttribute("id")==d)return c=b,!0});return c},getElementsByClassName:function(d){var c=
new RegExp("(^|\\s)"+d+"(\\s|$)");return new pd(this,function(b){var a=[];Xd(b.documentElement,function(e){e!==b&&e.nodeType==bc&&c.test(e.getAttribute("class"))&&a.push(e)});return a})},createElement:function(d){var c=new qd;c.ownerDocument=this;c.nodeName=d;c.tagName=d;c.childNodes=new Kc;return(c.attributes=new Se)._ownerElement=c},createDocumentFragment:function(){var d=new Ue;d.ownerDocument=this;d.childNodes=new Kc;return d},createTextNode:function(d){var c=new zg;c.ownerDocument=this;c.appendData(d);
return c},createComment:function(d){var c=new Ag;c.ownerDocument=this;c.appendData(d);return c},createCDATASection:function(d){var c=new Bg;c.ownerDocument=this;c.appendData(d);return c},createProcessingInstruction:function(d,c){var b=new Eg;b.ownerDocument=this;b.tagName=b.target=d;b.nodeValue=b.data=c;return b},createAttribute:function(d){var c=new Te;c.ownerDocument=this;c.name=d;c.nodeName=d;c.localName=d;c.specified=!0;return c},createEntityReference:function(d){var c=new Dg;c.ownerDocument=
this;c.nodeName=d;return c},createElementNS:function(d,c){var b=new qd,a=c.split(":"),e=b.attributes=new Se;b.childNodes=new Kc;b.ownerDocument=this;b.nodeName=c;b.tagName=c;b.namespaceURI=d;2==a.length?(b.prefix=a[0],b.localName=a[1]):b.localName=c;return e._ownerElement=b},createAttributeNS:function(d,c){var b=new Te,a=c.split(":");b.ownerDocument=this;b.nodeName=c;b.name=c;b.namespaceURI=d;b.specified=!0;2==a.length?(b.prefix=a[0],b.localName=a[1]):b.localName=c;return b}};Fb(Yd,Ab);qd.prototype=
{nodeType:bc,hasAttribute:function(d){return null!=this.getAttributeNode(d)},getAttribute:function(d){return(d=this.getAttributeNode(d))&&d.value||""},getAttributeNode:function(d){return this.attributes.getNamedItem(d)},setAttribute:function(d,c){d=this.ownerDocument.createAttribute(d);d.value=d.nodeValue=""+c;this.setAttributeNode(d)},removeAttribute:function(d){(d=this.getAttributeNode(d))&&this.removeAttributeNode(d)},appendChild:function(d){if(d.nodeType===wc)return this.insertBefore(d,null);
var c=d.parentNode;c&&c.removeChild(d);c=this.lastChild;d.parentNode=this;d.previousSibling=c;d.nextSibling=null;c?c.nextSibling=d:this.firstChild=d;this.lastChild=d;yg(this.ownerDocument,this,d);return d},setAttributeNode:function(d){return this.attributes.setNamedItem(d)},setAttributeNodeNS:function(d){return this.attributes.setNamedItemNS(d)},removeAttributeNode:function(d){return this.attributes.removeNamedItem(d.nodeName)},removeAttributeNS:function(d,c){(d=this.getAttributeNodeNS(d,c))&&this.removeAttributeNode(d)},
hasAttributeNS:function(d,c){return null!=this.getAttributeNodeNS(d,c)},getAttributeNS:function(d,c){return(d=this.getAttributeNodeNS(d,c))&&d.value||""},setAttributeNS:function(d,c,b){d=this.ownerDocument.createAttributeNS(d,c);d.value=d.nodeValue=""+b;this.setAttributeNode(d)},getAttributeNodeNS:function(d,c){return this.attributes.getNamedItemNS(d,c)},getElementsByTagName:function(d){return new pd(this,function(c){var b=[];Xd(c,function(a){a===c||a.nodeType!=bc||"*"!==d&&a.tagName!=d||b.push(a)});
return b})},getElementsByTagNameNS:function(d,c){return new pd(this,function(b){var a=[];Xd(b,function(e){e===b||e.nodeType!==bc||"*"!==d&&e.namespaceURI!==d||"*"!==c&&e.localName!=c||a.push(e)});return a})}};Yd.prototype.getElementsByTagName=qd.prototype.getElementsByTagName;Yd.prototype.getElementsByTagNameNS=qd.prototype.getElementsByTagNameNS;Fb(qd,Ab);Te.prototype.nodeType=sd;Fb(Te,Ab);Zd.prototype={data:"",substringData:function(d,c){return this.data.substring(d,d+c)},appendData:function(d){this.nodeValue=
this.data=d=this.data+d;this.length=d.length},insertData:function(d,c){this.replaceData(d,0,c)},appendChild:function(d){throw Error(kb[Bp]);},deleteData:function(d,c){this.replaceData(d,c,"")},replaceData:function(d,c,b){var a=this.data.substring(0,d);d=this.data.substring(d+c);this.nodeValue=this.data=b=a+b+d;this.length=b.length}};Fb(Zd,Ab);zg.prototype={nodeName:"#text",nodeType:Ve,splitText:function(d){var c=this.data,b=c.substring(d);this.data=this.nodeValue=c=c.substring(0,d);this.length=c.length;
d=this.ownerDocument.createTextNode(b);this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling);return d}};Fb(zg,Zd);Ag.prototype={nodeName:"#comment",nodeType:Hj};Fb(Ag,Zd);Bg.prototype={nodeName:"#cdata-section",nodeType:Gj};Fb(Bg,Zd);Cg.prototype.nodeType=Ij;Fb(Cg,Ab);Aj.prototype.nodeType=Ap;Fb(Aj,Ab);Bj.prototype.nodeType=zp;Fb(Bj,Ab);Dg.prototype.nodeType=Kj;Fb(Dg,Ab);Ue.prototype.nodeName="#document-fragment";Ue.prototype.nodeType=wc;Fb(Ue,Ab);Eg.prototype.nodeType=Jj;Fb(Eg,Ab);Cj.prototype.serializeToString=
function(d,c,b){return Dj.call(d,c,b)};Ab.prototype.toString=Dj;try{if(Object.defineProperty){var Cp=function b(c){switch(c.nodeType){case bc:case wc:var a=[];for(c=c.firstChild;c;)7!==c.nodeType&&8!==c.nodeType&&a.push(b(c)),c=c.nextSibling;return a.join("");default:return c.nodeValue}};Object.defineProperty(pd.prototype,"length",{get:function(){xg(this);return this.$$length}});Object.defineProperty(Ab.prototype,"textContent",{get:function(){return Cp(this)},set:function(c){switch(this.nodeType){case bc:case wc:for(;this.firstChild;)this.removeChild(this.firstChild);
(c||String(c))&&this.appendChild(this.ownerDocument.createTextNode(c));break;default:this.nodeValue=this.value=this.data=c}}});rj=function(c,b,a){c["doubleDollar"+b]=a}}}catch(d){}var vh=w(function(d,c){function b(m){this.options=m||{locator:{}}}function a(m,l,f){function g(x){var A=m[x];!A&&u&&(A=2==m.length?function(H){m(x,H)}:m);k[x]=A&&function(H){A("[xmldom "+x+"]\t"+H+q(f))}||function(){}}if(!m){if(l instanceof e)return l;m=l}var k={},u=m instanceof Function;f=f||{};g("warning");g("error");
g("fatalError");return k}function e(){this.cdata=!1}function n(m,l){l.lineNumber=m.lineNumber;l.columnNumber=m.columnNumber}function q(m){if(m)return"\n@"+(m.systemId||"")+"#[line:"+m.lineNumber+",col:"+m.columnNumber+"]"}function t(m,l,f){return"string"==typeof m?m.substr(l,f):m.length>=l+f||l?new java.lang.String(m,l,f)+"":m}function v(m,l){m.currentElement?m.currentElement.appendChild(l):m.doc.appendChild(l)}b.prototype.parseFromString=function(m,l){var f=this.options,g=new r,k=f.domBuilder||new e,
u=f.errorHandler,x=f.locator,A=f.xmlns||{},H=(l=/\/x?html?$/.test(l))?yp:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};x&&k.setDocumentLocator(x);g.errorHandler=a(u,k,x);g.domBuilder=f.domBuilder||k;l&&(A[""]="http://www.w3.org/1999/xhtml");A.xml=A.xml||"http://www.w3.org/XML/1998/namespace";m&&"string"===typeof m?g.parse(m,A,H):g.errorHandler.error("invalid doc source");return k.doc};e.prototype={startDocument:function(){this.doc=(new p).createDocument(null,null,null);this.locator&&(this.doc.documentURI=
this.locator.systemId)},startElement:function(m,l,f,g){var k=this.doc;l=k.createElementNS(m,f||l);var u=g.length;v(this,l);this.currentElement=l;this.locator&&n(this.locator,l);for(var x=0;x<u;x++){m=g.getURI(x);var A=g.getValue(x);f=g.getQName(x);m=k.createAttributeNS(m,f);this.locator&&n(g.getLocator(x),m);m.value=m.nodeValue=A;l.setAttributeNode(m)}},endElement:function(m,l,f){m=this.currentElement;m.tagName;this.currentElement=m.parentNode},startPrefixMapping:function(m,l){},endPrefixMapping:function(m){},
processingInstruction:function(m,l){m=this.doc.createProcessingInstruction(m,l);this.locator&&n(this.locator,m);v(this,m)},ignorableWhitespace:function(m,l,f){},characters:function(m,l,f){if(m=t.apply(this,arguments)){var g=this.cdata?this.doc.createCDATASection(m):this.doc.createTextNode(m);this.currentElement?this.currentElement.appendChild(g):/^\s*$/.test(m)&&this.doc.appendChild(g);this.locator&&n(this.locator,g)}},skippedEntity:function(m){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(m){if(this.locator=
m)m.lineNumber=0},comment:function(m,l,f){m=t.apply(this,arguments);var g=this.doc.createComment(m);this.locator&&n(this.locator,g);v(this,g)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(m,l,f){var g=this.doc.implementation;g&&g.createDocumentType&&(m=g.createDocumentType(m,l,f),this.locator&&n(this.locator,m),v(this,m))},warning:function(m){console.warn("[xmldom warning]\t"+m,q(this.locator))},error:function(m){console.error("[xmldom error]\t"+m,q(this.locator))},
fatalError:function(m){console.error("[xmldom fatalError]\t"+m,q(this.locator));throw m;}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(m){e.prototype[m]=function(){return null}});var r=nj,p=c.DOMImplementation=wj;c.XMLSerializer=Cj;c.DOMParser=b});vh.DOMImplementation;vh.XMLSerializer;var Dp=vh.DOMParser,cl=function(d){return!!d&&"object"===typeof d},Nb=function c(){for(var b=
arguments.length,a=Array(b),e=0;e<b;e++)a[e]=arguments[e];return a.reduce(function(n,q){if("object"!==typeof q)return n;Object.keys(q).forEach(function(t){Array.isArray(n[t])&&Array.isArray(q[t])?n[t]=n[t].concat(q[t]):cl(n[t])&&cl(q[t])?n[t]=c(n[t],q[t]):n[t]=q[t]});return n},{})},Ep=function(c){return Object.keys(c).map(function(b){return c[b]})},mf=function(c){return c.reduce(function(b,a){return b.concat(a)},[])},dl=function(c){if(!c.length)return[];for(var b=[],a=0;a<c.length;a++)b.push(c[a]);
return b},Fp=function(c,b){return c.reduce(function(a,e,n){e[b]&&a.push(n);return a},[])},ke=function(c){var b=c.baseUrl,a=c.source;a=void 0===a?"":a;var e=c.range;e=void 0===e?"":e;c=c.indexRange;c=void 0===c?"":c;b={uri:a,resolvedUri:kc((void 0===b?"":b)||"",a)};if(e||c)e=(e?e:c).split("-"),a=parseInt(e[0],10),e=parseInt(e[1],10),b.byterange={length:e-a+1,offset:a};return b},el=function(c){c&&"number"!==typeof c&&(c=parseInt(c,10));return isNaN(c)?null:c},Gp={"static":function(c){var b=c.duration,
a=c.timescale;a=void 0===a?1:a;var e=c.sourceDuration;c=el(c.endNumber);return{start:0,end:"number"===typeof c?c:Math.ceil(e/(b/a))}},dynamic:function(c){var b=c.NOW,a=c.clientOffset,e=c.availabilityStartTime,n=c.timescale;n=void 0===n?1:n;var q=c.duration,t=c.start,v=void 0===t?0:t;t=c.minimumUpdatePeriod;var r=void 0===t?0:t;t=c.timeShiftBufferDepth;t=void 0===t?Infinity:t;c=el(c.endNumber);b=(b+a)/1E3;e+=v;a=Math.ceil((b+r-e)*n/q);v=Math.floor((b-e)*n/q);return{start:Math.max(0,Math.floor((b-e-
t)*n/q)),end:"number"===typeof c?c:Math.min(a,v)}}},Hp=function(c){return function(b,a){var e=c.duration,n=c.timescale,q=c.startNumber;return{number:(void 0===q?1:q)+b,duration:e/(void 0===n?1:n),timeline:c.periodIndex,time:a*e}}},wh=function(c){var b=c.type,a=void 0===b?"static":b;b=c.duration;var e=c.timescale;e=void 0===e?1:e;var n=c.sourceDuration,q=Gp[a](c),t=q.end,v=[];for(q=q.start;q<t;q++)v.push(q);c=v.map(Hp(c));"static"===a&&(a=c.length-1,c[a].duration=n-b/e*a);return c},fl=function(c){var b=
c.baseUrl,a=c.initialization,e=void 0===a?{}:a;a=c.sourceDuration;var n=c.indexRange,q=void 0===n?"":n;n=c.duration;if(!b)throw Error("NO_BASE_URL");e=ke({baseUrl:b,source:e.sourceURL,range:e.range});b=ke({baseUrl:b,source:b,indexRange:q});b.map=e;n?(c=wh(c),c.length&&(b.duration=c[0].duration,b.timeline=c[0].timeline)):a&&(b.duration=a,b.timeline=0);b.number=0;return[b]},xh=function(c,b,a){var e=c.sidx.map?c.sidx.map:null,n=c.sidx.duration,q=c.timeline||0,t=c.sidx.byterange,v=t.offset+t.length;t=
b.timescale;var r=b.references.filter(function(g){return 1!==g.referenceType}),p=[];v+=b.firstOffset;for(var m=0;m<r.length;m++){var l=b.references[m],f=l.referencedSize;l=fl({baseUrl:a,timescale:t,timeline:q,periodIndex:q,duration:l.subsegmentDuration,sourceDuration:n,indexRange:v+"-"+(v+f-1)})[0];e&&(l.map=e);p.push(l);v+=f}c.segments=p;return c},gl=function(c){return Ep(c.reduce(function(b,a){var e=a.attributes.id+(a.attributes.lang||"");if(b[e]){var n;a.segments[0]&&(a.segments[0].discontinuity=
!0);(n=b[e].segments).push.apply(n,a.segments);a.attributes.contentProtection&&(b[e].attributes.contentProtection=a.attributes.contentProtection)}else b[e]=a;return b},{})).map(function(b){b.discontinuityStarts=Fp(b.segments,"discontinuity");return b})},yh=function(c,b){void 0===b&&(b={});if(!Object.keys(b).length)return c;for(var a in c){var e=c[a];if(e.sidx){var n=e.sidx.byterange;n=e.sidx.uri+"-"+(n.offset+"-"+(n.offset+n.length-1));n=b[n]&&b[n].sidx;e.sidx&&n&&xh(e,n,e.sidx.resolvedUri)}}return c},
Ip=function(c,b){void 0===b&&(b={});var a;c=c.reduce(function(n,q){var t=q.attributes.role&&q.attributes.role.value||"",v=q.attributes.lang||"",r="main";v&&(r=""+q.attributes.lang+(t?" ("+t+")":""));if(n[r]&&n[r].playlists[0].attributes.BANDWIDTH>q.attributes.bandwidth)return n;var p,m=q.attributes,l=q.segments,f=q.sidx,g={attributes:(p={NAME:m.id,BANDWIDTH:m.bandwidth,CODECS:m.codecs},p["PROGRAM-ID"]=1,p),uri:"",endList:"static"===(m.type||"static"),timeline:m.periodIndex,resolvedUri:"",targetDuration:m.duration,
segments:l,mediaSequence:l.length?l[0].number:1};m.contentProtection&&(g.contentProtection=m.contentProtection);f&&(g.sidx=f);n[r]={language:v,autoselect:!0,"default":"main"===t,playlists:yh([g],b),uri:""};"undefined"===typeof a&&"main"===t&&(a=q,a["default"]=!0);return n},{});if(!a){var e=Object.keys(c)[0];c[e]["default"]=!0}return c},Jp=function(c,b){void 0===b&&(b={});return c.reduce(function(a,e){var n=e.attributes.lang||"text";if(a[n])return a;var q,t=e.attributes;e=e.segments;"undefined"===
typeof e&&(e=[{uri:t.baseUrl,timeline:t.periodIndex,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);var v=(q={NAME:t.id,BANDWIDTH:t.bandwidth},q["PROGRAM-ID"]=1,q);t.codecs&&(v.CODECS=t.codecs);a[n]={language:n,"default":!1,autoselect:!1,playlists:yh([{attributes:v,uri:"",endList:"static"===(t.type||"static"),timeline:t.periodIndex,resolvedUri:t.baseUrl||"",targetDuration:t.duration,segments:e,mediaSequence:e.length?e[0].number:1}],b),uri:""};return a},
{})},Kp=function(c){var b,a=c.attributes,e=c.segments;c=c.sidx;var n={attributes:(b={NAME:a.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:a.width,height:a.height},CODECS:a.codecs,BANDWIDTH:a.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:e,mediaSequence:e.length?e[0].number:1};a.contentProtection&&(n.contentProtection=a.contentProtection);c&&(n.sidx=c);return n},Lp=function(c,b,a){var e;void 0===
a&&(a={});if(!c.length)return{};var n=c[0].attributes,q=n.sourceDuration,t=n.type;t=void 0===t?"static":t;var v=n.suggestedPresentationDelay;n=n.minimumUpdatePeriod;var r=gl(c.filter(function(l){l=l.attributes;return"video/mp4"===l.mimeType||"video/webm"===l.mimeType||"video"===l.contentType})).map(Kp),p=gl(c.filter(function(l){l=l.attributes;return"audio/mp4"===l.mimeType||"audio/webm"===l.mimeType||"audio"===l.contentType}));c=c.filter(function(l){l=l.attributes;return"text/vtt"===l.mimeType||"text"===
l.contentType});var m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:q,playlists:yh(r,a)};0<=n&&(m.minimumUpdatePeriod=1E3*n);b&&(m.locations=b);"dynamic"===t&&(m.suggestedPresentationDelay=v);p.length&&(m.mediaGroups.AUDIO.audio=Ip(p,a));c.length&&(m.mediaGroups.SUBTITLES.subs=Jp(c,a));return m},hl=function(c,b){var a=c.type;a=void 0===a?"static":a;var e=c.minimumUpdatePeriod;e=void 0===e?0:
e;var n=c.media;n=void 0===n?"":n;var q=c.sourceDuration,t=c.timescale;t=void 0===t?1:t;var v=c.startNumber;v=void 0===v?1:v;for(var r=c.periodIndex,p=[],m=-1,l=0;l<b.length;l++){var f=b[l],g=f.d,k=f.r||0;f=f.t||0;0>m&&(m=f);f&&f>m&&(m=f);if(0>k)if(k=l+1,k===b.length)if("dynamic"===a&&0<e&&0<n.indexOf("$Number$")){k=c.timescale;f=c.start;var u=c.minimumUpdatePeriod;k=Math.ceil((((c.NOW+c.clientOffset)/1E3+(void 0===u?0:u)-(c.availabilityStartTime+(void 0===f?0:f)))*(void 0===k?1:k)-m)/g)}else k=(q*
t-m)/g;else k=(b[k].t-m)/g;else k+=1;k=v+p.length+k;for(f=v+p.length;f<k;)p.push({number:f,duration:g/t,time:m,timeline:r}),m+=g,f++}return p},il=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,jl=function(c){return function(b,a,e,n){if("doubleDollar"===b)return"$";if("undefined"===typeof c[a])return b;b=""+c[a];if("RepresentationID"===a)return b;n=e?parseInt(n,10):1;return b.length>=n?b:""+Array(n-b.length+1).join("0")+b}},Mp=function(c,b){return c.duration||b?c.duration?wh(c):hl(c,b):[{number:c.startNumber||
1,duration:c.sourceDuration,time:0,timeline:c.periodIndex}]},Np=function(c,b){var a={RepresentationID:c.id,Bandwidth:c.bandwidth||0},e=c.initialization;e=void 0===e?{sourceURL:"",range:""}:e;var n=ke({baseUrl:c.baseUrl,source:e.sourceURL.replace(il,jl(a)),range:e.range});return Mp(c,b).map(function(q){a.Number=q.number;a.Time=q.time;var t=(c.media||"").replace(il,jl(a));return{uri:t,timeline:q.timeline,duration:q.duration,resolvedUri:kc(c.baseUrl||"",t),map:n,number:q.number}})},Op=function(c,b){var a=
c.duration,e=c.segmentUrls;e=void 0===e?[]:e;if(!a&&!b||a&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var n=e.map(function(t){var v=c.baseUrl,r=c.initialization;r=void 0===r?{}:r;r=ke({baseUrl:v,source:r.sourceURL,range:r.range});t=ke({baseUrl:v,source:t.media,range:t.mediaRange});t.map=r;return t}),q;a&&(q=wh(c));b&&(q=hl(c,b));return q.map(function(t,v){if(n[v])return v=n[v],v.timeline=t.timeline,v.duration=t.duration,v.number=t.number,v}).filter(function(t){return t})},Pp=function(c){var b=c.attributes;
c=c.segmentInfo;if(c.template){var a=Np;var e=Nb(b,c.template)}else c.base?(a=fl,e=Nb(b,c.base)):c.list&&(a=Op,e=Nb(b,c.list));b={attributes:b};if(!a)return b;a=a(e,c.timeline);if(e.duration){var n=e,q=n.timescale;e.duration=n.duration/(void 0===q?1:q)}else e.duration=a.length?a.reduce(function(t,v){return Math.max(t,Math.ceil(v.duration))},0):0;b.attributes=e;b.segments=a;c.base&&e.indexRange&&(b.sidx=a[0],b.segments=[]);return b},gb=function(c,b){return dl(c.childNodes).filter(function(a){return a.tagName===
b})},zh=function(c){return c.textContent.trim()},Bd=function(c){c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(c);if(!c)return 0;c=c.slice(1);var b=c[1],a=c[2],e=c[3],n=c[4],q=c[5];return 31536E3*parseFloat(c[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(a||0)+3600*parseFloat(e||0)+60*parseFloat(n||0)+parseFloat(q||0)},kl={mediaPresentationDuration:function(c){return Bd(c)},availabilityStartTime:function(c){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&(c+=
"Z");return Date.parse(c)/1E3},minimumUpdatePeriod:function(c){return Bd(c)},suggestedPresentationDelay:function(c){return Bd(c)},type:function(c){return c},timeShiftBufferDepth:function(c){return Bd(c)},start:function(c){return Bd(c)},width:function(c){return parseInt(c,10)},height:function(c){return parseInt(c,10)},bandwidth:function(c){return parseInt(c,10)},startNumber:function(c){return parseInt(c,10)},timescale:function(c){return parseInt(c,10)},duration:function(c){var b=parseInt(c,10);return isNaN(b)?
Bd(c):b},d:function(c){return parseInt(c,10)},t:function(c){return parseInt(c,10)},r:function(c){return parseInt(c,10)},DEFAULT:function(c){return c}},Cb=function(c){return c&&c.attributes?dl(c.attributes).reduce(function(b,a){b[a.name]=(kl[a.name]||kl.DEFAULT)(a.value);return b},{}):{}},Qp={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready",
"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},nf=function(c,b){return b.length?mf(c.map(function(a){return b.map(function(e){return kc(a,zh(e))})})):c},Ah=function(c){var b=gb(c,"SegmentTemplate")[0],a=gb(c,"SegmentList")[0],e=a&&gb(a,"SegmentURL").map(function(v){return Nb({tag:"SegmentURL"},Cb(v))});c=gb(c,"SegmentBase")[0];var n=a||b;n=n&&gb(n,"SegmentTimeline")[0];var q=a||c||b;q=q&&gb(q,"Initialization")[0];(b=b&&Cb(b))&&q?b.initialization=q&&Cb(q):b&&b.initialization&&
(b.initialization={sourceURL:b.initialization});var t={template:b,timeline:n&&gb(n,"S").map(function(v){return Cb(v)}),list:a&&Nb(Cb(a),{segmentUrls:e,initialization:Cb(q)}),base:c&&Nb(Cb(c),{initialization:Cb(q)})};Object.keys(t).forEach(function(v){t[v]||delete t[v]});return t},Rp=function(c,b,a){return function(e){var n=gb(e,"BaseURL");n=nf(b,n);var q=Nb(c,Cb(e)),t=Ah(e);return n.map(function(v){return{segmentInfo:Nb(a,t),attributes:Nb(q,{baseUrl:v})}})}},Sp=function(c){return c.reduce(function(b,
a){var e=Cb(a),n=Qp[e.schemeIdUri];n&&(b[n]={attributes:e},a=gb(a,"cenc:pssh")[0])&&(a=(a=zh(a))&&mj(a),b[n].pssh=a);return b},{})},Tp=function(c,b,a){return function(e){var n=Cb(e),q=nf(b,gb(e,"BaseURL")),t=gb(e,"Role")[0];t={role:Cb(t)};n=Nb(c,n,t);t=Sp(gb(e,"ContentProtection"));Object.keys(t).length&&(n=Nb(n,{contentProtection:t}));t=Ah(e);e=gb(e,"Representation");t=Nb(a,t);return mf(e.map(Rp(n,q,t)))}},Up=function(c,b){return function(a,e){var n=nf(b,gb(a,"BaseURL")),q=Cb(a);q=parseInt(q.id,
10);e=xp.isNaN(q)?e:q;e=Nb(c,{periodIndex:e});q=gb(a,"AdaptationSet");a=Ah(a);return mf(q.map(Tp(e,n,a)))}},ll=function(c){if(""===c)throw Error("DASH_EMPTY_MANIFEST");var b=new Dp,a;try{var e=(a=b.parseFromString(c,"application/xml"))&&"MPD"===a.documentElement.tagName?a.documentElement:null}catch(n){}if(!e||e&&0<e.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return e},Vp=function(c){c=gb(c,"UTCTiming")[0];if(!c)return null;c=Cb(c);switch(c.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":c.method=
"HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":c.method="DIRECT";c.value=Date.parse(c.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return c},ml=Math.pow(2,32),Ba=function(c){if(c instanceof Uint8Array)return c;Array.isArray(c)||ArrayBuffer.isView(c)||c instanceof
ArrayBuffer||(c="number"!==typeof c||"number"===typeof c&&c!==c?0:[c]);return new Uint8Array(c&&c.buffer||c,c&&c.byteOffset||0,c&&c.byteLength||0)},qb=Jc.BigInt||Number,Bh=[qb("0x1"),qb("0x100"),qb("0x10000"),qb("0x1000000"),qb("0x100000000"),qb("0x10000000000"),qb("0x1000000000000"),qb("0x100000000000000"),qb("0x10000000000000000")],Wp=function(c,b){var a=void 0===b?{}:b;b=a.signed;b=void 0===b?!1:b;a=a.le;var e=void 0===a?!1:a;c=Ba(c);a=e?"reduce":"reduceRight";a=(c[a]?c[a]:Array.prototype[a]).call(c,
function(n,q,t){t=e?t:Math.abs(t+1-c.length);return n+qb(q)*Bh[t]},qb(0));b&&(b=Bh[c.length]/qb(2)-qb(1),a=qb(a),a>b&&(a=a-b-b-qb(2)));return Number(a)},Xp=function(c,b){b=(void 0===b?{}:b).le;b=void 0===b?!1:b;if("bigint"!==typeof c&&"number"!==typeof c||"number"===typeof c&&c!==c)c=0;c=qb(c);for(var a=Math.ceil(c.toString(2).length/8),e=new Uint8Array(new ArrayBuffer(a)),n=0;n<a;n++){var q=b?n:Math.abs(n+1-e.length);e[q]=Number(c/Bh[n]&qb(255));0>c&&(e[q]=Math.abs(~e[q]),e[q]-=0===n?1:2)}return e},
nl=function(c,b){"string"!==typeof c&&c&&"function"===typeof c.toString&&(c=c.toString());if("string"!==typeof c)return new Uint8Array;b||(c=unescape(encodeURIComponent(c)));b=new Uint8Array(c.length);for(var a=0;a<c.length;a++)b[a]=c.charCodeAt(a);return b},Yp=function(){for(var c=arguments.length,b=Array(c),a=0;a<c;a++)b[a]=arguments[a];b=b.filter(function(q){return q&&(q.byteLength||q.length)&&"string"!==typeof q});if(1>=b.length)return Ba(b[0]);c=b.reduce(function(q,t,v){return q+(t.byteLength||
t.length)},0);var e=new Uint8Array(c),n=0;b.forEach(function(q){q=Ba(q);e.set(q,n);n+=q.byteLength});return e},Xa=function(c,b,a){a=void 0===a?{}:a;var e=a.offset,n=void 0===e?0:e;a=a.mask;var q=void 0===a?[]:a;c=Ba(c);b=Ba(b);a=b.every?b.every:Array.prototype.every;return b.length&&c.length-n>=b.length&&a.call(b,function(t,v){return t===(q[v]?q[v]&c[n+v]:c[n+v])})},Zp=Ba([73,68,51]),le=function e(b,a){void 0===a&&(a=0);b=Ba(b);if(10>b.length-a||!Xa(b,Zp,{offset:a}))return a;var n=a;var q=a;void 0===
q&&(q=0);a=Ba(b);var t=a[q+6]<<21|a[q+7]<<14|a[q+8]<<7|a[q+9];a=(a[q+5]&16)>>4?t+20:t+10;return e(b,n+a)},ol=function(b){return"string"===typeof b?nl(b):b},$p=function(b){return Array.isArray(b)?b.map(function(a){return ol(a)}):[ol(b)]},pl=function q(a,e,n){void 0===n&&(n=!1);e=$p(e);a=Ba(a);var t=[];if(!e.length)return t;for(var v=0;v<a.length;){var r=(a[v]<<24|a[v+1]<<16|a[v+2]<<8|a[v+3])>>>0,p=a.subarray(v+4,v+8);if(0===r)break;r=v+r;if(r>a.length){if(n)break;r=a.length}v=a.subarray(v+8,r);Xa(p,
e[0])&&(1===e.length?t.push(v):t.push.apply(t,q(v,e.slice(1),n)));v=r}return t},ql=Ba([26,69,223,163]),rl=Ba([66,130]);Ba([24,83,128,103]);Ba([21,73,169,102]);Ba([22,84,174,107]);Ba([174]);Ba([215]);Ba([35,227,131]);Ba([174]);Ba([131]);Ba([136]);Ba([134]);Ba([99,162]);Ba([224]);Ba([225]);Ba([31,67,182,117]);Ba([231]);Ba([42,215,177]);Ba([160]);Ba([155]);Ba([161]);Ba([163]);var Ch=[128,64,32,16,8,4,2,1],of=function(a,e,n,q){void 0===n&&(n=!0);void 0===q&&(q=!1);var t=1;for(var v=0;v<Ch.length&&!(a[e]&
Ch[v]);v++)t++;v=a.subarray(e,e+t);n&&(v=Array.prototype.slice.call(a,e,e+t),v[0]^=Ch[t-1]);return{length:t,value:Wp(v,{signed:q}),bytes:v}},sl=function n(e){return"string"===typeof e?e.match(/.{1,2}/g).map(function(q){return n(q)}):"number"===typeof e?Xp(e):e},aq=function(e){return Array.isArray(e)?e.map(function(n){return sl(n)}):[sl(e)]},bq=function v(n,q,t){if(t>=q.length)return q.length;var r=of(q,t,!1);if(Xa(n.bytes,r.bytes))return t;var p=of(q,t+r.length);return v(n,q,t+p.length+p.value+r.length)},
tl=function v(q,t){t=aq(t);q=Ba(q);var r=[];if(!t.length)return r;for(var p=0;p<q.length;){var m=of(q,p,!1),l=of(q,p+m.length),f=p+m.length+l.length;127===l.value&&(l.value=bq(m,q,f),l.value!==q.length&&(l.value-=f));f=q.subarray(f,f+l.value>q.length?q.length:f+l.value);Xa(t[0],m.bytes)&&(1===t.length?r.push(f):r=r.concat(v(f,t.slice(1))));p+=m.length+l.length+f.length}return r},cq=Ba([0,0,0,1]),dq=Ba([0,0,1]),eq=Ba([0,0,3]),ul=function(q,t,v,r){void 0===r&&(r=Infinity);q=Ba(q);v=[].concat(v);for(var p=
0,m,l=0;p<q.length&&(l<r||m);){var f=void 0;Xa(q.subarray(p),cq)?f=4:Xa(q.subarray(p),dq)&&(f=3);if(f){l++;if(m){q=q.subarray(m,p);t=[];for(v=1;v<q.length-2;)Xa(q.subarray(v,v+3),eq)&&(t.push(v+2),v++),v++;if(0!==t.length){r=q.length-t.length;p=new Uint8Array(r);for(v=m=0;v<r;m++,v++)m===t[0]&&(m++,t.shift()),p[v]=q[m];q=p}return q}var g=void 0;"h264"===t?g=q[p+f]&31:"h265"===t&&(g=q[p+f]>>1&63);-1!==v.indexOf(g)&&(m=p+f);p+=f+("h264"===t?1:2)}else p++}return q.subarray(0,0)},Ob={webm:Ba([119,101,
98,109]),matroska:Ba([109,97,116,114,111,115,107,97]),flac:Ba([102,76,97,67]),ogg:Ba([79,103,103,83]),ac3:Ba([11,119]),riff:Ba([82,73,70,70]),avi:Ba([65,86,73]),wav:Ba([87,65,86,69]),"3gp":Ba([102,116,121,112,51,103]),mp4:Ba([102,116,121,112]),fmp4:Ba([115,116,121,112]),mov:Ba([102,116,121,112,113,116])},Cd={aac:function(q){var t=le(q);return Xa(q,[255,16],{offset:t,mask:[255,22]})},mp3:function(q){var t=le(q);return Xa(q,[255,2],{offset:t,mask:[255,6]})},webm:function(q){q=tl(q,[ql,rl])[0];return Xa(q,
Ob.webm)},mkv:function(q){q=tl(q,[ql,rl])[0];return Xa(q,Ob.matroska)},mp4:function(q){return!Cd["3gp"](q)&&!Cd.mov(q)&&(Xa(q,Ob.mp4,{offset:4})||Xa(q,Ob.fmp4,{offset:4}))},mov:function(q){return Xa(q,Ob.mov,{offset:4})},"3gp":function(q){return Xa(q,Ob["3gp"],{offset:4})},ac3:function(q){var t=le(q);return Xa(q,Ob.ac3,{offset:t})},ts:function(q){if(189>q.length&&1<=q.length)return 71===q[0];for(var t=0;t+188<q.length&&188>t;){if(71===q[t]&&71===q[t+188])return!0;t+=1}return!1},flac:function(q){var t=
le(q);return Xa(q,Ob.flac,{offset:t})},ogg:function(q){return Xa(q,Ob.ogg)},avi:function(q){return Xa(q,Ob.riff)&&Xa(q,Ob.avi,{offset:8})},wav:function(q){return Xa(q,Ob.riff)&&Xa(q,Ob.wav,{offset:8})},h264:function(q){return ul(q,"h264",7,3).length},h265:function(q){return ul(q,"h265",[32,33],3).length}},Dh=Object.keys(Cd).filter(function(q){return"ts"!==q&&"h264"!==q&&"h265"!==q}).concat(["ts","h264","h265"]);Dh.forEach(function(q){var t=Cd[q];Cd[q]=function(v){return t(Ba(v))}});var fq=Cd,Eh=function(q){q=
Ba(q);for(var t=0;t<Dh.length;t++){var v=Dh[t];if(fq[v](q))return v}return""},$c=function(){this.init=function(){var q={};this.on=function(t,v){q[t]||(q[t]=[]);q[t]=q[t].concat(v)};this.off=function(t,v){if(!q[t])return!1;v=q[t].indexOf(v);q[t]=q[t].slice();q[t].splice(v,1);return-1<v};this.trigger=function(t){var v,r;if(v=q[t])if(2===arguments.length){var p=v.length;for(r=0;r<p;++r)v[r].call(this,arguments[1])}else{var m=[];for(r=1;r<arguments.length;++r)m.push(arguments[r]);p=v.length;for(r=0;r<
p;++r)v[r].apply(this,m)}};this.dispose=function(){q={}}}};$c.prototype.pipe=function(q){this.on("data",function(t){q.push(t)});this.on("done",function(t){q.flush(t)});this.on("partialdone",function(t){q.partialFlush(t)});this.on("endedtimeline",function(t){q.endTimeline(t)});this.on("reset",function(t){q.reset(t)});return q};$c.prototype.push=function(q){this.trigger("data",q)};$c.prototype.flush=function(q){this.trigger("done",q)};$c.prototype.partialFlush=function(q){this.trigger("partialdone",
q)};$c.prototype.endTimeline=function(q){this.trigger("endedtimeline",q)};$c.prototype.reset=function(q){this.trigger("reset",q)};var Nc=function(q,t){var v=1;for(q>t&&(v=-1);4294967296<Math.abs(t-q);)q+=8589934592*v;return q};(function v(t){var r,p;v.prototype.init.call(this);this.type_=t||"shared";this.push=function(m){if("shared"===this.type_||m.type===this.type_)void 0===p&&(p=m.dts),m.dts=Nc(m.dts,p),m.pts=Nc(m.pts,p),r=m.dts,this.trigger("data",m)};this.flush=function(){p=r;this.trigger("done")};
this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){r=p=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}}).prototype=new $c;var vl=function(t){var v=t[1]&31;return v=v<<8|t[2]},pf=function(t){return!!(t[1]&64)},qf=function(t){var v=0;1<(t[3]&48)>>>4&&(v+=t[4]+1);return v},Fh=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";
case 9:return"access_unit_delimiter_rbsp";default:return null}},gq=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],wl=function(t,v){var r=t[v+6]<<21|t[v+7]<<14|t[v+8]<<7|t[v+9];t=t[v+5];r=0<=r?r:0;return(t&16)>>4?r+20:r+10},hq=function p(v,r){if(10>v.length-r||73!==v[r]||68!==v[r+1]||51!==v[r+2])return r;r+=wl(v,r);return p(v,r)},xl=function(v){return v[0]<<21|v[1]<<14|v[2]<<7|v[3]},Dd={isLikelyAacData:function(v){var r=hq(v,0);return v.length>=r+2&&255===(v[r]&255)&&240===(v[r+
1]&240)&&16===(v[r+1]&22)},parseId3TagSize:wl,parseAdtsSize:function(v,r){return v[r+3]&6144|v[r+4]<<3|(v[r+5]&224)>>5},parseType:function(v,r){return 73===v[r]&&68===v[r+1]&&51===v[r+2]?"timed-metadata":v[r]&1&&240===(v[r+1]&240)?"audio":null},parseSampleRate:function(v){for(var r=0;r+5<v.length;)if(255!==v[r]||240!==(v[r+1]&246))r++;else return gq[(v[r+2]&60)>>>2];return null},parseAacTimestamp:function(v){var r=10;v[5]&64&&(r=r+4+xl(v.subarray(10,14)));do{var p=xl(v.subarray(r+4,r+8));if(1>p)break;
var m=String.fromCharCode(v[r],v[r+1],v[r+2],v[r+3]);if("PRIV"===m){m=v.subarray(r+10,r+p+10);for(var l=0;l<m.byteLength;l++)if(0===m[l]){var f=unescape,g,k=m,u=l,x="";for(g=0;g<u;g++)x+="%"+("00"+k[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(x))return v=m.subarray(l+1),r=(v[3]&1)<<30|v[4]<<22|v[5]<<14|v[6]<<6|v[7]>>>2,r*=4,r+=v[7]&3;break}}r+=10;r+=p}while(r<v.byteLength);return null}};var ab={parseType:function(v,r){v=vl(v);return 0===v?"pat":v===r?"pmt":r?"pes":
null},parsePat:function(v){var r=pf(v),p=4+qf(v);r&&(p+=v[p]+1);return(v[p+10]&31)<<8|v[p+11]},parsePmt:function(v){var r={},p=pf(v),m=4+qf(v);p&&(m+=v[m]+1);if(v[m+5]&1){p=3+((v[m+1]&15)<<8|v[m+2])-4;for(var l=12+((v[m+10]&15)<<8|v[m+11]);l<p;){var f=m+l;r[(v[f+1]&31)<<8|v[f+2]]=v[f];l+=((v[f+3]&15)<<8|v[f+4])+5}return r}},parsePayloadUnitStartIndicator:pf,parsePesType:function(v,r){v=vl(v);switch(r[v]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},
parsePesTime:function(v){if(!pf(v))return null;var r=4+qf(v);if(r>=v.byteLength)return null;var p=null;var m=v[r+7];m&192&&(p={},p.pts=(v[r+9]&14)<<27|(v[r+10]&255)<<20|(v[r+11]&254)<<12|(v[r+12]&255)<<5|(v[r+13]&254)>>>3,p.pts*=4,p.pts+=(v[r+13]&6)>>>1,p.dts=p.pts,m&64&&(p.dts=(v[r+14]&14)<<27|(v[r+15]&255)<<20|(v[r+16]&254)<<12|(v[r+17]&255)<<5|(v[r+18]&254)>>>3,p.dts*=4,p.dts+=(v[r+18]&6)>>>1));return p},videoPacketContainsKeyFrame:function(v){var r=4+qf(v);v=v.subarray(r);for(var p=r=0,m=!1;p<
v.byteLength-3;p++)if(1===v[p+2]){r=p+5;break}for(;r<v.byteLength;)switch(v[r]){case 0:if(0!==v[r-1]){r+=2;break}else if(0!==v[r-2]){r++;break}p+3!==r-2&&(p=Fh(v[p+3]&31),"slice_layer_without_partitioning_rbsp_idr"===p&&(m=!0));do r++;while(1!==v[r]&&r<v.length);p=r-2;r+=3;break;case 1:if(0!==v[r-1]||0!==v[r-2]){r+=3;break}p=Fh(v[p+3]&31);"slice_layer_without_partitioning_rbsp_idr"===p&&(m=!0);p=r-2;r+=3;break;default:r+=3}(v=v.subarray(p))&&3<v.byteLength&&(p=Fh(v[3]&31),"slice_layer_without_partitioning_rbsp_idr"===
p&&(m=!0));return m}};var yl=function(v,r,p){for(var m=0,l=188,f,g,k,u=!1;l<=v.byteLength;)if(71!==v[m]||71!==v[l]&&l!==v.byteLength)m++,l++;else{f=v.subarray(m,l);g=ab.parseType(f,r.pid);switch(g){case "pes":if(g=ab.parsePesType(f,r.table),k=ab.parsePayloadUnitStartIndicator(f),"audio"===g&&k&&(f=ab.parsePesTime(f)))f.type="audio",p.audio.push(f),u=!0}if(u)break;m+=188;l+=188}l=v.byteLength;m=l-188;for(u=!1;0<=m;)if(71!==v[m]||71!==v[l]&&l!==v.byteLength)m--,l--;else{f=v.subarray(m,l);g=ab.parseType(f,
r.pid);switch(g){case "pes":if(g=ab.parsePesType(f,r.table),k=ab.parsePayloadUnitStartIndicator(f),"audio"===g&&k&&(f=ab.parsePesTime(f)))f.type="audio",p.audio.push(f),u=!0}if(u)break;m-=188;l-=188}},iq=function(v,r){if(v.audio&&v.audio.length){var p=r;if("undefined"===typeof p||isNaN(p))p=v.audio[0].dts;v.audio.forEach(function(l){l.dts=Nc(l.dts,p);l.pts=Nc(l.pts,p);l.dtsTime=l.dts/9E4;l.ptsTime=l.pts/9E4})}if(v.video&&v.video.length){var m=r;if("undefined"===typeof m||isNaN(m))m=v.video[0].dts;
v.video.forEach(function(l){l.dts=Nc(l.dts,m);l.pts=Nc(l.pts,m);l.dtsTime=l.dts/9E4;l.ptsTime=l.pts/9E4});v.firstKeyFrame&&(v=v.firstKeyFrame,v.dts=Nc(v.dts,m),v.pts=Nc(v.pts,m),v.dtsTime=v.dts/9E4,v.ptsTime=v.pts/9E4)}},jq={inspect:function(v,r){if(Dd.isLikelyAacData(v))a:{for(var p=!1,m=0,l=null,f=null,g,k=0,u;3<=v.length-k;){switch(Dd.parseType(v,k)){case "timed-metadata":if(10>v.length-k){p=!0;break}g=Dd.parseId3TagSize(v,k);if(g>v.length){p=!0;break}null===f&&(u=v.subarray(k,k+g),f=Dd.parseAacTimestamp(u));
k+=g;break;case "audio":if(7>v.length-k){p=!0;break}g=Dd.parseAdtsSize(v,k);if(g>v.length){p=!0;break}null===l&&(u=v.subarray(k,k+g),l=Dd.parseSampleRate(u));m++;k+=g;break;default:k++}if(p){v=null;break a}}null===l||null===f?v=null:(v=9E4/l,v={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*m*v,pts:f+1024*m*v}]})}else{m={pid:null,table:null};f={};l=0;for(g=188;g<v.byteLength;)if(71===v[l]&&71===v[g]){k=v.subarray(l,g);u=ab.parseType(k,m.pid);switch(u){case "pat":m.pid||(m.pid=ab.parsePat(k));
break;case "pmt":m.table||(m.table=ab.parsePmt(k))}if(m.pid&&m.table)break;l+=188;g+=188}else l++,g++;for(p in m.table)if(m.table.hasOwnProperty(p))switch(m.table[p]){case 27:f.video=[];var x;g=v;k=m;u=f;var A=0,H=188,R=!1,W=[];for(x=0;H<g.byteLength;)if(71===g[A]&&71===g[H]){l=g.subarray(A,H);var M=ab.parseType(l,k.pid);switch(M){case "pes":var T=ab.parsePesType(l,k.table);M=ab.parsePayloadUnitStartIndicator(l);if("video"===T&&(M&&!R&&(T=ab.parsePesTime(l))&&(T.type="video",u.video.push(T),R=!0),
!u.firstKeyFrame)){if(M&&0!==x){T=new Uint8Array(x);for(M=0;W.length;)x=W.shift(),T.set(x,M),M+=x.byteLength;ab.videoPacketContainsKeyFrame(T)&&((x=ab.parsePesTime(T))?(u.firstKeyFrame=x,u.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
x=0}W.push(l);x+=l.byteLength}}if(R&&u.firstKeyFrame)break;A+=188;H+=188}else A++,H++;H=g.byteLength;A=H-188;for(R=!1;0<=A;)if(71===g[A]&&71===g[H]){l=g.subarray(A,H);M=ab.parseType(l,k.pid);switch(M){case "pes":if(T=ab.parsePesType(l,k.table),M=ab.parsePayloadUnitStartIndicator(l),"video"===T&&M&&(T=ab.parsePesTime(l)))T.type="video",u.video.push(T),R=!0}if(R)break;A-=188;H-=188}else A--,H--;0===f.video.length&&delete f.video;break;case 15:f.audio=[],yl(v,m,f),0===f.audio.length&&delete f.audio}v=
f}if(!v||!v.audio&&!v.video)return null;iq(v,r);return v},parseAudioPes_:yl},ad=function(v){var r=""+String.fromCharCode(v[0]);r+=String.fromCharCode(v[1]);r+=String.fromCharCode(v[2]);return r+=String.fromCharCode(v[3])},eb=function m(r,p){var l=[],f;if(!p.length)return null;for(f=0;f<r.byteLength;){var g=(r[f]<<24|r[f+1]<<16|r[f+2]<<8|r[f+3])>>>0;var k=ad(r.subarray(f+4,f+8));g=1<g?f+g:r.byteLength;k===p[0]&&(1===p.length?l.push(r.subarray(f+8,g)):(f=m(r.subarray(f+8,g),p.slice(1)),f.length&&(l=
l.concat(f))));f=g}return l},zl=function(r){return{isLeading:(r[0]&12)>>>2,dependsOn:r[0]&3,isDependedOn:(r[1]&192)>>>6,hasRedundancy:(r[1]&48)>>>4,paddingValue:(r[1]&14)>>>1,isNonSyncSample:r[1]&1,degradationPriority:r[2]<<8|r[3]}},me=function(r){return("00"+r.toString(16)).slice(-2)};var Al=function(r){var p=0===r[0]?12:20;return(r[p]<<24|r[p+1]<<16|r[p+2]<<8|r[p+3])>>>0};var Bl={findBox:eb,parseType:ad,timescale:function(r){return eb(r,["moov","trak"]).reduce(function(p,m){var l=eb(m,["tkhd"])[0];
if(!l)return null;var f=l[0];f=0===f?12:20;l=(l[f]<<24|l[f+1]<<16|l[f+2]<<8|l[f+3])>>>0;m=eb(m,["mdia","mdhd"])[0];if(!m)return null;f=m[0];f=0===f?12:20;p[l]=(m[f]<<24|m[f+1]<<16|m[f+2]<<8|m[f+3])>>>0;return p},{})},startTime:function(r,p){p=eb(p,["moof","traf"]);p=[].concat.apply([],p.map(function(m){return eb(m,["tfhd"]).map(function(l){l=r[(l[4]<<24|l[5]<<16|l[6]<<8|l[7])>>>0]||9E4;var f=eb(m,["tfdt"]).map(function(g){var k=g[0];var u=(g[4]<<24|g[5]<<16|g[6]<<8|g[7])>>>0;1===k&&(u*=Math.pow(2,
32),u+=(g[8]<<24|g[9]<<16|g[10]<<8|g[11])>>>0);return u})[0];f="number"!==typeof f||isNaN(f)?Infinity:f;return f/l})}));p=Math.min.apply(null,p);return isFinite(p)?p:0},compositionStartTime:function(r,p){var m=eb(p,["moof","traf"]),l=0;p=0;if(m&&m.length){var f=eb(m[0],["tfhd"])[0],g=eb(m[0],["trun"])[0];m=eb(m[0],["tfdt"])[0];if(f){var k=new DataView(f.buffer,f.byteOffset,f.byteLength);var u=new Uint8Array(f.subarray(1,4));f=k.getUint32(4);var x=u[2]&1,A=u[2]&2,H=u[2]&8,R=u[2]&16;u=u[2]&32;var W=
8;x&&(W+=4,k.getUint32(12),W+=4);A&&(k.getUint32(W),W+=4);H&&(k.getUint32(W),W+=4);R&&(k.getUint32(W),W+=4);u&&k.getUint32(W);k=f}m&&(l=m[0],new Uint8Array(m.subarray(1,4)),f=(m[4]<<24|m[5]<<16|m[6]<<8|m[7])>>>0,1===l&&(f*=Math.pow(2,32),f+=(m[8]<<24|m[9]<<16|m[10]<<8|m[11])>>>0),l=f);if(g){m=g[0];var M=new Uint8Array(g.subarray(1,4));f=[];x=new DataView(g.buffer,g.byteOffset,g.byteLength);u=M[2]&1;W=M[2]&4;A=M[1]&1;H=M[1]&2;R=M[1]&4;M=M[1]&8;var T=x.getUint32(4),Q=8;u&&(x.getInt32(Q),Q+=4);W&&T&&
(u={flags:zl(g.subarray(Q,Q+4))},Q+=4,A&&(u.duration=x.getUint32(Q),Q+=4),H&&(u.size=x.getUint32(Q),Q+=4),M&&(u.compositionTimeOffset=1===m?x.getInt32(Q):x.getUint32(Q),Q+=4),f.push(u),T--);for(;T--;)u={},A&&(u.duration=x.getUint32(Q),Q+=4),H&&(u.size=x.getUint32(Q),Q+=4),R&&(u.flags=zl(g.subarray(Q,Q+4)),Q+=4),M&&(u.compositionTimeOffset=1===m?x.getInt32(Q):x.getUint32(Q),Q+=4),f.push(u);f&&f.length&&(p=f[0].compositionTimeOffset||0)}}return(l+p)/(r[k]||9E4)},videoTrackIds:function(r){var p=[];eb(r,
["moov","trak"]).forEach(function(m){var l=eb(m,["mdia","hdlr"]),f=eb(m,["tkhd"]);l.forEach(function(g,k){g=ad(g.subarray(8,12));k=f[k];"vide"===g&&(k=new DataView(k.buffer,k.byteOffset,k.byteLength),g=k.getUint8(0),k=0===g?k.getUint32(12):k.getUint32(20),p.push(k))})});return p},tracks:function(r){var p=[];eb(r,["moov","trak"]).forEach(function(m){var l={},f=eb(m,["tkhd"])[0];if(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);var g=f.getUint8(0);l.id=0===g?f.getUint32(12):f.getUint32(20)}if(f=
eb(m,["mdia","hdlr"])[0])f=ad(f.subarray(8,12)),l.type="vide"===f?"video":"soun"===f?"audio":f;if(f=eb(m,["mdia","minf","stbl","stsd"])[0])if(f=f.subarray(8),l.codec=ad(f.subarray(4,8)),f=eb(f,[l.codec])[0])/^[a-z]vc[1-9]$/i.test(l.codec)?(f=f.subarray(78),g=ad(f.subarray(4,8)),"avcC"===g&&11<f.length?(l.codec+=".",l.codec+=me(f[9]),l.codec+=me(f[10]),l.codec+=me(f[11])):l.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(l.codec)?(f=f.subarray(28),g=ad(f.subarray(4,8)),"esds"===g&&20<f.length&&0!==f[19]?(l.codec+=
"."+me(f[19]),l.codec+="."+me(f[20]>>>2&63).replace(/^0/,"")):l.codec="mp4a.40.2"):l.codec=l.codec.toLowerCase();if(m=eb(m,["mdia","mdhd"])[0])l.timescale=Al(m);p.push(l)});return p},getTimescaleFromMediaHeader:Al},Oc={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,
muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},kq=["video","audio","text"],Cl=["Video","Audio","Text"],Dl=function(r){return r?r.replace(/avc1\.(\d+)\.(\d+)/i,function(p,m,l){p=("00"+Number(m).toString(16)).slice(-2);l=("00"+Number(l).toString(16)).slice(-2);return"avc1."+p+"00"+l}):r},Ac=function(r){void 0===r&&(r="");var p=[];r.split(",").forEach(function(m){m=m.trim();var l;kq.forEach(function(f){var g=Oc[f].exec(m.toLowerCase());if(g&&!(1>=g.length)){l=f;g=m.substring(0,g[1].length);
var k=m.replace(g,"");p.push({type:g,details:k,mediaType:f})}});l||p.push({type:m,details:"",mediaType:"unknown"})});return p},lq=function(r,p){if(!r.mediaGroups.AUDIO||!p)return null;r=r.mediaGroups.AUDIO[p];if(!r)return null;for(var m in r)if(p=r[m],p["default"]&&p.playlists)return Ac(p.playlists[0].attributes.CODECS);return null},El=function(r){void 0===r&&(r="");return Oc.audio.test(r.trim().toLowerCase())},mq=function(r){void 0===r&&(r="");return Oc.text.test(r.trim().toLowerCase())},Gh=function(r){if(r&&
"string"===typeof r){var p=r.toLowerCase().split(",").map(function(f){return Dl(f.trim())}),m="video";1===p.length&&El(p[0])?m="audio":1===p.length&&mq(p[0])&&(m="application");var l="mp4";p.every(function(f){return Oc.mp4.test(f)})?l="mp4":p.every(function(f){return Oc.webm.test(f)})?l="webm":p.every(function(f){return Oc.ogg.test(f)})&&(l="ogg");return m+"/"+l+';codecs="'+r+'"'}},rf=function(r){void 0===r&&(r="");return Jc.MediaSource&&Jc.MediaSource.isTypeSupported&&Jc.MediaSource.isTypeSupported(Gh(r))||
!1},Hh=function(r){void 0===r&&(r="");return r.toLowerCase().split(",").every(function(p){p=p.trim();for(var m=0;m<Cl.length;m++)if(Oc["muxer"+Cl[m]].test(p))return!0;return!1})},sf=function(r,p,m){return r&&m&&m.responseURL&&p!==m.responseURL?m.responseURL:p},lc=function(r){return V.log.debug?V.log.debug.bind(V,"VHS:",r+" >"):function(){}},nq=V.log,Fl=function(r){var p=r.onwarn,m=r.oninfo,l=r.manifestString,f=r.customTagParsers;f=void 0===f?[]:f;r=r.customTagMappers;r=void 0===r?[]:r;var g=new up;
if(p)g.on("warn",p);if(m)g.on("info",m);f.forEach(function(k){return g.addParser(k)});r.forEach(function(k){return g.addTagMapper(k)});g.push(l);g.end();return g.manifest},tf=function(r,p){["AUDIO","SUBTITLES"].forEach(function(m){for(var l in r.mediaGroups[m])for(var f in r.mediaGroups[m][l])p(r.mediaGroups[m][l][f],m,l,f)})},Gl=function(r){var p=r.playlist,m=r.uri;p.id=r.id;m&&(p.uri=m);p.attributes=p.attributes||{}},oq=function(r){for(var p=r.playlists.length;p--;){var m=r.playlists[p];Gl({playlist:m,
id:p+"-"+m.uri});m.resolvedUri=kc(r.uri,m.uri);r.playlists[m.id]=m;r.playlists[m.uri]=m;m.attributes.BANDWIDTH||nq.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},pq=function(r){tf(r,function(p){p.uri&&(p.resolvedUri=kc(r.uri,p.uri))})},qq=function(r,p){r="0-"+p;var m={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ra.location.href,resolvedUri:ra.location.href,playlists:[{uri:p,id:r,resolvedUri:p,attributes:{}}]};m.playlists[r]=m.playlists[0];m.playlists[p]=
m.playlists[0];return m},Hl=function(r,p){r.uri=p;for(p=0;p<r.playlists.length;p++)r.playlists[p].uri||(r.playlists[p].uri="placeholder-uri-"+p);tf(r,function(m,l,f,g){m.playlists&&m.playlists.length&&!m.playlists[0].uri&&(l="placeholder-uri-"+l+"-"+f+"-"+g,f="0-"+l,m.playlists[0].uri=l,m.playlists[0].id=f,r.playlists[f]=m.playlists[0],r.playlists[l]=m.playlists[0])});oq(r);pq(r)},Ih=V.mergeOptions,rq=function(r,p,m){var l=p.slice();m=m||0;p=Math.min(r.length,p.length+m);for(var f=m;f<p;f++)l[f-m]=
Ih(r[f],l[f-m]);return l},Il=function(r,p){r.resolvedUri||(r.resolvedUri=kc(p,r.uri));r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=kc(p,r.key.uri));r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=kc(p,r.map.uri))},Jl=function(r,p){return r===p||r.segments&&p.segments&&r.segments.length===p.segments.length&&r.endList===p.endList&&r.mediaSequence===p.mediaSequence},Jh=function(r,p,m){void 0===m&&(m=Jl);r=Ih(r,{});var l=r.playlists[p.id];if(!l||m(l,p))return null;var f=Ih(l,p);l.segments&&(f.segments=
rq(l.segments,p.segments,p.mediaSequence-l.mediaSequence));f.segments.forEach(function(g){Il(g,f.resolvedUri)});for(m=0;m<r.playlists.length;m++)r.playlists[m].id===p.id&&(r.playlists[m]=f);r.playlists[p.id]=f;r.playlists[p.uri]=f;return r},Kl=function(r,p){var m=r.segments[r.segments.length-1];return p&&m&&m.duration?1E3*m.duration:500*(r.targetDuration||10)},Ed=function(r){function p(l,f,g){void 0===g&&(g={});var k=r.call(this)||this;if(!l)throw Error("A non-empty playlist URL or object is required");
k.logger_=lc("PlaylistLoader");var u=g;g=u.withCredentials;u=u.handleManifestRedirects;k.src=l;k.vhs_=f;k.withCredentials=void 0===g?!1:g;k.handleManifestRedirects=void 0===u?!1:u;l=f.options_;k.customTagParsers=l&&l.customTagParsers||[];k.customTagMappers=l&&l.customTagMappers||[];k.state="HAVE_NOTHING";k.on("mediaupdatetimeout",function(){"HAVE_METADATA"===k.state&&(k.state="HAVE_CURRENT_METADATA",k.request=k.vhs_.xhr({uri:kc(k.master.uri,k.media().uri),withCredentials:k.withCredentials},function(x,
A){if(k.request){if(x)return k.playlistRequestError(k.request,k.media(),"HAVE_METADATA");k.haveMetadata({playlistString:k.request.responseText,url:k.media().uri,id:k.media().id})}}))});return k}zc(p,r);var m=p.prototype;m.playlistRequestError=function(l,f,g){var k=f.uri;f=f.id;this.request=null;g&&(this.state=g);this.error={playlist:this.master.playlists[f],status:l.status,message:"HLS playlist request error at URL: "+k+".",responseText:l.responseText,code:500<=l.status?4:2};this.trigger("error")};
m.haveMetadata=function(l){var f=this,g=l.playlistString,k=l.playlistObject,u=l.url,x=l.id;this.request=null;this.state="HAVE_METADATA";l=k||Fl({onwarn:function(A){return f.logger_("m3u8-parser warn for "+x+": "+A.message)},oninfo:function(A){return f.logger_("m3u8-parser info for "+x+": "+A.message)},manifestString:g,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});l.lastRequest=Date.now();Gl({playlist:l,uri:u,id:x});u=Jh(this.master,l);this.targetDuration=l.targetDuration;
u?(this.master=u,this.media_=this.master.playlists[x]):this.trigger("playlistunchanged");this.media().endList||(ra.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=ra.setTimeout(function(){f.trigger("mediaupdatetimeout")},Kl(this.media(),!!u)));this.trigger("loadedplaylist")};m.dispose=function(){this.trigger("dispose");this.stopRequest();ra.clearTimeout(this.mediaUpdateTimeout);ra.clearTimeout(this.finalRenditionTimeout);this.off()};m.stopRequest=function(){if(this.request){var l=this.request;
this.request=null;l.onreadystatechange=null;l.abort()}};m.media=function(l,f){var g=this;if(!l)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof l){if(!this.master.playlists[l])throw Error("Unknown playlist URI: "+l);l=this.master.playlists[l]}ra.clearTimeout(this.finalRenditionTimeout);if(f)f=l.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=ra.setTimeout(this.media.bind(this,l,!1),f);else{var k=this.state;f=!this.media_||
l.id!==this.media_.id;if(this.master.playlists[l.id].endList||l.endList&&l.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=l,f&&(this.trigger("mediachanging"),"HAVE_MASTER"===k?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(f){this.state="SWITCHING_MEDIA";if(this.request){if(l.resolvedUri===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=
null}this.media_&&this.trigger("mediachanging");this.request=this.vhs_.xhr({uri:l.resolvedUri,withCredentials:this.withCredentials},function(u,x){if(g.request){l.lastRequest=Date.now();l.resolvedUri=sf(g.handleManifestRedirects,l.resolvedUri,x);if(u)return g.playlistRequestError(g.request,l,k);g.haveMetadata({playlistString:x.responseText,url:l.uri,id:l.id});"HAVE_MASTER"===k?g.trigger("loadedmetadata"):g.trigger("mediachange")}})}}};m.pause=function(){this.stopRequest();ra.clearTimeout(this.mediaUpdateTimeout);
"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")};m.load=function(l){var f=this;ra.clearTimeout(this.mediaUpdateTimeout);var g=this.media();l?this.mediaUpdateTimeout=ra.setTimeout(function(){return f.load()},g?g.targetDuration/2*1E3:5E3):this.started?g&&!g.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()};m.start=
function(){var l=this;this.started=!0;"object"===typeof this.src?(this.src.uri||(this.src.uri=ra.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){l.setupInitialPlaylist(l.src)},0)):this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(f,g){if(l.request){l.request=null;if(f)return l.error={status:g.status,message:"HLS playlist request error at URL: "+l.src+".",responseText:g.responseText,code:2},"HAVE_NOTHING"===l.state&&(l.started=!1),l.trigger("error");
l.src=sf(l.handleManifestRedirects,l.src,g);f=Fl({manifestString:g.responseText,customTagParsers:l.customTagParsers,customTagMappers:l.customTagMappers});l.setupInitialPlaylist(f)}})};m.srcUri=function(){return"string"===typeof this.src?this.src:this.src.uri};m.setupInitialPlaylist=function(l){this.state="HAVE_MASTER";if(l.playlists)this.master=l,Hl(this.master,this.srcUri()),l.playlists.forEach(function(g){g.segments&&g.segments.forEach(function(k){Il(k,g.resolvedUri)})}),this.trigger("loadedplaylist"),
this.request||this.media(this.master.playlists[0]);else{var f=this.srcUri()||ra.location.href;this.master=qq(l,f);this.haveMetadata({playlistObject:l,url:f,id:this.master.playlists[0].id});this.trigger("loadedmetadata")}};return p}(V.EventTarget),bd=1/30,mc=3*bd,Ll=function(r,p){var m=[],l;if(r&&r.length)for(l=0;l<r.length;l++)p(r.start(l),r.end(l))&&m.push([r.start(l),r.end(l)]);return V.createTimeRanges(m)},ne=function(r,p){return Ll(r,function(m,l){return m-mc<=p&&l+mc>=p})},Kh=function(r,p){return Ll(r,
function(m){return m-bd>=p})},sq=function(r,p){var m=null,l=null,f=0,g=[],k=[];if(!(r&&r.length&&p&&p.length))return V.createTimeRange();for(var u=r.length;u--;)g.push({time:r.start(u),type:"start"}),g.push({time:r.end(u),type:"end"});for(u=p.length;u--;)g.push({time:p.start(u),type:"start"}),g.push({time:p.end(u),type:"end"});g.sort(function(x,A){return x.time-A.time});for(u=0;u<g.length;u++)"start"===g[u].type?(f++,2===f&&(m=g[u].time)):"end"===g[u].type&&(f--,1===f&&(l=g[u].time)),null!==m&&null!==
l&&(k.push([m,l]),l=m=null);return V.createTimeRanges(k)},Ml=function(r){var p=[];if(!r||!r.length)return"";for(var m=0;m<r.length;m++)p.push(r.start(m)+" => "+r.end(m));return p.join(", ")},cd=function(r){for(var p=[],m=0;m<r.length;m++)p.push({start:r.start(m),end:r.end(m)});return p},tq=function(r,p){if(r===p)return!1;if(!r&&p||!p&&r||r.length!==p.length)return!0;for(var m=0;m<r.length;m++)if(r.start(m)!==p.start(m)||r.end(m)!==p.end(m))return!0;return!1},Nl=V.createTimeRange,uq=function(r,p){var m=
0;p-=r.mediaSequence;var l=r.segments[p];if(l){if("undefined"!==typeof l.start)return{result:l.start,precise:!0};if("undefined"!==typeof l.end)return{result:l.end-l.duration,precise:!0}}for(;p--;){l=r.segments[p];if("undefined"!==typeof l.end)return{result:m+l.end,precise:!0};m+=l.duration;if("undefined"!==typeof l.start)return{result:m+l.start,precise:!0}}return{result:m,precise:!1}},Ol=function(r,p,m){"undefined"===typeof p&&(p=r.mediaSequence+r.segments.length);if(p<r.mediaSequence)return 0;var l=
uq(r,p);if(l.precise)return l.result;a:{var f=0;for(var g=p-r.mediaSequence;g<r.segments.length;g++){p=r.segments[g];if("undefined"!==typeof p.start){r=p.start-f;f=!0;break a}f+=p.duration;if("undefined"!==typeof p.end){r=p.end-f;f=!0;break a}}r=-1;f=!1}return f?r:l.result+m},Pl=function(r,p,m){if(!r)return 0;"number"!==typeof m&&(m=0);if("undefined"===typeof p){if(r.totalDuration)return r.totalDuration;if(!r.endList)return ra.Infinity}return Ol(r,p,m)},oe=function(r,p,m){var l=0;p>m&&(m=[m,p],p=
m[0],m=m[1]);if(0>p){for(;p<Math.min(0,m);p++)l+=r.targetDuration;p=0}for(;p<m;p++)l+=r.segments[p].duration;return l},Ql=function(r,p){if(!r.segments.length)return 0;var m=r.segments.length,l=r.segments[m-1].duration||r.targetDuration;p="number"===typeof p?p:l+2*r.targetDuration;if(0===p)return m;for(l=0;m--&&!(l+=r.segments[m].duration,l>=p););return Math.max(0,m)},Rl=function(r,p,m,l){if(!r||!r.segments)return null;if(r.endList)return Pl(r);if(null===p)return null;p=p||0;m=m?Ql(r,l):r.segments.length;
return Ol(r,r.mediaSequence+m,p)},Sl=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},Lh=function(r){return r.excludeUntil&&Infinity===r.excludeUntil},uf=function(r){var p=Sl(r);return!r.disabled&&!p},Tl=function(r,p){return p.attributes&&p.attributes[r]},Mh=function(r,p){if(1===r.playlists.length)return!0;var m=p.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===r.playlists.filter(function(l){return uf(l)?(l.attributes.BANDWIDTH||0)<m:!1}).length},Ib={duration:Pl,seekable:function(r,
p,m){var l=p||0;r=Rl(r,p,!0,m);return null===r?Nl():Nl(l,r)},safeLiveIndex:Ql,getMediaInfoForTime:function(r,p,m,l){var f,g=r.segments.length,k=p-l;if(0>k){if(0<m)for(f=m-1;0<=f;f--){var u=r.segments[f];k+=u.duration+bd;if(0<k)return{mediaIndex:f,startTime:l-oe(r,m,f)}}return{mediaIndex:0,startTime:p}}if(0>m){for(f=m;0>f;f++)if(k-=r.targetDuration,0>k)return{mediaIndex:0,startTime:p};m=0}for(f=m;f<g;f++)if(u=r.segments[f],k-=u.duration+bd,0>k)return{mediaIndex:f,startTime:l+oe(r,m,f)};return{mediaIndex:g-
1,startTime:p}},isEnabled:uf,isDisabled:function(r){return r.disabled},isBlacklisted:Sl,isIncompatible:Lh,playlistEnd:Rl,isAes:function(r){for(var p=0;p<r.segments.length;p++)if(r.segments[p].key)return!0;return!1},hasAttribute:Tl,estimateSegmentRequestTime:function(r,p,m,l){void 0===l&&(l=0);return Tl("BANDWIDTH",m)?(r*m.attributes.BANDWIDTH-8*l)/p:NaN},isLowestEnabledRendition:Mh},vq=V.xhr,wq=V.mergeOptions,Nh=function(r,p,m,l){var f="arraybuffer"===r.responseType?r.response:r.responseText;!p&&
f&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=f.byteLength||f.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8E3)));m.headers&&(r.responseHeaders=m.headers);p&&"ETIMEDOUT"===p.code&&(r.timedout=!0);p||r.aborted||200===m.statusCode||206===m.statusCode||0===m.statusCode||(p=Error("XHR Failed with a response of: "+(r&&(f||r.responseText))));l(p,r)},Ul=function(){var r=function f(m,l){m=wq({timeout:45E3},m);var g=f.beforeRequest||
V.Vhs.xhr.beforeRequest;g&&"function"===typeof g&&(g=g(m))&&(m=g);var k=(!0===V.Vhs.xhr.original?vq:V.Vhs.xhr)(m,function(x,A){return Nh(k,x,A,l)}),u=k.abort;k.abort=function(){k.aborted=!0;return u.apply(k,arguments)};k.uri=m.uri;k.requestTime=Date.now();return k};r.original=!0;return r},Oh=function(r){var p={};r.byterange&&(r=r.byterange,p.Range="bytes="+r.offset+"-"+(r.offset+r.length-1));return p},xq=function(r,p){r=r.toString(16);return"00".substring(0,2-r.length)+r+(p%2?" ":"")},yq=function(r){return 32<=
r&&126>r?String.fromCharCode(r):"."},Vl=function(r){var p={};Object.keys(r).forEach(function(m){var l=r[m];ArrayBuffer.isView(l)?p[m]={bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:p[m]=l});return p},vf=function(r){var p=r.byterange||{length:Infinity,offset:0};return[p.length,p.offset,r.resolvedUri].join()},Wl=function(r){r=Array.prototype.slice.call(r);for(var p="",m,l,f=0;f<r.length/16;f++)m=r.slice(16*f,16*f+16).map(xq).join(""),l=r.slice(16*f,16*f+16).map(yq).join(""),p+=m+" "+
l+"\n";return p},zq={__proto__:null,createTransferableMessage:Vl,initSegmentId:vf,segmentKeyId:function(r){return r.resolvedUri},hexDump:Wl,tagDump:function(r){return Wl(r.bytes)},textRanges:function(r){var p="",m;for(m=0;m<r.length;m++){var l=r;var f=m;l=l.start(f)+"-"+l.end(f);p+=l+" "}return p}},Aq=function(r,p){try{var m=new Date(r)}catch(k){return null}if(!p||!p.segments||0===p.segments.length)return null;r=p.segments[0];if(m<r.dateTimeObject)return null;for(var l=0;l<p.segments.length-1&&!(r=
p.segments[l],m<p.segments[l+1].dateTimeObject);l++);l=p.segments[p.segments.length-1];var f=l.dateTimeObject;if(l.videoTimingInfo){var g=l.videoTimingInfo;g=g.transmuxedPresentationEnd-g.transmuxedPresentationStart-g.transmuxerPrependedSeconds}else g=l.duration+.25*l.duration;g=new Date(f.getTime()+1E3*g);if(m>g)return null;m>f&&(r=l);return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Ib.duration(p,p.mediaSequence+p.segments.indexOf(r)),type:r.videoTimingInfo?
"accurate":"estimate"}},Bq=function(r,p){if(!p||!p.segments||0===p.segments.length)return null;for(var m=0,l,f=0;f<p.segments.length&&!(l=p.segments[f],m=l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationEnd:m+l.duration,r<=m);f++);p=p.segments[p.segments.length-1];if(p.videoTimingInfo&&p.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>m){if(r>m+.25*p.duration)return null;l=p}return{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:m-l.duration,
type:l.videoTimingInfo?"accurate":"estimate"}},Cq=function(r,p){try{var m=new Date(r);var l=new Date(p)}catch(f){}r=m.getTime();return(l.getTime()-r)/1E3},Dq=function(r){if(!r.segments||0===r.segments.length)return!1;for(var p=0;p<r.segments.length;p++)if(!r.segments[p].dateTimeObject)return!1;return!0},Eq=function(r){var p=r.playlist,m=r.time;m=void 0===m?void 0:m;r=r.callback;if(!r)throw Error("getProgramTime: callback must be provided");if(!p||void 0===m)return r({message:"getProgramTime: playlist and time must be provided"});
var l=Bq(m,p);if(!l)return r({message:"valid programTime was not found"});if("estimate"===l.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:l.estimatedStart});p={mediaSeconds:m};l=l.segment;l.dateTimeObject?(m-=l.videoTimingInfo.transmuxedPresentationStart+l.videoTimingInfo.transmuxerPrependedSeconds,m=new Date(l.dateTimeObject.getTime()+1E3*m)):m=null;m&&(p.programDateTime=m.toISOString());return r(null,p)},Fq=function m(p){var l=
p.programTime,f=p.playlist,g=p.retryCount,k=void 0===g?2:g,u=p.seekTo;g=p.pauseAfterSeek;var x=void 0===g?!0:g,A=p.tech,H=p.callback;if(!H)throw Error("seekToProgramTime: callback must be provided");if("undefined"===typeof l||!f||!u)return H({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!f.endList&&!A.hasStarted_)return H({message:"player must be playing a live stream to start buffering"});if(!Dq(f))return H({message:"programDateTime tags must be provided in the manifest "+
f.resolvedUri});p=Aq(l,f);if(!p)return H({message:l+" was not found in the stream"});g=p.segment;var R=Cq(g.dateTimeObject,l);if("estimate"===p.type){if(0===k)return H({message:l+" is not buffered yet. Try again"});u(p.estimatedStart+R);A.one("seeked",function(){m({programTime:l,playlist:f,retryCount:k-1,seekTo:u,pauseAfterSeek:x,tech:A,callback:H})})}else p=g.start+R,A.one("seeked",function(){return H(null,A.currentTime())}),x&&A.pause(),u(p)},Xl=function(p,m){if(4===p.readyState)return m()},Gq=
function(p,m,l){var f=[],g,k=!1,u=function(H,R,W,M){R.abort();k=!0;return l(H,R,W,M)},x=function(H,R){if(!k){if(H)return u(H,R,"",f);var W=R.responseText.substring(f&&f.byteLength||0,R.responseText.length);f=Yp(f,nl(W,!0));g=g||le(f);if(10>f.length||g&&f.length<g+2)return Xl(R,function(){return u(H,R,"",f)});W=Eh(f);return"ts"===W&&188>f.length||!W&&376>f.length?Xl(R,function(){return u(H,R,"",f)}):u(null,R,W,f)}},A=m({uri:p,beforeSend:function(H){H.overrideMimeType("text/plain; charset=x-user-defined");
H.addEventListener("progress",function(R){R.total;R.loaded;return Nh(H,null,{statusCode:H.status},x)})}},function(H,R){return Nh(A,H,R,x)});return A},Yl=V.mergeOptions,Zl=function(p,m){if(!Jl(p,m)||p.sidx&&m.sidx&&(p.sidx.offset!==m.sidx.offset||p.sidx.length!==m.sidx.length)||!p.sidx&&m.sidx||p.sidx&&!m.sidx||p.segments&&!m.segments||!p.segments&&m.segments)return!1;if(!p.segments&&!m.segments)return!0;for(var l=0;l<p.segments.length;l++){var f=p.segments[l],g=m.segments[l];if(f.uri!==g.uri)return!1;
if(f.byterange||g.byterange)if(f=f.byterange,g=g.byterange,f&&!g||!f&&g||f.offset!==g.offset||f.length!==g.length)return!1}return!0},Ph=function(p){return p.uri+"-"+p.byterange.offset+"-"+(p.byterange.offset+p.byterange.length-1)},Hq=function(p,m,l){for(var f=!0,g=Yl(p,{duration:m.duration,minimumUpdatePeriod:m.minimumUpdatePeriod}),k=0;k<m.playlists.length;k++){var u=m.playlists[k];if(u.sidx){var x=Ph(u.sidx);l&&l[x]&&xh(u,l[x].sidx,u.sidx.resolvedUri)}if(u=Jh(g,u,Zl))g=u,f=!1}tf(m,function(A,H,
R,W){if(A.playlists&&A.playlists.length){var M=A.playlists[0].id;if(A=Jh(g,A.playlists[0],Zl))g=A,g.mediaGroups[H][R][W].playlists[0]=g.playlists[M],f=!1}});m.minimumUpdatePeriod!==p.minimumUpdatePeriod&&(f=!1);return f?null:g},$l=function(p,m){var l={},f;for(f in p){var g=p[f].sidx;if(g){var k=Ph(g);if(!m[k])break;var u=m[k].sidxInfo;(!u.map&&!g.map||u.map&&g.map&&u.map.byterange.offset===g.map.byterange.offset&&u.map.byterange.length===g.map.byterange.length)&&u.uri===g.uri&&u.byterange.offset===
g.byterange.offset&&u.byterange.length===g.byterange.length&&(l[k]=m[k])}}return l},Iq=function(p,m){var l=$l(p.playlists,m);tf(p,function(f,g,k,u){f.playlists&&f.playlists.length&&(l=Yl(l,$l(f.playlists,m)))});return l},Qh=function(p){function m(f,g,k,u){void 0===k&&(k={});var x=p.call(this)||this;x.masterPlaylistLoader_=u||Tb(x);u||(x.isMaster_=!0);u=k;k=u.withCredentials;u=u.handleManifestRedirects;x.vhs_=g;x.withCredentials=void 0===k?!1:k;x.handleManifestRedirects=void 0===u?!1:u;if(!f)throw Error("A non-empty playlist URL or object is required");
x.on("minimumUpdatePeriod",function(){x.refreshXml_()});x.on("mediaupdatetimeout",function(){x.refreshMedia_(x.media().id)});x.state="HAVE_NOTHING";x.loadedPlaylists_={};x.logger_=lc("DashPlaylistLoader");x.isMaster_?(x.masterPlaylistLoader_.srcUrl=f,x.masterPlaylistLoader_.sidxMapping_={}):x.childPlaylist_=f;return x}zc(m,p);var l=m.prototype;l.requestErrored_=function(f,g,k){if(!this.request)return!0;this.request=null;if(f)return this.error="object"!==typeof f||f instanceof Error?{status:g.status,
message:"DASH request error at URL: "+g.uri,response:g.response,code:2}:f,k&&(this.state=k),this.trigger("error"),!0};l.addSidxSegments_=function(f,g,k){var u=this,x=f.sidx&&Ph(f.sidx);if(f.sidx&&x&&!this.masterPlaylistLoader_.sidxMapping_[x]){var A=sf(this.handleManifestRedirects,f.sidx.resolvedUri),H=this.masterPlaylistLoader_.sidxMapping_;H[x]={sidxInfo:f.sidx};var R=function(W,M){if(!u.requestErrored_(W,M,g)){W=Ba(M.response).subarray(8);M=new DataView(W.buffer,W.byteOffset,W.byteLength);var T=
{version:W[0],flags:new Uint8Array(W.subarray(1,4)),references:[],referenceId:M.getUint32(4),timescale:M.getUint32(8)},Q=12;0===T.version?(T.earliestPresentationTime=M.getUint32(Q),T.firstOffset=M.getUint32(Q+4),Q+=8):(T.earliestPresentationTime=M.getUint32(Q)*ml+M.getUint32(Q+4),T.firstOffset=M.getUint32(Q+8)*ml+M.getUint32(Q+12),Q+=16);Q+=2;var na=M.getUint16(Q);for(Q+=2;0<na;Q+=12,na--)T.references.push({referenceType:(W[Q]&128)>>>7,referencedSize:M.getUint32(Q)&2147483647,subsegmentDuration:M.getUint32(Q+
4),startsWithSap:!!(W[Q+8]&128),sapType:(W[Q+8]&112)>>>4,sapDeltaTime:M.getUint32(Q+8)&268435455});H[x].sidx=T;xh(f,T,f.sidx.resolvedUri);return k(!0)}};this.request=Gq(A,this.vhs_.xhr,function(W,M,T,Q){if(W)return R(W,M);if(!T||"mp4"!==T)return R({status:M.status,message:"Unsupported "+(T||"unknown")+" container type for sidx segment at URL: "+A,response:"",playlist:f,internal:!0,blacklistDuration:Infinity,code:2},M);var na=f.sidx.byterange;T=na.offset;na=na.length;if(Q.length>=na+T)return R(W,{response:Q.subarray(T,
T+na),status:M.status,uri:M.uri});u.request=u.vhs_.xhr({uri:A,responseType:"arraybuffer",headers:Oh({byterange:f.sidx.byterange})},R)})}else this.mediaRequest_=ra.setTimeout(function(){return k(!1)},0)};l.dispose=function(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};ra.clearTimeout(this.minimumUpdatePeriodTimeout_);ra.clearTimeout(this.mediaRequest_);ra.clearTimeout(this.mediaUpdateTimeout);this.minimumUpdatePeriodTimeout_=this.mediaRequest_=this.mediaUpdateTimeout=null;this.masterPlaylistLoader_.createMupOnMedia_&&
(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null);this.off()};l.hasPendingRequest=function(){return this.request||this.mediaRequest_};l.stopRequest=function(){if(this.request){var f=this.request;this.request=null;f.onreadystatechange=null;f.abort()}};l.media=function(f){var g=this;if(!f)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var k=this.state;if("string"===
typeof f){if(!this.masterPlaylistLoader_.master.playlists[f])throw Error("Unknown playlist URI: "+f);f=this.masterPlaylistLoader_.master.playlists[f]}var u=!this.media_||f.id!==this.media_.id;u&&this.loadedPlaylists_[f.id]&&this.loadedPlaylists_[f.id].endList?(this.state="HAVE_METADATA",this.media_=f,u&&(this.trigger("mediachanging"),this.trigger("mediachange"))):u&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(f,k,function(x){g.haveMetadata({startingState:k,playlist:f})}))};l.haveMetadata=
function(f){var g=f.startingState;f=f.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[f.id]=f;this.mediaRequest_=null;this.refreshMedia_(f.id);"HAVE_MASTER"===g?this.trigger("loadedmetadata"):this.trigger("mediachange")};l.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null);this.stopRequest();ra.clearTimeout(this.mediaUpdateTimeout);ra.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_);
this.mediaUpdateTimeout=this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null;"HAVE_NOTHING"===this.state&&(this.started=!1)};l.load=function(f){var g=this;ra.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;var k=this.media();f?this.mediaUpdateTimeout=ra.setTimeout(function(){return g.load()},k?k.targetDuration/2*1E3:5E3):this.started?k&&!k.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()};l.start=function(){var f=this;this.started=!0;
this.isMaster_?this.requestMaster_(function(g,k){f.haveMaster_();f.hasPendingRequest()||f.media_||f.media(f.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=ra.setTimeout(function(){return f.haveMaster_()},0)};l.requestMaster_=function(f){var g=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(k,u){if(g.requestErrored_(k,u))"HAVE_NOTHING"===g.state&&(g.started=!1);else{var x=u.responseText!==g.masterPlaylistLoader_.masterXml_;
g.masterPlaylistLoader_.masterXml_=u.responseText;g.masterLoaded_=u.responseHeaders&&u.responseHeaders.date?Date.parse(u.responseHeaders.date):Date.now();g.masterPlaylistLoader_.srcUrl=sf(g.handleManifestRedirects,g.masterPlaylistLoader_.srcUrl,u);if(x)g.handleMaster_(),g.syncClientServerClock_(function(){return f(u,x)});else return f(u,x)}})};l.syncClientServerClock_=function(f){var g=this,k=Vp(ll(this.masterPlaylistLoader_.masterXml_));if(null===k)return this.masterPlaylistLoader_.clientOffset_=
this.masterLoaded_-Date.now(),f();if("DIRECT"===k.method)return this.masterPlaylistLoader_.clientOffset_=k.value-Date.now(),f();this.request=this.vhs_.xhr({uri:kc(this.masterPlaylistLoader_.srcUrl,k.value),method:k.method,withCredentials:this.withCredentials},function(u,x){if(g.request){if(u)return g.masterPlaylistLoader_.clientOffset_=g.masterLoaded_-Date.now(),f();u="HEAD"===k.method?x.responseHeaders&&x.responseHeaders.date?Date.parse(x.responseHeaders.date):g.masterLoaded_:Date.parse(x.responseText);
g.masterPlaylistLoader_.clientOffset_=u-Date.now();f()}})};l.haveMaster_=function(){this.state="HAVE_MASTER";this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)};l.handleMaster_=function(){this.mediaRequest_=null;var f=this.masterPlaylistLoader_.masterXml_;var g=this.masterPlaylistLoader_.srcUrl;var k={manifestUri:g,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_};void 0===k&&(k={});f=ll(f);var u=k;void 0===
u&&(u={});var x=u;u=x.manifestUri;u=void 0===u?"":u;var A=x.NOW;A=void 0===A?Date.now():A;x=x.clientOffset;var H=void 0===x?0:x;x=gb(f,"Period");if(!x.length)throw Error("INVALID_NUMBER_OF_PERIOD");var R=gb(f,"Location"),W=Cb(f);f=nf([u],gb(f,"BaseURL"));W.sourceDuration=W.mediaPresentationDuration||0;W.NOW=A;W.clientOffset=H;R.length&&(W.locations=R.map(zh));u=W.locations;f=mf(x.map(Up(W,f))).map(Pp);k=Lp(f,u,k.sidxMapping);Hl(k,g);g=k;(k=this.masterPlaylistLoader_.master)&&(g=Hq(k,g,this.masterPlaylistLoader_.sidxMapping_));
this.masterPlaylistLoader_.master=g?g:k;(f=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0])&&f!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=f);(!k||g&&g.minimumUpdatePeriod!==k.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_();return!!g};l.updateMinimumUpdatePeriodTimeout_=function(){var f=this.masterPlaylistLoader_;f.createMupOnMedia_&&(f.off("loadedmetadata",f.createMupOnMedia_),f.createMupOnMedia_=null);f.minimumUpdatePeriodTimeout_&&
(ra.clearTimeout(f.minimumUpdatePeriodTimeout_),f.minimumUpdatePeriodTimeout_=null);var g=f.master&&f.master.minimumUpdatePeriod;0===g&&(f.media()?g=1E3*f.media().targetDuration:(f.createMupOnMedia_=f.updateMinimumUpdatePeriodTimeout_,f.one("loadedmetadata",f.createMupOnMedia_)));"number"!==typeof g||0>=g?0>g&&this.logger_("found invalid minimumUpdatePeriod of "+g+", not setting a timeout"):this.createMUPTimeout_(g)};l.createMUPTimeout_=function(f){var g=this.masterPlaylistLoader_;g.minimumUpdatePeriodTimeout_=
ra.setTimeout(function(){g.minimumUpdatePeriodTimeout_=null;g.trigger("minimumUpdatePeriod");g.createMUPTimeout_(f)},f)};l.refreshXml_=function(){var f=this;this.requestMaster_(function(g,k){k&&(f.media_&&(f.media_=f.masterPlaylistLoader_.master.playlists[f.media_.id]),f.masterPlaylistLoader_.sidxMapping_=Iq(f.masterPlaylistLoader_.master,f.masterPlaylistLoader_.sidxMapping_),f.addSidxSegments_(f.media(),f.state,function(u){f.refreshMedia_(f.media().id)}))})};l.refreshMedia_=function(f){var g=this;
if(!f)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var k=this.masterPlaylistLoader_.master.playlists,u=!this.media_||this.media_!==k[f];u?this.media_=k[f]:this.trigger("playlistunchanged");this.mediaUpdateTimeout||function A(){g.media().endList||(g.mediaUpdateTimeout=ra.setTimeout(function(){g.trigger("mediaupdatetimeout");A()},Kl(g.media(),!!u)))}();this.trigger("loadedplaylist")};return m}(V.EventTarget),nb={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,
BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},am=function(p){for(var m=new Uint8Array(new ArrayBuffer(p.length)),l=0;l<p.length;l++)m[l]=p.charCodeAt(l);return m.buffer},bm=function(p){p.on=p.addEventListener;p.off=p.removeEventListener;return p},Jq=function(p){try{return URL.createObjectURL(new Blob([p],
{type:"application/javascript"}))}catch(l){var m=new BlobBuilder;m.append(p);return URL.createObjectURL(m.getBlob())}},cm=function(p){return function(){var m=Jq(p),l=bm(new Worker(m));l.objURL=m;var f=l.terminate;l.on=l.addEventListener;l.off=l.removeEventListener;l.terminate=function(){URL.revokeObjectURL(m);return f.call(this)};return l}},dm=function(p){return"var browserWorkerPolyFill = "+bm.toString()+";\nbrowserWorkerPolyFill(self);\n"+p},em=function(p){return p.toString().replace(/^function.+?{/,
"").slice(0,-1)},or=dm(em(function(){var p=function(){this.init=function(){var I={};this.on=function(O,C){I[O]||(I[O]=[]);I[O]=I[O].concat(C)};this.off=function(O,C){if(!I[O])return!1;C=I[O].indexOf(C);I[O]=I[O].slice();I[O].splice(C,1);return-1<C};this.trigger=function(O){var C,B;if(C=I[O])if(2===arguments.length){var E=C.length;for(B=0;B<E;++B)C[B].call(this,arguments[1])}else{var y=[];for(B=1;B<arguments.length;++B)y.push(arguments[B]);E=C.length;for(B=0;B<E;++B)C[B].apply(this,y)}};this.dispose=
function(){I={}}}};p.prototype.pipe=function(I){this.on("data",function(O){I.push(O)});this.on("done",function(O){I.flush(O)});this.on("partialdone",function(O){I.partialFlush(O)});this.on("endedtimeline",function(O){I.endTimeline(O)});this.on("reset",function(O){I.reset(O)});return I};p.prototype.push=function(I){this.trigger("data",I)};p.prototype.flush=function(I){this.trigger("done",I)};p.prototype.partialFlush=function(I){this.trigger("partialdone",I)};p.prototype.endTimeline=function(I){this.trigger("endedtimeline",
I)};p.prototype.reset=function(I){this.trigger("reset",I)};var m=Math.pow(2,32)-1,l,f,g,k,u,x,A,H,R,W,M,T,Q,na,oa,za;(function(){var I;g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(I in g)g.hasOwnProperty(I)&&(g[I]=
[I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2),I.charCodeAt(3)]);k=new Uint8Array([105,115,111,109]);x=new Uint8Array([97,118,99,49]);u=new Uint8Array([0,0,0,1]);A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);H=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);R={video:A,audio:H};T=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);M=new Uint8Array([0,
0,0,0,0,0,0,0]);na=Q=new Uint8Array([0,0,0,0,0,0,0,0]);oa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);za=Q;W=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var ea=function(I){var O=[],C=0,B;for(B=1;B<arguments.length;B++)O.push(arguments[B]);for(B=O.length;B--;)C+=O[B].byteLength;var E=new Uint8Array(C+8);(new DataView(E.buffer,E.byteOffset,E.byteLength)).setUint32(0,E.byteLength);E.set(I,4);B=0;for(C=8;B<O.length;B++)E.set(O[B],C),C+=O[B].byteLength;return E};var ka=function(){return ea(g.dinf,ea(g.dref,
T))};var sa=function(I){return ea(g.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,I.audioobjecttype<<3|I.samplingfrequencyindex>>>1,I.samplingfrequencyindex<<7|I.channelcount<<3,6,1,2]))};var Ja=function(){return ea(g.ftyp,k,u,k,x)};var Va=function(I){return ea(g.hdlr,R[I])};var rb=function(I){var O=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,I.duration>>>24&255,I.duration>>>16&255,I.duration>>>8&255,I.duration&255,85,196,0,0]);I.samplerate&&(O[12]=I.samplerate>>>
24&255,O[13]=I.samplerate>>>16&255,O[14]=I.samplerate>>>8&255,O[15]=I.samplerate&255);return ea(g.mdhd,O)};var bb=function(I){return ea(g.mdia,rb(I),Va(I.type),Pb(I))};var ob=function(I){return ea(g.mfhd,new Uint8Array([0,0,0,0,(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255]))};var Pb=function(I){return ea(g.minf,"video"===I.type?ea(g.vmhd,W):ea(g.smhd,M),ka(),Kq(I))};var nc=function(I){for(var O=I.length,C=[];O--;)C[O]=Lq(I[O]);return ea.apply(null,[g.moov,Rh(4294967295)].concat(C).concat(Fd(I)))};
var Fd=function(I){for(var O=I.length,C=[];O--;)C[O]=Mq(I[O]);return ea.apply(null,[g.mvex].concat(C))};var Rh=function(I){I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ea(g.mvhd,I)};var Nq=function(I){I=I.samples||[];var O=new Uint8Array(4+I.length),C;for(C=0;C<
I.length;C++){var B=I[C].flags;O[C+4]=B.dependsOn<<4|B.isDependedOn<<2|B.hasRedundancy}return ea(g.sdtp,O)};var Kq=function(I){return ea(g.stbl,l(I),ea(g.stts,za),ea(g.stsc,na),ea(g.stsz,oa),ea(g.stco,Q))};(function(){l=function(C){return ea(g.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===C.type?I(C):O(C))};var I=function(C){var B=C.sps||[],E=C.pps||[],y=[],J=[],K;for(K=0;K<B.length;K++)y.push((B[K].byteLength&65280)>>>8),y.push(B[K].byteLength&255),y=y.concat(Array.prototype.slice.call(B[K]));
for(K=0;K<E.length;K++)J.push((E[K].byteLength&65280)>>>8),J.push(E[K].byteLength&255),J=J.concat(Array.prototype.slice.call(E[K]));B=[g.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(C.width&65280)>>8,C.width&255,(C.height&65280)>>8,C.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ea(g.avcC,new Uint8Array([1,C.profileIdc,C.profileCompatibility,C.levelIdc,255].concat([B.length],
y,[E.length],J))),ea(g.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];C.sarRatio&&(E=C.sarRatio[0],C=C.sarRatio[1],B.push(ea(g.pasp,new Uint8Array([(E&4278190080)>>24,(E&16711680)>>16,(E&65280)>>8,E&255,(C&4278190080)>>24,(C&16711680)>>16,(C&65280)>>8,C&255]))));return ea.apply(null,B)};var O=function(C){return ea(g.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(C.channelcount&65280)>>8,C.channelcount&255,(C.samplesize&65280)>>8,C.samplesize&255,0,0,0,0,(C.samplerate&65280)>>
8,C.samplerate&255,0,0]),sa(C))}})();var Oq=function(I){I=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(I.id&4278190080)>>24,(I.id&16711680)>>16,(I.id&65280)>>8,I.id&255,0,0,0,0,(I.duration&4278190080)>>24,(I.duration&16711680)>>16,(I.duration&65280)>>8,I.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(I.width&65280)>>8,I.width&255,0,0,(I.height&65280)>>8,I.height&255,0,0]);return ea(g.tkhd,I)};var Pq=function(I){var O=ea(g.tfhd,new Uint8Array([0,
0,0,58,(I.id&4278190080)>>24,(I.id&16711680)>>16,(I.id&65280)>>8,I.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var C=Math.floor(I.baseMediaDecodeTime/(m+1));var B=Math.floor(I.baseMediaDecodeTime%(m+1));C=ea(g.tfdt,new Uint8Array([1,0,0,0,C>>>24&255,C>>>16&255,C>>>8&255,C&255,B>>>24&255,B>>>16&255,B>>>8&255,B&255]));if("audio"===I.type)return I=f(I,92),ea(g.traf,O,C,I);B=Nq(I);I=f(I,B.length+92);return ea(g.traf,O,C,I,B)};var Lq=function(I){I.duration=I.duration||4294967295;return ea(g.trak,Oq(I),bb(I))};
var Mq=function(I){var O=new Uint8Array([0,0,0,0,(I.id&4278190080)>>24,(I.id&16711680)>>16,(I.id&65280)>>8,I.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==I.type&&(O[O.length-1]=0);return ea(g.trex,O)};(function(){var I=function(B,E){var y=0,J=0,K=0,D=0;B.length&&(void 0!==B[0].duration&&(y=1),void 0!==B[0].size&&(J=2),void 0!==B[0].flags&&(K=4),void 0!==B[0].compositionTimeOffset&&(D=8));return[0,0,y|J|K|D,1,(B.length&4278190080)>>>24,(B.length&16711680)>>>16,(B.length&65280)>>>8,B.length&255,
(E&4278190080)>>>24,(E&16711680)>>>16,(E&65280)>>>8,E&255]};var O=function(B,E){var y;B=B.samples||[];E+=20+16*B.length;var J=I(B,E);E=new Uint8Array(J.length+16*B.length);E.set(J);J=J.length;for(y=0;y<B.length;y++){var K=B[y];E[J++]=(K.duration&4278190080)>>>24;E[J++]=(K.duration&16711680)>>>16;E[J++]=(K.duration&65280)>>>8;E[J++]=K.duration&255;E[J++]=(K.size&4278190080)>>>24;E[J++]=(K.size&16711680)>>>16;E[J++]=(K.size&65280)>>>8;E[J++]=K.size&255;E[J++]=K.flags.isLeading<<2|K.flags.dependsOn;
E[J++]=K.flags.isDependedOn<<6|K.flags.hasRedundancy<<4|K.flags.paddingValue<<1|K.flags.isNonSyncSample;E[J++]=K.flags.degradationPriority&61440;E[J++]=K.flags.degradationPriority&15;E[J++]=(K.compositionTimeOffset&4278190080)>>>24;E[J++]=(K.compositionTimeOffset&16711680)>>>16;E[J++]=(K.compositionTimeOffset&65280)>>>8;E[J++]=K.compositionTimeOffset&255}return ea(g.trun,E)};var C=function(B,E){var y;B=B.samples||[];E+=20+8*B.length;var J=I(B,E);E=new Uint8Array(J.length+8*B.length);E.set(J);J=J.length;
for(y=0;y<B.length;y++){var K=B[y];E[J++]=(K.duration&4278190080)>>>24;E[J++]=(K.duration&16711680)>>>16;E[J++]=(K.duration&65280)>>>8;E[J++]=K.duration&255;E[J++]=(K.size&4278190080)>>>24;E[J++]=(K.size&16711680)>>>16;E[J++]=(K.size&65280)>>>8;E[J++]=K.size&255}return ea(g.trun,E)};f=function(B,E){return"audio"===B.type?C(B,E):O(B,E)}})();var ec={ftyp:Ja,mdat:function(I){return ea(g.mdat,I)},moof:function(I,O){for(var C=[],B=O.length;B--;)C[B]=Pq(O[B]);return ea.apply(null,[g.moof,ob(I)].concat(C))},
moov:nc,initSegment:function(I){var O=Ja();I=nc(I);var C=new Uint8Array(O.byteLength+I.byteLength);C.set(O);C.set(I,O.byteLength);return C}},fm=function(I,O){var C={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};C.dataOffset=O;C.compositionTimeOffset=I.pts-I.dts;C.duration=I.duration;C.size=4*I.length;C.size+=I.byteLength;I.keyFrame&&(C.flags.dependsOn=2,C.flags.isNonSyncSample=0);return C},oc={groupNalsIntoFrames:function(I){var O,C=
[],B=[];B.byteLength=0;B.nalCount=0;B.duration=0;for(O=C.byteLength=0;O<I.length;O++){var E=I[O];"access_unit_delimiter_rbsp"===E.nalUnitType?(C.length&&(C.duration=E.dts-C.dts,B.byteLength+=C.byteLength,B.nalCount+=C.length,B.duration+=C.duration,B.push(C)),C=[E],C.byteLength=E.data.byteLength,C.pts=E.pts,C.dts=E.dts):("slice_layer_without_partitioning_rbsp_idr"===E.nalUnitType&&(C.keyFrame=!0),C.duration=E.dts-C.dts,C.byteLength+=E.data.byteLength,C.push(E))}B.length&&(!C.duration||0>=C.duration)&&
(C.duration=B[B.length-1].duration);B.byteLength+=C.byteLength;B.nalCount+=C.length;B.duration+=C.duration;B.push(C);return B},groupFramesIntoGops:function(I){var O,C=[],B=[];C.byteLength=0;C.nalCount=0;C.duration=0;C.pts=I[0].pts;C.dts=I[0].dts;B.byteLength=0;B.nalCount=0;B.duration=0;B.pts=I[0].pts;B.dts=I[0].dts;for(O=0;O<I.length;O++){var E=I[O];E.keyFrame?(C.length&&(B.push(C),B.byteLength+=C.byteLength,B.nalCount+=C.nalCount,B.duration+=C.duration),C=[E],C.nalCount=E.length,C.byteLength=E.byteLength,
C.pts=E.pts,C.dts=E.dts,C.duration=E.duration):(C.duration+=E.duration,C.nalCount+=E.length,C.byteLength+=E.byteLength,C.push(E))}B.length&&0>=C.duration&&(C.duration=B[B.length-1].duration);B.byteLength+=C.byteLength;B.nalCount+=C.nalCount;B.duration+=C.duration;B.push(C);return B},extendFirstKeyFrame:function(I){if(!I[0][0].keyFrame&&1<I.length){var O=I.shift();I.byteLength-=O.byteLength;I.nalCount-=O.nalCount;I[0][0].dts=O.dts;I[0][0].pts=O.pts;I[0][0].duration+=O.duration}return I},generateSampleTable:function(I,
O){var C,B=O||0,E=[];for(O=0;O<I.length;O++){var y=I[O];for(C=0;C<y.length;C++){var J=y[C];J=fm(J,B);B+=J.size;E.push(J)}}return E},concatenateNalData:function(I){var O,C,B,E=0,y=new Uint8Array(I.byteLength+4*I.nalCount),J=new DataView(y.buffer);for(O=0;O<I.length;O++){var K=I[O];for(C=0;C<K.length;C++){var D=K[C];for(B=0;B<D.length;B++){var N=D[B];J.setUint32(E,N.data.byteLength);E+=4;y.set(N.data,E);E+=N.data.byteLength}}}return y},generateSampleTableForFrame:function(I,O){var C=[];I=fm(I,O||0);
C.push(I);return C},concatenateNalDataForFrame:function(I){var O,C=0,B=new Uint8Array(I.byteLength+4*I.length),E=new DataView(B.buffer);for(O=0;O<I.length;O++){var y=I[O];E.setUint32(C,y.data.byteLength);C+=4;B.set(y.data,C);C+=y.data.byteLength}return B}},Pc=[33,16,5,32,164,27],Sh=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ra=function(I){for(var O=[];I--;)O.push(0);return O},Qq=function(I){return Object.keys(I).reduce(function(O,C){O[C]=new Uint8Array(I[C].reduce(function(B,E){return B.concat(E)},
[]));return O},{})},Th;var gm=function(I){return 9E4*I};var hm=function(I,O){return I*O};var Uh=function(I){return I/9E4};var im=function(I,O){return I/O};var Ea={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:gm,secondsToAudioTs:hm,videoTsToSeconds:Uh,audioTsToSeconds:im,audioTsToVideoTs:function(I,O){return gm(im(I,O))},videoTsToAudioTs:function(I,O){return hm(Uh(I),O)},metadataTsToSeconds:function(I,O,C){return Uh(C?I:I-O)}},Qc={prefixWithSilence:function(I,O,C,B){var E,y=E=0;if(O.length){var J=Ea.audioTsToVideoTs(I.baseMediaDecodeTime,
I.samplerate);var K=Math.ceil(Ea.ONE_SECOND_IN_TS/(I.samplerate/1024));C&&B&&(E=J-Math.max(C,B),E=Math.floor(E/K),y=E*K);if(!(1>E||y>Ea.ONE_SECOND_IN_TS/2)){Th||(C={96E3:[Pc,[227,64],Ra(154),[56]],88200:[Pc,[231],Ra(170),[56]],64E3:[Pc,[248,192],Ra(240),[56]],48E3:[Pc,[255,192],Ra(268),[55,148,128],Ra(54),[112]],44100:[Pc,[255,192],Ra(268),[55,163,128],Ra(84),[112]],32E3:[Pc,[255,192],Ra(268),[55,234],Ra(226),[112]],24E3:[Pc,[255,192],Ra(268),[55,255,128],Ra(268),[111,112],Ra(126),[224]],16E3:[Pc,
[255,192],Ra(268),[55,255,128],Ra(268),[111,255],Ra(269),[223,108],Ra(195),[1,192]],12E3:[Sh,Ra(268),[3,127,248],Ra(268),[6,255,240],Ra(268),[13,255,224],Ra(268),[27,253,128],Ra(259),[56]],11025:[Sh,Ra(268),[3,127,248],Ra(268),[6,255,240],Ra(268),[13,255,224],Ra(268),[27,255,192],Ra(268),[55,175,128],Ra(108),[112]],8E3:[Sh,Ra(268),[3,121,16],Ra(47),[7]]},Th=Qq(C));C=Th[I.samplerate];C||(C=O[0].data);for(B=0;B<E;B++)J=O[0],O.splice(0,0,{data:C,dts:J.dts-K,pts:J.pts-K});I.baseMediaDecodeTime-=Math.floor(Ea.videoTsToAudioTs(y,
I.samplerate));return y}}},trimAdtsFramesByEarliestDts:function(I,O,C){if(O.minSegmentDts>=C)return I;O.minSegmentDts=Infinity;return I.filter(function(B){return B.dts>=C?(O.minSegmentDts=Math.min(O.minSegmentDts,B.dts),O.minSegmentPts=O.minSegmentDts,!0):!1})},generateSampleTable:function(I){var O,C=[];for(O=0;O<I.length;O++){var B=I[O];C.push({size:B.data.byteLength,duration:1024})}return C},concatenateFrameData:function(I){var O,C=0;var B=Uint8Array;var E=0;for(O=0;O<I.length;O++){var y=I[O];E+=
y.data.byteLength}y=new B(E);for(B=0;B<I.length;B++)O=I[B],y.set(O.data,C),C+=O.data.byteLength;return y}},Rq=Ea.ONE_SECOND_IN_TS,cb={clearDtsInfo:function(I){delete I.minSegmentDts;delete I.maxSegmentDts;delete I.minSegmentPts;delete I.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(I,O){var C=I.minSegmentDts;O||(C-=I.timelineStartInfo.dts);O=I.timelineStartInfo.baseMediaDecodeTime;O=Math.max(0,O+C);"audio"===I.type&&(I=I.samplerate/Rq,O=Math.floor(O*I));return O},collectDtsInfo:function(I,
O){"number"===typeof O.pts&&(void 0===I.timelineStartInfo.pts&&(I.timelineStartInfo.pts=O.pts),I.minSegmentPts=void 0===I.minSegmentPts?O.pts:Math.min(I.minSegmentPts,O.pts),I.maxSegmentPts=void 0===I.maxSegmentPts?O.pts:Math.max(I.maxSegmentPts,O.pts));"number"===typeof O.dts&&(void 0===I.timelineStartInfo.dts&&(I.timelineStartInfo.dts=O.dts),I.minSegmentDts=void 0===I.minSegmentDts?O.dts:Math.min(I.minSegmentDts,O.dts),I.maxSegmentDts=void 0===I.maxSegmentDts?O.dts:Math.max(I.maxSegmentDts,O.dts))}},
pe={parseSei:function(I){for(var O=0,C={payloadType:-1,payloadSize:0},B=0,E=0;O<I.byteLength&&128!==I[O];){for(;255===I[O];)B+=255,O++;for(B+=I[O++];255===I[O];)E+=255,O++;E+=I[O++];if(!C.payload&&4===B)if("GA94"===String.fromCharCode(I[O+3],I[O+4],I[O+5],I[O+6])){C.payloadType=B;C.payloadSize=E;C.payload=I.subarray(O,O+E);break}else C.payload=void 0;O+=E;E=B=0}return C},parseUserData:function(I){return 181!==I.payload[0]||49!==(I.payload[1]<<8|I.payload[2])||"GA94"!==String.fromCharCode(I.payload[3],
I.payload[4],I.payload[5],I.payload[6])||3!==I.payload[7]?null:I.payload.subarray(8,I.payload.length-1)},parseCaptionPackets:function(I,O){var C=[],B;if(!(O[0]&64))return C;var E=O[0]&31;for(B=0;B<E;B++){var y=3*B;var J={type:O[y+2]&3,pts:I};O[y+2]&4&&(J.ccData=O[y+3]<<8|O[y+4],C.push(J))}return C},discardEmulationPreventionBytes:function(I){for(var O=I.byteLength,C=[],B=1,E;B<O-2;)0===I[B]&&0===I[B+1]&&3===I[B+2]?(C.push(B+2),B+=2):B++;if(0===C.length)return I;O-=C.length;E=new Uint8Array(O);var y=
0;for(B=0;B<O;y++,B++)y===C[0]&&(y++,C.shift()),E[B]=I[y];return E},USER_DATA_REGISTERED_ITU_T_T35:4},Jb=function C(O){O=O||{};C.prototype.init.call(this);this.parse708captions_="boolean"===typeof O.parse708captions?O.parse708captions:!0;this.captionPackets_=[];this.ccStreams_=[new Wa(0,0),new Wa(0,1),new Wa(1,0),new Wa(1,1)];this.parse708captions_&&(this.cc708Stream_=new Ua);this.reset();this.ccStreams_.forEach(function(B){B.on("data",this.trigger.bind(this,"data"));B.on("partialdone",this.trigger.bind(this,
"partialdone"));B.on("done",this.trigger.bind(this,"done"))},this);this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Jb.prototype=new p;Jb.prototype.push=function(O){if("sei_rbsp"===O.nalUnitType){var C=pe.parseSei(O.escapedRBSP);C.payload&&C.payloadType===pe.USER_DATA_REGISTERED_ITU_T_T35&&(C=pe.parseUserData(C))&&(O.dts<this.latestDts_?
this.ignoreNextEqualDts_=!0:O.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(C=pe.parseCaptionPackets(O.pts,C),this.captionPackets_=this.captionPackets_.concat(C),this.latestDts_!==O.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=O.dts))}};Jb.prototype.flushCCStreams=function(O){this.ccStreams_.forEach(function(C){return"flush"===O?C.flush():C.partialFlush()},this)};Jb.prototype.flushStream=function(O){this.captionPackets_.length&&
(this.captionPackets_.forEach(function(C,B){C.presortIndex=B}),this.captionPackets_.sort(function(C,B){return C.pts===B.pts?C.presortIndex-B.presortIndex:C.pts-B.pts}),this.captionPackets_.forEach(function(C){2>C.type?this.dispatchCea608Packet(C):this.dispatchCea708Packet(C)},this),this.captionPackets_.length=0);this.flushCCStreams(O)};Jb.prototype.flush=function(){return this.flushStream("flush")};Jb.prototype.partialFlush=function(){return this.flushStream("partialFlush")};Jb.prototype.reset=function(){this.latestDts_=
null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(O){O.reset()})};Jb.prototype.dispatchCea608Packet=function(O){this.setsTextOrXDSActive(O)?this.activeCea608Channel_[O.type]=null:this.setsChannel1Active(O)?this.activeCea608Channel_[O.type]=0:this.setsChannel2Active(O)&&(this.activeCea608Channel_[O.type]=1);null!==this.activeCea608Channel_[O.type]&&this.ccStreams_[(O.type<<1)+this.activeCea608Channel_[O.type]].push(O)};Jb.prototype.setsChannel1Active=
function(O){return 4096===(O.ccData&30720)};Jb.prototype.setsChannel2Active=function(O){return 6144===(O.ccData&30720)};Jb.prototype.setsTextOrXDSActive=function(O){return 256===(O.ccData&28928)||4138===(O.ccData&30974)||6186===(O.ccData&30974)};Jb.prototype.dispatchCea708Packet=function(O){this.parse708captions_&&this.cc708Stream_.push(O)};var Sq={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,
4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Bc=function(O){this.windowNum=O;this.reset()};Bc.prototype.reset=function(){this.clearText();this.pendingNewLine=!1;this.winAttr={};this.penAttr={};this.penLoc={};this.penColor={};this.anchorPoint=this.anchorHorizontal=this.anchorVertical=this.relativePositioning=this.priority=this.columnLock=this.rowLock=this.visible=0;this.rowCount=1;this.virtualRowCount=this.rowCount+1;this.columnCount=
41;this.penStyle=this.windowStyle=0};Bc.prototype.getText=function(){return this.rows.join("\n")};Bc.prototype.clearText=function(){this.rows=[""];this.rowIdx=0};Bc.prototype.newLine=function(O){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(O);0<this.rows.length&&(this.rows.push(""),this.rowIdx++);for(;this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--};Bc.prototype.isEmpty=function(){return 0===this.rows.length?!0:1===
this.rows.length?""===this.rows[0]:!1};Bc.prototype.addText=function(O){this.rows[this.rowIdx]+=O};Bc.prototype.backspace=function(){if(!this.isEmpty()){var O=this.rows[this.rowIdx];this.rows[this.rowIdx]=O.substr(0,O.length-1)}};var Vh=function(O){this.serviceNum=O;this.text="";this.currentWindow=new Bc(-1);this.windows=[]};Vh.prototype.init=function(O,C){this.startPts=O;for(O=0;8>O;O++)this.windows[O]=new Bc(O),"function"===typeof C&&(this.windows[O].beforeRowOverflow=C)};Vh.prototype.setCurrentWindow=
function(O){this.currentWindow=this.windows[O]};var Ua=function C(){C.prototype.init.call(this);var B=this;this.current708Packet=null;this.services={};this.push=function(E){3===E.type?B.new708Packet():null===B.current708Packet&&B.new708Packet();B.add708Bytes(E)}};Ua.prototype=new p;Ua.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet();this.current708Packet={data:[],ptsVals:[]}};Ua.prototype.add708Bytes=function(C){var B=C.ccData,E=B>>>8;B&=255;this.current708Packet.ptsVals.push(C.pts);
this.current708Packet.data.push(E);this.current708Packet.data.push(B)};Ua.prototype.push708Packet=function(){var C=this.current708Packet,B=C.data,E=0,y=B[E++];C.seq=y>>6;for(C.sizeCode=y&63;E<B.length;E++){y=B[E++];C=y>>5;var J=y&31;7===C&&0<J&&(C=y=B[E++]);this.pushServiceBlock(C,E,J);0<J&&(E+=J-1)}};Ua.prototype.pushServiceBlock=function(C,B,E){var y=B,J=this.current708Packet.data,K=this.services[C];for(K||(K=this.initService(C,y));y<B+E&&y<J.length;y++)C=J[y],32<=C&&127>=C||160<=C&&255>=C?y=this.handleText(y,
K):16===C?y=this.extendedCommands(y,K):128<=C&&135>=C?y=this.setCurrentWindow(y,K):152<=C&&159>=C?y=this.defineWindow(y,K):136===C?y=this.clearWindows(y,K):140===C?y=this.deleteWindows(y,K):137===C?y=this.displayWindows(y,K):138===C?y=this.hideWindows(y,K):139===C?y=this.toggleWindows(y,K):151===C?y=this.setWindowAttributes(y,K):144===C?y=this.setPenAttributes(y,K):145===C?y=this.setPenColor(y,K):146===C?y=this.setPenLocation(y,K):143===C?K=this.reset(y,K):8===C?K.currentWindow.backspace():12===C?
K.currentWindow.clearText():13===C?K.currentWindow.pendingNewLine=!0:14===C?K.currentWindow.clearText():141===C&&y++};Ua.prototype.extendedCommands=function(C,B){var E=this.current708Packet.data[++C];if(32<=E&&127>=E||160<=E&&255>=E)C=this.handleText(C,B,!0);return C};Ua.prototype.getPts=function(C){return this.current708Packet.ptsVals[Math.floor(C/2)]};Ua.prototype.initService=function(C,B){var E=this;this.services[C]=new Vh(C);this.services[C].init(this.getPts(B),function(y){E.flushDisplayed(y,
E.services[C])});return this.services[C]};Ua.prototype.handleText=function(C,B,E){E=(E?4096:0)|this.current708Packet.data[C];var y=Sq[E]||E;E=E&4096&&E===y?"":String.fromCharCode(y);B=B.currentWindow;B.pendingNewLine&&!B.isEmpty()&&B.newLine(this.getPts(C));B.pendingNewLine=!1;B.addText(E);return C};Ua.prototype.setCurrentWindow=function(C,B){B.setCurrentWindow(this.current708Packet.data[C]&7);return C};Ua.prototype.defineWindow=function(C,B){var E=this.current708Packet.data,y=E[C];B.setCurrentWindow(y&
7);B=B.currentWindow;y=E[++C];B.visible=(y&32)>>5;B.rowLock=(y&16)>>4;B.columnLock=(y&8)>>3;B.priority=y&7;y=E[++C];B.relativePositioning=(y&128)>>7;B.anchorVertical=y&127;y=E[++C];B.anchorHorizontal=y;y=E[++C];B.anchorPoint=(y&240)>>4;B.rowCount=y&15;y=E[++C];B.columnCount=y&63;y=E[++C];B.windowStyle=(y&56)>>3;B.penStyle=y&7;B.virtualRowCount=B.rowCount+1;return C};Ua.prototype.setWindowAttributes=function(C,B){var E=this.current708Packet.data,y=B.currentWindow.winAttr;B=E[++C];y.fillOpacity=(B&
192)>>6;y.fillRed=(B&48)>>4;y.fillGreen=(B&12)>>2;y.fillBlue=B&3;B=E[++C];y.borderType=(B&192)>>6;y.borderRed=(B&48)>>4;y.borderGreen=(B&12)>>2;y.borderBlue=B&3;B=E[++C];y.borderType+=(B&128)>>5;y.wordWrap=(B&64)>>6;y.printDirection=(B&48)>>4;y.scrollDirection=(B&12)>>2;y.justify=B&3;B=E[++C];y.effectSpeed=(B&240)>>4;y.effectDirection=(B&12)>>2;y.displayEffect=B&3;return C};Ua.prototype.flushDisplayed=function(C,B){for(var E=[],y=0;8>y;y++)B.windows[y].visible&&!B.windows[y].isEmpty()&&E.push(B.windows[y].getText());
B.endPts=C;B.text=E.join("\n\n");this.pushCaption(B);B.startPts=C};Ua.prototype.pushCaption=function(C){""!==C.text&&(this.trigger("data",{startPts:C.startPts,endPts:C.endPts,text:C.text,stream:"cc708_"+C.serviceNum}),C.text="",C.startPts=C.endPts)};Ua.prototype.displayWindows=function(C,B){var E=this.current708Packet.data[++C],y=this.getPts(C);this.flushDisplayed(y,B);for(y=0;8>y;y++)E&1<<y&&(B.windows[y].visible=1);return C};Ua.prototype.hideWindows=function(C,B){var E=this.current708Packet.data[++C],
y=this.getPts(C);this.flushDisplayed(y,B);for(y=0;8>y;y++)E&1<<y&&(B.windows[y].visible=0);return C};Ua.prototype.toggleWindows=function(C,B){var E=this.current708Packet.data[++C],y=this.getPts(C);this.flushDisplayed(y,B);for(y=0;8>y;y++)E&1<<y&&(B.windows[y].visible^=1);return C};Ua.prototype.clearWindows=function(C,B){var E=this.current708Packet.data[++C],y=this.getPts(C);this.flushDisplayed(y,B);for(y=0;8>y;y++)E&1<<y&&B.windows[y].clearText();return C};Ua.prototype.deleteWindows=function(C,B){var E=
this.current708Packet.data[++C],y=this.getPts(C);this.flushDisplayed(y,B);for(y=0;8>y;y++)E&1<<y&&B.windows[y].reset();return C};Ua.prototype.setPenAttributes=function(C,B){var E=this.current708Packet.data,y=B.currentWindow.penAttr;B=E[++C];y.textTag=(B&240)>>4;y.offset=(B&12)>>2;y.penSize=B&3;B=E[++C];y.italics=(B&128)>>7;y.underline=(B&64)>>6;y.edgeType=(B&56)>>3;y.fontStyle=B&7;return C};Ua.prototype.setPenColor=function(C,B){var E=this.current708Packet.data,y=B.currentWindow.penColor;B=E[++C];
y.fgOpacity=(B&192)>>6;y.fgRed=(B&48)>>4;y.fgGreen=(B&12)>>2;y.fgBlue=B&3;B=E[++C];y.bgOpacity=(B&192)>>6;y.bgRed=(B&48)>>4;y.bgGreen=(B&12)>>2;y.bgBlue=B&3;B=E[++C];y.edgeRed=(B&48)>>4;y.edgeGreen=(B&12)>>2;y.edgeBlue=B&3;return C};Ua.prototype.setPenLocation=function(C,B){var E=this.current708Packet.data,y=B.currentWindow.penLoc;B.currentWindow.pendingNewLine=!0;B=E[++C];y.row=B&15;B=E[++C];y.column=B&63;return C};Ua.prototype.reset=function(C,B){var E=this.getPts(C);this.flushDisplayed(E,B);return this.initService(B.serviceNum,
C)};var Tq={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,
803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},wf=function(C){if(null===C)return"";C=Tq[C]||C;return String.fromCharCode(C)},Uq=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],dd=function(){for(var C=[],B=15;B--;)C.push("");return C},Wa=function y(B,E){y.prototype.init.call(this);this.field_=
B||0;this.dataChannel_=E||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(J){var K=J.ccData&32639;if(K===this.lastControlCode_)this.lastControlCode_=null;else{4096===(K&61440)?this.lastControlCode_=K:K!==this.PADDING_&&(this.lastControlCode_=null);var D=K>>>8;var N=K&255;K!==this.PADDING_&&(K===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":K===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(J.pts),this.flushDisplayed(J.pts),
N=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=N,this.startPts_=J.pts):K===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(J.pts)):K===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(J.pts)):K===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(J.pts)):K===this.CARRIAGE_RETURN_?(this.clearFormatting(J.pts),this.flushDisplayed(J.pts),this.shiftRowsUp_(),this.startPts_=J.pts):K===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,
-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):K===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(J.pts),this.displayed_=dd()):K===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=dd():K===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(J.pts),this.displayed_=dd()),this.mode_="paintOn",this.startPts_=J.pts):this.isSpecialCharacter(D,N)?(K=wf((D&3)<<8|N),this[this.mode_](J.pts,K),this.column_++):this.isExtCharacter(D,N)?("popOn"===this.mode_?
this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),K=wf((D&3)<<8|N),this[this.mode_](J.pts,K),this.column_++):this.isMidRowCode(D,N)?(this.clearFormatting(J.pts),this[this.mode_](J.pts," "),this.column_++,14===(N&14)&&this.addFormatting(J.pts,["i"]),1===(N&1)&&this.addFormatting(J.pts,["u"])):this.isOffsetControlCode(D,N)?this.column_+=N&3:this.isPAC(D,N)?(D=Uq.indexOf(K&7968),"rollUp"===this.mode_&&(0>D-this.rollUpRows_+
1&&(D=this.rollUpRows_-1),this.setRollUp(J.pts,D)),D!==this.row_&&(this.clearFormatting(J.pts),this.row_=D),N&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(J.pts,["u"]),16===(K&16)&&(this.column_=4*((K&14)>>1)),this.isColorPAC(N)&&14===(N&14)&&this.addFormatting(J.pts,["i"])):this.isNormalChar(D)&&(0===N&&(N=null),K=wf(D),K+=wf(N),this[this.mode_](J.pts,K),this.column_+=K.length))}}};Wa.prototype=new p;Wa.prototype.flushDisplayed=function(B){var E=this.displayed_.map(function(y){try{return y.trim()}catch(J){return console.error("Skipping malformed caption."),
""}}).join("\n").replace(/^\n+|\n+$/g,"");E.length&&this.trigger("data",{startPts:this.startPts_,endPts:B,text:E,stream:this.name_})};Wa.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=dd();this.nonDisplayed_=dd();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};Wa.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&
(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|
46};Wa.prototype.isSpecialCharacter=function(B,E){return B===this.EXT_&&48<=E&&63>=E};Wa.prototype.isExtCharacter=function(B,E){return(B===this.EXT_+1||B===this.EXT_+2)&&32<=E&&63>=E};Wa.prototype.isMidRowCode=function(B,E){return B===this.EXT_&&32<=E&&47>=E};Wa.prototype.isOffsetControlCode=function(B,E){return B===this.OFFSET_&&33<=E&&35>=E};Wa.prototype.isPAC=function(B,E){return B>=this.BASE_&&B<this.BASE_+8&&64<=E&&127>=E};Wa.prototype.isColorPAC=function(B){return 64<=B&&79>=B||96<=B&&127>=
B};Wa.prototype.isNormalChar=function(B){return 32<=B&&127>=B};Wa.prototype.setRollUp=function(B,E){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(B),this.nonDisplayed_=dd(),this.displayed_=dd());if(void 0!==E&&E!==this.row_)for(B=0;B<this.rollUpRows_;B++)this.displayed_[E-B]=this.displayed_[this.row_-B],this.displayed_[this.row_-B]="";void 0===E&&(E=this.row_);this.topRow_=E-this.rollUpRows_+1};Wa.prototype.addFormatting=function(B,E){this.formatting_=this.formatting_.concat(E);
E=E.reduce(function(y,J){return y+"<"+J+">"},"");this[this.mode_](B,E)};Wa.prototype.clearFormatting=function(B){if(this.formatting_.length){var E=this.formatting_.reverse().reduce(function(y,J){return y+"</"+J+">"},"");this.formatting_=[];this[this.mode_](B,E)}};Wa.prototype.popOn=function(B,E){this.nonDisplayed_[this.row_]+=E};Wa.prototype.rollUp=function(B,E){this.displayed_[this.row_]+=E};Wa.prototype.shiftRowsUp_=function(){var B;for(B=0;B<this.topRow_;B++)this.displayed_[B]="";for(B=this.row_+
1;15>B;B++)this.displayed_[B]="";for(B=this.topRow_;B<this.row_;B++)this.displayed_[B]=this.displayed_[B+1];this.displayed_[this.row_]=""};Wa.prototype.paintOn=function(B,E){this.displayed_[this.row_]+=E};var Vq=Wa,Wq=Ua,Ub={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},jm=function(B,E){var y=1;for(B>E&&(y=-1);4294967296<Math.abs(E-B);)B+=8589934592*y;return B},km=function y(E){var J,K;y.prototype.init.call(this);this.type_=E||"shared";this.push=function(D){if("shared"===this.type_||
D.type===this.type_)void 0===K&&(K=D.dts),D.dts=jm(D.dts,K),D.pts=jm(D.pts,K),J=D.dts,this.trigger("data",D)};this.flush=function(){K=J;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){J=K=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};km.prototype=new p;var qe=function(E,y,J){for(var K="";y<J;y++)K+="%"+("00"+E[y].toString(16)).slice(-2);return K},xf=function(E){return E[0]<<21|E[1]<<14|E[2]<<7|
E[3]},lm={TXXX:function(E){var y;if(3===E.data[0]){for(y=1;y<E.data.length;y++)if(0===E.data[y]){E.description=decodeURIComponent(qe(E.data,1,y));E.value=decodeURIComponent(qe(E.data,y+1,E.data.length)).replace(/\0*$/,"");break}E.data=E.value}},WXXX:function(E){var y;if(3===E.data[0])for(y=1;y<E.data.length;y++)if(0===E.data[y]){E.description=decodeURIComponent(qe(E.data,1,y));E.url=decodeURIComponent(qe(E.data,y+1,E.data.length));break}},PRIV:function(E){var y;for(y=0;y<E.data.length;y++)if(0===
E.data[y]){E.owner=unescape(qe(E.data,0,y));break}E.privateData=E.data.subarray(y+1);E.data=E.privateData}};var Wh=function(E){var y=!(!E||!E.debug);E=E&&E.descriptor;var J=0,K=[],D=0,N;Wh.prototype.init.call(this);this.dispatchType=Ub.METADATA_STREAM_TYPE.toString(16);if(E)for(N=0;N<E.length;N++)this.dispatchType+=("00"+E[N].toString(16)).slice(-2);this.push=function(F){var P;if("timed-metadata"===F.type)if(F.dataAlignmentIndicator&&(D=0,K.length=0),0===K.length&&(10>F.data.length||73!==F.data[0]||
68!==F.data[1]||51!==F.data[2]))y&&console.log("Skipping unrecognized metadata packet");else if(K.push(F),D+=F.data.byteLength,1===K.length&&(J=xf(F.data.subarray(6,10)),J+=10),!(D<J)){F={data:new Uint8Array(J),frames:[],pts:K[0].pts,dts:K[0].dts};for(P=0;P<J;)F.data.set(K[0].data.subarray(0,J-P),P),P+=K[0].data.byteLength,D-=K[0].data.byteLength,K.shift();P=10;F.data[5]&64&&(P=P+4+xf(F.data.subarray(10,14)),J-=xf(F.data.subarray(16,20)));do{var L=xf(F.data.subarray(P+4,P+8));if(1>L)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
var aa=String.fromCharCode(F.data[P],F.data[P+1],F.data[P+2],F.data[P+3]);aa={id:aa,data:F.data.subarray(P+10,P+L+10)};aa.key=aa.id;if(lm[aa.id]&&(lm[aa.id](aa),"com.apple.streaming.transportStreamTimestamp"===aa.owner)){var fa=aa.data,la=(fa[3]&1)<<30|fa[4]<<22|fa[5]<<14|fa[6]<<6|fa[7]>>>2;la*=4;la+=fa[7]&3;aa.timeStamp=la;void 0===F.pts&&void 0===F.dts&&(F.pts=aa.timeStamp,F.dts=aa.timeStamp);this.trigger("timestamp",aa)}F.frames.push(aa);P+=10;P+=L}while(P<J);this.trigger("data",F)}}};Wh.prototype=
new p;var Xh=function(){var E=new Uint8Array(188),y=0;Xh.prototype.init.call(this);this.push=function(J){var K=0,D=188;if(y){var N=new Uint8Array(J.byteLength+y);N.set(E.subarray(0,y));N.set(J,y);y=0}else N=J;for(;D<N.byteLength;)71===N[K]&&71===N[D]?(this.trigger("data",N.subarray(K,D)),K+=188,D+=188):(K++,D++);K<N.byteLength&&(E.set(N.subarray(K),0),y=N.byteLength-K)};this.flush=function(){188===y&&71===E[0]&&(this.trigger("data",E),y=0);this.trigger("done")};this.endTimeline=function(){this.flush();
this.trigger("endedtimeline")};this.reset=function(){y=0;this.trigger("reset")}};Xh.prototype=new p;var yf=function(){yf.prototype.init.call(this);var E=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var y=function(D,N){var F=0;N.payloadUnitStartIndicator&&(F+=D[F]+1);"pat"===N.type?J(D.subarray(F),N):K(D.subarray(F),N)};var J=function(D,N){N.section_number=D[7];N.last_section_number=D[8];E.pmtPid=(D[10]&31)<<8|D[11];N.pmtPid=E.pmtPid};var K=function(D,N){var F;if(D[5]&1){E.programMapTable=
{video:null,audio:null,"timed-metadata":{}};var P=3+((D[1]&15)<<8|D[2])-4;for(F=12+((D[10]&15)<<8|D[11]);F<P;){var L=D[F],aa=(D[F+1]&31)<<8|D[F+2];L===Ub.H264_STREAM_TYPE&&null===E.programMapTable.video?E.programMapTable.video=aa:L===Ub.ADTS_STREAM_TYPE&&null===E.programMapTable.audio?E.programMapTable.audio=aa:L===Ub.METADATA_STREAM_TYPE&&(E.programMapTable["timed-metadata"][aa]=L);F+=((D[F+3]&15)<<8|D[F+4])+5}N.programMapTable=E.programMapTable}};this.push=function(D){var N={},F=4;N.payloadUnitStartIndicator=
!!(D[1]&64);N.pid=D[1]&31;N.pid<<=8;N.pid|=D[2];1<(D[3]&48)>>>4&&(F+=D[F]+1);if(0===N.pid)N.type="pat",y(D.subarray(F),N),this.trigger("data",N);else if(N.pid===this.pmtPid)for(N.type="pmt",y(D.subarray(F),N),this.trigger("data",N);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([D,F,N]):this.processPes_(D,F,N)};this.processPes_=function(D,N,F){F.streamType=F.pid===this.programMapTable.video?
Ub.H264_STREAM_TYPE:F.pid===this.programMapTable.audio?Ub.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][F.pid];F.type="pes";F.data=D.subarray(N);this.trigger("data",F)}};yf.prototype=new p;yf.STREAM_TYPES={h264:27,adts:15};var Yh=function(){var E=this,y={data:[],size:0},J={data:[],size:0},K={data:[],size:0},D,N=function(F,P,L){var aa=new Uint8Array(F.size),fa={type:P},la,ca=0;if(F.data.length&&!(9>F.size)){fa.trackId=F.data[0].pid;for(la=0;la<F.data.length;la++){var ma=F.data[la];aa.set(ma.data,
ca);ca+=ma.data.byteLength}la=aa[0]<<16|aa[1]<<8|aa[2];fa.data=new Uint8Array;1===la&&(fa.packetLength=6+(aa[4]<<8|aa[5]),fa.dataAlignmentIndicator=0!==(aa[6]&4),la=aa[7],la&192&&(fa.pts=(aa[9]&14)<<27|(aa[10]&255)<<20|(aa[11]&254)<<12|(aa[12]&255)<<5|(aa[13]&254)>>>3,fa.pts*=4,fa.pts+=(aa[13]&6)>>>1,fa.dts=fa.pts,la&64&&(fa.dts=(aa[14]&14)<<27|(aa[15]&255)<<20|(aa[16]&254)<<12|(aa[17]&255)<<5|(aa[18]&254)>>>3,fa.dts*=4,fa.dts+=(aa[18]&6)>>>1)),fa.data=aa.subarray(9+aa[8]));P="video"===P||fa.packetLength<=
F.size;if(L||P)F.size=0,F.data.length=0;P&&E.trigger("data",fa)}};Yh.prototype.init.call(this);this.push=function(F){({pat:function(){},pes:function(){switch(F.streamType){case Ub.H264_STREAM_TYPE:var P=y;var L="video";break;case Ub.ADTS_STREAM_TYPE:P=J;L="audio";break;case Ub.METADATA_STREAM_TYPE:P=K;L="timed-metadata";break;default:return}F.payloadUnitStartIndicator&&N(P,L,!0);P.data.push(F);P.size+=F.data.byteLength},pmt:function(){var P={type:"metadata",tracks:[]};D=F.programMapTable;null!==D.video&&
P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.video,codec:"avc",type:"video"});null!==D.audio&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.audio,codec:"adts",type:"audio"});E.trigger("data",P)}})[F.type]()};this.reset=function(){y.size=0;y.data.length=0;J.size=0;J.data.length=0;this.trigger("reset")};this.flushStreams_=function(){N(y,"video");N(J,"audio");N(K,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};Yh.prototype=new p;
var hb={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Xh,TransportParseStream:yf,ElementaryStream:Yh,TimestampRolloverStream:km,CaptionStream:Jb,Cea608Stream:Vq,Cea708Stream:Wq,MetadataStream:Wh},zf;for(zf in Ub)Ub.hasOwnProperty(zf)&&(hb[zf]=Ub[zf]);var Xq=Ea.ONE_SECOND_IN_TS,mm=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Gd=function(E){var y,J=0;Gd.prototype.init.call(this);this.push=function(K){var D=0;E||(J=0);if("audio"===K.type){if(y){var N=y;y=new Uint8Array(N.byteLength+
K.data.byteLength);y.set(N);y.set(K.data,N.byteLength)}else y=K.data;for(;D+5<y.length;)if(255!==y[D]||240!==(y[D+1]&246))D++;else{N=2*(~y[D+1]&1);var F=(y[D+3]&3)<<11|y[D+4]<<3|(y[D+5]&224)>>5;var P=1024*((y[D+6]&3)+1);var L=P*Xq/mm[(y[D+2]&60)>>>2];F=D+F;if(y.byteLength<F)break;this.trigger("data",{pts:K.pts+J*L,dts:K.dts+J*L,sampleCount:P,audioobjecttype:(y[D+2]>>>6&3)+1,channelcount:(y[D+2]&1)<<2|(y[D+3]&192)>>>6,samplerate:mm[(y[D+2]&60)>>>2],samplingfrequencyindex:(y[D+2]&60)>>>2,samplesize:16,
data:y.subarray(D+7+N,F)});J++;if(y.byteLength===F){y=void 0;break}y=y.subarray(F)}}};this.flush=function(){J=0;this.trigger("done")};this.reset=function(){y=void 0;this.trigger("reset")};this.endTimeline=function(){y=void 0;this.trigger("endedtimeline")}};Gd.prototype=new p;var Yq=function(E){var y=E.byteLength,J=0,K=0;this.length=function(){return 8*y};this.bitsAvailable=function(){return 8*y+K};this.loadWord=function(){var D=E.byteLength-y,N=new Uint8Array(4),F=Math.min(4,y);if(0===F)throw Error("no bytes available");
N.set(E.subarray(D,D+F));J=(new DataView(N.buffer)).getUint32(0);K=8*F;y-=F};this.skipBits=function(D){if(!(K>D)){D-=K;var N=Math.floor(D/8);D-=8*N;y-=N;this.loadWord()}J<<=D;K-=D};this.readBits=function(D){var N=Math.min(K,D),F=J>>>32-N;K-=N;0<K?J<<=N:0<y&&this.loadWord();N=D-N;return 0<N?F<<N|this.readBits(N):F};this.skipLeadingZeros=function(){var D;for(D=0;D<K;++D)if(0!==(J&2147483648>>>D))return J<<=D,K-=D,D;this.loadWord();return D+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+
this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var D=this.skipLeadingZeros();return this.readBits(D+1)-1};this.readExpGolomb=function(){var D=this.readUnsignedExpGolomb();return 1&D?1+D>>>1:-1*(D>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Zh=function(){var E=0,y,J;Zh.prototype.init.call(this);this.push=function(K){if(J){var D=
new Uint8Array(J.byteLength+K.data.byteLength);D.set(J);D.set(K.data,J.byteLength);J=D}else J=K.data;for(K=J.byteLength;E<K-3;E++)if(1===J[E+2]){y=E+5;break}for(;y<K;)switch(J[y]){case 0:if(0!==J[y-1]){y+=2;break}else if(0!==J[y-2]){y++;break}E+3!==y-2&&this.trigger("data",J.subarray(E+3,y-2));do y++;while(1!==J[y]&&y<K);E=y-2;y+=3;break;case 1:if(0!==J[y-1]||0!==J[y-2]){y+=3;break}this.trigger("data",J.subarray(E+3,y-2));E=y-2;y+=3;break;default:y+=3}J=J.subarray(E);y-=E;E=0};this.reset=function(){J=
null;E=0;this.trigger("reset")};this.flush=function(){J&&3<J.byteLength&&this.trigger("data",J.subarray(E+3));J=null;E=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};Zh.prototype=new p;var Zq={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Af=function(){var E=new Zh,y,J,K;Af.prototype.init.call(this);var D=this;this.push=function(L){"video"===L.type&&(y=L.trackId,J=L.pts,K=L.dts,E.push(L))};E.on("data",function(L){var aa=
{trackId:y,pts:J,dts:K,data:L};switch(L[0]&31){case 5:aa.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:aa.nalUnitType="sei_rbsp";aa.escapedRBSP=F(L.subarray(1));break;case 7:aa.nalUnitType="seq_parameter_set_rbsp";aa.escapedRBSP=F(L.subarray(1));aa.config=P(aa.escapedRBSP);break;case 8:aa.nalUnitType="pic_parameter_set_rbsp";break;case 9:aa.nalUnitType="access_unit_delimiter_rbsp"}D.trigger("data",aa)});E.on("done",function(){D.trigger("done")});E.on("partialdone",function(){D.trigger("partialdone")});
E.on("reset",function(){D.trigger("reset")});E.on("endedtimeline",function(){D.trigger("endedtimeline")});this.flush=function(){E.flush()};this.partialFlush=function(){E.partialFlush()};this.reset=function(){E.reset()};this.endTimeline=function(){E.endTimeline()};var N=function(L,aa){var fa=8,la=8,ca;for(ca=0;ca<L;ca++)0!==la&&(la=aa.readExpGolomb(),la=(fa+la+256)%256),fa=0===la?fa:la};var F=function(L){for(var aa=L.byteLength,fa=[],la=1,ca;la<aa-2;)0===L[la]&&0===L[la+1]&&3===L[la+2]?(fa.push(la+
2),la+=2):la++;if(0===fa.length)return L;aa-=fa.length;ca=new Uint8Array(aa);var ma=0;for(la=0;la<aa;ma++,la++)ma===fa[0]&&(ma++,fa.shift()),ca[la]=L[ma];return ca};var P=function(L){var aa=0,fa=0,la=0,ca=0,ma=1;L=new Yq(L);var wa=L.readUnsignedByte();var ta=L.readUnsignedByte();var Fa=L.readUnsignedByte();L.skipUnsignedExpGolomb();if(Zq[wa]){var Ka=L.readUnsignedExpGolomb();3===Ka&&L.skipBits(1);L.skipUnsignedExpGolomb();L.skipUnsignedExpGolomb();L.skipBits(1);if(L.readBoolean()){var ib=3!==Ka?8:
12;for(Ka=0;Ka<ib;Ka++)L.readBoolean()&&(6>Ka?N(16,L):N(64,L))}}L.skipUnsignedExpGolomb();Ka=L.readUnsignedExpGolomb();if(0===Ka)L.readUnsignedExpGolomb();else if(1===Ka)for(L.skipBits(1),L.skipExpGolomb(),L.skipExpGolomb(),ib=L.readUnsignedExpGolomb(),Ka=0;Ka<ib;Ka++)L.skipExpGolomb();L.skipUnsignedExpGolomb();L.skipBits(1);Ka=L.readUnsignedExpGolomb();ib=L.readUnsignedExpGolomb();var Vb=L.readBits(1);0===Vb&&L.skipBits(1);L.skipBits(1);L.readBoolean()&&(aa=L.readUnsignedExpGolomb(),fa=L.readUnsignedExpGolomb(),
la=L.readUnsignedExpGolomb(),ca=L.readUnsignedExpGolomb());if(L.readBoolean()&&L.readBoolean()){var fc=L.readUnsignedByte();switch(fc){case 1:var Oa=[1,1];break;case 2:Oa=[12,11];break;case 3:Oa=[10,11];break;case 4:Oa=[16,11];break;case 5:Oa=[40,33];break;case 6:Oa=[24,11];break;case 7:Oa=[20,11];break;case 8:Oa=[32,11];break;case 9:Oa=[80,33];break;case 10:Oa=[18,11];break;case 11:Oa=[15,11];break;case 12:Oa=[64,33];break;case 13:Oa=[160,99];break;case 14:Oa=[4,3];break;case 15:Oa=[3,2];break;case 16:Oa=
[2,1];break;case 255:Oa=[L.readUnsignedByte()<<8|L.readUnsignedByte(),L.readUnsignedByte()<<8|L.readUnsignedByte()]}Oa&&(ma=Oa[0]/Oa[1])}return{profileIdc:wa,levelIdc:Fa,profileCompatibility:ta,width:Math.ceil((16*(Ka+1)-2*aa-2*fa)*ma),height:(2-Vb)*(ib+1)*16-2*la-2*ca,sarRatio:Oa}}};Af.prototype=new p;var $q=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],nm=function(E,y){var J=E[y+6]<<21|E[y+7]<<14|E[y+8]<<7|E[y+9];E=E[y+5];J=0<=J?J:0;return(E&16)>>4?J+20:J+10},ar=function K(y,
J){if(10>y.length-J||73!==y[J]||68!==y[J+1]||51!==y[J+2])return J;J+=nm(y,J);return K(y,J)},om=function(y){return y[0]<<21|y[1]<<14|y[2]<<7|y[3]},Bf={isLikelyAacData:function(y){var J=ar(y,0);return y.length>=J+2&&255===(y[J]&255)&&240===(y[J+1]&240)&&16===(y[J+1]&22)},parseId3TagSize:nm,parseAdtsSize:function(y,J){return y[J+3]&6144|y[J+4]<<3|(y[J+5]&224)>>5},parseType:function(y,J){return 73===y[J]&&68===y[J+1]&&51===y[J+2]?"timed-metadata":y[J]&1&&240===(y[J+1]&240)?"audio":null},parseSampleRate:function(y){for(var J=
0;J+5<y.length;)if(255!==y[J]||240!==(y[J+1]&246))J++;else return $q[(y[J+2]&60)>>>2];return null},parseAacTimestamp:function(y){var J=10;y[5]&64&&(J=J+4+om(y.subarray(10,14)));do{var K=om(y.subarray(J+4,J+8));if(1>K)break;var D=String.fromCharCode(y[J],y[J+1],y[J+2],y[J+3]);if("PRIV"===D){D=y.subarray(J+10,J+K+10);for(var N=0;N<D.byteLength;N++)if(0===D[N]){var F=unescape,P,L=D,aa=N,fa="";for(P=0;P<aa;P++)fa+="%"+("00"+L[P].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===
F(fa))return y=D.subarray(N+1),J=(y[3]&1)<<30|y[4]<<22|y[5]<<14|y[6]<<6|y[7]>>>2,J*=4,J+=y[7]&3;break}}J+=10;J+=K}while(J<y.byteLength);return null}};var Cf=function(){var y=new Uint8Array,J=0;Cf.prototype.init.call(this);this.setTimestamp=function(K){J=K};this.push=function(K){var D=0;if(y.length){var N=y.length;y=new Uint8Array(K.byteLength+N);y.set(y.subarray(0,N));y.set(K,N)}else y=K;for(;3<=y.length-D;)if(73===y[D]&&68===y[D+1]&&51===y[D+2]){if(10>y.length-D)break;K=Bf.parseId3TagSize(y,D);if(D+
K>y.length)break;N={type:"timed-metadata",data:y.subarray(D,D+K)};this.trigger("data",N);D+=K}else if(255===(y[D]&255)&&240===(y[D+1]&240)){if(7>y.length-D)break;K=Bf.parseAdtsSize(y,D);if(D+K>y.length)break;N={type:"audio",data:y.subarray(D,D+K),pts:J,dts:J};this.trigger("data",N);D+=K}else D++;y=0<y.length-D?y.subarray(D):new Uint8Array};this.reset=function(){y=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){y=new Uint8Array;this.trigger("endedtimeline")}};Cf.prototype=new p;var $h=
["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ai="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),br=Bf.isLikelyAacData,cr=Ea.ONE_SECOND_IN_TS,pm=function(y,J){var K;if(y.length!==J.length)return!1;for(K=0;K<y.length;K++)if(y[K]!==J[K])return!1;return!0},qm=function(y,J,K,D,N,F){return{start:{dts:y,pts:y+(K-J)},end:{dts:y+(D-J),pts:y+(N-K)},prependedContentDuration:F,baseMediaDecodeTime:y}};var Df=function(y,J){var K=[],D=0,N=0,F=
0,P=Infinity;J=J||{};Df.prototype.init.call(this);this.push=function(L){cb.collectDtsInfo(y,L);y&&$h.forEach(function(aa){y[aa]=L[aa]});K.push(L)};this.setEarliestDts=function(L){N=L};this.setVideoBaseMediaDecodeTime=function(L){P=L};this.setAudioAppendStart=function(L){F=L};this.flush=function(){if(0!==K.length){var L=Qc.trimAdtsFramesByEarliestDts(K,y,N);y.baseMediaDecodeTime=cb.calculateTrackBaseMediaDecodeTime(y,J.keepOriginalTimestamps);var aa=Qc.prefixWithSilence(y,L,F,P);y.samples=Qc.generateSampleTable(L);
var fa=ec.mdat(Qc.concatenateFrameData(L));K=[];var la=ec.moof(D,[y]);var ca=new Uint8Array(la.byteLength+fa.byteLength);D++;ca.set(la);ca.set(fa,la.byteLength);cb.clearDtsInfo(y);la=Math.ceil(1024*cr/y.samplerate);L.length&&(la*=L.length,this.trigger("segmentTimingInfo",qm(Ea.audioTsToVideoTs(y.baseMediaDecodeTime,y.samplerate),L[0].dts,L[0].pts,L[0].dts+la,L[0].pts+la,aa||0)),this.trigger("timingInfo",{start:L[0].pts,end:L[0].pts+la}));this.trigger("data",{track:y,boxes:ca})}this.trigger("done",
"AudioSegmentStream")};this.reset=function(){cb.clearDtsInfo(y);K=[];this.trigger("reset")}};Df.prototype=new p;var bi=function(y,J){var K=0,D=[],N=[],F,P;J=J||{};bi.prototype.init.call(this);delete y.minPTS;this.gopCache_=[];this.push=function(L){cb.collectDtsInfo(y,L);"seq_parameter_set_rbsp"!==L.nalUnitType||F||(F=L.config,y.sps=[L.data],ai.forEach(function(aa){y[aa]=F[aa]},this));"pic_parameter_set_rbsp"!==L.nalUnitType||P||(P=L.data,y.pps=[L.data]);D.push(L)};this.flush=function(){var L;var aa=
0;for(var fa,la;D.length&&"access_unit_delimiter_rbsp"!==D[0].nalUnitType;)D.shift();if(0!==D.length){var ca=oc.groupNalsIntoFrames(D);ca=oc.groupFramesIntoGops(ca);ca[0][0].keyFrame||((L=this.getGopForFusion_(D[0],y))?(aa=L.duration,ca.unshift(L),ca.byteLength+=L.byteLength,ca.nalCount+=L.nalCount,ca.pts=L.pts,ca.dts=L.dts,ca.duration+=L.duration):ca=oc.extendFirstKeyFrame(ca));if(N.length){L=J.alignGopsAtEnd?this.alignGopsAtEnd_(ca):this.alignGopsAtStart_(ca);if(!L){this.gopCache_.unshift({gop:ca.pop(),
pps:y.pps,sps:y.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);D=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}cb.clearDtsInfo(y);ca=L}cb.collectDtsInfo(y,ca);y.samples=oc.generateSampleTable(ca);L=ec.mdat(oc.concatenateNalData(ca));y.baseMediaDecodeTime=cb.calculateTrackBaseMediaDecodeTime(y,J.keepOriginalTimestamps);this.trigger("processedGopsInfo",ca.map(function(ma){return{pts:ma.pts,dts:ma.dts,byteLength:ma.byteLength}}));fa=ca[0];la=ca[ca.length-1];this.trigger("segmentTimingInfo",
qm(y.baseMediaDecodeTime,fa.dts,fa.pts,la.dts+la.duration,la.pts+la.duration,aa));this.trigger("timingInfo",{start:ca[0].pts,end:ca[ca.length-1].pts+ca[ca.length-1].duration});this.gopCache_.unshift({gop:ca.pop(),pps:y.pps,sps:y.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);D=[];this.trigger("baseMediaDecodeTime",y.baseMediaDecodeTime);this.trigger("timelineStartInfo",y.timelineStartInfo);aa=ec.moof(K,[y]);ca=new Uint8Array(aa.byteLength+L.byteLength);K++;ca.set(aa);ca.set(L,aa.byteLength);
this.trigger("data",{track:y,boxes:ca})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();D=[];this.gopCache_.length=0;N.length=0;this.trigger("reset")};this.resetStream_=function(){cb.clearDtsInfo(y);P=F=void 0};this.getGopForFusion_=function(L){var aa=Infinity,fa;for(fa=0;fa<this.gopCache_.length;fa++){var la=this.gopCache_[fa];var ca=la.gop;if(y.pps&&pm(y.pps[0],la.pps[0])&&y.sps&&pm(y.sps[0],la.sps[0])&&!(ca.dts<y.timelineStartInfo.dts)&&
(ca=L.dts-ca.dts-ca.duration,-1E4<=ca&&45E3>=ca&&(!ma||aa>ca))){var ma=la;aa=ca}}return ma?ma.gop:null};this.alignGopsAtStart_=function(L){var aa,fa;var la=L.byteLength;var ca=L.nalCount;var ma=L.duration;for(aa=fa=0;aa<N.length&&fa<L.length;){var wa=N[aa];var ta=L[fa];if(wa.pts===ta.pts)break;ta.pts>wa.pts?aa++:(fa++,la-=ta.byteLength,ca-=ta.nalCount,ma-=ta.duration)}if(0===fa)return L;if(fa===L.length)return null;L=L.slice(fa);L.byteLength=la;L.duration=ma;L.nalCount=ca;L.pts=L[0].pts;L.dts=L[0].dts;
return L};this.alignGopsAtEnd_=function(L){var aa;var fa=N.length-1;var la=L.length-1;var ca=null;for(aa=!1;0<=fa&&0<=la;){var ma=N[fa];var wa=L[la];if(ma.pts===wa.pts){aa=!0;break}ma.pts>wa.pts?fa--:(fa===N.length-1&&(ca=la),la--)}if(!aa&&null===ca)return null;fa=aa?la:ca;if(0===fa)return L;L=L.slice(fa);fa=L.reduce(function(ta,Fa){ta.byteLength+=Fa.byteLength;ta.duration+=Fa.duration;ta.nalCount+=Fa.nalCount;return ta},{byteLength:0,duration:0,nalCount:0});L.byteLength=fa.byteLength;L.duration=
fa.duration;L.nalCount=fa.nalCount;L.pts=L[0].pts;L.dts=L[0].dts;return L};this.alignGopsWith=function(L){N=L}};bi.prototype=new p;var Hd=function(y,J){this.numberOfTracks=0;this.metadataStream=J;y=y||{};this.remuxTracks="undefined"!==typeof y.remux?!!y.remux:!0;this.keepOriginalTimestamps="boolean"===typeof y.keepOriginalTimestamps?y.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=
0;Hd.prototype.init.call(this);this.push=function(K){if(K.text)return this.pendingCaptions.push(K);if(K.frames)return this.pendingMetadata.push(K);this.pendingTracks.push(K.track);this.pendingBytes+=K.boxes.byteLength;"video"===K.track.type&&(this.videoTrack=K.track,this.pendingBoxes.push(K.boxes));"audio"===K.track.type&&(this.audioTrack=K.track,this.pendingBoxes.unshift(K.boxes))}};Hd.prototype=new p;Hd.prototype.flush=function(y){var J=0,K={captions:[],captionStreams:{},metadata:[],info:{}},D=
0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==y&&"AudioSegmentStream"!==y||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(D=this.videoTrack.timelineStartInfo.pts,ai.forEach(function(N){K.info[N]=this.videoTrack[N]},this)):this.audioTrack&&(D=this.audioTrack.timelineStartInfo.pts,$h.forEach(function(N){K.info[N]=this.audioTrack[N]},
this));if(this.videoTrack||this.audioTrack){K.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;y=ec.initSegment(this.pendingTracks);K.initSegment=new Uint8Array(y.byteLength);K.initSegment.set(y);K.data=new Uint8Array(this.pendingBytes);for(y=0;y<this.pendingBoxes.length;y++)K.data.set(this.pendingBoxes[y],J),J+=this.pendingBoxes[y].byteLength;for(y=0;y<this.pendingCaptions.length;y++)J=this.pendingCaptions[y],J.startTime=Ea.metadataTsToSeconds(J.startPts,
D,this.keepOriginalTimestamps),J.endTime=Ea.metadataTsToSeconds(J.endPts,D,this.keepOriginalTimestamps),K.captionStreams[J.stream]=!0,K.captions.push(J);for(y=0;y<this.pendingMetadata.length;y++)J=this.pendingMetadata[y],J.cueTime=Ea.metadataTsToSeconds(J.pts,D,this.keepOriginalTimestamps),K.metadata.push(J);K.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",K);for(y=0;y<K.captions.length;y++)J=K.captions[y],this.trigger("caption",J);for(y=0;y<K.metadata.length;y++)J=K.metadata[y],this.trigger("id3Frame",J)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};Hd.prototype.setRemux=function(y){this.remuxTracks=y};var ci=function(y){var J=this,K=!0,D,N;ci.prototype.init.call(this);y=y||{};this.baseMediaDecodeTime=y.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var F=
{};this.transmuxPipeline_=F;F.type="aac";F.metadataStream=new hb.MetadataStream;F.aacStream=new Cf;F.audioTimestampRolloverStream=new hb.TimestampRolloverStream("audio");F.timedMetadataTimestampRolloverStream=new hb.TimestampRolloverStream("timed-metadata");F.adtsStream=new Gd;F.coalesceStream=new Hd(y,F.metadataStream);F.headOfPipeline=F.aacStream;F.aacStream.pipe(F.audioTimestampRolloverStream).pipe(F.adtsStream);F.aacStream.pipe(F.timedMetadataTimestampRolloverStream).pipe(F.metadataStream).pipe(F.coalesceStream);
F.metadataStream.on("timestamp",function(P){F.aacStream.setTimestamp(P.timeStamp)});F.aacStream.on("data",function(P){"timed-metadata"!==P.type&&"audio"!==P.type||F.audioSegmentStream||(N=N||{timelineStartInfo:{baseMediaDecodeTime:J.baseMediaDecodeTime},codec:"adts",type:"audio"},F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new Df(N,y),F.audioSegmentStream.on("timingInfo",J.trigger.bind(J,"audioTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream),J.trigger("trackinfo",
{hasAudio:!!N,hasVideo:!!D}))});F.coalesceStream.on("data",this.trigger.bind(this,"data"));F.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var F={};this.transmuxPipeline_=F;F.type="ts";F.metadataStream=new hb.MetadataStream;F.packetStream=new hb.TransportPacketStream;F.parseStream=new hb.TransportParseStream;F.elementaryStream=new hb.ElementaryStream;F.timestampRolloverStream=new hb.TimestampRolloverStream;F.adtsStream=new Gd;F.h264Stream=new Af;F.captionStream=
new hb.CaptionStream(y);F.coalesceStream=new Hd(y,F.metadataStream);F.headOfPipeline=F.packetStream;F.packetStream.pipe(F.parseStream).pipe(F.elementaryStream).pipe(F.timestampRolloverStream);F.timestampRolloverStream.pipe(F.h264Stream);F.timestampRolloverStream.pipe(F.adtsStream);F.timestampRolloverStream.pipe(F.metadataStream).pipe(F.coalesceStream);F.h264Stream.pipe(F.captionStream).pipe(F.coalesceStream);F.elementaryStream.on("data",function(P){var L;if("metadata"===P.type){for(L=P.tracks.length;L--;)D||
"video"!==P.tracks[L].type?N||"audio"!==P.tracks[L].type||(N=P.tracks[L],N.timelineStartInfo.baseMediaDecodeTime=J.baseMediaDecodeTime):(D=P.tracks[L],D.timelineStartInfo.baseMediaDecodeTime=J.baseMediaDecodeTime);D&&!F.videoSegmentStream&&(F.coalesceStream.numberOfTracks++,F.videoSegmentStream=new bi(D,y),F.videoSegmentStream.on("timelineStartInfo",function(aa){N&&!y.keepOriginalTimestamps&&(N.timelineStartInfo=aa,F.audioSegmentStream.setEarliestDts(aa.dts-J.baseMediaDecodeTime))}),F.videoSegmentStream.on("processedGopsInfo",
J.trigger.bind(J,"gopInfo")),F.videoSegmentStream.on("segmentTimingInfo",J.trigger.bind(J,"videoSegmentTimingInfo")),F.videoSegmentStream.on("baseMediaDecodeTime",function(aa){N&&F.audioSegmentStream.setVideoBaseMediaDecodeTime(aa)}),F.videoSegmentStream.on("timingInfo",J.trigger.bind(J,"videoTimingInfo")),F.h264Stream.pipe(F.videoSegmentStream).pipe(F.coalesceStream));N&&!F.audioSegmentStream&&(F.coalesceStream.numberOfTracks++,F.audioSegmentStream=new Df(N,y),F.audioSegmentStream.on("timingInfo",
J.trigger.bind(J,"audioTimingInfo")),F.audioSegmentStream.on("segmentTimingInfo",J.trigger.bind(J,"audioSegmentTimingInfo")),F.adtsStream.pipe(F.audioSegmentStream).pipe(F.coalesceStream));J.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!D})}});F.coalesceStream.on("data",this.trigger.bind(this,"data"));F.coalesceStream.on("id3Frame",function(P){P.dispatchType=F.metadataStream.dispatchType;J.trigger("id3Frame",P)});F.coalesceStream.on("caption",this.trigger.bind(this,"caption"));F.coalesceStream.on("done",
this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(F){var P=this.transmuxPipeline_;y.keepOriginalTimestamps||(this.baseMediaDecodeTime=F);N&&(N.timelineStartInfo.dts=void 0,N.timelineStartInfo.pts=void 0,cb.clearDtsInfo(N),P.audioTimestampRolloverStream&&P.audioTimestampRolloverStream.discontinuity());D&&(P.videoSegmentStream&&(P.videoSegmentStream.gopCache_=[]),D.timelineStartInfo.dts=void 0,D.timelineStartInfo.pts=void 0,cb.clearDtsInfo(D),P.captionStream.reset());P.timestampRolloverStream&&
P.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(F){N&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(F)};this.setRemux=function(F){var P=this.transmuxPipeline_;y.remux=F;P&&P.coalesceStream&&P.coalesceStream.setRemux(F)};this.alignGopsWith=function(F){D&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(F)};this.push=function(F){if(K){var P=br(F);P&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():
P||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();K=!1}this.transmuxPipeline_.headOfPipeline.push(F)};this.flush=function(){K=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};ci.prototype=
new p;var dr=Ea.ONE_SECOND_IN_TS,di=function D(J,K){var N=[],F=0,P=0,L=0,aa=Infinity,fa=null,la=null;K=K||{};D.prototype.init.call(this);this.push=function(ca){cb.collectDtsInfo(J,ca);J&&$h.forEach(function(ma){J[ma]=ca[ma]});N.push(ca)};this.setEarliestDts=function(ca){P=ca};this.setVideoBaseMediaDecodeTime=function(ca){aa=ca};this.setAudioAppendStart=function(ca){L=ca};this.processFrames_=function(){if(0!==N.length){var ca=Qc.trimAdtsFramesByEarliestDts(N,J,P);if(0!==ca.length){J.baseMediaDecodeTime=
cb.calculateTrackBaseMediaDecodeTime(J,K.keepOriginalTimestamps);Qc.prefixWithSilence(J,ca,L,aa);J.samples=Qc.generateSampleTable(ca);var ma=ec.mdat(Qc.concatenateFrameData(ca));N=[];var wa=ec.moof(F,[J]);F++;J.initSegment=ec.initSegment([J]);var ta=new Uint8Array(wa.byteLength+ma.byteLength);ta.set(wa);ta.set(ma,wa.byteLength);cb.clearDtsInfo(J);null===fa&&(la=fa=ca[0].pts);la+=1024*dr/J.samplerate*ca.length;this.trigger("timingInfo",{start:fa});this.trigger("data",{track:J,boxes:ta})}}};this.flush=
function(){this.processFrames_();this.trigger("timingInfo",{start:fa,end:la});this.resetTiming_();this.trigger("done","AudioSegmentStream")};this.partialFlush=function(){this.processFrames_();this.trigger("partialdone","AudioSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","AudioSegmentStream")};this.resetTiming_=function(){cb.clearDtsInfo(J);la=fa=null};this.reset=function(){this.resetTiming_();N=[];this.trigger("reset")}};di.prototype=new p;var rm=function N(K,
D){var F=0,P=[],L=[],aa,fa,la=null,ca=null,ma,wa=!0;D=D||{};N.prototype.init.call(this);this.push=function(ta){cb.collectDtsInfo(K,ta);"undefined"===typeof K.timelineStartInfo.dts&&(K.timelineStartInfo.dts=ta.dts);"seq_parameter_set_rbsp"!==ta.nalUnitType||aa||(aa=ta.config,K.sps=[ta.data],ai.forEach(function(Fa){K[Fa]=aa[Fa]},this));"pic_parameter_set_rbsp"!==ta.nalUnitType||fa||(fa=ta.data,K.pps=[ta.data]);P.push(ta)};this.processNals_=function(ta){for(P=L.concat(P);P.length&&"access_unit_delimiter_rbsp"!==
P[0].nalUnitType;)P.shift();if(0!==P.length){var Fa=oc.groupNalsIntoFrames(P);if(Fa.length){L=Fa[Fa.length-1];ta&&(Fa.pop(),Fa.duration-=L.duration,Fa.nalCount-=L.length,Fa.byteLength-=L.byteLength);if(Fa.length){this.trigger("timelineStartInfo",K.timelineStartInfo);if(wa){ma=oc.groupFramesIntoGops(Fa);if(!ma[0][0].keyFrame){ma=oc.extendFirstKeyFrame(ma);if(!ma[0][0].keyFrame){P=[].concat.apply([],Fa).concat(L);L=[];return}Fa=[].concat.apply([],ma);Fa.duration=ma.duration}wa=!1}null===la&&(ca=la=
Fa[0].pts);ca+=Fa.duration;this.trigger("timingInfo",{start:la,end:ca});for(ta=0;ta<Fa.length;ta++){var Ka=Fa[ta];K.samples=oc.generateSampleTableForFrame(Ka);var ib=ec.mdat(oc.concatenateNalDataForFrame(Ka));cb.clearDtsInfo(K);cb.collectDtsInfo(K,Ka);K.baseMediaDecodeTime=cb.calculateTrackBaseMediaDecodeTime(K,D.keepOriginalTimestamps);var Vb=ec.moof(F,[K]);F++;K.initSegment=ec.initSegment([K]);var fc=new Uint8Array(Vb.byteLength+ib.byteLength);fc.set(Vb);fc.set(ib,Vb.byteLength);this.trigger("data",
{track:K,boxes:fc,sequence:F,videoFrameDts:Ka.dts,videoFramePts:Ka.pts})}}P=[]}}};this.resetTimingAndConfig_=function(){fa=aa=void 0;ca=la=null};this.partialFlush=function(){this.processNals_(!0);this.trigger("partialdone","VideoSegmentStream")};this.flush=function(){this.processNals_(!1);this.resetTimingAndConfig_();this.trigger("done","VideoSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","VideoSegmentStream")};this.reset=function(){this.resetTimingAndConfig_();
L=[];P=[];wa=!0;this.trigger("reset")}};rm.prototype=new p;var er=Bf.isLikelyAacData,sm=function(K){K.prototype=new p;K.prototype.init.call(K);return K},fr=function(K){var D={type:"ts",tracks:{audio:null,video:null},packet:new hb.TransportPacketStream,parse:new hb.TransportParseStream,elementary:new hb.ElementaryStream,timestampRollover:new hb.TimestampRolloverStream,adts:new Gd,h264:new Af,captionStream:new hb.CaptionStream(K),metadataStream:new hb.MetadataStream};D.headOfPipeline=D.packet;D.packet.pipe(D.parse).pipe(D.elementary).pipe(D.timestampRollover);
D.timestampRollover.pipe(D.h264);D.h264.pipe(D.captionStream);D.timestampRollover.pipe(D.metadataStream);D.timestampRollover.pipe(D.adts);D.elementary.on("data",function(N){if("metadata"===N.type){for(var F=0;F<N.tracks.length;F++)D.tracks[N.tracks[F].type]||(D.tracks[N.tracks[F].type]=N.tracks[F],D.tracks[N.tracks[F].type].timelineStartInfo.baseMediaDecodeTime=K.baseMediaDecodeTime);D.tracks.video&&!D.videoSegmentStream&&(D.videoSegmentStream=new rm(D.tracks.video,K),D.videoSegmentStream.on("timelineStartInfo",
function(P){D.tracks.audio&&!K.keepOriginalTimestamps&&D.audioSegmentStream.setEarliestDts(P.dts-K.baseMediaDecodeTime)}),D.videoSegmentStream.on("timingInfo",D.trigger.bind(D,"videoTimingInfo")),D.videoSegmentStream.on("data",function(P){D.trigger("data",{type:"video",data:P})}),D.videoSegmentStream.on("done",D.trigger.bind(D,"done")),D.videoSegmentStream.on("partialdone",D.trigger.bind(D,"partialdone")),D.videoSegmentStream.on("endedtimeline",D.trigger.bind(D,"endedtimeline")),D.h264.pipe(D.videoSegmentStream));
D.tracks.audio&&!D.audioSegmentStream&&(D.audioSegmentStream=new di(D.tracks.audio,K),D.audioSegmentStream.on("data",function(P){D.trigger("data",{type:"audio",data:P})}),D.audioSegmentStream.on("done",D.trigger.bind(D,"done")),D.audioSegmentStream.on("partialdone",D.trigger.bind(D,"partialdone")),D.audioSegmentStream.on("endedtimeline",D.trigger.bind(D,"endedtimeline")),D.audioSegmentStream.on("timingInfo",D.trigger.bind(D,"audioTimingInfo")),D.adts.pipe(D.audioSegmentStream));D.trigger("trackinfo",
{hasAudio:!!D.tracks.audio,hasVideo:!!D.tracks.video})}});D.captionStream.on("data",function(N){var F=D.tracks.video?D.tracks.video.timelineStartInfo.pts||0:0;N.startTime=Ea.metadataTsToSeconds(N.startPts,F,K.keepOriginalTimestamps);N.endTime=Ea.metadataTsToSeconds(N.endPts,F,K.keepOriginalTimestamps);D.trigger("caption",N)});D=sm(D);D.metadataStream.on("data",D.trigger.bind(D,"id3Frame"));return D},gr=function(K){var D={type:"aac",tracks:{audio:null},metadataStream:new hb.MetadataStream,aacStream:new Cf,
audioRollover:new hb.TimestampRolloverStream("audio"),timedMetadataRollover:new hb.TimestampRolloverStream("timed-metadata"),adtsStream:new Gd(!0)};D.headOfPipeline=D.aacStream;D.aacStream.pipe(D.audioRollover).pipe(D.adtsStream);D.aacStream.pipe(D.timedMetadataRollover).pipe(D.metadataStream);D.metadataStream.on("timestamp",function(N){D.aacStream.setTimestamp(N.timeStamp)});D.aacStream.on("data",function(N){"timed-metadata"!==N.type&&"audio"!==N.type||D.audioSegmentStream||(D.tracks.audio=D.tracks.audio||
{timelineStartInfo:{baseMediaDecodeTime:K.baseMediaDecodeTime},codec:"adts",type:"audio"},D.audioSegmentStream=new di(D.tracks.audio,K),D.audioSegmentStream.on("data",function(F){D.trigger("data",{type:"audio",data:F})}),D.audioSegmentStream.on("partialdone",D.trigger.bind(D,"partialdone")),D.audioSegmentStream.on("done",D.trigger.bind(D,"done")),D.audioSegmentStream.on("endedtimeline",D.trigger.bind(D,"endedtimeline")),D.audioSegmentStream.on("timingInfo",D.trigger.bind(D,"audioTimingInfo")),D.adtsStream.pipe(D.audioSegmentStream),
D.trigger("trackinfo",{hasAudio:!!D.tracks.audio,hasVideo:!!D.tracks.video}))});D=sm(D);D.metadataStream.on("data",D.trigger.bind(D,"id3Frame"));return D},tm=function(K,D){K.on("data",D.trigger.bind(D,"data"));K.on("done",D.trigger.bind(D,"done"));K.on("partialdone",D.trigger.bind(D,"partialdone"));K.on("endedtimeline",D.trigger.bind(D,"endedtimeline"));K.on("audioTimingInfo",D.trigger.bind(D,"audioTimingInfo"));K.on("videoTimingInfo",D.trigger.bind(D,"videoTimingInfo"));K.on("trackinfo",D.trigger.bind(D,
"trackinfo"));K.on("id3Frame",function(N){N.dispatchType=K.metadataStream.dispatchType;N.cueTime=Ea.videoTsToSeconds(N.pts);D.trigger("id3Frame",N)});K.on("caption",function(N){D.trigger("caption",N)})},um=function N(D){var F=null,P=!0;D=D||{};N.prototype.init.call(this);D.baseMediaDecodeTime=D.baseMediaDecodeTime||0;this.push=function(L){if(P){var aa=er(L);!aa||F&&"aac"===F.type?aa||F&&"ts"===F.type||(F=fr(D),tm(F,this)):(F=gr(D),tm(F,this));P=!1}F.headOfPipeline.push(L)};this.flush=function(){F&&
(P=!0,F.headOfPipeline.flush())};this.partialFlush=function(){F&&F.headOfPipeline.partialFlush()};this.endTimeline=function(){F&&F.headOfPipeline.endTimeline()};this.reset=function(){F&&F.headOfPipeline.reset()};this.setBaseMediaDecodeTime=function(L){D.keepOriginalTimestamps||(D.baseMediaDecodeTime=L);F&&(F.tracks.audio&&(F.tracks.audio.timelineStartInfo.dts=void 0,F.tracks.audio.timelineStartInfo.pts=void 0,cb.clearDtsInfo(F.tracks.audio),F.audioRollover&&F.audioRollover.discontinuity()),F.tracks.video&&
(F.videoSegmentStream&&(F.videoSegmentStream.gopCache_=[]),F.tracks.video.timelineStartInfo.dts=void 0,F.tracks.video.timelineStartInfo.pts=void 0,cb.clearDtsInfo(F.tracks.video)),F.timestampRollover&&F.timestampRollover.discontinuity())};this.setRemux=function(L){D.remux=L;F&&F.coalesceStream&&F.coalesceStream.setRemux(L)};this.setAudioAppendStart=function(L){F&&F.tracks.audio&&F.audioSegmentStream&&F.audioSegmentStream.setAudioAppendStart(L)};this.alignGopsWith=function(L){}};um.prototype=new p;
var re=function P(N,F){var L=[],aa;if(!F.length)return null;for(aa=0;aa<N.byteLength;){var fa=(N[aa]<<24|N[aa+1]<<16|N[aa+2]<<8|N[aa+3])>>>0;var la=N.subarray(aa+4,aa+8);var ca=""+String.fromCharCode(la[0]);ca+=String.fromCharCode(la[1]);ca+=String.fromCharCode(la[2]);ca+=String.fromCharCode(la[3]);fa=1<fa?aa+fa:N.byteLength;ca===F[0]&&(1===F.length?L.push(N.subarray(aa+8,fa)):(aa=P(N.subarray(aa+8,fa),F.slice(1)),aa.length&&(L=L.concat(aa))));aa=fa}return L},vm=function(N){return{isLeading:(N[0]&
12)>>>2,dependsOn:N[0]&3,isDependedOn:(N[1]&192)>>>6,hasRedundancy:(N[1]&48)>>>4,paddingValue:(N[1]&14)>>>1,isNonSyncSample:N[1]&1,degradationPriority:N[2]<<8|N[3]}},hr=function(N){var F={version:N[0],flags:new Uint8Array(N.subarray(1,4)),samples:[]},P=new DataView(N.buffer,N.byteOffset,N.byteLength),L=F.flags[2]&1,aa=F.flags[2]&4,fa=F.flags[1]&1,la=F.flags[1]&2,ca=F.flags[1]&4,ma=F.flags[1]&8,wa=P.getUint32(4),ta=8;L&&(F.dataOffset=P.getInt32(ta),ta+=4);aa&&wa&&(L={flags:vm(N.subarray(ta,ta+4))},
ta+=4,fa&&(L.duration=P.getUint32(ta),ta+=4),la&&(L.size=P.getUint32(ta),ta+=4),ma&&(L.compositionTimeOffset=1===F.version?P.getInt32(ta):P.getUint32(ta),ta+=4),F.samples.push(L),wa--);for(;wa--;)L={},fa&&(L.duration=P.getUint32(ta),ta+=4),la&&(L.size=P.getUint32(ta),ta+=4),ca&&(L.flags=vm(N.subarray(ta,ta+4)),ta+=4),ma&&(L.compositionTimeOffset=1===F.version?P.getInt32(ta):P.getUint32(ta),ta+=4),F.samples.push(L);return F},ir=pe.discardEmulationPreventionBytes,jr=function(N,F,P){var L=F,aa=P.defaultSampleDuration||
0,fa=P.defaultSampleSize||0,la=P.trackId,ca=[];N.forEach(function(ma){ma=hr(ma).samples;ma.forEach(function(wa){void 0===wa.duration&&(wa.duration=aa);void 0===wa.size&&(wa.size=fa);wa.trackId=la;wa.dts=L;void 0===wa.compositionTimeOffset&&(wa.compositionTimeOffset=0);wa.pts=L+wa.compositionTimeOffset;L+=wa.duration});ca=ca.concat(ma)});return ca},kr=function(N,F){var P=re(N,["moof","traf"]),L={},aa=[];re(N,["mdat"]).forEach(function(fa,la){aa.push({mdat:fa,traf:P[la]})});aa.forEach(function(fa){var la=
fa.mdat,ca=fa.traf,ma=re(ca,["tfhd"])[0];fa=new DataView(ma.buffer,ma.byteOffset,ma.byteLength);ma={version:ma[0],flags:new Uint8Array(ma.subarray(1,4)),trackId:fa.getUint32(4)};var wa=ma.flags[2]&1,ta=ma.flags[2]&2,Fa=ma.flags[2]&8,Ka=ma.flags[2]&16,ib=ma.flags[2]&32,Vb=ma.flags[0]&65536,fc=ma.flags[0]&131072;var Oa=8;wa&&(Oa+=4,ma.baseDataOffset=fa.getUint32(12),Oa+=4);ta&&(ma.sampleDescriptionIndex=fa.getUint32(Oa),Oa+=4);Fa&&(ma.defaultSampleDuration=fa.getUint32(Oa),Oa+=4);Ka&&(ma.defaultSampleSize=
fa.getUint32(Oa),Oa+=4);ib&&(ma.defaultSampleFlags=fa.getUint32(Oa));Vb&&(ma.durationIsEmpty=!0);!wa&&fc&&(ma.baseDataOffsetIsMoof=!0);fa=ma.trackId;wa=re(ca,["tfdt"]);0<wa.length?(wa=wa[0],ta=wa[0],new Uint8Array(wa.subarray(1,4)),Fa=(wa[4]<<24|wa[5]<<16|wa[6]<<8|wa[7])>>>0,1===ta&&(Fa*=Math.pow(2,32),Fa+=(wa[8]<<24|wa[9]<<16|wa[10]<<8|wa[11])>>>0),wa=Fa):wa=0;ca=re(ca,["trun"]);if(F===fa&&0<ca.length){ca=jr(ca,wa,ma);ma=new DataView(la.buffer,la.byteOffset,la.byteLength);wa=[];for(ta=0;ta+4<la.length;ta+=
Fa)if(Fa=ma.getUint32(ta),ta+=4,!(0>=Fa))switch(la[ta]&31){case 6:Ka=la.subarray(ta+1,ta+1+Fa);a:{ib=ta;for(Vb=0;Vb<ca.length;Vb++){fc=ca[Vb];if(ib<fc.size){ib=fc;break a}ib-=fc.size}ib=null}Ka={nalUnitType:"sei_rbsp",size:Fa,data:Ka,escapedRBSP:ir(Ka),trackId:fa};if(ib){Ka.pts=ib.pts;Ka.dts=ib.dts;var ei=ib}else if(ei)Ka.pts=ei.pts,Ka.dts=ei.dts;else{console.log("We've encountered a nal unit without data. See mux.js#233.");break}wa.push(Ka)}L[fa]||(L[fa]=[]);L[fa]=L[fa].concat(wa)}});return L},lr=
function(){var N=!1,F,P,L,aa,fa,la;this.isInitialized=function(){return N};this.init=function(ca){F=new Jb;N=!0;la=ca?ca.isPartial:!1;F.on("data",function(ma){ma.startTime=ma.startPts/aa;ma.endTime=ma.endPts/aa;fa.captions.push(ma);fa.captionStreams[ma.stream]=!0})};this.isNewInit=function(ca,ma){return ca&&0===ca.length||ma&&"object"===typeof ma&&0===Object.keys(ma).length?!1:L!==ca[0]||aa!==ma[L]};this.parse=function(ca,ma,wa){if(this.isInitialized()){if(!ma||!wa)return null;if(this.isNewInit(ma,
wa))L=ma[0],aa=wa[L];else if(null===L||!aa)return P.push(ca),null}else return null;for(;0<P.length;){var ta=P.shift();this.parse(ta,ma,wa)}ma=L;wa=aa;ca=null===ma?null:{seiNals:kr(ca,ma)[ma],timescale:wa};if(null===ca||!ca.seiNals)return null;this.pushNals(ca.seiNals);this.flushStream();return fa};this.pushNals=function(ca){if(!this.isInitialized()||!ca||0===ca.length)return null;ca.forEach(function(ma){F.push(ma)})};this.flushStream=function(){if(!this.isInitialized())return null;la?F.partialFlush():
F.flush()};this.clearParsedCaptions=function(){fa.captions=[];fa.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;F.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){P=[];aa=L=null;fa?this.clearParsedCaptions():fa={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},fi=function(N){return"AudioSegmentStream"===N?"audio":"VideoSegmentStream"===N?"video":""},mr=function(N,
F){F.on("data",function(P){var L=P.initSegment;P.initSegment={data:L.buffer,byteOffset:L.byteOffset,byteLength:L.byteLength};L=P.data;P.data=L.buffer;N.postMessage({action:"data",segment:P,byteOffset:L.byteOffset,byteLength:L.byteLength},[P.data])});F.on("done",function(P){N.postMessage({action:"done"})});F.on("gopInfo",function(P){N.postMessage({action:"gopInfo",gopInfo:P})});F.on("videoSegmentTimingInfo",function(P){var L={start:{decode:Ea.videoTsToSeconds(P.start.dts),presentation:Ea.videoTsToSeconds(P.start.pts)},
end:{decode:Ea.videoTsToSeconds(P.end.dts),presentation:Ea.videoTsToSeconds(P.end.pts)},baseMediaDecodeTime:Ea.videoTsToSeconds(P.baseMediaDecodeTime)};P.prependedContentDuration&&(L.prependedContentDuration=Ea.videoTsToSeconds(P.prependedContentDuration));N.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:L})});F.on("audioSegmentTimingInfo",function(P){var L={start:{decode:Ea.videoTsToSeconds(P.start.dts),presentation:Ea.videoTsToSeconds(P.start.pts)},end:{decode:Ea.videoTsToSeconds(P.end.dts),
presentation:Ea.videoTsToSeconds(P.end.pts)},baseMediaDecodeTime:Ea.videoTsToSeconds(P.baseMediaDecodeTime)};P.prependedContentDuration&&(L.prependedContentDuration=Ea.videoTsToSeconds(P.prependedContentDuration));N.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:L})});F.on("id3Frame",function(P){N.postMessage({action:"id3Frame",id3Frame:P})});F.on("caption",function(P){N.postMessage({action:"caption",caption:P})});F.on("trackinfo",function(P){N.postMessage({action:"trackinfo",
trackInfo:P})});F.on("audioTimingInfo",function(P){N.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ea.videoTsToSeconds(P.start),end:Ea.videoTsToSeconds(P.end)}})});F.on("videoTimingInfo",function(P){N.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ea.videoTsToSeconds(P.start),end:Ea.videoTsToSeconds(P.end)}})})},nr=function(N,F){F.on("data",function(P){var L={boxes:{data:P.data.boxes.buffer,byteOffset:P.data.boxes.byteOffset,byteLength:P.data.boxes.byteLength},initSegment:{data:P.data.track.initSegment.buffer,
byteOffset:P.data.track.initSegment.byteOffset,byteLength:P.data.track.initSegment.byteLength},type:P.type,sequence:P.data.sequence};"undefined"!==typeof P.data.videoFrameDts&&(L.videoFrameDtsTime=Ea.videoTsToSeconds(P.data.videoFrameDts));"undefined"!==typeof P.data.videoFramePts&&(L.videoFramePtsTime=Ea.videoTsToSeconds(P.data.videoFramePts));N.postMessage({action:"data",segment:L},[L.boxes.data,L.initSegment.data])});F.on("id3Frame",function(P){N.postMessage({action:"id3Frame",id3Frame:P})});F.on("caption",
function(P){N.postMessage({action:"caption",caption:P})});F.on("done",function(P){N.postMessage({action:"done",type:fi(P)})});F.on("partialdone",function(P){N.postMessage({action:"partialdone",type:fi(P)})});F.on("endedsegment",function(P){N.postMessage({action:"endedSegment",type:fi(P)})});F.on("trackinfo",function(P){N.postMessage({action:"trackinfo",trackInfo:P})});F.on("audioTimingInfo",function(P){if(null===P.start)N.postMessage({action:"audioTimingInfo",audioTimingInfo:P});else{var L={start:Ea.videoTsToSeconds(P.start)};
P.end&&(L.end=Ea.videoTsToSeconds(P.end));N.postMessage({action:"audioTimingInfo",audioTimingInfo:L})}});F.on("videoTimingInfo",function(P){var L={start:Ea.videoTsToSeconds(P.start)};P.end&&(L.end=Ea.videoTsToSeconds(P.end));N.postMessage({action:"videoTimingInfo",videoTimingInfo:L})})},wm=function(){function N(P,L){this.options=L||{};this.self=P;this.init()}var F=N.prototype;F.init=function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=this.options.handlePartialData?new um(this.options):
new ci(this.options);this.options.handlePartialData?nr(this.self,this.transmuxer):mr(this.self,this.transmuxer)};F.pushMp4Captions=function(P){this.captionParser||(this.captionParser=new lr,this.captionParser.init());var L=new Uint8Array(P.data,P.byteOffset,P.byteLength);P=this.captionParser.parse(L,P.trackIds,P.timescales);this.self.postMessage({action:"mp4Captions",captions:P&&P.captions||[],data:L.buffer},[L.buffer])};F.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()};
F.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()};F.push=function(P){P=new Uint8Array(P.data,P.byteOffset,P.byteLength);this.transmuxer.push(P)};F.reset=function(){this.transmuxer.reset()};F.setTimestampOffset=function(P){this.transmuxer.setBaseMediaDecodeTime(Math.round(Ea.secondsToVideoTs(P.timestampOffset||0)))};F.setAudioAppendStart=function(P){this.transmuxer.setAudioAppendStart(Math.ceil(Ea.secondsToVideoTs(P.appendStart)))};F.setRemux=function(P){this.transmuxer.setRemux(P.remux)};
F.flush=function(P){this.transmuxer.flush();self.postMessage({action:"done",type:"transmuxed"})};F.partialFlush=function(P){this.transmuxer.partialFlush();self.postMessage({action:"partialdone",type:"transmuxed"})};F.endTimeline=function(){this.transmuxer.endTimeline();self.postMessage({action:"endedtimeline",type:"transmuxed"})};F.alignGopsWith=function(P){this.transmuxer.alignGopsWith(P.gopsToAlignWith.slice())};return N}();self.onmessage=function(N){if("init"===N.data.action&&N.data.options)this.messageHandlers=
new wm(self,N.data.options);else if(this.messageHandlers||(this.messageHandlers=new wm(self)),N.data&&N.data.action&&"init"!==N.data.action&&this.messageHandlers[N.data.action])this.messageHandlers[N.data.action](N.data)}})),pr=cm(or),ym=function(p){var m=p.transmuxer,l=p.bytes,f=p.audioAppendStart,g=p.gopsToAlignWith,k=p.isPartial,u=p.remux,x=p.onData,A=p.onTrackInfo,H=p.onAudioTimingInfo,R=p.onVideoTimingInfo,W=p.onVideoSegmentTimingInfo,M=p.onAudioSegmentTimingInfo,T=p.onId3,Q=p.onCaptions,na=
p.onDone,oa=p.onEndedTimeline,za=p.isEndOfTimeline,ea={isPartial:k,buffer:[]},ka=za;m.onmessage=function(sa){if(m.currentTransmux===p){if("data"===sa.data.action){var Ja=sa.data.segment,Va=Ja.type,rb=Ja.initSegment,bb=Ja.videoFrameDtsTime,ob=Ja.videoFramePtsTime;ea.buffer.push({captions:Ja.captions,captionStreams:Ja.captionStreams,metadata:Ja.metadata});Ja=sa.data.segment.boxes||{data:sa.data.segment.data};Va={type:Va,data:new Uint8Array(Ja.data,Ja.data.byteOffset,Ja.data.byteLength),initSegment:new Uint8Array(rb.data,
rb.byteOffset,rb.byteLength)};"undefined"!==typeof bb&&(Va.videoFrameDtsTime=bb);"undefined"!==typeof ob&&(Va.videoFramePtsTime=ob);x(Va)}"trackinfo"===sa.data.action&&A(sa.data.trackInfo);"gopInfo"===sa.data.action&&(ea.gopInfo=sa.data.gopInfo);"audioTimingInfo"===sa.data.action&&H(sa.data.audioTimingInfo);"videoTimingInfo"===sa.data.action&&R(sa.data.videoTimingInfo);"videoSegmentTimingInfo"===sa.data.action&&W(sa.data.videoSegmentTimingInfo);"audioSegmentTimingInfo"===sa.data.action&&M(sa.data.audioSegmentTimingInfo);
"id3Frame"===sa.data.action&&T([sa.data.id3Frame],sa.data.id3Frame.dispatchType);"caption"===sa.data.action&&Q(sa.data.caption);"endedtimeline"===sa.data.action&&(ka=!1,oa());"transmuxed"!==sa.data.type||ka||(m.onmessage=null,ea.buffer=[],na(ea),xm(m))}};f&&m.postMessage({action:"setAudioAppendStart",appendStart:f});Array.isArray(g)&&m.postMessage({action:"alignGopsWith",gopsToAlignWith:g});"undefined"!==typeof u&&m.postMessage({action:"setRemux",remux:u});l.byteLength&&(f=l instanceof ArrayBuffer?
l:l.buffer,m.postMessage({action:"push",data:f,byteOffset:l instanceof ArrayBuffer?0:l.byteOffset,byteLength:l.byteLength},[f]));m.postMessage({action:k?"partialFlush":"flush"});za&&m.postMessage({action:"endTimeline"})},xm=function(p){p.currentTransmux=null;p.transmuxQueue.length&&(p.currentTransmux=p.transmuxQueue.shift(),"function"===typeof p.currentTransmux?p.currentTransmux():ym(p.currentTransmux))},zm=function(p,m){p.postMessage({action:m});xm(p)},Am=function(p,m){m.currentTransmux?m.transmuxQueue.push(zm.bind(null,
m,p)):(m.currentTransmux=p,zm(m,p))},Bm=function(p){p.transmuxer.currentTransmux?p.transmuxer.transmuxQueue.push(p):(p.transmuxer.currentTransmux=p,ym(p))},gi={reset:function(p){Am("reset",p)},endTimeline:function(p){Am("endTimeline",p)},transmux:Bm,createTransmuxer:function(p){var m=new pr;m.currentTransmux=null;m.transmuxQueue=[];var l=m.terminate;m.terminate=function(){m.currentTransmux=null;m.transmuxQueue.length=0;return l.call(m)};m.postMessage({action:"init",options:p});return m}},qr=function(p,
m){m="number"!==typeof m||isNaN(m)?void 0:9E4*m;p=jq.inspect(p,m);if(!p)return null;m={hasVideo:p.video&&2===p.video.length||!1,hasAudio:p.audio&&2===p.audio.length||!1};m.hasVideo&&(m.videoStart=p.video[0].ptsTime);m.hasAudio&&(m.audioStart=p.audio[0].ptsTime);return m},rr=function(p){var m=0;if(p.bytes){var l=new Uint8Array(p.bytes);p.segments.forEach(function(f){l.set(f,m);m+=f.byteLength})}return l},Cm=function(p){p.forEach(function(m){m.abort()})},hi=function(p,m){return m.timedout?{status:m.status,
message:"HLS request timed-out at URL: "+m.uri,code:-101,xhr:m}:m.aborted?{status:m.status,message:"HLS request aborted at URL: "+m.uri,code:-102,xhr:m}:p?{status:m.status,message:"HLS request errored at URL: "+m.uri,code:2,xhr:m}:null},sr=function(p,m){return function(l,f){var g=f.response;if(l=hi(l,f))return m(l,p);if(16!==g.byteLength)return m({status:f.status,message:"Invalid HLS key at URL: "+f.uri,code:2,xhr:f},p);f=new DataView(g);p.key.bytes=new Uint32Array([f.getUint32(0),f.getUint32(4),
f.getUint32(8),f.getUint32(12)]);return m(null,p)}},tr=function(p){var m=p.segment,l=p.finishProcessingFn;return function(f,g){var k=g.response;if(f=hi(f,g))return l(f,m);if(0===k.byteLength)return l({status:g.status,message:"Empty HLS segment content at URL: "+g.uri,code:2,xhr:g},m);m.map.bytes=new Uint8Array(g.response);k=Eh(m.map.bytes);if("mp4"!==k)return l({status:g.status,message:"Found unsupported "+(k||"unknown")+" container for initialization segment at URL: "+g.uri,code:2,internal:!0,xhr:g},
m);Bl.tracks(m.map.bytes).forEach(function(u){m.map.tracks=m.map.tracks||{};m.map.tracks[u.type]||(m.map.tracks[u.type]=u,"number"===typeof u.id&&u.timescale&&(m.map.timescales=m.map.timescales||{},m.map.timescales[u.id]=u.timescale))});return l(null,m)}},ur=function(p){var m=p.segment,l=p.finishProcessingFn,f=p.responseType;return function(g,k){var u=k.response;if(g=hi(g,k))return l(g,m);g="arraybuffer"!==f&&k.responseText?am(k.responseText.substring(m.lastReachedChar||0)):k.response;if(0===u.byteLength)return l({status:k.status,
message:"Empty HLS segment content at URL: "+k.uri,code:2,xhr:k},m);m.stats={bandwidth:k.bandwidth,bytesReceived:k.bytesReceived||0,roundTripTime:k.roundTripTime||0};m.key?m.encryptedBytes=new Uint8Array(g):m.bytes=new Uint8Array(g);return l(null,m)}},vr=function(p){var m=p.segment,l=p.bytes,f=p.isPartial,g=p.trackInfoFn,k=p.timingInfoFn,u=p.videoSegmentTimingInfoFn,x=p.audioSegmentTimingInfoFn,A=p.id3Fn,H=p.captionsFn,R=p.isEndOfTimeline,W=p.endedTimelineFn,M=p.dataFn,T=p.doneFn;p=m.map&&m.map.tracks||
{};var Q=!(!p.audio||!p.video),na=k.bind(null,m,"audio","start"),oa=k.bind(null,m,"audio","end"),za=k.bind(null,m,"video","start"),ea=k.bind(null,m,"video","end");f||m.lastReachedChar||!(k=qr(l,m.baseStartTime))||(g(m,{hasAudio:k.hasAudio,hasVideo:k.hasVideo,isMuxed:Q}),g=null,k.hasAudio&&!Q&&na(k.audioStart),k.hasVideo&&za(k.videoStart),za=na=null);Bm({bytes:l,transmuxer:m.transmuxer,audioAppendStart:m.audioAppendStart,gopsToAlignWith:m.gopsToAlignWith,isPartial:f,remux:Q,onData:function(ka){ka.type=
"combined"===ka.type?"video":ka.type;M(m,ka)},onTrackInfo:function(ka){g&&(Q&&(ka.isMuxed=!0),g(m,ka))},onAudioTimingInfo:function(ka){na&&"undefined"!==typeof ka.start&&(na(ka.start),na=null);oa&&"undefined"!==typeof ka.end&&oa(ka.end)},onVideoTimingInfo:function(ka){za&&"undefined"!==typeof ka.start&&(za(ka.start),za=null);ea&&"undefined"!==typeof ka.end&&ea(ka.end)},onVideoSegmentTimingInfo:function(ka){u(ka)},onAudioSegmentTimingInfo:function(ka){x(ka)},onId3:function(ka,sa){A(m,ka,sa)},onCaptions:function(ka){H(m,
[ka])},isEndOfTimeline:R&&!f,onEndedTimeline:function(){W()},onDone:function(ka){T&&!f&&(ka.type="combined"===ka.type?"video":ka.type,T(null,m,ka))}})},ii=function(p){var m=p.segment,l=p.bytes,f=p.isPartial,g=p.trackInfoFn,k=p.timingInfoFn,u=p.videoSegmentTimingInfoFn,x=p.audioSegmentTimingInfoFn,A=p.id3Fn,H=p.captionsFn,R=p.isEndOfTimeline,W=p.endedTimelineFn,M=p.dataFn,T=p.doneFn;p=new Uint8Array(l);if(0<pl(p,["moof"]).length){m.isFmp4=!0;f=m.map.tracks;var Q={isFmp4:!0,hasVideo:!!f.video,hasAudio:!!f.audio};
f.audio&&f.audio.codec&&"enca"!==f.audio.codec&&(Q.audioCodec=f.audio.codec);f.video&&f.video.codec&&"encv"!==f.video.codec&&(Q.videoCodec=f.video.codec);f.video&&f.audio&&(Q.isMuxed=!0);g(m,Q);g=Bl.startTime(m.map.timescales,p);Q.hasAudio&&!Q.isMuxed&&k(m,"audio","start",g);Q.hasVideo&&k(m,"video","start",g);var na=function(oa){M(m,{data:l,type:Q.hasAudio&&!Q.isMuxed?"audio":"video"});oa&&oa.length&&H(m,oa);T(null,m,{})};f.video&&l.byteLength&&m.transmuxer?(k=l instanceof ArrayBuffer?l:l.buffer,
g=l instanceof ArrayBuffer?0:l.byteOffset,m.transmuxer.addEventListener("message",function ea(za){if("mp4Captions"===za.data.action){m.transmuxer.removeEventListener("message",ea);var ka=za.data.data;m.bytes=l=new Uint8Array(ka,ka.byteOffset||0,ka.byteLength);na(za.data.captions)}}),m.transmuxer.postMessage({action:"pushMp4Captions",timescales:m.map.timescales,trackIds:[f.video.id],data:k,byteOffset:g,byteLength:l.byteLength},[k])):na()}else m.transmuxer?("undefined"===typeof m.container&&(m.container=
Eh(p)),"ts"!==m.container&&"aac"!==m.container?(g(m,{hasAudio:!1,hasVideo:!1}),T(null,m,{})):vr({segment:m,bytes:l,isPartial:f,trackInfoFn:g,timingInfoFn:k,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:x,id3Fn:A,captionsFn:H,isEndOfTimeline:R,endedTimelineFn:W,dataFn:M,doneFn:T})):T(null,m,{})},wr=function(p){var m=p.decryptionWorker,l=p.segment,f=p.trackInfoFn,g=p.timingInfoFn,k=p.videoSegmentTimingInfoFn,u=p.audioSegmentTimingInfoFn,x=p.id3Fn,A=p.captionsFn,H=p.isEndOfTimeline,R=p.endedTimelineFn,
W=p.dataFn,M=p.doneFn;m.addEventListener("message",function na(Q){Q.data.source===l.requestId&&(m.removeEventListener("message",na),Q=Q.data.decrypted,l.bytes=new Uint8Array(Q.bytes,Q.byteOffset,Q.byteLength),ii({segment:l,bytes:l.bytes,isPartial:!1,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:x,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:R,dataFn:W,doneFn:M}))});p=l.key.bytes.slice?l.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(l.key.bytes));
m.postMessage(Vl({source:l.requestId,encrypted:l.encryptedBytes,key:p,iv:l.key.iv}),[l.encryptedBytes.buffer,p.buffer])},xr=function(p){var m=p.activeXhrs,l=p.decryptionWorker,f=p.trackInfoFn,g=p.timingInfoFn,k=p.videoSegmentTimingInfoFn,u=p.audioSegmentTimingInfoFn,x=p.id3Fn,A=p.captionsFn,H=p.isEndOfTimeline,R=p.endedTimelineFn,W=p.dataFn,M=p.doneFn,T=0,Q=!1;return function(na,oa){if(!Q){if(na)return Q=!0,Cm(m),M(na,oa);T+=1;if(T===m.length){oa.endOfAllRequests=Date.now();if(oa.encryptedBytes)return wr({decryptionWorker:l,
segment:oa,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:x,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:R,dataFn:W,doneFn:M});ii({segment:oa,bytes:oa.bytes,isPartial:!1,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:x,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:R,dataFn:W,doneFn:M})}}}},yr=function(p){var m=p.loadendState,l=p.abortFn;return function(f){f.target.aborted&&l&&!m.calledAbortFn&&(l(),m.calledAbortFn=
!0)}},zr=function(p){var m=p.segment,l=p.progressFn,f=p.trackInfoFn,g=p.timingInfoFn,k=p.videoSegmentTimingInfoFn,u=p.audioSegmentTimingInfoFn,x=p.id3Fn,A=p.captionsFn,H=p.isEndOfTimeline,R=p.endedTimelineFn,W=p.dataFn,M=p.handlePartialData;return function(T){var Q=T.target;if(!Q.aborted){if(M&&!m.key&&Q.responseText&&8<=Q.responseText.length){var na=am(Q.responseText.substring(m.lastReachedChar||0));!m.lastReachedChar&&0<pl(new Uint8Array(na),["moof"]).length||(m.lastReachedChar=Q.responseText.length,
ii({segment:m,bytes:na,isPartial:!0,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:x,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:R,dataFn:W}))}Q=V.mergeOptions;na=m.stats;var oa=T.target;oa=Date.now()-oa.requestTime;oa={bandwidth:Infinity,bytesReceived:0,roundTripTime:oa||0};oa.bytesReceived=T.loaded;oa.bandwidth=Math.floor(oa.bytesReceived/oa.roundTripTime*8E3);m.stats=Q.call(V,na,oa);!m.stats.firstBytesReceivedAt&&m.stats.bytesReceived&&(m.stats.firstBytesReceivedAt=
Date.now());return l(T,m)}}},Ar=function(p){var m=p.xhr,l=p.xhrOptions,f=p.segment,g=p.abortFn,k=p.progressFn,u=p.trackInfoFn,x=p.timingInfoFn,A=p.videoSegmentTimingInfoFn,H=p.audioSegmentTimingInfoFn,R=p.id3Fn,W=p.captionsFn,M=p.isEndOfTimeline,T=p.endedTimelineFn,Q=p.dataFn,na=p.handlePartialData,oa=[];p=xr({activeXhrs:oa,decryptionWorker:p.decryptionWorker,trackInfoFn:u,timingInfoFn:x,videoSegmentTimingInfoFn:A,audioSegmentTimingInfoFn:H,id3Fn:R,captionsFn:W,isEndOfTimeline:M,endedTimelineFn:T,
dataFn:Q,doneFn:p.doneFn});if(f.key&&!f.key.bytes){var za=V.mergeOptions(l,{uri:f.key.resolvedUri,responseType:"arraybuffer"}),ea=sr(f,p);za=m(za,ea);oa.push(za)}f.map&&!f.map.bytes&&(za=V.mergeOptions(l,{uri:f.map.resolvedUri,responseType:"arraybuffer",headers:Oh(f.map)}),ea=tr({segment:f,finishProcessingFn:p}),za=m(za,ea),oa.push(za));l=V.mergeOptions(l,{uri:f.resolvedUri,responseType:"arraybuffer",headers:Oh(f)});na&&(l.responseType="text",l.beforeSend=function(sa){sa.overrideMimeType("text/plain; charset=x-user-defined")});
p=ur({segment:f,finishProcessingFn:p,responseType:l.responseType});m=m(l,p);m.addEventListener("progress",zr({segment:f,progressFn:k,trackInfoFn:u,timingInfoFn:x,videoSegmentTimingInfoFn:A,audioSegmentTimingInfoFn:H,id3Fn:R,captionsFn:W,isEndOfTimeline:M,endedTimelineFn:T,dataFn:Q,handlePartialData:na}));oa.push(m);var ka={};oa.forEach(function(sa){sa.addEventListener("loadend",yr({loadendState:ka,abortFn:g}))});return function(){return Cm(oa)}},Br=lc("CodecUtils"),Dm=function(p,m){m=m.attributes||
{};return p&&p.mediaGroups&&p.mediaGroups.AUDIO&&m.AUDIO&&p.mediaGroups.AUDIO[m.AUDIO]},ji=function(p){var m={};p.forEach(function(l){var f=l.mediaType,g=l.type;l=l.details;m[f]=m[f]||[];m[f].push(Dl(""+g+l))});Object.keys(m).forEach(function(l){1<m[l].length?(Br("multiple "+l+" codecs found as attributes: "+m[l].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),m[l]=null):m[l]=m[l][0]});return m},Em=function(p){var m=0;p.audio&&m++;p.video&&
m++;return m},se=function(p,m){var l=m.attributes||{};var f=m.attributes||{};f=f.CODECS?Ac(f.CODECS):void 0;f=ji(f||[]);if(Dm(p,m)&&!f.audio){a:if(Dm(p,m)){m=p.mediaGroups.AUDIO[(m.attributes||{}).AUDIO];for(g in m)if(!m[g].uri&&!m[g].playlists){var g=!0;break a}g=!1}else g=!0;g||(p=ji(lq(p,l.AUDIO)||[]),p.audio&&(f.audio=p.audio))}return f},Ef=lc("PlaylistSelector"),Fm=function(p){if(p&&p.playlist){var m=p.playlist;return JSON.stringify({id:m.id,bandwidth:p.bandwidth,width:p.width,height:p.height,
codecs:m.attributes&&m.attributes.CODECS||""})}},Ff=function(p,m){return p?(p=ra.getComputedStyle(p))?p[m]:"":""},te=function(p,m){var l=p.slice();p.sort(function(f,g){var k=m(f,g);return 0===k?l.indexOf(f)-l.indexOf(g):k})},ki=function(p,m){if(p.attributes.BANDWIDTH)var l=p.attributes.BANDWIDTH;l=l||ra.Number.MAX_VALUE;if(m.attributes.BANDWIDTH)var f=m.attributes.BANDWIDTH;f=f||ra.Number.MAX_VALUE;return l-f},Gm=function(p,m,l,f,g){if(p){var k={bandwidth:m,width:l,height:f,limitRenditionByPlayerDimensions:g},
u=p.playlists.map(function(M){var T=M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,Q=M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;var na=(na=M.attributes.BANDWIDTH)||ra.Number.MAX_VALUE;return{bandwidth:na,width:T,height:Q,playlist:M}});te(u,function(M,T){return M.bandwidth-T.bandwidth});u=u.filter(function(M){return!Ib.isIncompatible(M.playlist)});p=u.filter(function(M){return Ib.isEnabled(M.playlist)});p.length||(p=u.filter(function(M){return!Ib.isDisabled(M.playlist)}));var x=
p.filter(function(M){return M.bandwidth*nb.BANDWIDTH_VARIANCE<m}),A=x[x.length-1],H=x.filter(function(M){return M.bandwidth===A.bandwidth})[0];if(!1===g){var R=H||p[0]||u[0];if(R&&R.playlist)return u="sortedPlaylistReps",H&&(u="bandwidthBestRep"),p[0]&&(u="enabledPlaylistReps"),Ef("choosing "+Fm(R)+" using "+u+" with options",k),R.playlist;Ef("could not choose a playlist with options",k);return null}x=x.filter(function(M){return M.width&&M.height});te(x,function(M,T){return M.width-T.width});g=x.filter(function(M){return M.width===
l&&M.height===f});A=g[g.length-1];g=g.filter(function(M){return M.bandwidth===A.bandwidth})[0];if(!g){var W=x.filter(function(M){return M.width>l||M.height>f});R=W.filter(function(M){return M.width===W[0].width&&M.height===W[0].height});A=R[R.length-1];R=R.filter(function(M){return M.bandwidth===A.bandwidth})[0]}if((u=R||g||H||p[0]||u[0])&&u.playlist)return x="sortedPlaylistReps",R?x="resolutionPlusOneRep":g?x="resolutionBestRep":H?x="bandwidthBestRep":p[0]&&(x="enabledPlaylistReps"),Ef("choosing "+
Fm(u)+" using "+x+" with options",k),u.playlist;Ef("could not choose a playlist with options",k);return null}},Hm=function(){var p=this.useDevicePixelRatio?ra.devicePixelRatio||1:1;return Gm(this.playlists.master,this.systemBandwidth,parseInt(Ff(this.tech_.el(),"width"),10)*p,parseInt(Ff(this.tech_.el(),"height"),10)*p,this.limitRenditionByPlayerDimensions)},Cr=function(p){var m=p.currentTime,l=p.bandwidth,f=p.duration,g=p.segmentDuration,k=p.timeUntilRebuffer,u=p.currentTimeline,x=p.syncController;
p=p.master.playlists.filter(function(H){return!Ib.isIncompatible(H)});var A=p.filter(Ib.isEnabled);A.length||(A=p.filter(function(H){return!Ib.isDisabled(H)}));p=A.filter(Ib.hasAttribute.bind(null,"BANDWIDTH")).map(function(H){var R=x.getSyncPoint(H,f,u,m)?1:2;R=Ib.estimateSegmentRequestTime(g,l,H)*R-k;return{playlist:H,rebufferingImpact:R}});A=p.filter(function(H){return 0>=H.rebufferingImpact});te(A,function(H,R){return ki(R.playlist,H.playlist)});if(A.length)return A[0];te(p,function(H,R){return H.rebufferingImpact-
R.rebufferingImpact});return p[0]||null},Dr=function(p){var m=p.inbandTextTracks,l=p.captionArray,f=p.timestampOffset;if(l){var g=ra.WebKitDataCue||ra.VTTCue;l.forEach(function(k){m[k.stream].addCue(new g(k.startTime+f,k.endTime+f,k.text))})}},Er=function(p){Object.defineProperties(p.frame,{id:{get:function(){V.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return p.value.key}},value:{get:function(){V.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return p.value.data}},
privateData:{get:function(){V.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return p.value.data}}})},Fr=function(p){var m=p.metadataArray,l=p.timestampOffset,f=p.videoDuration;if(m){var g=ra.WebKitDataCue||ra.VTTCue,k=p.inbandTextTracks.metadataTrack_;if(k&&(m.forEach(function(H){var R=H.cueTime+l;!("number"!==typeof R||ra.isNaN(R)||0>R)&&Infinity>R&&H.frames.forEach(function(W){var M=new g(R,R,W.value||W.url||W.data||"");M.frame=W;M.value=W;Er(M);k.addCue(M)})}),k.cues&&
k.cues.length)){p=k.cues;m=[];for(var u=0;u<p.length;u++)p[u]&&m.push(p[u]);var x=m.reduce(function(H,R){var W=H[R.startTime]||[];W.push(R);H[R.startTime]=W;return H},{}),A=Object.keys(x).sort(function(H,R){return Number(H)-Number(R)});A.forEach(function(H,R){var W=Number(A[R+1])||f;x[H].forEach(function(M){M.endTime=W})})}}},ue=function(p,m,l){var f;if(l&&l.cues)for(f=l.cues.length;f--;){var g=l.cues[f];g.startTime>=p&&g.endTime<=m&&l.removeCue(g)}},Gr=function(p){var m=p.cues;if(m)for(var l=0;l<
m.length;l++){for(var f=[],g=0,k=0;k<m.length;k++)m[l].startTime===m[k].startTime&&m[l].endTime===m[k].endTime&&m[l].text===m[k].text&&(g++,1<g&&f.push(m[k]));f.length&&f.forEach(function(u){return p.removeCue(u)})}},Hr=function(p,m,l,f){m=Math.ceil(9E4*(m-f));var g=Math.ceil(9E4*(l-f));l=p.slice();for(f=p.length;f--&&!(p[f].pts<=g););if(-1===f)return l;for(g=f+1;g--&&!(p[g].pts<=m););g=Math.max(g,0);l.splice(g,f-g+1);return l},Ir=function(p,m){if(!p&&!m||!p&&m||p&&!m)return!1;if(p===m)return!0;var l=
Object.keys(p).sort(),f=Object.keys(m).sort();if(l.length!==f.length)return!1;for(var g=0;g<l.length;g++){var k=l[g];if(k!==f[g]||p[k]!==m[k])return!1}return!0},Gf=1/60,Im=function(p){var m=p.segmentTimeline,l=p.currentTimeline,f=p.startOfSegment,g=p.buffered;return p.overrideCheck||m!==l?m<l?f:g.length?g.end(g.length-1):f:null},Jm=function(p){var m=p.timelineChangeController,l=p.segmentTimeline,f=p.loaderType,g=p.audioDisabled;return p.currentTimeline===l?!1:"audio"===f?(p=m.lastTimelineChange({type:"main"}),
!p||p.to!==l):"main"===f&&g?(p=m.pendingTimelineChange({type:"audio"}))&&p.to===l?!1:!0:!1},Km=function(p){var m=p.segmentDuration;return m?Math.round(m)>p.maxDuration+bd:!1},li=function(p){function m(f,g){var k=p.call(this)||this;if(!f)throw new TypeError("Initialization settings are required");if("function"!==typeof f.currentTime)throw new TypeError("No currentTime getter specified");if(!f.mediaSource)throw new TypeError("No MediaSource specified");k.bandwidth=f.bandwidth;k.throughput={rate:0,count:0};
k.roundTrip=NaN;k.resetStats_();k.mediaIndex=null;k.hasPlayed_=f.hasPlayed;k.currentTime_=f.currentTime;k.seekable_=f.seekable;k.seeking_=f.seeking;k.duration_=f.duration;k.mediaSource_=f.mediaSource;k.vhs_=f.vhs;k.loaderType_=f.loaderType;k.currentMediaInfo_=void 0;k.startingMediaInfo_=void 0;k.segmentMetadataTrack_=f.segmentMetadataTrack;k.goalBufferLength_=f.goalBufferLength;k.sourceType_=f.sourceType;k.sourceUpdater_=f.sourceUpdater;k.inbandTextTracks_=f.inbandTextTracks;k.state_="INIT";k.handlePartialData_=
f.handlePartialData;k.timelineChangeController_=f.timelineChangeController;k.shouldSaveSegmentTimingInfo_=!0;k.parse708captions_=f.parse708captions;k.checkBufferTimeout_=null;k.error_=void 0;k.currentTimeline_=-1;k.pendingSegment_=null;k.xhrOptions_=null;k.pendingSegments_=[];k.audioDisabled_=!1;k.isPendingTimestampOffset_=!1;k.gopBuffer_=[];k.timeMapping_=0;k.safeAppend_=11<=V.browser.IE_VERSION;k.appendInitSegment_={audio:!0,video:!0};k.playlistOfLastInitSegment_={audio:null,video:null};k.callQueue_=
[];k.loadQueue_=[];k.metadataQueue_={id3:[],caption:[]};k.waitingOnRemove_=!1;k.quotaExceededErrorRetryTimeout_=null;k.activeInitSegmentId_=null;k.initSegments_={};k.cacheEncryptionKeys_=f.cacheEncryptionKeys;k.keyCache_={};k.decrypter_=f.decrypter;k.syncController_=f.syncController;k.syncPoint_={segmentIndex:0,time:0};k.transmuxer_=k.createTransmuxer_();k.triggerSyncInfoUpdate_=function(){return k.trigger("syncinfoupdate")};k.syncController_.on("syncinfoupdate",k.triggerSyncInfoUpdate_);k.mediaSource_.addEventListener("sourceopen",
function(){k.isEndOfStream_()||(k.ended_=!1)});k.fetchAtBuffer_=!1;k.logger_=lc("SegmentLoader["+k.loaderType_+"]");Object.defineProperty(Tb(k),"state",{get:function(){return this.state_},set:function(u){u!==this.state_&&(this.logger_(this.state_+" -> "+u),this.state_=u,this.trigger("statechange"))}});k.sourceUpdater_.on("ready",function(){k.hasEnoughInfoToAppend_()&&k.processCallQueue_()});if("main"===k.loaderType_)k.timelineChangeController_.on("pendingtimelinechange",function(){k.hasEnoughInfoToAppend_()&&
k.processCallQueue_()});if("audio"===k.loaderType_)k.timelineChangeController_.on("timelinechange",function(){k.hasEnoughInfoToLoad_()&&k.processLoadQueue_();k.hasEnoughInfoToAppend_()&&k.processCallQueue_()});return k}zc(m,p);var l=m.prototype;l.createTransmuxer_=function(){return gi.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_,parse708captions:this.parse708captions_})};l.resetStats_=function(){this.mediaSecondsLoaded=
this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0};l.dispose=function(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();this.transmuxer_&&this.transmuxer_.terminate();this.resetStats_();this.checkBufferTimeout_&&ra.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_);
this.off()};l.setAudio=function(f){this.audioDisabled_=!f;f?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())};l.abort=function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())};l.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests();this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=
[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.waitingOnRemove_=!1;ra.clearTimeout(this.quotaExceededErrorRetryTimeout_);this.quotaExceededErrorRetryTimeout_=null};l.checkForAbort_=function(f){return"APPENDING"!==this.state||this.pendingSegment_?this.pendingSegment_&&this.pendingSegment_.requestId===f?!1:!0:(this.state="READY",!0)};l.error=function(f){"undefined"!==typeof f&&(this.logger_("error occurred:",f),this.error_=f);this.pendingSegment_=
null;return this.error_};l.endOfStream=function(){this.ended_=!0;this.transmuxer_&&gi.reset(this.transmuxer_);this.gopBuffer_.length=0;this.pause();this.trigger("ended")};l.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return V.createTimeRanges();if("main"===this.loaderType_){var f=this.startingMediaInfo_,g=f.hasAudio,k=f.hasVideo;f=f.isMuxed;if(k&&g&&!this.audioDisabled_&&!f)return this.sourceUpdater_.buffered();if(k)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()};
l.initSegmentForMap=function(f,g){void 0===g&&(g=!1);if(!f)return null;var k=vf(f),u=this.initSegments_[k];g&&!u&&f.bytes&&(this.initSegments_[k]=u={resolvedUri:f.resolvedUri,byterange:f.byterange,bytes:f.bytes,tracks:f.tracks,timescales:f.timescales});return u||f};l.segmentKey=function(f,g){void 0===g&&(g=!1);if(!f)return null;var k=f.resolvedUri,u=this.keyCache_[k];this.cacheEncryptionKeys_&&g&&!u&&f.bytes&&(this.keyCache_[k]=u={resolvedUri:f.resolvedUri,bytes:f.bytes});f={resolvedUri:(u||f).resolvedUri};
u&&(f.bytes=u.bytes);return f};l.couldBeginLoading_=function(){return this.playlist_&&!this.paused()};l.load=function(){this.monitorBuffer_();if(this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}};l.init_=function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};l.playlist=function(f,g){void 0===g&&(g={});if(f){var k=this.playlist_,u=this.pendingSegment_;
this.playlist_=f;this.xhrOptions_=g;"INIT"===this.state&&(f.syncInfo={mediaSequence:f.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(f));g=null;k&&(k.id?g=k.id:k.uri&&(g=k.uri));this.logger_("playlist update ["+g+" => "+(f.id||f.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();k&&k.uri===f.uri?(g=f.mediaSequence-k.mediaSequence,this.logger_("live window shift ["+g+"]"),null!==this.mediaIndex&&
(this.mediaIndex-=g),u&&(u.mediaIndex-=g,0<=u.mediaIndex&&(u.segment=f.segments[u.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(k,f)):((null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"))}};l.pause=function(){this.checkBufferTimeout_&&(ra.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)};l.paused=function(){return null===this.checkBufferTimeout_};l.resetEverything=function(f){this.ended_=
!1;this.appendInitSegment_={audio:!0,video:!0};this.resetLoader();this.remove(0,Infinity,f);this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})};l.resetLoader=function(){this.fetchAtBuffer_=!1;this.resyncLoader()};l.resyncLoader=function(){this.transmuxer_&&gi.reset(this.transmuxer_);this.syncPoint_=this.mediaIndex=null;this.isPendingTimestampOffset_=!1;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();this.transmuxer_&&
this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})};l.remove=function(f,g,k){void 0===k&&(k=function(){});Infinity===g&&(g=this.duration_());if(this.sourceUpdater_&&this.startingMediaInfo_){var u=1,x=function(){u--;0===u&&k()};this.audioDisabled_||(u++,this.sourceUpdater_.removeAudio(f,g,x));"main"===this.loaderType_&&(this.gopBuffer_=Hr(this.gopBuffer_,f,g,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(f,g,x));for(var A in this.inbandTextTracks_)ue(f,g,this.inbandTextTracks_[A]);
ue(f,g,this.segmentMetadataTrack_);x()}else this.logger_("skipping remove because no source updater or starting media info")};l.monitorBuffer_=function(){this.checkBufferTimeout_&&ra.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=ra.setTimeout(this.monitorBufferTick_.bind(this),1)};l.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&ra.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=ra.setTimeout(this.monitorBufferTick_.bind(this),
500)};l.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var f=this.buffered_(),g=this.checkBuffer_(f,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);g&&(g.timestampOffset=Im({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:g.startOfSegment,buffered:f,overrideCheck:this.isPendingTimestampOffset_}),
this.isPendingTimestampOffset_=!1,"number"===typeof g.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:g.timeline}),this.loadSegment_(g))}};l.isEndOfStream_=function(f,g){void 0===f&&(f=this.mediaIndex);void 0===g&&(g=this.playlist_);if(!g||!this.mediaSource_)return!1;f=f+1===g.segments.length;return g.endList&&"open"===this.mediaSource_.readyState&&f};l.checkBuffer_=function(f,g,k,u,x,A){var H=0;f.length&&(H=f.end(f.length-
1));f=Math.max(0,H-x);if(!g.segments.length||f>=this.goalBufferLength_()||!u&&1<=f)return null;u=!1;if(null===A)H=this.getSyncSegmentCandidate_(g),u=!0;else if(null!==k){var R=(R=g.segments[k])&&R.end?R.end:H;H=k+1}else this.fetchAtBuffer_?(R=Ib.getMediaInfoForTime(g,H,A.segmentIndex,A.time),H=R.mediaIndex,R=R.startTime):(R=Ib.getMediaInfoForTime(g,x,A.segmentIndex,A.time),H=R.mediaIndex,R=R.startTime);if((x=this.generateSegmentInfo_(g,H,R,u))&&(!this.mediaSource_||!this.playlist_||x.mediaIndex!==
this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()))return this.logger_("checkBuffer_ returning "+x.uri,{segmentInfo:x,playlist:g,currentMediaIndex:k,nextMediaIndex:H,startOfSegment:R,isSyncRequest:u}),x};l.getSyncSegmentCandidate_=function(f){var g=this;if(-1===this.currentTimeline_)return 0;var k=f.segments.map(function(u,x){return{timeline:u.timeline,segmentIndex:x}}).filter(function(u){return u.timeline===g.currentTimeline_});return k.length?k[Math.min(k.length-
1,1)].segmentIndex:Math.max(f.segments.length-1,0)};l.generateSegmentInfo_=function(f,g,k,u){if(0>g||g>=f.segments.length)return null;var x=f.segments[g],A=this.sourceUpdater_.audioBuffered(),H=this.sourceUpdater_.videoBuffered(),R,W;A.length&&(R=A.end(A.length-1)-this.sourceUpdater_.audioTimestampOffset());if(H.length)if(A=this.gopBuffer_,H=this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),"undefined"!==typeof H&&null!==H&&A.length){H=Math.ceil(9E4*(H-this.timeMapping_+3));for(W=0;W<
A.length&&!(A[W].pts>H);W++);W=A.slice(W)}else W=[];return{requestId:"segment-loader-"+Math.random(),uri:x.resolvedUri,mediaIndex:g,isSyncRequest:u,startOfSegment:k,playlist:f,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:x.timeline,duration:x.duration,segment:x,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:R,gopsToAlignWith:W}};l.earlyAbortWhenNeeded_=function(f){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(1E3>Date.now()-
(f.firstBytesReceivedAt||Date.now()))){var g=this.currentTime_(),k=f.bandwidth,u=this.pendingSegment_.duration;f=Ib.estimateSegmentRequestTime(u,k,this.playlist_,f.bytesReceived);var x=this.buffered_(),A=this.vhs_.tech_.playbackRate();void 0===A&&(A=1);x=((x.length?x.end(x.length-1):0)-g)/A-1;f<=x||!(g=Cr({master:this.vhs_.playlists.master,currentTime:g,bandwidth:k,duration:this.duration_(),segmentDuration:u,timeUntilRebuffer:x,currentTimeline:this.currentTimeline_,syncController:this.syncController_}))||
(k=f-x-g.rebufferingImpact,u=.5,x<=bd&&(u=1),!g.playlist||g.playlist.uri===this.playlist_.uri||k<u||(this.bandwidth=g.playlist.attributes.BANDWIDTH*nb.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort")))}};l.handleAbort_=function(){this.mediaRequestsAborted+=1};l.handleProgress_=function(f,g){this.earlyAbortWhenNeeded_(g.stats);this.checkForAbort_(g.requestId)||this.trigger("progress")};l.handleTrackInfo_=function(f,g){this.earlyAbortWhenNeeded_(f.stats);this.checkForAbort_(f.requestId)||this.checkForIllegalMediaSwitch(g)||
(g=g||{},Ir(this.currentMediaInfo_,g)||(this.appendInitSegment_={audio:!0,video:!0},this.currentMediaInfo_=this.startingMediaInfo_=g,this.logger_("trackinfo update",g),this.trigger("trackinfo")),this.checkForAbort_(f.requestId)||(this.pendingSegment_.trackInfo=g,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))};l.handleTimingInfo_=function(f,g,k,u){this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId)){f=this.pendingSegment_;var x=g+"TimingInfo";f[x]=f[x]||{};f[x][k]=u;
this.logger_("timinginfo: "+g+" - "+k+" - "+u);this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}};l.handleCaptions_=function(f,g){var k=this;this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId))if(0===g.length)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){var u=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),x={};
g.forEach(function(A){x[A.stream]=x[A.stream]||{startTime:Infinity,captions:[],endTime:0};var H=x[A.stream];H.startTime=Math.min(H.startTime,A.startTime+u);H.endTime=Math.max(H.endTime,A.endTime+u);H.captions.push(A)});Object.keys(x).forEach(function(A){var H=x[A],R=H.startTime,W=H.endTime;H=H.captions;var M=k.inbandTextTracks_;k.logger_("adding cues from "+R+" -> "+W+" for "+A);var T=k.vhs_.tech_;if(!M[A]){T.trigger({type:"usage",name:"vhs-608"});T.trigger({type:"usage",name:"hls-608"});var Q=T.textTracks().getTrackById(A);
M[A]=Q?Q:T.addRemoteTextTrack({kind:"captions",id:A,label:A},!1).track}ue(R,W,M[A]);Dr({captionArray:H,inbandTextTracks:M,timestampOffset:u})});this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,f,g))};l.handleId3_=function(f,g,k){this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId))if(this.pendingSegment_.hasAppendedData_){f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():
this.sourceUpdater_.videoTimestampOffset();var u=this.inbandTextTracks_;u.metadataTrack_||(u.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,u.metadataTrack_.inBandMetadataTrackDispatchType=k);Fr({inbandTextTracks:this.inbandTextTracks_,metadataArray:g,timestampOffset:f,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,f,g,k))};l.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(f){return f()});
this.metadataQueue_.caption.forEach(function(f){return f()});this.metadataQueue_.id3=[];this.metadataQueue_.caption=[]};l.processCallQueue_=function(){var f=this.callQueue_;this.callQueue_=[];f.forEach(function(g){return g()})};l.processLoadQueue_=function(){var f=this.loadQueue_;this.loadQueue_=[];f.forEach(function(g){return g()})};l.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var f=this.pendingSegment_;return f?this.currentMediaInfo_?Jm({timelineChangeController:this.timelineChangeController_,
currentTimeline:this.currentTimeline_,segmentTimeline:f.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0:!0:!1};l.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var f=this.pendingSegment_;if(!f||!f.trackInfo)return!1;if(!this.handlePartialData_){var g=this.currentMediaInfo_,k=g.isMuxed;if(g.hasVideo&&!f.videoTimingInfo||g.hasAudio&&!this.audioDisabled_&&!k&&!f.audioTimingInfo)return!1}return Jm({timelineChangeController:this.timelineChangeController_,
currentTimeline:this.currentTimeline_,segmentTimeline:f.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0};l.handleData_=function(f,g){this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())this.callQueue_.push(this.handleData_.bind(this,f,g));else{var k=this.pendingSegment_;this.setTimeMapping_(k.timeline);this.updateMediaSecondsLoaded_(k.segment);if("closed"!==this.mediaSource_.readyState){f.map&&
(f.map=this.initSegmentForMap(f.map,!0),k.segment.map=f.map);f.key&&this.segmentKey(f.key,!0);k.isFmp4=f.isFmp4;k.timingInfo=k.timingInfo||{};if(k.isFmp4)this.trigger("fmp4"),k.timingInfo.start=k[g.type+"TimingInfo"].start;else{f="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;var u;f&&(u=this.handlePartialData_?g.videoFramePtsTime:k.videoTimingInfo.start);k.timingInfo.start=this.trueSegmentStart_({currentStart:k.timingInfo.start,playlist:k.playlist,mediaIndex:k.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),
useVideoTimingInfo:f,firstVideoFrameTimeForData:u,videoTimingInfo:k.videoTimingInfo,audioTimingInfo:k.audioTimingInfo})}this.updateAppendInitSegmentStatus(k,g.type);this.updateSourceBufferTimestampOffset_(k);k.hasAppendedData_=!0;this.processMetadataQueue_();this.appendData_(k,g)}}};l.updateAppendInitSegmentStatus=function(f,g){"main"!==this.loaderType_||"number"!==typeof f.timestampOffset||f.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0});this.playlistOfLastInitSegment_[g]!==
f.playlist&&(this.appendInitSegment_[g]=!0)};l.getInitSegmentAndUpdateState_=function(f){var g=f.type,k=f.initSegment,u=f.map;f=f.playlist;if(u){var x=vf(u);if(this.activeInitSegmentId_===x)return null;k=this.initSegmentForMap(u,!0).bytes;this.activeInitSegmentId_=x}return k&&this.appendInitSegment_[g]?(this.playlistOfLastInitSegment_[g]=f,this.appendInitSegment_[g]=u?!0:!1,this.activeInitSegmentId_=null,k):null};l.handleQuotaExceededError_=function(f,g){var k=this;g=f.segmentInfo;var u=f.type;f=
f.bytes;var x=this.sourceUpdater_.audioBuffered(),A=this.sourceUpdater_.videoBuffered();1<x.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+cd(x).join(", "));1<A.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+cd(A).join(", "));var H=x.length?x.start(0):0,R=x.length?x.end(x.length-1):0,W=A.length?A.start(0):0,M=A.length?A.end(A.length-1):0;if(1>=R-H&&1>=M-W)this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+
(f.byteLength+", audio buffer: ")+(cd(x).join(", ")+", video buffer: ")+(cd(A).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",blacklistDuration:Infinity}),this.trigger("error");else{this.waitingOnRemove_=!0;this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:g,type:u,bytes:f}));var T=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing video from 0 to "+T);this.sourceUpdater_.removeVideo(0,T,function(){k.logger_("On QUOTA_EXCEEDED_ERR, removing audio from 0 to "+
T);k.sourceUpdater_.removeAudio(0,T,function(){k.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s");k.waitingOnRemove_=!1;k.quotaExceededErrorRetryTimeout_=ra.setTimeout(function(){k.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue");k.quotaExceededErrorRetryTimeout_=null;k.processCallQueue_()},1E3)})})}};l.handleAppendError_=function(f,g){var k=f.segmentInfo,u=f.type;f=f.bytes;g&&(22===g.code?this.handleQuotaExceededError_({segmentInfo:k,type:u,bytes:f}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",
g),this.error(u+" append of "+f.length+"b failed for segment #"+(k.mediaIndex+" in playlist "+k.playlist.id)),this.trigger("appenderror")))};l.appendToSourceBuffer_=function(f){var g=f.segmentInfo,k=f.type,u=f.initSegment,x=f.data;f=f.bytes;f||(f=[x],x=x.byteLength,u&&(f.unshift(u),x+=u.byteLength),f=rr({bytes:x,segments:f}));this.sourceUpdater_.appendBuffer({segmentInfo:g,type:k,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:g,type:k,bytes:f}))};l.handleSegmentTimingInfo_=function(f,g,k){this.pendingSegment_&&
g===this.pendingSegment_.requestId&&(g=this.pendingSegment_.segment,f+="TimingInfo",g[f]||(g[f]={}),g[f].transmuxerPrependedSeconds=k.prependedContentDuration||0,g[f].transmuxedPresentationStart=k.start.presentation,g[f].transmuxedDecodeStart=k.start.decode,g[f].transmuxedPresentationEnd=k.end.presentation,g[f].transmuxedDecodeEnd=k.end.decode,g[f].baseMediaDecodeTime=k.baseMediaDecodeTime)};l.appendData_=function(f,g){var k=g.type,u=g.data;!u||!u.byteLength||"audio"===k&&this.audioDisabled_||(g=
this.getInitSegmentAndUpdateState_({type:k,initSegment:g.initSegment,playlist:f.playlist,map:f.isFmp4?f.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:f,type:k,initSegment:g,data:u}))};l.loadSegment_=function(f){var g=this;this.state="WAITING";this.pendingSegment_=f;this.trimBackBuffer_(f);"number"===typeof f.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"});this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(f):this.loadQueue_.push(function(){var k=
g.buffered_();"number"===typeof f.timestampOffset&&(f.timestampOffset=Im({segmentTimeline:f.timeline,currentTimeline:g.currentTimeline_,startOfSegment:f.startOfSegment,buffered:k,overrideCheck:!0}));delete f.audioAppendStart;k=g.sourceUpdater_.audioBuffered();k.length&&(f.audioAppendStart=k.end(k.length-1)-g.sourceUpdater_.audioTimestampOffset());g.updateTransmuxerAndRequestSegment_(f)})};l.updateTransmuxerAndRequestSegment_=function(f){var g=this;this.shouldUpdateTransmuxerTimestampOffset_(f.timestampOffset)&&
(this.gopBuffer_.length=0,f.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:f.timestampOffset}));var k=this.createSimplifiedSegmentObj_(f),u=this.isEndOfStream_(f.mediaIndex,f.playlist),x=null!==this.mediaIndex,A=f.timeline!==this.currentTimeline_&&0<f.timeline;u=u||x&&A;f.abortRequests=Ar({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:k,handlePartialData:this.handlePartialData_,
abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",f.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",f.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:u,endedTimelineFn:function(){g.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),
dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})};l.trimBackBuffer_=function(f){f=this.seekable_();var g=this.currentTime_(),k=this.playlist_.targetDuration||10,u=g-nb.BACK_BUFFER_LENGTH;f.length&&(u=Math.max(u,f.start(0)));f=Math.min(g-k,u);0<f&&this.remove(0,f)};l.createSimplifiedSegmentObj_=function(f){var g=f.segment,k={resolvedUri:g.resolvedUri,byterange:g.byterange,requestId:f.requestId,transmuxer:f.transmuxer,audioAppendStart:f.audioAppendStart,gopsToAlignWith:f.gopsToAlignWith},
u=f.playlist.segments[f.mediaIndex-1];u&&u.timeline===g.timeline&&(u.videoTimingInfo?k.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(k.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd));g.key&&(f=g.key.iv||new Uint32Array([0,0,0,f.mediaIndex+f.playlist.mediaSequence]),k.key=this.segmentKey(g.key),k.key.iv=f);g.map&&(k.map=this.initSegmentForMap(g.map));return k};l.saveTransferStats_=function(f){this.mediaRequests+=1;f&&(this.mediaBytesTransferred+=f.bytesReceived,this.mediaTransferDuration+=
f.roundTripTime)};l.saveBandwidthRelatedStats_=function(f,g){this.pendingSegment_.byteLength=g.bytesReceived;f<Gf?this.logger_("Ignoring segment's bandwidth because its duration of "+f+(" is less than the min to record "+Gf)):(this.bandwidth=g.bandwidth,this.roundTrip=g.roundTripTime)};l.handleTimeout_=function(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate")};l.segmentRequestFinished_=function(f,g,k){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,
f,g,k));else if(this.saveTransferStats_(g.stats),this.pendingSegment_&&g.requestId===this.pendingSegment_.requestId)if(f)this.pendingSegment_=null,this.state="READY",-102!==f.code&&(this.pause(),-101===f.code?this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(f),this.trigger("error")));else{f=this.pendingSegment_;this.saveBandwidthRelatedStats_(f.duration,g.stats);f.endOfAllRequests=g.endOfAllRequests;if(k.gopInfo){g=this.gopBuffer_;k=k.gopInfo;if(k.length)if(this.safeAppend_)g=k.slice();
else{var u=k[0].pts,x=0;for(x;x<g.length&&!(g[x].pts>=u);x++);g=g.slice(0,x).concat(k)}this.gopBuffer_=g}this.state="APPENDING";this.trigger("appending");this.waitForAppendsToComplete_(f)}};l.setTimeMapping_=function(f){f=this.syncController_.mappingForTimeline(f);null!==f&&(this.timeMapping_=f)};l.updateMediaSecondsLoaded_=function(f){this.mediaSecondsLoaded="number"===typeof f.start&&"number"===typeof f.end?this.mediaSecondsLoaded+(f.end-f.start):this.mediaSecondsLoaded+f.duration};l.shouldUpdateTransmuxerTimestampOffset_=
function(f){return null===f?!1:"main"===this.loaderType_&&f!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&f!==this.sourceUpdater_.audioTimestampOffset()?!0:!1};l.trueSegmentStart_=function(f){var g=f.currentStart,k=f.mediaIndex,u=f.firstVideoFrameTimeForData,x=f.currentVideoTimestampOffset,A=f.audioTimingInfo;if("undefined"!==typeof g)return g;if(!f.useVideoTimingInfo)return A.start;g=f.playlist.segments[k-1];return 0!==k&&g&&"undefined"!==typeof g.start&&g.end===u+x?f.videoTimingInfo.start:
u};l.waitForAppendsToComplete_=function(f){if(this.currentMediaInfo_){var g=this.currentMediaInfo_,k=g.hasAudio,u=g.hasVideo;g=g.isMuxed;u="main"===this.loaderType_&&u;k=!this.audioDisabled_&&k&&!g;f.waitingOnAppends=0;f.hasAppendedData_?(u&&f.waitingOnAppends++,k&&f.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,f)),k&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,f))):(f.timingInfo||"number"!==typeof f.timestampOffset||(this.isPendingTimestampOffset_=
!0),f.timingInfo={start:0},f.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(f),this.processMetadataQueue_()),this.checkAppendsDone_(f))}else this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:Infinity}),this.trigger("error")};l.checkAppendsDone_=function(f){this.checkForAbort_(f.requestId)||(f.waitingOnAppends--,0===f.waitingOnAppends&&this.handleAppendsDone_())};l.checkForIllegalMediaSwitch=function(f){var g=
this.currentMediaInfo_;return(f="main"===this.loaderType_&&g&&f?f.hasAudio||f.hasVideo?g.hasVideo&&!f.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!g.hasVideo&&f.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null)?(this.error({message:f,blacklistDuration:Infinity}),this.trigger("error"),!0):!1};l.updateSourceBufferTimestampOffset_=function(f){if(null!==f.timestampOffset&&"number"===typeof f.timingInfo.start&&!f.changedTimestampOffset&&"main"===this.loaderType_){var g=!1;f.timestampOffset-=f.timingInfo.start;f.changedTimestampOffset=!0;f.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(f.timestampOffset),
g=!0);f.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(f.timestampOffset),g=!0);g&&this.trigger("timestampoffset")}};l.updateTimingInfoEnd_=function(f){f.timingInfo=f.timingInfo||{};var g="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&f.videoTimingInfo?f.videoTimingInfo:f.audioTimingInfo;g&&(f.timingInfo.end="number"===typeof g.end?g.end:g.start+f.duration)};l.handleAppendsDone_=function(){this.pendingSegment_&&this.trigger("appendsdone");
if(this.pendingSegment_){var f=this.pendingSegment_;this.updateTimingInfoEnd_(f);this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:f,shouldSaveTimelineMapping:"main"===this.loaderType_});var g=this.logger_;var k=f.segment;var u=f.playlist,x=u.mediaSequence,A=u.segments;k=["appending ["+f.mediaIndex+"] of ["+x+", "+(x+(void 0===A?[]:A).length)+"] from playlist ["+u.id+"]","["+k.start+" => "+k.end+"] in timeline ["+f.timeline+"]"].join(" ");g.call(this,k);"hls"!==
this.sourceType_?g=null:(g=f.audioTimingInfo,k=f.videoTimingInfo,(u=Math.max(g&&"number"===typeof g.start&&"number"===typeof g.end?g.end-g.start:0,k&&"number"===typeof k.start&&"number"===typeof k.end?k.end-k.start:0))?(x=f.playlist.targetDuration,g=Km({segmentDuration:u,maxDuration:2*x}),k=Km({segmentDuration:u,maxDuration:x}),u="Segment with index "+f.mediaIndex+" from playlist "+(f.playlist.id+" has a duration of ")+(u+" when the reported duration is ")+(f.duration+" and the target duration is ")+
(x+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"),g=g||k?{severity:g?"warn":"info",message:u}:null):g=null);g&&("warn"===g.severity?V.log.warn(g.message):this.logger_(g.message));this.recordThroughput_(f);this.pendingSegment_=null;this.state="READY";f.isSyncRequest?this.trigger("syncinfoupdate"):
(this.addSegmentMetadataCue_(f),this.fetchAtBuffer_=!0,this.currentTimeline_!==f.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:f.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:f.timeline})),this.currentTimeline_=f.timeline,this.trigger("syncinfoupdate"),g=f.segment,g.end&&this.currentTime_()-g.end>3*f.playlist.targetDuration?
this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=f.mediaIndex,this.isEndOfStream_(f.mediaIndex,f.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()))}else this.state="READY",this.paused()||this.monitorBuffer_()};l.recordThroughput_=function(f){if(f.duration<Gf)this.logger_("Ignoring segment's throughput because its duration of "+f.duration+(" is less than the min to record "+Gf));else{var g=
this.throughput.rate,k=Date.now()-f.endOfAllRequests+1;this.throughput.rate+=(Math.floor(f.byteLength/k*8E3)-g)/++this.throughput.count}};l.addSegmentMetadataCue_=function(f){if(this.segmentMetadataTrack_){var g=f.segment,k=g.start,u=g.end;if("number"===typeof k&&isFinite(k)&&"number"===typeof u&&isFinite(u)){ue(k,u,this.segmentMetadataTrack_);var x=ra.WebKitDataCue||ra.VTTCue;f={custom:g.custom,dateTimeObject:g.dateTimeObject,dateTimeString:g.dateTimeString,bandwidth:f.playlist.attributes.BANDWIDTH,
resolution:f.playlist.attributes.RESOLUTION,codecs:f.playlist.attributes.CODECS,byteLength:f.byteLength,uri:f.uri,timeline:f.timeline,playlist:f.playlist.id,start:k,end:u};g=JSON.stringify(f);k=new x(k,u,g);k.value=f;this.segmentMetadataTrack_.addCue(k)}}};return m}(V.EventTarget),Lm=function(p){return"string"!==typeof p?p:p.replace(/./,function(m){return m.toUpperCase()})},Jr=["video","audio"],mi=function(p,m){var l=m[p+"Buffer"];return l&&l.updating||m.queuePending[p]},ni=function f(m,l){if(0!==
l.queue.length){var g=0,k=l.queue[g];if("mediaSource"===k.type)l.updating()||"closed"===l.mediaSource.readyState||(l.queue.shift(),k.action(l),k.doneFn&&k.doneFn(),f("audio",l),f("video",l));else if("mediaSource"!==m&&l.ready()&&"closed"!==l.mediaSource.readyState&&!mi(m,l)){if(k.type!==m){a:{g=l.queue;for(k=0;k<g.length;k++){var u=g[k];if("mediaSource"===u.type){g=null;break a}if(u.type===m){g=k;break a}}g=null}if(null===g)return;k=l.queue[g]}l.queue.splice(g,1);l.queuePending[m]=k;k.action(m,l);
k.doneFn||(l.queuePending[m]=null,f(m,l))}}},Mm=function(m,l){var f=l[m+"Buffer"],g=Lm(m);f&&(f.removeEventListener("updateend",l["on"+g+"UpdateEnd_"]),f.removeEventListener("error",l["on"+g+"Error_"]),l.codecs[m]=null,l[m+"Buffer"]=null)},pc=function(m,l){return m&&l&&-1!==Array.prototype.indexOf.call(m.sourceBuffers,l)},Qb={appendBuffer:function(m,l,f){return function(g,k){var u=k[g+"Buffer"];if(pc(k.mediaSource,u)){k.logger_("Appending segment "+l.mediaIndex+"'s "+m.length+" bytes to "+g+"Buffer");
try{u.appendBuffer(m)}catch(x){k.logger_("Error with code "+x.code+" "+(22===x.code?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+l.mediaIndex+" to "+g+"Buffer")),k.queuePending[g]=null,f(x)}}}},remove:function(m,l){return function(f,g){var k=g[f+"Buffer"];pc(g.mediaSource,k)&&(g.logger_("Removing "+m+" to "+l+" from "+f+"Buffer"),k.remove(m,l))}},timestampOffset:function(m){return function(l,f){var g=f[l+"Buffer"];pc(f.mediaSource,g)&&(f.logger_("Setting "+l+"timestampOffset to "+m),g.timestampOffset=
m)}},callback:function(m){return function(l,f){m()}},endOfStream:function(m){return function(l){if("open"===l.mediaSource.readyState){l.logger_("Calling mediaSource endOfStream("+(m||"")+")");try{l.mediaSource.endOfStream(m)}catch(f){V.log.warn("Failed to call media source endOfStream",f)}}}},duration:function(m){return function(l){l.logger_("Setting mediaSource duration to "+m);try{l.mediaSource.duration=m}catch(f){V.log.warn("Failed to set media source duration",f)}}},abort:function(){return function(m,
l){if("open"===l.mediaSource.readyState){var f=l[m+"Buffer"];if(pc(l.mediaSource,f)){l.logger_("calling abort on "+m+"Buffer");try{f.abort()}catch(g){V.log.warn("Failed to abort on "+m+"Buffer",g)}}}}},addSourceBuffer:function(m,l){return function(f){var g=Lm(m),k=Gh(l);f.logger_("Adding "+m+"Buffer with codec "+l+" to mediaSource");k=f.mediaSource.addSourceBuffer(k);k.addEventListener("updateend",f["on"+g+"UpdateEnd_"]);k.addEventListener("error",f["on"+g+"Error_"]);f.codecs[m]=l;f[m+"Buffer"]=k}},
removeSourceBuffer:function(m){return function(l){var f=l[m+"Buffer"];Mm(m,l);if(pc(l.mediaSource,f)){l.logger_("Removing "+m+"Buffer with codec "+l.codecs[m]+" from mediaSource");try{l.mediaSource.removeSourceBuffer(f)}catch(g){V.log.warn("Failed to removeSourceBuffer "+m+"Buffer",g)}}}},changeType:function(m){return function(l,f){var g=f[l+"Buffer"],k=Gh(m);pc(f.mediaSource,g)&&f.codecs[l]!==m&&(f.logger_("changing "+l+"Buffer codec from "+f.codecs[l]+" to "+m),g.changeType(k),f.codecs[l]=m)}}},
Rb=function(m){var l=m.type,f=m.sourceUpdater;f.queue.push({type:l,action:m.action,doneFn:m.doneFn,name:m.name});ni(l,f)},Nm=function(m,l){return function(f){l.queuePending[m]&&(f=l.queuePending[m].doneFn,l.queuePending[m]=null,f&&f(l[m+"Error_"]));ni(m,l)}},Om=function(m){function l(g){var k=m.call(this)||this;k.mediaSource=g;k.sourceopenListener_=function(){return ni("mediaSource",Tb(k))};k.mediaSource.addEventListener("sourceopen",k.sourceopenListener_);k.logger_=lc("SourceUpdater");k.audioTimestampOffset_=
0;k.videoTimestampOffset_=0;k.queue=[];k.queuePending={audio:null,video:null};k.delayedAudioAppendQueue_=[];k.videoAppendQueued_=!1;k.codecs={};k.onVideoUpdateEnd_=Nm("video",Tb(k));k.onAudioUpdateEnd_=Nm("audio",Tb(k));k.onVideoError_=function(u){k.videoError_=u};k.onAudioError_=function(u){k.audioError_=u};k.createdSourceBuffers_=!1;k.initializedEme_=!1;k.triggeredReady_=!1;return k}zc(l,m);var f=l.prototype;f.initializedEme=function(){this.initializedEme_=!0;this.triggerReady()};f.hasCreatedSourceBuffers=
function(){return this.createdSourceBuffers_};f.hasInitializedAnyEme=function(){return this.initializedEme_};f.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()};f.createSourceBuffers=function(g){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(g),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())};f.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))};f.addSourceBuffer=
function(g,k){Rb({type:"mediaSource",sourceUpdater:this,action:Qb.addSourceBuffer(g,k),name:"addSourceBuffer"})};f.abort=function(g){Rb({type:g,sourceUpdater:this,action:Qb.abort(g),name:"abort"})};f.removeSourceBuffer=function(g){this.canRemoveSourceBuffer()?Rb({type:"mediaSource",sourceUpdater:this,action:Qb.removeSourceBuffer(g),name:"removeSourceBuffer"}):V.log.error("removeSourceBuffer is not supported!")};f.canRemoveSourceBuffer=function(){return!V.browser.IE_VERSION&&!V.browser.IS_FIREFOX&&
ra.MediaSource&&ra.MediaSource.prototype&&"function"===typeof ra.MediaSource.prototype.removeSourceBuffer};l.canChangeType=function(){return ra.SourceBuffer&&ra.SourceBuffer.prototype&&"function"===typeof ra.SourceBuffer.prototype.changeType};f.canChangeType=function(){return this.constructor.canChangeType()};f.changeType=function(g,k){this.canChangeType()?Rb({type:g,sourceUpdater:this,action:Qb.changeType(k),name:"changeType"}):V.log.error("changeType is not supported!")};f.addOrChangeSourceBuffers=
function(g){var k=this;if(!g||"object"!==typeof g||0===Object.keys(g).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(g).forEach(function(u){var x=g[u];if(!k.hasCreatedSourceBuffers())return k.addSourceBuffer(u,x);k.canChangeType()&&k.changeType(u,x)})};f.appendBuffer=function(g,k){var u=this,x=g.segmentInfo,A=g.type,H=g.bytes;this.processedAppend_=!0;"audio"===A&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([g,k]),this.logger_("delayed audio append of "+
H.length+" until video append")):(Rb({type:A,sourceUpdater:this,action:Qb.appendBuffer(H,x||{mediaIndex:-1},k),doneFn:k,name:"appendBuffer"}),"video"===A&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(g=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+g.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,g.forEach(function(R){u.appendBuffer.apply(u,R)}))))};f.audioBuffered=function(){return pc(this.mediaSource,this.audioBuffer)?this.audioBuffer.buffered?
this.audioBuffer.buffered:V.createTimeRange():V.createTimeRange()};f.videoBuffered=function(){return pc(this.mediaSource,this.videoBuffer)?this.videoBuffer.buffered?this.videoBuffer.buffered:V.createTimeRange():V.createTimeRange()};f.buffered=function(){var g=pc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,k=pc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return k&&!g?this.audioBuffered():g&&!k?this.videoBuffered():sq(this.audioBuffered(),this.videoBuffered())};f.setDuration=
function(g,k){void 0===k&&(k=Lc);Rb({type:"mediaSource",sourceUpdater:this,action:Qb.duration(g),name:"duration",doneFn:k})};f.endOfStream=function(g,k){void 0===g&&(g=null);void 0===k&&(k=Lc);"string"!==typeof g&&(g=void 0);Rb({type:"mediaSource",sourceUpdater:this,action:Qb.endOfStream(g),name:"endOfStream",doneFn:k})};f.removeAudio=function(g,k,u){void 0===u&&(u=Lc);this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Rb({type:"audio",sourceUpdater:this,action:Qb.remove(g,k),doneFn:u,name:"remove"}):
u()};f.removeVideo=function(g,k,u){void 0===u&&(u=Lc);this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Rb({type:"video",sourceUpdater:this,action:Qb.remove(g,k),doneFn:u,name:"remove"}):u()};f.updating=function(){return mi("audio",this)||mi("video",this)?!0:!1};f.audioTimestampOffset=function(g){"undefined"!==typeof g&&this.audioBuffer&&this.audioTimestampOffset_!==g&&(Rb({type:"audio",sourceUpdater:this,action:Qb.timestampOffset(g),name:"timestampOffset"}),this.audioTimestampOffset_=
g);return this.audioTimestampOffset_};f.videoTimestampOffset=function(g){"undefined"!==typeof g&&this.videoBuffer&&this.videoTimestampOffset!==g&&(Rb({type:"video",sourceUpdater:this,action:Qb.timestampOffset(g),name:"timestampOffset"}),this.videoTimestampOffset_=g);return this.videoTimestampOffset_};f.audioQueueCallback=function(g){this.audioBuffer&&Rb({type:"audio",sourceUpdater:this,action:Qb.callback(g),name:"callback"})};f.videoQueueCallback=function(g){this.videoBuffer&&Rb({type:"video",sourceUpdater:this,
action:Qb.callback(g),name:"callback"})};f.dispose=function(){var g=this;this.trigger("dispose");Jr.forEach(function(k){g.abort(k);if(g.canRemoveSourceBuffer())g.removeSourceBuffer(k);else g[k+"QueueCallback"](function(){return Mm(k,g)})});this.videoAppendQueued_=!1;this.delayedAudioAppendQueue_.length=0;this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);this.off()};return l}(V.EventTarget),Pm=new Uint8Array(["\n","\n"].map(function(m){return m.charCodeAt(0)})),
Kr=function(m){function l(g,k){void 0===k&&(k={});k=m.call(this,g,k)||this;k.handlePartialData_=!1;k.mediaSource_=null;k.subtitlesTrack_=null;k.loaderType_="subtitle";k.featuresNativeTextTracks_=g.featuresNativeTextTracks;k.shouldSaveSegmentTimingInfo_=!1;return k}zc(l,m);var f=l.prototype;f.createTransmuxer_=function(){return null};f.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return V.createTimeRanges();var g=this.subtitlesTrack_.cues;
return V.createTimeRanges([[g[0].startTime,g[g.length-1].startTime]])};f.initSegmentForMap=function(g,k){void 0===k&&(k=!1);if(!g)return null;var u=vf(g),x=this.initSegments_[u];k&&!x&&g.bytes&&(k=new Uint8Array(Pm.byteLength+g.bytes.byteLength),k.set(g.bytes),k.set(Pm,g.bytes.byteLength),this.initSegments_[u]=x={resolvedUri:g.resolvedUri,byterange:g.byterange,bytes:k});return x||g};f.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()};f.init_=function(){this.state=
"READY";this.resetEverything();return this.monitorBuffer_()};f.track=function(g){if("undefined"===typeof g)return this.subtitlesTrack_;this.subtitlesTrack_=g;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_};f.remove=function(g,k){ue(g,k,this.subtitlesTrack_)};f.fillBuffer_=function(){var g=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var k=this.checkBuffer_(this.buffered_(),
this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(k=this.skipEmptySegments_(k))null===this.syncController_.timestampOffsetForTimeline(k.timeline)?(this.syncController_.one("timestampoffset",function(){g.state="READY";g.paused()||g.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(k)};f.skipEmptySegments_=function(g){for(;g&&g.segment.empty;)g=this.generateSegmentInfo_(g.playlist,g.mediaIndex+1,g.startOfSegment+g.duration,g.isSyncRequest);
return g};f.stopForError=function(g){this.error(g);this.state="READY";this.pause();this.trigger("error")};f.segmentRequestFinished_=function(g,k,u){var x=this;if(this.subtitlesTrack_)if(this.saveTransferStats_(k.stats),this.pendingSegment_)if(g)-101===g.code&&this.handleTimeout_(),-102===g.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(g);else{var A=this.pendingSegment_;this.saveBandwidthRelatedStats_(A.duration,k.stats);this.state="APPENDING";this.trigger("appending");
var H=A.segment;H.map&&(H.map.bytes=k.map.bytes);A.bytes=k.bytes;if("function"!==typeof ra.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var R=function(){x.subtitlesTrack_.tech_.off("vttjsloaded",W);x.stopForError({message:"Error loading vtt.js"})};var W=function(){x.subtitlesTrack_.tech_.off("vttjserror",R);x.segmentRequestFinished_(g,k,u)};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",W);this.subtitlesTrack_.tech_.one("vttjserror",R)}else{H.requested=!0;
try{this.parseVTTCues_(A)}catch(M){this.stopForError({message:M.message});return}this.updateTimeMapping_(A,this.syncController_.timelines[A.timeline],this.playlist_);A.timingInfo=A.cues.length?{start:A.cues[0].startTime,end:A.cues[A.cues.length-1].endTime}:{start:A.startOfSegment,end:A.startOfSegment+A.duration};A.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(A.byteLength=A.bytes.byteLength,this.mediaSecondsLoaded+=H.duration,A.cues.forEach(function(M){x.subtitlesTrack_.addCue(x.featuresNativeTextTracks_?
new ra.VTTCue(M.startTime,M.endTime,M.text):M)}),Gr(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"};f.handleData_=function(){};f.updateTimingInfoEnd_=function(){};f.parseVTTCues_=function(g){var k=!1;if("function"===typeof ra.TextDecoder)var u=new ra.TextDecoder("utf8");else u=ra.WebVTT.StringDecoder(),k=!0;u=new ra.WebVTT.Parser(ra,ra.vttjs,u);g.cues=[];g.timestampmap={MPEGTS:0,LOCAL:0};u.oncue=g.cues.push.bind(g.cues);
u.ontimestampmap=function(A){g.timestampmap=A};u.onparsingerror=function(A){V.log.warn("Error encountered when parsing cues: "+A.message)};if(g.segment.map){var x=g.segment.map.bytes;k&&(x=decodeURIComponent(escape(String.fromCharCode.apply(null,x))));u.parse(x)}x=g.bytes;k&&(x=decodeURIComponent(escape(String.fromCharCode.apply(null,x))));u.parse(x);u.flush()};f.updateTimeMapping_=function(g,k,u){var x=g.segment;if(k)if(g.cues.length){var A=g.timestampmap,H=A.MPEGTS/9E4-A.LOCAL+k.mapping;g.cues.forEach(function(R){R.startTime+=
H;R.endTime+=H});u.syncInfo||(u.syncInfo={mediaSequence:u.mediaSequence+g.mediaIndex,time:Math.min(g.cues[0].startTime,g.cues[g.cues.length-1].startTime-x.duration)})}else x.empty=!0};return l}(li),Qm=[{name:"VOD",run:function(m,l,f,g,k){return Infinity!==f?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(m,l,f,g,k){if(!Object.keys(m.timelineToDatetimeMappings).length)return null;l=l.segments||[];g=f=null;k=k||0;for(var u=0;u<l.length;u++){var x=l[u],A=m.timelineToDatetimeMappings[x.timeline];
if(A&&x.dateTimeObject){x=x.dateTimeObject.getTime()/1E3+A;A=Math.abs(k-x);if(null!==g&&(0===A||g<A))break;g=A;f={time:x,segmentIndex:u}}}return f}},{name:"Segment",run:function(m,l,f,g,k){m=l.segments||[];f=l=null;k=k||0;for(var u=0;u<m.length;u++){var x=m[u];if(x.timeline===g&&"undefined"!==typeof x.start){var A=Math.abs(k-x.start);if(null!==f&&f<A)break;if(!l||null===f||f>=A)f=A,l={time:x.start,segmentIndex:u}}}return l}},{name:"Discontinuity",run:function(m,l,f,g,k){f=null;k=k||0;if(l.discontinuityStarts&&
l.discontinuityStarts.length){g=null;for(var u=0;u<l.discontinuityStarts.length;u++){var x=l.discontinuityStarts[u],A=m.discontinuities[l.discontinuitySequence+u+1];if(A){var H=Math.abs(k-A.time);if(null!==g&&g<H)break;if(!f||null===g||g>=H)g=H,f={time:A.time,segmentIndex:x}}}}return f}},{name:"Playlist",run:function(m,l,f,g,k){return l.syncInfo?{time:l.syncInfo.time,segmentIndex:l.syncInfo.mediaSequence-l.mediaSequence}:null}}],Lr=function(m){function l(g){g=m.call(this)||this;g.timelines=[];g.discontinuities=
[];g.timelineToDatetimeMappings={};g.logger_=lc("SyncController");return g}zc(l,m);var f=l.prototype;f.getSyncPoint=function(g,k,u,x){g=this.runStrategies_(g,k,u,x);return g.length?this.selectSyncPoint_(g,{key:"time",value:x}):null};f.getExpiredTime=function(g,k){if(!g||!g.segments)return null;k=this.runStrategies_(g,k,g.discontinuitySequence,0);if(!k.length)return null;k=this.selectSyncPoint_(k,{key:"segmentIndex",value:0});0<k.segmentIndex&&(k.time*=-1);return Math.abs(k.time+oe(g,k.segmentIndex,
0))};f.runStrategies_=function(g,k,u,x){for(var A=[],H=0;H<Qm.length;H++){var R=Qm[H],W=R.run(this,g,k,u,x);W&&(W.strategy=R.name,A.push({strategy:R.name,syncPoint:W}))}return A};f.selectSyncPoint_=function(g,k){for(var u=g[0].syncPoint,x=Math.abs(g[0].syncPoint[k.key]-k.value),A=g[0].strategy,H=1;H<g.length;H++){var R=Math.abs(g[H].syncPoint[k.key]-k.value);R<x&&(x=R,u=g[H].syncPoint,A=g[H].strategy)}this.logger_("syncPoint for ["+k.key+": "+k.value+"] chosen with strategy ["+(A+"]: [time:"+u.time+
", segmentIndex:")+(u.segmentIndex+"]"));return u};f.saveExpiredSegmentInfo=function(g,k){for(var u=k.mediaSequence-g.mediaSequence-1;0<=u;u--){var x=g.segments[u];if(x&&"undefined"!==typeof x.start){k.syncInfo={mediaSequence:g.mediaSequence+u,time:x.start};this.logger_("playlist refresh sync: [time:"+k.syncInfo.time+", mediaSequence: "+(k.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}};f.setDateTimeMappingForStart=function(g){this.timelineToDatetimeMappings={};if(g.segments&&
g.segments.length&&g.segments[0].dateTimeObject){g=g.segments[0];var k=g.dateTimeObject.getTime()/1E3;this.timelineToDatetimeMappings[g.timeline]=-k}};f.saveSegmentTimingInfo=function(g){var k=g.segmentInfo;g=g.shouldSaveTimelineMapping;var u=this.calculateSegmentTimeMapping_(k,k.timingInfo,g),x=k.segment;u&&(this.saveDiscontinuitySyncInfo_(k),k.playlist.syncInfo||(k.playlist.syncInfo={mediaSequence:k.playlist.mediaSequence+k.mediaIndex,time:x.start}));k=x.dateTimeObject;x.discontinuity&&g&&k&&(this.timelineToDatetimeMappings[x.timeline]=
-(k.getTime()/1E3))};f.timestampOffsetForTimeline=function(g){return"undefined"===typeof this.timelines[g]?null:this.timelines[g].time};f.mappingForTimeline=function(g){return"undefined"===typeof this.timelines[g]?null:this.timelines[g].mapping};f.calculateSegmentTimeMapping_=function(g,k,u){var x=g.segment,A=this.timelines[g.timeline];if("number"===typeof g.timestampOffset)A={time:g.startOfSegment,mapping:g.startOfSegment-k.start},u&&(this.timelines[g.timeline]=A,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+g.timeline+": [time: "+(A.time+"] [mapping: "+A.mapping+"]"))),x.start=g.startOfSegment,x.end=k.end+A.mapping;else if(A)x.start=k.start+A.mapping,x.end=k.end+A.mapping;else return!1;return!0};f.saveDiscontinuitySyncInfo_=function(g){var k=g.playlist,u=g.segment;if(u.discontinuity)this.discontinuities[u.timeline]={time:u.start,accuracy:0};else if(k.discontinuityStarts&&k.discontinuityStarts.length)for(var x=0;x<k.discontinuityStarts.length;x++){var A=k.discontinuityStarts[x],
H=k.discontinuitySequence+x+1,R=A-g.mediaIndex,W=Math.abs(R);if(!this.discontinuities[H]||this.discontinuities[H].accuracy>W)A=0>R?u.start-oe(k,g.mediaIndex,A):u.end+oe(k,g.mediaIndex+1,A),this.discontinuities[H]={time:A,accuracy:W}}};f.dispose=function(){this.trigger("dispose");this.off()};return l}(V.EventTarget),Mr=function(m){function l(){var g=m.call(this)||this;g.pendingTimelineChanges_={};g.lastTimelineChanges_={};return g}zc(l,m);var f=l.prototype;f.clearPendingTimelineChange=function(g){this.pendingTimelineChanges_[g]=
null;this.trigger("pendingtimelinechange")};f.pendingTimelineChange=function(g){var k=g.type,u=g.from;g=g.to;"number"===typeof u&&"number"===typeof g&&(this.pendingTimelineChanges_[k]={type:k,from:u,to:g},this.trigger("pendingtimelinechange"));return this.pendingTimelineChanges_[k]};f.lastTimelineChange=function(g){var k=g.type,u=g.from;g=g.to;"number"===typeof u&&"number"===typeof g&&(this.lastTimelineChanges_[k]={type:k,from:u,to:g},delete this.pendingTimelineChanges_[k],this.trigger("timelinechange"));
return this.lastTimelineChanges_[k]};f.dispose=function(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off()};return l}(V.EventTarget),Nr=dm(em(function(){function m(W,M){for(var T=0;T<M.length;T++){var Q=M[T];Q.enumerable=Q.enumerable||!1;Q.configurable=!0;"value"in Q&&(Q.writable=!0);Object.defineProperty(W,Q.key,Q)}}var l=function(W,M,T){M&&m(W.prototype,M);T&&m(W,T);return W},f=function(W,M){W.prototype=Object.create(M.prototype);W.prototype.constructor=
W;W.__proto__=M},g=function(){function W(){this.listeners={}}var M=W.prototype;M.on=function(T,Q){this.listeners[T]||(this.listeners[T]=[]);this.listeners[T].push(Q)};M.off=function(T,Q){if(!this.listeners[T])return!1;Q=this.listeners[T].indexOf(Q);this.listeners[T]=this.listeners[T].slice(0);this.listeners[T].splice(Q,1);return-1<Q};M.trigger=function(T){var Q=this.listeners[T];if(Q)if(2===arguments.length)for(var na=Q.length,oa=0;oa<na;++oa)Q[oa].call(this,arguments[1]);else{na=Array.prototype.slice.call(arguments,
1);oa=Q.length;for(var za=0;za<oa;++za)Q[za].apply(this,na)}};M.dispose=function(){this.listeners={}};M.pipe=function(T){this.on("data",function(Q){T.push(Q)})};return W}(),k=null,u=function(){function W(M){if(!k){var T=[[[],[],[],[],[]],[[],[],[],[],[]]],Q=T[0],na=T[1],oa=Q[4],za=na[4],ea,ka,sa,Ja=[],Va=[],rb;for(ea=0;256>ea;ea++)Va[(Ja[ea]=ea<<1^283*(ea>>7))^ea]=ea;for(ka=sa=0;!oa[ka];ka^=rb||1,sa=Va[sa]||1){var bb=sa^sa<<1^sa<<2^sa<<3^sa<<4;bb=bb>>8^bb&255^99;oa[ka]=bb;za[bb]=ka;var ob=Ja[ea=Ja[rb=
Ja[ka]]];var Pb=16843009*ob^65537*ea^257*rb^16843008*ka;ob=257*Ja[bb]^16843008*bb;for(ea=0;4>ea;ea++)Q[ea][ka]=ob=ob<<24^ob>>>8,na[ea][bb]=Pb=Pb<<24^Pb>>>8}for(ea=0;5>ea;ea++)Q[ea]=Q[ea].slice(0),na[ea]=na[ea].slice(0);k=T}this._tables=[[k[0][0].slice(),k[0][1].slice(),k[0][2].slice(),k[0][3].slice(),k[0][4].slice()],[k[1][0].slice(),k[1][1].slice(),k[1][2].slice(),k[1][3].slice(),k[1][4].slice()]];T=this._tables[0][4];Q=this._tables[1];oa=M.length;za=1;if(4!==oa&&6!==oa&&8!==oa)throw Error("Invalid aes key size");
ka=M.slice(0);sa=[];this._key=[ka,sa];for(M=oa;M<4*oa+28;M++){na=ka[M-1];if(0===M%oa||8===oa&&4===M%oa)na=T[na>>>24]<<24^T[na>>16&255]<<16^T[na>>8&255]<<8^T[na&255],0===M%oa&&(na=na<<8^na>>>24^za<<24,za=za<<1^283*(za>>7));ka[M]=ka[M-oa]^na}for(oa=0;M;oa++,M--)na=ka[oa&3?M:M-4],sa[oa]=4>=M||4>oa?na:Q[0][T[na>>>24]]^Q[1][T[na>>16&255]]^Q[2][T[na>>8&255]]^Q[3][T[na&255]]}W.prototype.decrypt=function(M,T,Q,na,oa,za){var ea=this._key[1];M^=ea[0];na^=ea[1];Q^=ea[2];T^=ea[3];var ka=ea.length/4-2,sa,Ja=4;
var Va=this._tables[1];var rb=Va[0],bb=Va[1],ob=Va[2],Pb=Va[3],nc=Va[4];for(sa=0;sa<ka;sa++){Va=rb[M>>>24]^bb[na>>16&255]^ob[Q>>8&255]^Pb[T&255]^ea[Ja];var Fd=rb[na>>>24]^bb[Q>>16&255]^ob[T>>8&255]^Pb[M&255]^ea[Ja+1];var Rh=rb[Q>>>24]^bb[T>>16&255]^ob[M>>8&255]^Pb[na&255]^ea[Ja+2];T=rb[T>>>24]^bb[M>>16&255]^ob[na>>8&255]^Pb[Q&255]^ea[Ja+3];Ja+=4;M=Va;na=Fd;Q=Rh}for(sa=0;4>sa;sa++)oa[(3&-sa)+za]=nc[M>>>24]<<24^nc[na>>16&255]<<16^nc[Q>>8&255]<<8^nc[T&255]^ea[Ja++],Va=M,M=na,na=Q,Q=T,T=Va};return W}(),
x=function(W){function M(){var Q=W.call(this,g)||this;Q.jobs=[];Q.delay=1;Q.timeout_=null;return Q}f(M,W);var T=M.prototype;T.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};T.push=function(Q){this.jobs.push(Q);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return M}(g),A=function(W){return W<<24|(W&65280)<<8|(W&16711680)>>8|W>>>24},H=function(){function W(M,T,Q,na){var oa=W.STEP,
za=new Int32Array(M.buffer),ea=new Uint8Array(M.byteLength);M=0;this.asyncStream_=new x;this.asyncStream_.push(this.decryptChunk_(za.subarray(M,M+oa),T,Q,ea));for(M=oa;M<za.length;M+=oa)Q=new Uint32Array([A(za[M-4]),A(za[M-3]),A(za[M-2]),A(za[M-1])]),this.asyncStream_.push(this.decryptChunk_(za.subarray(M,M+oa),T,Q,ea));this.asyncStream_.push(function(){na(null,ea.subarray(0,ea.byteLength-ea[ea.byteLength-1]))})}W.prototype.decryptChunk_=function(M,T,Q,na){return function(){var oa=new Int32Array(M.buffer,
M.byteOffset,M.byteLength>>2),za=new u(Array.prototype.slice.call(T)),ea=new Uint8Array(M.byteLength),ka=new Int32Array(ea.buffer),sa;var Ja=Q[0];var Va=Q[1];var rb=Q[2];var bb=Q[3];for(sa=0;sa<oa.length;sa+=4){var ob=A(oa[sa]);var Pb=A(oa[sa+1]);var nc=A(oa[sa+2]);var Fd=A(oa[sa+3]);za.decrypt(ob,Pb,nc,Fd,ka,sa);ka[sa]=A(ka[sa]^Ja);ka[sa+1]=A(ka[sa+1]^Va);ka[sa+2]=A(ka[sa+2]^rb);ka[sa+3]=A(ka[sa+3]^bb);Ja=ob;Va=Pb;rb=nc;bb=Fd}na.set(ea,M.byteOffset)}};l(W,null,[{key:"STEP",get:function(){return 32E3}}]);
return W}(),R=function(W){var M={};Object.keys(W).forEach(function(T){var Q=W[T];ArrayBuffer.isView(Q)?M[T]={bytes:Q.buffer,byteOffset:Q.byteOffset,byteLength:Q.byteLength}:M[T]=Q});return M};self.onmessage=function(W){var M=W.data;W=new Uint8Array(M.encrypted.bytes,M.encrypted.byteOffset,M.encrypted.byteLength);var T=new Uint32Array(M.key.bytes,M.key.byteOffset,M.key.byteLength/4),Q=new Uint32Array(M.iv.bytes,M.iv.byteOffset,M.iv.byteLength/4);new H(W,T,Q,function(na,oa){self.postMessage(R({source:M.source,
decrypted:oa}),[oa.buffer])})}})),Or=cm(Nr),Pr=function(m){var l=m["default"]?"main":"alternative";m.characteristics&&0<=m.characteristics.indexOf("public.accessibility.describes-video")&&(l="main-desc");return l},Hf=function(m,l){m.abort();m.pause();l&&l.activePlaylistLoader&&(l.activePlaylistLoader.pause(),l.activePlaylistLoader=null)},Qr=function(m,l){return function(){var f=l.segmentLoaders,g=f[m],k=f.main;f=l.mediaTypes[m];var u=f.activeTrack();u=f.activeGroup(u);var x=f.activePlaylistLoader;
Hf(g,f);u&&(u.playlistLoader?(g.resyncLoader(),g=u.playlistLoader,f.activePlaylistLoader=g,g.load()):x&&k.resetEverything())}},Rr=function(m,l){return function(){var f=l.segmentLoaders[m];f.abort();f.pause()}},Sr=function(m,l){return function(){var f=l.segmentLoaders,g=f[m],k=f.main;f=l.mediaTypes[m];var u=f.activeTrack(),x=f.activeGroup(u),A=f.activePlaylistLoader;Hf(g,f);if(x){if("AUDIO"===m){if(!x.playlistLoader){k.setAudio(!0);k.resetEverything();return}g.setAudio(!0);k.setAudio(!1)}A===x.playlistLoader?
(g=x.playlistLoader,f.activePlaylistLoader=g,g.load()):(g.track&&g.track(u),g.resetEverything(),g=x.playlistLoader,f.activePlaylistLoader=g,g.load())}}},If={AUDIO:function(m,l){return function(){var f=l.mediaTypes[m],g=l.blacklistCurrentPlaylist;Hf(l.segmentLoaders[m],f);var k=f.activeTrack(),u=f.activeGroup();u=(u.filter(function(A){return A["default"]})[0]||u[0]).id;u=f.tracks[u];if(k===u)g({message:"Problem encountered loading the default audio track."});else{V.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
for(var x in f.tracks)f.tracks[x].enabled=f.tracks[x]===u;f.onTrackChanged()}}},SUBTITLES:function(m,l){return function(){var f=l.segmentLoaders[m],g=l.mediaTypes[m];V.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Hf(f,g);if(f=g.activeTrack())f.mode="disabled";g.onTrackChanged()}}},Rm={AUDIO:function(m,l,f){if(l){var g=f.tech,k=f.requestOptions,u=f.segmentLoaders[m];l.on("loadedmetadata",function(){var x=l.media();u.playlist(x,k);(!g.paused()||x.endList&&"none"!==
g.preload())&&u.load()});l.on("loadedplaylist",function(){u.playlist(l.media(),k);g.paused()||u.load()});l.on("error",If[m](m,f))}},SUBTITLES:function(m,l,f){var g=f.tech,k=f.requestOptions,u=f.segmentLoaders[m],x=f.mediaTypes[m];l.on("loadedmetadata",function(){var A=l.media();u.playlist(A,k);u.track(x.activeTrack());(!g.paused()||A.endList&&"none"!==g.preload())&&u.load()});l.on("loadedplaylist",function(){u.playlist(l.media(),k);g.paused()||u.load()});l.on("error",If[m](m,f))}},Tr={AUDIO:function(m,
l){var f=l.vhs,g=l.sourceType,k=l.segmentLoaders[m],u=l.requestOptions,x=l.master,A=x.mediaGroups,H=x.playlists;x=l.mediaTypes[m];var R=x.groups,W=x.tracks,M=l.masterPlaylistLoader;A[m]&&0!==Object.keys(A[m]).length||(A[m]={main:{"default":{"default":!0}}});x=function(Q){R[Q]||(R[Q]=[]);var na=H.filter(function(ea){return ea.attributes[m]===Q}),oa=function(ea){var ka=A[m][Q][ea];!na.filter(function(Ja){return Ja.resolvedUri!==ka.resolvedUri}).length&&na.length&&delete ka.resolvedUri;var sa=void 0;
sa="vhs-json"===g&&ka.playlists?new Ed(ka.playlists[0],f,u):ka.resolvedUri?new Ed(ka.resolvedUri,f,u):ka.playlists&&"dash"===g?new Qh(ka.playlists[0],f,u,M):null;ka=V.mergeOptions({id:ea,playlistLoader:sa},ka);Rm[m](m,ka.playlistLoader,l);R[Q].push(ka);"undefined"===typeof W[ea]&&(sa=new V.AudioTrack({id:ea,kind:Pr(ka),enabled:!1,language:ka.language,"default":ka["default"],label:ea}),W[ea]=sa)},za;for(za in A[m][Q])oa(za)};for(var T in A[m])x(T);k.on("error",If[m](m,l))},SUBTITLES:function(m,l){var f=
l.tech,g=l.vhs,k=l.sourceType,u=l.segmentLoaders[m],x=l.requestOptions,A=l.master.mediaGroups,H=l.mediaTypes[m],R=H.groups;H=H.tracks;var W=l.masterPlaylistLoader,M;for(M in A[m]){R[M]||(R[M]=[]);for(var T in A[m][M])if(!A[m][M][T].forced){var Q=A[m][M][T],na=void 0;if("hls"===k)na=new Ed(Q.resolvedUri,g,x);else if("dash"===k){if(!Q.playlists.filter(function(oa){return Infinity!==oa.excludeUntil}).length)return;na=new Qh(Q.playlists[0],g,x,W)}else"vhs-json"===k&&(na=new Ed(Q.playlists?Q.playlists[0]:
Q.resolvedUri,g,x));Q=V.mergeOptions({id:T,playlistLoader:na},Q);Rm[m](m,Q.playlistLoader,l);R[M].push(Q);"undefined"===typeof H[T]&&(Q=f.addRemoteTextTrack({id:T,kind:"subtitles","default":Q["default"]&&Q.autoselect,language:Q.language,label:T},!1).track,H[T]=Q)}}u.on("error",If[m](m,l))},"CLOSED-CAPTIONS":function(m,l){var f=l.tech,g=l.master.mediaGroups,k=l.mediaTypes[m];l=k.groups;k=k.tracks;for(var u in g[m]){l[u]||(l[u]=[]);for(var x in g[m][u]){var A=g[m][u][x];A.instreamId.match(/CC\d/)&&
(l[u].push(V.mergeOptions({id:x},A)),"undefined"===typeof k[x]&&(A=f.addRemoteTextTrack({id:A.instreamId,kind:"captions","default":A["default"]&&A.autoselect,language:A.language,label:x},!1).track,k[x]=A))}}}},Ur=function(m,l){return function(f){var g=l.mediaTypes[m].groups,k=l.masterPlaylistLoader.media();if(!k)return null;var u=null;k.attributes[m]&&(u=g[k.attributes[m]]);u=u||g.main;return"undefined"===typeof f?u:null===f?null:u.filter(function(x){return x.id===f.id})[0]||null}},Vr={AUDIO:function(m,
l){return function(){var f=l.mediaTypes[m].tracks,g;for(g in f)if(f[g].enabled)return f[g];return null}},SUBTITLES:function(m,l){return function(){var f=l.mediaTypes[m].tracks,g;for(g in f)if("showing"===f[g].mode||"hidden"===f[g].mode)return f[g];return null}}},Wr=function(m){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(H){Tr[H](H,m)});var l=m.mediaTypes,f=m.masterPlaylistLoader,g=m.tech,k=m.vhs;["AUDIO","SUBTITLES"].forEach(function(H){l[H].activeGroup=Ur(H,m);l[H].activeTrack=Vr[H](H,
m);l[H].onGroupChanged=Qr(H,m);l[H].onGroupChanging=Rr(H,m);l[H].onTrackChanged=Sr(H,m)});var u=l.AUDIO.activeGroup();u&&(u=(u.filter(function(H){return H["default"]})[0]||u[0]).id,l.AUDIO.tracks[u].enabled=!0,l.AUDIO.onTrackChanged());f.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(H){return l[H].onGroupChanged()})});f.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(H){return l[H].onGroupChanging()})});var x=function(){l.AUDIO.onTrackChanged();g.trigger({type:"usage",
name:"vhs-audio-change"});g.trigger({type:"usage",name:"hls-audio-change"})};g.audioTracks().addEventListener("change",x);g.remoteTextTracks().addEventListener("change",l.SUBTITLES.onTrackChanged);k.on("dispose",function(){g.audioTracks().removeEventListener("change",x);g.remoteTextTracks().removeEventListener("change",l.SUBTITLES.onTrackChanged)});g.clearTracks("audio");for(var A in l.AUDIO.tracks)g.audioTracks().addTrack(l.AUDIO.tracks[A])},Xr=function(){var m={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(l){m[l]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Lc,activeTrack:Lc,onGroupChanged:Lc,onTrackChanged:Lc}});return m},ed,Yr="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),Zr=function(m){return this.audioSegmentLoader_[m]+this.mainSegmentLoader_[m]},$r=function(m){var l=m.currentPlaylist,f=m.nextPlaylist,g=m.forwardBuffer,k=m.bufferLowWaterLine,u=m.bufferHighWaterLine,x=m.duration,A=m.experimentalBufferBasedABR;
m=m.log;if(!f)return V.log.warn("We received no playlist to switch to. Please check your stream."),!1;var H="allowing switch "+(l&&l.id||"null")+" -> "+f.id;if(!l||!l.endList)return m(H+" as current playlist "+(l?"is live":"is not set")),!0;if(f.id===l.id)return!1;var R=A?nb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:nb.MAX_BUFFER_LOW_WATER_LINE;if(x<R)return m(H+" as duration < max low water line ("+x+" < "+R+")"),!0;f=f.attributes.BANDWIDTH;l=l.attributes.BANDWIDTH;if(f<l&&(!A||g<u))return k=H+" as next bandwidth < current bandwidth ("+
f+" < "+l+")",A&&(k+=" and forwardBuffer < bufferHighWaterLine ("+g+" < "+u+")"),m(k),!0;if((!A||f>l)&&g>=k)return g=H+" as forwardBuffer >= bufferLowWaterLine ("+g+" >= "+k+")",A&&(g+=" and next bandwidth > current bandwidth ("+f+" > "+l+")"),m(g),!0;m("not "+H+" as no switching criteria met");return!1},as=function(m){function l(g){var k=m.call(this)||this;var u=g.src,x=g.handleManifestRedirects,A=g.withCredentials,H=g.tech,R=g.bandwidth,W=g.externVhs,M=g.useCueTags,T=g.blacklistDuration,Q=g.enableLowInitialPlaylist,
na=g.sourceType,oa=g.cacheEncryptionKeys,za=g.handlePartialData,ea=g.experimentalBufferBasedABR;if(!u)throw Error("A non-empty playlist URL or JSON manifest string is required");ed=W;k.experimentalBufferBasedABR=!!ea;k.withCredentials=A;k.tech_=H;k.vhs_=H.vhs;k.sourceType_=na;k.useCueTags_=M;k.blacklistDuration=T;k.enableLowInitialPlaylist=Q;k.useCueTags_&&(k.cueTagsTrack_=k.tech_.addTextTrack("metadata","ad-cues"),k.cueTagsTrack_.inBandMetadataTrackDispatchType="");k.requestOptions_={withCredentials:A,
handleManifestRedirects:x,timeout:null};k.on("error",k.pauseLoading);k.mediaTypes_=Xr();k.mediaSource=new ra.MediaSource;k.handleDurationChange_=k.handleDurationChange_.bind(Tb(k));k.handleSourceOpen_=k.handleSourceOpen_.bind(Tb(k));k.handleSourceEnded_=k.handleSourceEnded_.bind(Tb(k));k.mediaSource.addEventListener("durationchange",k.handleDurationChange_);k.mediaSource.addEventListener("sourceopen",k.handleSourceOpen_);k.mediaSource.addEventListener("sourceended",k.handleSourceEnded_);k.seekable_=
V.createTimeRanges();k.hasPlayed_=!1;k.syncController_=new Lr(g);k.segmentMetadataTrack_=H.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;k.decrypter_=new Or;k.sourceUpdater_=new Om(k.mediaSource);k.inbandTextTracks_={};k.timelineChangeController_=new Mr;x={vhs:k.vhs_,parse708captions:g.parse708captions,mediaSource:k.mediaSource,currentTime:k.tech_.currentTime.bind(k.tech_),seekable:function(){return k.seekable()},seeking:function(){return k.tech_.seeking()},duration:function(){return k.duration()},
hasPlayed:function(){return k.hasPlayed_},goalBufferLength:function(){return k.goalBufferLength()},bandwidth:R,syncController:k.syncController_,decrypter:k.decrypter_,sourceType:k.sourceType_,inbandTextTracks:k.inbandTextTracks_,cacheEncryptionKeys:oa,handlePartialData:za,sourceUpdater:k.sourceUpdater_,timelineChangeController:k.timelineChangeController_};k.masterPlaylistLoader_="dash"===k.sourceType_?new Qh(u,k.vhs_,k.requestOptions_):new Ed(u,k.vhs_,k.requestOptions_);k.setupMasterPlaylistLoaderListeners_();
k.mainSegmentLoader_=new li(V.mergeOptions(x,{segmentMetadataTrack:k.segmentMetadataTrack_,loaderType:"main"}),g);k.audioSegmentLoader_=new li(V.mergeOptions(x,{loaderType:"audio"}),g);k.subtitleSegmentLoader_=new Kr(V.mergeOptions(x,{loaderType:"vtt",featuresNativeTextTracks:k.tech_.featuresNativeTextTracks}),g);k.setupSegmentLoaderListeners_();k.experimentalBufferBasedABR&&(k.masterPlaylistLoader_.one("loadedplaylist",function(){return k.startABRTimer_()}),k.tech_.on("pause",function(){return k.stopABRTimer_()}),
k.tech_.on("play",function(){return k.startABRTimer_()}));Yr.forEach(function(ka){k[ka+"_"]=Zr.bind(Tb(k),ka)});k.logger_=lc("MPC");k.triggeredFmp4Usage=!1;"none"===k.tech_.preload()?(k.loadOnPlay_=function(){k.loadOnPlay_=null;k.masterPlaylistLoader_.load()},k.tech_.one("play",k.loadOnPlay_)):k.masterPlaylistLoader_.load();return k}zc(l,m);var f=l.prototype;f.checkABR_=function(){var g=this.selectPlaylist();this.shouldSwitchToMedia_(g)&&this.masterPlaylistLoader_.media(g)};f.startABRTimer_=function(){var g=
this;this.stopABRTimer_();this.abrTimer_=ra.setInterval(function(){return g.checkABR_()},250)};f.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ra.clearInterval(this.abrTimer_),this.abrTimer_=null)};f.setupMasterPlaylistLoaderListeners_=function(){var g=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var k=g.masterPlaylistLoader_.media(),u=1500*k.targetDuration;Mh(g.masterPlaylistLoader_.master,g.masterPlaylistLoader_.media())?g.requestOptions_.timeout=0:g.requestOptions_.timeout=
u;k.endList&&"none"!==g.tech_.preload()&&(g.mainSegmentLoader_.playlist(k,g.requestOptions_),g.mainSegmentLoader_.load());Wr({sourceType:g.sourceType_,segmentLoaders:{AUDIO:g.audioSegmentLoader_,SUBTITLES:g.subtitleSegmentLoader_,main:g.mainSegmentLoader_},tech:g.tech_,requestOptions:g.requestOptions_,masterPlaylistLoader:g.masterPlaylistLoader_,vhs:g.vhs_,master:g.master(),mediaTypes:g.mediaTypes_,blacklistCurrentPlaylist:g.blacklistCurrentPlaylist.bind(g)});g.triggerPresenceUsage_(g.master(),k);
g.setupFirstPlay();if(!g.mediaTypes_.AUDIO.activePlaylistLoader||g.mediaTypes_.AUDIO.activePlaylistLoader.media())g.trigger("selectedinitialmedia");else g.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){g.trigger("selectedinitialmedia")})});this.masterPlaylistLoader_.on("loadedplaylist",function(){g.loadOnPlay_&&g.tech_.off("play",g.loadOnPlay_);var k=g.masterPlaylistLoader_.media();if(!k){g.excludeUnsupportedVariants_();var u;g.enableLowInitialPlaylist&&(u=g.selectInitialPlaylist());
u||(u=g.selectPlaylist());if(!u||!g.shouldSwitchToMedia_(u))return;g.initialMedia_=u;g.masterPlaylistLoader_.media(g.initialMedia_);if("vhs-json"!==g.sourceType_||!g.initialMedia_.segments)return;k=g.initialMedia_}g.handleUpdatedMediaPlaylist(k)});this.masterPlaylistLoader_.on("error",function(){g.blacklistCurrentPlaylist(g.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){g.mainSegmentLoader_.abort();g.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var k=g.masterPlaylistLoader_.media(),u=1500*k.targetDuration;Mh(g.masterPlaylistLoader_.master,g.masterPlaylistLoader_.media())?g.requestOptions_.timeout=0:g.requestOptions_.timeout=u;g.mainSegmentLoader_.playlist(k,g.requestOptions_);g.mainSegmentLoader_.load();g.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var k=g.masterPlaylistLoader_.media();"playlist-unchanged"!==k.lastExcludeReason_&&g.stuckAtPlaylistEnd_(k)&&(g.blacklistCurrentPlaylist({message:"Playlist no longer updating.",
reason:"playlist-unchanged"}),g.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){g.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"});g.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){g.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"});g.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})};f.handleUpdatedMediaPlaylist=function(g){this.useCueTags_&&this.updateAdCues_(g);
this.mainSegmentLoader_.playlist(g,this.requestOptions_);this.updateDuration(!g.endList);this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())};f.triggerPresenceUsage_=function(g,k){g=g.mediaGroups||{};var u=!0,x=Object.keys(g.AUDIO),A;for(A in g.AUDIO)for(var H in g.AUDIO[A])g.AUDIO[A][H].uri||(u=!1);u&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"}));Object.keys(g.SUBTITLES).length&&
(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"}));ed.Playlist.isAes(k)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"}));x.length&&1<Object.keys(g.AUDIO[x[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}));this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",
name:"hls-playlist-cue-tags"}))};f.shouldSwitchToMedia_=function(g){var k=this.masterPlaylistLoader_.media(),u=this.tech_.buffered();u=u.length?u.end(u.length-1)-this.tech_.currentTime():0;var x=this.bufferLowWaterLine(),A=this.bufferHighWaterLine();return $r({currentPlaylist:k,nextPlaylist:g,forwardBuffer:u,bufferLowWaterLine:x,bufferHighWaterLine:A,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})};f.setupSegmentLoaderListeners_=function(){var g=
this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var u=g.selectPlaylist();g.shouldSwitchToMedia_(u)&&g.masterPlaylistLoader_.media(u);g.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){g.trigger("progress")}));this.mainSegmentLoader_.on("error",function(){g.blacklistCurrentPlaylist(g.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("appenderror",function(){g.error=g.mainSegmentLoader_.error_;g.trigger("error")});
this.mainSegmentLoader_.on("syncinfoupdate",function(){g.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){g.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"});g.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){g.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror",function(){g.error=g.audioSegmentLoader_.error_;g.trigger("error")});this.mainSegmentLoader_.on("ended",function(){g.logger_("main segment loader ended");
g.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(u){g.experimentalBufferBasedABR||(g.delegateLoaders_("all",["abort"]),g.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var k=function(){if(!g.sourceUpdater_.hasCreatedSourceBuffers())return g.tryToCreateSourceBuffers_();var u=g.getCodecsOrExclude_();u&&g.sourceUpdater_.addOrChangeSourceBuffers(u)};this.mainSegmentLoader_.on("trackinfo",
k);this.audioSegmentLoader_.on("trackinfo",k);this.mainSegmentLoader_.on("fmp4",function(){g.triggeredFmp4Usage||(g.tech_.trigger({type:"usage",name:"vhs-fmp4"}),g.tech_.trigger({type:"usage",name:"hls-fmp4"}),g.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("fmp4",function(){g.triggeredFmp4Usage||(g.tech_.trigger({type:"usage",name:"vhs-fmp4"}),g.tech_.trigger({type:"usage",name:"hls-fmp4"}),g.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("ended",function(){g.logger_("audioSegmentLoader ended");
g.onEndOfStream()})};f.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)};f.load=function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()};f.smoothQualityChange_=function(g){void 0===g&&(g=this.selectPlaylist());g!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(g),
this.mainSegmentLoader_.resetLoader())};f.fastQualityChange_=function(g){var k=this;void 0===g&&(g=this.selectPlaylist());g===this.masterPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.masterPlaylistLoader_.media(g),this.mainSegmentLoader_.resetEverything(function(){V.browser.IE_VERSION||V.browser.IS_EDGE?k.tech_.setCurrentTime(k.tech_.currentTime()+.04):k.tech_.setCurrentTime(k.tech_.currentTime())}))};f.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&
this.tech_.setCurrentTime(0);this.hasPlayed_&&this.load();var g=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<g.start(0))return this.tech_.setCurrentTime(g.end(g.length-1))}};f.setupFirstPlay=function(){var g=this,k=this.masterPlaylistLoader_.media();if(!k||this.tech_.paused()||this.hasPlayed_)return!1;if(!k.endList){var u=this.seekable();if(!u.length)return!1;if(V.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){g.trigger("firstplay");
g.tech_.setCurrentTime(u.end(0));g.hasPlayed_=!0}),!1;this.trigger("firstplay");this.tech_.setCurrentTime(u.end(0))}this.hasPlayed_=!0;this.load();return!0};f.handleSourceOpen_=function(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){var g=this.tech_.play();"undefined"!==typeof g&&"function"===typeof g.then&&g.then(null,function(k){})}this.trigger("sourceopen")};f.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var g=this.inbandTextTracks_.metadataTrack_.cues;
if(g&&g.length){var k=this.duration();g[g.length-1].endTime=isNaN(k)||Infinity===Math.abs(k)?Number.MAX_VALUE:k}}};f.handleDurationChange_=function(){this.tech_.trigger("durationchange")};f.onEndOfStream=function(){var g=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(g=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?g&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);g&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())};
f.stuckAtPlaylistEnd_=function(g){if(!this.seekable().length)return!1;var k=this.syncController_.getExpiredTime(g,this.duration());if(null===k)return!1;g=ed.Playlist.playlistEnd(g,k);k=this.tech_.currentTime();var u=this.tech_.buffered();if(!u.length)return g-k<=mc;u=u.end(u.length-1);return u-k<=mc&&g-u<=mc};f.blacklistCurrentPlaylist=function(g,k){void 0===g&&(g={});var u=g.playlist||this.masterPlaylistLoader_.media();k=k||g.blacklistDuration||this.blacklistDuration;if(u){var x=this.masterPlaylistLoader_.master.playlists,
A=x.filter(uf);A=1===A.length&&A[0]===u;if(1===x.length&&Infinity!==k)return V.log.warn("Problem encountered with playlist "+u.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(A);if(A){var H=!1;x.forEach(function(R){if(R!==u){var W=R.excludeUntil;"undefined"!==typeof W&&Infinity!==W&&(H=!0,delete R.excludeUntil)}});H&&(V.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),
this.tech_.trigger("retryplaylist"))}u.excludeUntil=Date.now()+1E3*k;g.reason&&(u.lastExcludeReason_=g.reason);this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"});this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});if(k=this.selectPlaylist())return(g.internal?this.logger_:V.log.warn)((g.internal?"Internal problem":"Problem")+" encountered with playlist "+u.id+"."+((g.message?" "+g.message:"")+" Switching to playlist "+k.id+".")),
k.attributes.AUDIO!==u.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),k.attributes.SUBTITLES!==u.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),g=k.targetDuration/2*1E3||5E3,g="number"===typeof k.lastRequest&&Date.now()-k.lastRequest<=g,this.masterPlaylistLoader_.media(k,A||g);this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error")}else this.error=g,"open"!==
this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")};f.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]);this.stopABRTimer_()};f.delegateLoaders_=function(g,k){var u=this,x=[],A="all"===g;(A||"main"===g)&&x.push(this.masterPlaylistLoader_);var H=[];(A||"audio"===g)&&H.push("AUDIO");if(A||"subtitle"===g)H.push("CLOSED-CAPTIONS"),H.push("SUBTITLES");H.forEach(function(R){(R=u.mediaTypes_[R]&&u.mediaTypes_[R].activePlaylistLoader)&&x.push(R)});
["main","audio","subtitle"].forEach(function(R){var W=u[R+"SegmentLoader_"];!W||g!==R&&"all"!==g||x.push(W)});x.forEach(function(R){return k.forEach(function(W){if("function"===typeof R[W])R[W]()})})};f.setCurrentTime=function(g){var k=ne(this.tech_.buffered(),g);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(k&&k.length)return g;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&
(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()};f.duration=function(){if(!this.masterPlaylistLoader_)return 0;var g=this.masterPlaylistLoader_.media();return g?g.endList?this.mediaSource?this.mediaSource.duration:ed.Playlist.duration(g):Infinity:0};f.seekable=function(){return this.seekable_};f.onSyncInfoUpdate_=function(){if(this.masterPlaylistLoader_){var g=
this.masterPlaylistLoader_.media();if(g){var k=this.syncController_.getExpiredTime(g,this.duration());if(null!==k){var u=this.masterPlaylistLoader_.master.suggestedPresentationDelay,x=ed.Playlist.seekable(g,k,u);if(0!==x.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){g=this.mediaTypes_.AUDIO.activePlaylistLoader.media();k=this.syncController_.getExpiredTime(g,this.duration());if(null===k)return;var A=ed.Playlist.seekable(g,k,u);if(0===A.length)return}if(this.seekable_&&this.seekable_.length){var H=
this.seekable_.end(0);var R=this.seekable_.start(0)}A?A.start(0)>x.end(0)||x.start(0)>A.end(0)?this.seekable_=x:this.seekable_=V.createTimeRanges([[A.start(0)>x.start(0)?A.start(0):x.start(0),A.end(0)<x.end(0)?A.end(0):x.end(0)]]):this.seekable_=x;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===H&&this.seekable_.start(0)===R||(this.logger_("seekable updated ["+Ml(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}};f.updateDuration=function(g){this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",
this.updateDuration_),this.updateDuration_=null);if("open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,g),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else if(g)g=this.seekable(),g.length&&(isNaN(this.mediaSource.duration)||this.mediaSource.duration<g.end(g.length-1))&&this.sourceUpdater_.setDuration(g.end(g.length-1));else{g=this.tech_.buffered();var k=ed.Playlist.duration(this.masterPlaylistLoader_.media());0<g.length&&(k=Math.max(k,g.end(g.length-
1)));this.mediaSource.duration!==k&&this.sourceUpdater_.setDuration(k)}};f.dispose=function(){var g=this;this.trigger("dispose");this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);["AUDIO","SUBTITLES"].forEach(function(k){k=g.mediaTypes_[k].groups;for(var u in k)k[u].forEach(function(x){x.playlistLoader&&x.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();
this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.stopABRTimer_();this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()};f.master=function(){return this.masterPlaylistLoader_.master};f.media=function(){return this.masterPlaylistLoader_.media()||
this.initialMedia_};f.areMediaTypesKnown_=function(){var g=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!this.mainSegmentLoader_.currentMediaInfo_||g&&!this.audioSegmentLoader_.currentMediaInfo_?!1:!0};f.getCodecsOrExclude_=function(){var g=this,k={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};k.video=k.main;var u=se(this.master(),this.media()),x={},A=!!this.mediaTypes_.AUDIO.activePlaylistLoader;k.main.hasVideo&&(x.video=u.video||
k.main.videoCodec||"avc1.4d400d");k.main.isMuxed&&(x.video+=","+(u.audio||k.main.audioCodec||"mp4a.40.2"));if(k.main.hasAudio&&!k.main.isMuxed||k.audio.hasAudio||A)x.audio=u.audio||k.main.audioCodec||k.audio.audioCodec||"mp4a.40.2",k.audio.isFmp4=k.main.hasAudio&&!k.main.isMuxed?k.main.isFmp4:k.audio.isFmp4;if(x.audio||x.video){var H={},R;["video","audio"].forEach(function(T){var Q;if(Q=x.hasOwnProperty(T))Q=x[T],Q=!(k[T].isFmp4?rf(Q):Hh(Q));Q&&(Q=k[T].isFmp4?"browser":"muxer",H[Q]=H[Q]||[],H[Q].push(x[T]),
"audio"===T&&(R=Q))});if(A&&R&&this.media().attributes.AUDIO){var W=this.media().attributes.AUDIO;this.master().playlists.forEach(function(T){(T.attributes&&T.attributes.AUDIO)===W&&T!==g.media()&&(T.excludeUntil=Infinity)});this.logger_("excluding audio group "+W+" as "+R+' does not support codec(s): "'+x.audio+'"')}if(Object.keys(H).length)u=Object.keys(H).reduce(function(T,Q){T&&(T+=", ");return T+=Q+' does not support codec(s): "'+H[Q].join(",")+'"'},"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),
internal:!0,message:u,blacklistDuration:Infinity});else{if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var M=[];["video","audio"].forEach(function(T){var Q=(Ac(g.sourceUpdater_.codecs[T]||"")[0]||{}).type,na=(Ac(x[T]||"")[0]||{}).type;Q&&na&&Q.toLowerCase()!==na.toLowerCase()&&M.push('"'+g.sourceUpdater_.codecs[T]+'" -> "'+x[T]+'"')});if(M.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+M.join(", ")+".",
blacklistDuration:Infinity,internal:!0});return}}return x}}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:Infinity})};f.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var g=this.getCodecsOrExclude_();g&&(this.sourceUpdater_.createSourceBuffers(g),g=[g.video,g.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(g))}};
f.excludeUnsupportedVariants_=function(){var g=this,k=this.master().playlists,u=[];Object.keys(k).forEach(function(x){x=k[x];if(-1===u.indexOf(x.id)){u.push(x.id);var A=se(g.master,x),H=[];!A.audio||Hh(A.audio)||rf(A.audio)||H.push("audio codec "+A.audio);!A.video||Hh(A.video)||rf(A.video)||H.push("video codec "+A.video);A.text&&"stpp.ttml.im1t"===A.text&&H.push("text codec "+A.text);H.length&&(x.excludeUntil=Infinity,g.logger_("excluding "+x.id+" for unsupported: "+H.join(", ")))}})};f.excludeIncompatibleVariants_=
function(g){var k=this,u=[],x=this.master().playlists;g=ji(Ac(g));var A=Em(g),H=g.video&&Ac(g.video)[0]||null,R=g.audio&&Ac(g.audio)[0]||null;Object.keys(x).forEach(function(W){W=x[W];if(-1===u.indexOf(W.id)&&Infinity!==W.excludeUntil){u.push(W.id);var M=[],T=se(k.masterPlaylistLoader_.master,W),Q=Em(T);if(T.audio||T.video)Q!==A&&M.push('codec count "'+Q+'" !== "'+A+'"'),k.sourceUpdater_.canChangeType()||(Q=T.video&&Ac(T.video)[0]||null,T=T.audio&&Ac(T.audio)[0]||null,Q&&H&&Q.type.toLowerCase()!==
H.type.toLowerCase()&&M.push('video codec "'+Q.type+'" !== "'+H.type+'"'),T&&R&&T.type.toLowerCase()!==R.type.toLowerCase()&&M.push('audio codec "'+T.type+'" !== "'+R.type+'"')),M.length&&(W.excludeUntil=Infinity,k.logger_("blacklisting "+W.id+": "+M.join(" && ")))}})};f.updateAdCues_=function(g){var k=0,u=this.seekable();u.length&&(k=u.start(0));u=this.cueTagsTrack_;void 0===k&&(k=0);if(g.segments)for(var x,A=0;A<g.segments.length;A++){var H=g.segments[A];if(!x)b:{x=k+H.duration/2;for(var R=u.cues,
W=0;W<R.length;W++){var M=R[W];if(x>=M.adStartTime&&x<=M.adEndTime){x=M;break b}}x=null}if(x){if("cueIn"in H){x.endTime=k;x.adEndTime=k;k+=H.duration;x=null;continue}if(k<x.endTime){k+=H.duration;continue}x.endTime+=H.duration}else"cueOut"in H&&(x=new ra.VTTCue(k,k+H.duration,H.cueOut),x.adStartTime=k,x.adEndTime=k+parseFloat(H.cueOut),u.addCue(x)),"cueOutCont"in H&&(x=H.cueOutCont.split("/").map(parseFloat),R=x[0],W=x[1],x=new ra.VTTCue(k,k+H.duration,""),x.adStartTime=k-R,x.adEndTime=x.adStartTime+
W,u.addCue(x));k+=H.duration}};f.goalBufferLength=function(){var g=this.tech_.currentTime(),k=nb.GOAL_BUFFER_LENGTH;return Math.min(k+g*nb.GOAL_BUFFER_LENGTH_RATE,Math.max(k,nb.MAX_GOAL_BUFFER_LENGTH))};f.bufferLowWaterLine=function(){var g=this.tech_.currentTime(),k=nb.BUFFER_LOW_WATER_LINE,u=Math.max(k,nb.MAX_BUFFER_LOW_WATER_LINE),x=Math.max(k,nb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(k+g*nb.BUFFER_LOW_WATER_LINE_RATE,this.experimentalBufferBasedABR?x:u)};f.bufferHighWaterLine=
function(){return nb.BUFFER_HIGH_WATER_LINE};return l}(V.EventTarget),bs=function(m,l,f){return function(g){var k=m.master.playlists[l],u=Lh(k),x=uf(k);if("undefined"===typeof g)return x;g?delete k.disabled:k.disabled=!0;g===x||u||(f(),g?m.trigger("renditionenabled"):m.trigger("renditiondisabled"));return g}},cs=function(m,l,f){var g=m.masterPlaylistController_,k=g[(m.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(g);if(l.attributes.RESOLUTION){var u=l.attributes.RESOLUTION;
this.width=u.width;this.height=u.height}this.bandwidth=l.attributes.BANDWIDTH;this.codecs=se(g.master(),l);this.playlist=l;this.id=f;this.enabled=bs(m.playlists,l.id,k)},ds=function(m){var l=m.playlists;m.representations=function(){return l&&l.master&&l.master.playlists?l.master.playlists.filter(function(f){return!Lh(f)}).map(function(f,g){return new cs(m,f,f.id)}):[]}},Sm=["seeking","seeked","pause","playing","error"],es=function(){function m(f){var g=this;this.masterPlaylistController_=f.masterPlaylistController;
this.tech_=f.tech;this.seekable=f.seekable;this.allowSeeksWithinUnsafeLiveWindow=f.allowSeeksWithinUnsafeLiveWindow;this.liveRangeSafeTimeDelta=f.liveRangeSafeTimeDelta;this.media=f.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=lc("PlaybackWatcher");this.logger_("initialize");var k=function(){return g.monitorCurrentTime_()},u=function(){return g.monitorCurrentTime_()},x=function(){return g.techWaiting_()},A=function(){return g.cancelTimer_()},
H=function(){return g.fixesBadSeeks_()},R=this.masterPlaylistController_,W=["main","subtitle","audio"],M={};W.forEach(function(T){M[T]={reset:function(){return g.resetSegmentDownloads_(T)},updateend:function(){return g.checkSegmentDownloads_(T)}};R[T+"SegmentLoader_"].on("appendsdone",M[T].updateend);R[T+"SegmentLoader_"].on("playlistupdate",M[T].reset);g.tech_.on(["seeked","seeking"],M[T].reset)});this.tech_.on("seekablechanged",H);this.tech_.on("waiting",x);this.tech_.on(Sm,A);this.tech_.on("canplay",
u);this.tech_.one("play",k);this.dispose=function(){g.logger_("dispose");g.tech_.off("seekablechanged",H);g.tech_.off("waiting",x);g.tech_.off(Sm,A);g.tech_.off("canplay",u);g.tech_.off("play",k);W.forEach(function(T){R[T+"SegmentLoader_"].off("appendsdone",M[T].updateend);R[T+"SegmentLoader_"].off("playlistupdate",M[T].reset);g.tech_.off(["seeked","seeking"],M[T].reset)});g.checkCurrentTimeTimeout_&&ra.clearTimeout(g.checkCurrentTimeTimeout_);g.cancelTimer_()}}var l=m.prototype;l.monitorCurrentTime_=
function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&ra.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=ra.setTimeout(this.monitorCurrentTime_.bind(this),250)};l.resetSegmentDownloads_=function(f){var g=this.masterPlaylistController_[f+"SegmentLoader_"];0<this[f+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+f+" loader");this[f+"StalledDownloads_"]=0;this[f+"Buffered_"]=g.buffered_()};l.checkSegmentDownloads_=function(f){var g=
this.masterPlaylistController_,k=g[f+"SegmentLoader_"],u=k.buffered_(),x=tq(this[f+"Buffered_"],u);this[f+"Buffered_"]=u;x?this.resetSegmentDownloads_(f):(this[f+"StalledDownloads_"]++,this.logger_("found #"+this[f+"StalledDownloads_"]+" "+f+" appends that did not increase buffer (possible stalled download)",{playlistId:k.playlist_&&k.playlist_.id,buffered:cd(u)}),10>this[f+"StalledDownloads_"]||(this.logger_(f+" loader stalled download exclusion"),this.resetSegmentDownloads_(f),this.tech_.trigger({type:"usage",
name:"vhs-"+f+"-download-exclusion"}),"subtitle"!==f&&g.blacklistCurrentPlaylist({message:"Excessive "+f+" segment downloading detected."},Infinity)))};l.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var f=this.tech_.currentTime(),g=this.tech_.buffered();if(this.lastRecordedTime===f&&(!g.length||f+mc>=g.end(g.length-1)))return this.techWaiting_();
5<=this.consecutiveUpdates&&f===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):f===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=f)}};l.cancelTimer_=function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null};l.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var f=this.seekable(),g=this.tech_.currentTime(),k;this.afterSeekableWindow_(f,g,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&
(k=f.end(f.length-1));this.beforeSeekableWindow_(f,g)&&(k=f.start(0),k+=k===f.end(0)?0:mc);if("undefined"!==typeof k)return this.logger_("Trying to seek outside of seekable at time "+g+" with seekable range "+(Ml(f)+". Seeking to ")+(k+".")),this.tech_.setCurrentTime(k),!0;f=this.tech_.buffered();k=this.media().targetDuration;return(!f.length||f.end(0)-f.start(0)<2*k||g>f.start(0)?0:f.start(0)-g<k)?(k=f.start(0)+mc,this.logger_("Buffered region starts ("+f.start(0)+")  just beyond seek point ("+(g+
"). Seeking to "+k+".")),this.tech_.setCurrentTime(k),!0):!1};l.waiting_=function(){if(!this.techWaiting_()){var f=this.tech_.currentTime(),g=this.tech_.buffered();g=ne(g,f);g.length&&f+3<=g.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(f),this.logger_("Stopped at "+f+" while inside a buffered region ["+(g.start(0)+" -> "+g.end(0)+"]. Attempting to resume playback by seeking to the current time.")),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",
name:"hls-unknown-waiting"}))}};l.techWaiting_=function(){var f=this.seekable(),g=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(f,g))return f=f.end(f.length-1),this.logger_("Fell out of live window at time "+g+". Seeking to live point (seekable end) "+f),this.cancelTimer_(),this.tech_.setCurrentTime(f),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",
name:"hls-live-resync"}),!0;f=this.tech_.vhs.masterPlaylistController_.sourceUpdater_;var k=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:f.audioBuffered(),videoBuffered:f.videoBuffered(),currentTime:g}))return this.cancelTimer_(),this.tech_.setCurrentTime(g),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;f=Kh(k,g);return 0<f.length?(k=f.start(0)-g,this.logger_("Stopped at "+g+", setting timer for "+k+", seeking to "+
f.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*k,g),!0):!1};l.afterSeekableWindow_=function(f,g,k,u){void 0===u&&(u=!1);if(!f.length)return!1;var x=f.end(f.length-1)+mc;!k.endList&&u&&(x=f.end(f.length-1)+3*k.targetDuration);return g>x?!0:!1};l.beforeSeekableWindow_=function(f,g){return f.length&&0<f.start(0)&&g<f.start(0)-this.liveRangeSafeTimeDelta?!0:!1};l.videoUnderflow_=function(f){var g=f.videoBuffered,k=f.audioBuffered;f=f.currentTime;if(g){var u;if(g.length&&
k.length){var x=ne(g,f-3);g=ne(g,f);k=ne(k,f);k.length&&!g.length&&x.length&&(u={start:x.end(0),end:k.end(0)})}else Kh(g,f).length||(u=this.gapFromVideoUnderflow_(g,f));return u?(this.logger_("Encountered a gap in video from "+u.start+" to "+u.end+". Seeking to current time "+f),!0):!1}};l.skipTheGap_=function(f){var g=this.tech_.buffered(),k=this.tech_.currentTime();g=Kh(g,k);this.cancelTimer_();0!==g.length&&k===f&&(this.logger_("skipTheGap_:","currentTime:",k,"scheduled currentTime:",f,"nextRange start:",
g.start(0)),this.tech_.setCurrentTime(g.start(0)+bd),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))};l.gapFromVideoUnderflow_=function(f,g){if(2>f.length)f=V.createTimeRanges();else{for(var k=[],u=1;u<f.length;u++){var x=f.end(u-1),A=f.start(u);k.push([x,A])}f=V.createTimeRanges(k)}for(k=0;k<f.length;k++)if(u=f.start(k),x=f.end(k),4>g-u&&2<g-u)return{start:u,end:x};return null};return m}(),fs={errorInterval:30,getSource:function(m){var l=
this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return m(l)}},gs=function g(l,f){var k=0,u=0,x=V.mergeOptions(fs,f);l.ready(function(){l.trigger({type:"usage",name:"vhs-error-reload-initialized"});l.trigger({type:"usage",name:"hls-error-reload-initialized"})});var A=function(){u&&l.currentTime(u)},H=function(M){null!==M&&void 0!==M&&(u=Infinity!==l.duration()&&l.currentTime()||0,l.one("loadedmetadata",A),l.src(M),l.trigger({type:"usage",name:"vhs-error-reload"}),l.trigger({type:"usage",
name:"hls-error-reload"}),l.play())},R=function(){if(Date.now()-k<1E3*x.errorInterval)l.trigger({type:"usage",name:"vhs-error-reload-canceled"}),l.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(x.getSource&&"function"===typeof x.getSource)return k=Date.now(),x.getSource.call(l,H);V.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},W=function T(){l.off("loadedmetadata",A);l.off("error",R);l.off("dispose",T)};l.on("error",R);l.on("dispose",W);l.reloadSourceOnError=
function(T){W();g(l,T)}},Tm=function(l){gs(this,l)},sb={PlaylistLoader:Ed,Playlist:Ib,utils:zq,STANDARD_PLAYLIST_SELECTOR:Hm,INITIAL_PLAYLIST_SELECTOR:function(){var l=this,f=this.playlists.master.playlists.filter(Ib.isEnabled);te(f,function(g,k){return ki(g,k)});return f.filter(function(g){return!!se(l.playlists.master,g).video})[0]||null},lastBandwidthSelector:Hm,movingAverageBandwidthSelector:function(l){var f=-1;if(0>l||1<l)throw Error("Moving average bandwidth decay must be between 0 and 1.");
return function(){var g=this.useDevicePixelRatio?ra.devicePixelRatio||1:1;0>f&&(f=this.systemBandwidth);f=l*this.systemBandwidth+(1-l)*f;return Gm(this.playlists.master,f,parseInt(Ff(this.tech_.el(),"width"),10)*g,parseInt(Ff(this.tech_.el(),"height"),10)*g,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:ki,comparePlaylistResolution:function(l,f){if(l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width)var g=l.attributes.RESOLUTION.width;g=g||ra.Number.MAX_VALUE;if(f.attributes.RESOLUTION&&
f.attributes.RESOLUTION.width)var k=f.attributes.RESOLUTION.width;k=k||ra.Number.MAX_VALUE;return g===k&&l.attributes.BANDWIDTH&&f.attributes.BANDWIDTH?l.attributes.BANDWIDTH-f.attributes.BANDWIDTH:g-k},xhr:Ul()};Object.keys(nb).forEach(function(l){Object.defineProperty(sb,l,{get:function(){V.log.warn("using Vhs."+l+" is UNSAFE be sure you know what you are doing");return nb[l]},set:function(f){V.log.warn("using Vhs."+l+" is UNSAFE be sure you know what you are doing");"number"!==typeof f||0>f?V.log.warn("value of Vhs."+
l+" must be greater than or equal to 0"):nb[l]=f}})});var Um=function(l,f){f=f.media();for(var g=-1,k=0;k<l.length;k++)if(l[k].id===f.id){g=k;break}l.selectedIndex_=g;l.trigger({selectedIndex:g,type:"change"})},hs=function(l,f){f.representations().forEach(function(g){l.addQualityLevel(g)});Um(l,f.playlists)};sb.canPlaySource=function(){return V.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var is=function(l,f,g){if(!l)return l;var k=f&&f.attributes&&f.attributes.CODECS,
u=g&&g.attributes&&g.attributes.CODECS;!u&&k&&1<k.split(",").length&&k.split(",").forEach(function(R){R=R.trim();if(El(R))u=R;else{var W=R;void 0===W&&(W="");Oc.video.test(W.trim().toLowerCase())&&(k=R)}});g=k?'video/mp4;codecs="'+k+'"':null;var x=u?'audio/mp4;codecs="'+u+'"':null,A={},H;for(H in l)A[H]={audioContentType:x,videoContentType:g},f.contentProtection&&f.contentProtection[H]&&f.contentProtection[H].pssh&&(A[H].pssh=f.contentProtection[H].pssh),"string"===typeof l[H]&&(A[H].url=l[H]);return V.mergeOptions(l,
A)},js=function(l,f){return l.reduce(function(g,k){if(!k.contentProtection)return g;var u=f.reduce(function(x,A){var H=k.contentProtection[A];H&&H.pssh&&(x[A]={pssh:H.pssh});return x},{});Object.keys(u).length&&g.push(u);return g},[])},ks=function(l){var f=l.player,g=l.sourceKeySystems,k=l.audioMedia;l=l.mainPlaylists;if(!f.eme.initializeMediaKeys)return Promise.resolve();k=k?l.concat([k]):l;var u=[],x=[];js(k,Object.keys(g)).forEach(function(A){x.push(new Promise(function(H,R){f.tech_.one("keysessioncreated",
H)}));u.push(new Promise(function(H,R){f.eme.initializeMediaKeys({keySystems:A},function(W){W?R(W):H()})}))});return Promise.race([Promise.all(u),Promise.race(x)])},ls=function(l){var f=l.player;l=is(l.sourceKeySystems,l.media,l.audioMedia);return l?(f.currentSource().keySystems=l)&&!f.eme?(V.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0:!1},Vm=function(){if(!ra.localStorage)return null;var l=ra.localStorage.getItem("videojs-vhs");if(!l)return null;try{return JSON.parse(l)}catch(f){return null}},
ms=function(l){return 0===l.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(l.substring(l.indexOf(",")+1)):l};sb.supportsNativeHls=function(){if(!dc||!dc.createElement)return!1;var l=dc.createElement("video");return V.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(f){return/maybe|probably/i.test(l.canPlayType(f))}):!1}();var ns=dc&&
dc.createElement&&V.getTech("Html5").isSupported()?/maybe|probably/i.test(dc.createElement("video").canPlayType("application/dash+xml")):!1;sb.supportsNativeDash=ns;sb.supportsTypeNatively=function(l){return"hls"===l?sb.supportsNativeHls:"dash"===l?sb.supportsNativeDash:!1};sb.isSupported=function(){return V.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var oi=function(l){function f(k,u,x){var A=l.call(this,u,V.mergeOptions(x.hls,x.vhs))||this;x.hls&&Object.keys(x.hls).length&&
V.log.warn("Using hls options is deprecated. Use vhs instead.");A.logger_=lc("VhsHandler");u.options_&&u.options_.playerId&&(x=V(u.options_.playerId),x.hasOwnProperty("hls")||Object.defineProperty(x,"hls",{get:function(){V.log.warn("player.hls is deprecated. Use player.tech().vhs instead.");u.trigger({type:"usage",name:"hls-player-access"});return Tb(A)},configurable:!0}),x.hasOwnProperty("vhs")||Object.defineProperty(x,"vhs",{get:function(){V.log.warn("player.vhs is deprecated. Use player.tech().vhs instead.");
u.trigger({type:"usage",name:"vhs-player-access"});return Tb(A)},configurable:!0}),x.hasOwnProperty("dash")||Object.defineProperty(x,"dash",{get:function(){V.log.warn("player.dash is deprecated. Use player.tech().vhs instead.");return Tb(A)},configurable:!0}),A.player_=x);A.tech_=u;A.source_=k;A.stats={};A.ignoreNextSeekingEvent_=!1;A.setOptions_();if(A.options_.overrideNative&&u.overrideNativeAudioTracks&&u.overrideNativeVideoTracks)u.overrideNativeAudioTracks(!0),u.overrideNativeVideoTracks(!0);
else if(A.options_.overrideNative&&(u.featuresNativeVideoTracks||u.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");A.on(dc,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(H){(H=dc.fullscreenElement||dc.webkitFullscreenElement||dc.mozFullScreenElement||dc.msFullscreenElement)&&H.contains(A.tech_.el())&&A.masterPlaylistController_.smoothQualityChange_()});A.on(A.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?
this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});A.on(A.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});A.on(A.tech_,"play",A.play);return A}zc(f,l);var g=f.prototype;g.setOptions_=function(){var k=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=!1===this.options_.handleManifestRedirects?!1:!0;this.options_.limitRenditionByPlayerDimensions=
!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||
[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;this.options_.handlePartialData=this.options_.handlePartialData||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var u=Vm();u&&u.bandwidth&&(this.options_.bandwidth=u.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));
u&&u.throughput&&(this.options_.throughput=u.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=nb.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===nb.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys handlePartialData playlistSelector initialPlaylistSelector experimentalBufferBasedABR liveRangeSafeTimeDelta".split(" ").forEach(function(x){"undefined"!==
typeof k.source_[x]&&(k.options_[x]=k.source_[x])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio};g.src=function(k,u){var x=this;k&&(this.setOptions_(),this.options_.src=ms(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=sb,this.options_.sourceType=Zk(u),this.options_.seekTo=function(A){x.tech_.setCurrentTime(A)},this.masterPlaylistController_=new as(this.options_),k=V.mergeOptions({liveRangeSafeTimeDelta:mc},
this.options_,{seekable:function(){return x.seekable()},media:function(){return x.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new es(k),this.masterPlaylistController_.on("error",function(){var A=V.players[x.tech_.options_.playerId],H=x.masterPlaylistController_.error;"object"!==typeof H||H.code?"string"===typeof H&&(H={message:H,code:3}):H.code=3;A.error(H)}),k=this.options_.experimentalBufferBasedABR?sb.movingAverageBandwidthSelector(.55):
sb.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):k.bind(this),this.masterPlaylistController_.selectInitialPlaylist=sb.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(A){this.masterPlaylistController_.selectPlaylist=
A.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(A){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=A;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(A){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=A;this.masterPlaylistController_.mainSegmentLoader_.throughput=
{rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){V.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return x.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return x.masterPlaylistController_.mediaRequests_()||
0},enumerable:!0},mediaRequestsAborted:{get:function(){return x.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return x.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return x.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return x.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return x.masterPlaylistController_.mediaBytesTransferred_()||
0},enumerable:!0},mediaSecondsLoaded:{get:function(){return x.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return cd(x.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return x.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return x.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return x.tech_.name_},enumerable:!0},duration:{get:function(){return x.tech_.duration()},enumerable:!0},master:{get:function(){return x.playlists.master},
enumerable:!0},playerDimensions:{get:function(){return x.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return cd(x.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return x.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(x.options_.useBandwidthFromLocalStorage){var A=
{bandwidth:x.bandwidth,throughput:Math.round(x.throughput)};if(ra.localStorage){var H=Vm();H=H?V.mergeOptions(H,A):A;try{ra.localStorage.setItem("videojs-vhs",JSON.stringify(H))}catch(R){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){ds(x)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){x.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,
"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ra.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))};g.setupEme_=function(){var k=this,u=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,x=ls({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:u&&u.media()});11!==V.browser.IE_VERSION&&x?(this.logger_("waiting for EME key session creation"),
ks({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:u&&u.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){k.logger_("created EME key session");k.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(A){k.logger_("error while creating EME key session",A);k.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()};g.setupQualityLevels_=function(){var k=
this,u=V.players[this.tech_.options_.playerId];u&&u.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=u.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){hs(k.qualityLevels_,k)}),this.playlists.on("mediachange",function(){Um(k.qualityLevels_,k.playlists)}))};f.version=function(){return{"@videojs/http-streaming":"2.6.4","mux.js":"5.10.0","mpd-parser":"0.15.4","m3u8-parser":"4.5.2","aes-decrypter":"3.1.2"}};g.version=function(){return this.constructor.version()};
g.canChangeType=function(){return Om.canChangeType()};g.play=function(){this.masterPlaylistController_.play()};g.setCurrentTime=function(k){this.masterPlaylistController_.setCurrentTime(k)};g.duration=function(){return this.masterPlaylistController_.duration()};g.seekable=function(){return this.masterPlaylistController_.seekable()};g.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&
this.qualityLevels_.dispose();this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.vhs&&delete this.tech_.vhs;this.tech_&&delete this.tech_.hls;this.mediaSourceUrl_&&ra.URL.revokeObjectURL&&(ra.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null);l.prototype.dispose.call(this)};g.convertToProgramTime=function(k,u){return Eq({playlist:this.masterPlaylistController_.media(),time:k,callback:u})};g.seekToProgramTime=function(k,
u,x,A){void 0===x&&(x=!0);void 0===A&&(A=2);return Fq({programTime:k,playlist:this.masterPlaylistController_.media(),retryCount:A,pauseAfterSeek:x,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:u})};return f}(V.getComponent("Component")),Jf={name:"videojs-http-streaming",VERSION:"2.6.4",canHandleSource:function(l,f){void 0===f&&(f={});f=V.mergeOptions(V.options,f);return Jf.canPlayType(l.type,f)},handleSource:function(l,f,g){void 0===g&&(g={});g=V.mergeOptions(V.options,g);f.vhs=new oi(l,
f,g);V.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){V.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead.");return f.vhs},configurable:!0});f.vhs.xhr=Ul();f.vhs.src(l.src,l.type);return f.vhs},canPlayType:function(l,f){void 0===f&&(f={});f=V.mergeOptions(V.options,f).vhs.overrideNative;f=void 0===f?!V.browser.IS_ANY_SAFARI:f;l=Zk(l);return!l||sb.supportsTypeNatively(l)&&!f?"":"maybe"}};rf("avc1.4d400d,mp4a.40.2")&&V.getTech("Html5").registerSourceHandler(Jf,
0);V.VhsHandler=oi;Object.defineProperty(V,"HlsHandler",{get:function(){V.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.");return oi},configurable:!0});V.VhsSourceHandler=Jf;Object.defineProperty(V,"HlsSourceHandler",{get:function(){V.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.");return Jf},configurable:!0});V.Vhs=sb;Object.defineProperty(V,"Hls",{get:function(){V.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead.");
return sb},configurable:!0});V.use||(V.registerComponent("Hls",sb),V.registerComponent("Vhs",sb));V.options.vhs=V.options.vhs||{};V.options.hls=V.options.hls||{};V.registerPlugin?V.registerPlugin("reloadSourceOnError",Tm):V.plugin("reloadSourceOnError",Tm);z.exports=V})),ps=function(){return function(z){var G=this;this.config=z;this.log=function(w){G.videoEvent&&(G.videoEvent("setEntity",{video:pb.__assign(pb.__assign({},G.basePayload),w)}),G.videoEvent("log",{schemaId:G.schemaId},{ent:"all"}))};
this.schemaId=z.schemaId;this.basePayload={player:"Brila",parentElementId:z.parentElementId};window.csa&&(this.videoEvent=window.csa("Events",{producerId:z.producerId,lob:window.ue_lob?window.ue_lob:""}))}}(),Wm=function(z){var G=z.emit,w=z.durationMs,Y=z.contentIdInfoMap,Z=null,S="",X=function(){if(null!==Z){window.clearTimeout(Z);Z=null;var pa=null===Y||void 0===Y?void 0:Y.get(S);if(pa){var xa=Date.now();Y.set(S,{complete:pa.complete,timeWatchedMs:xa-pa.lastPlayedTimestamp,lastPlayedTimestamp:xa});
S=""}}},ha=function(pa,xa){0>=pa?X():Z=window.setTimeout(function(){Z=null;G();null===Y||void 0===Y?void 0:Y.set(xa,{complete:!0,timeWatchedMs:w,lastPlayedTimestamp:-1})},pa)};return{stop:function(){X()},start:function(pa){S=pa;void 0===Y.get(pa)&&Y.set(pa,{complete:!1,timeWatchedMs:0,lastPlayedTimestamp:Date.now()});pa=null===Y||void 0===Y?void 0:Y.get(pa);void 0===pa||pa.complete||null!==Z||ha(w-pa.timeWatchedMs,S)}}},qs=function(){function z(G){var w=this,Y;this.config=G;this.sessionStartEmitted=
this.ptffEmitted=this.playbackStartEmitted=!1;this.ptffStartTimestamp=0;this.isSegmentStarted=!1;this.prevSegmentStopTime=this.segmentStartTime=0;this.isRebuffering=this.closedCaptionsEnabled=!1;this.pauseTime=this.lastUpdatedTime=this.currentTime=this.totalDuration=this.prevPlayHeadTime=this.rebufferDuration=this.rebufferCount=this.rebufferStartTime=0;this.isPaused=this.isPausedWhileSeeking=!1;this.seekingTime=0;this.isEnded=this.thirdQuartileReached=this.midpointReached=this.firstQuartileReached=
this.hasSeekedAwaitingPlayback=!1;this.hbWatchTotalDuration=this.hbSystemStartTime=this.hbWatchSegmentStartTime=0;this.ospAttributionReported=!1;this.timeSinceLastMinWatched=this.minWatchedStartTime=this.lastMinWatchedTime=this.loggingInterval=this.initialLoggingDelay=this.secondsFromLastEvent=this.lastLoggedEventInterval=0;this.minWatchedOffset=1E3*Math.floor(60*Math.random());this.widgetInViewportReported=this.isMinWatchStarted=!1;this.isMetricEmissionActive=!0;this.initialize=function(){w.hbWatchInterval=
null;w.playheadInterval=null;w.rebufferDetectionInterval=null;w.playerInstance.on(ya[ya.loadstart],w.loadStartHandler);w.playerInstance.on(ya[ya.playing],w.playingHandler);w.playerInstance.on(ya[ya.pause],w.pauseHandler);w.playerInstance.on(ya[ya.timeupdate],w.timeupdateHandler);w.playerInstance.on(ya[ya.rebuffering],w.rebufferingHandler);w.playerInstance.on(ya[ya.seeking],w.seekingHandler);w.playerInstance.on(ya[ya.seeked],w.seekedHandler);w.playerInstance.on(ya[ya.error],w.errorHandler);w.playerInstance.on(ya[ya.ended],
w.endedHandler);w.playerInstance.on(ya[ya.requestmute],w.muteHandler);w.playerInstance.on(ya[ya.requestunmute],w.unmuteHandler);w.playerInstance.on(ya[ya.requestpause],w.pauseRequestHandler);w.playerInstance.on(ya[ya.requestplay],w.playRequestHandler);w.playerInstance.on(ya[ya.invokeplay],w.invokePlayHandler);w.addPageNavigationHandler();w.addScrubberClickHandler()};this.addScrubberClickHandler=function(){var S=tb["default"].cardRoot.querySelector(".vjs-progress-holder.vjs-slider.vjs-slider-horizontal");
S&&S.addEventListener("click",function(X){X.target===X.currentTarget&&w.recordScrubberClickEvent()})};this.addPageNavigationHandler=function(){U["default"].capabilities.ios&&U["default"].capabilities.isSafari?window.onpagehide=w.publishBeforeDispose:window.onbeforeunload=w.publishBeforeDispose};this.publishBeforeDispose=function(){w.isEnded||(w.segmentStop(!1),w.publishEndOfSessionMetrics())};this.updateContentId=function(S){w.isEnded||(w.segmentStop(!1),w.publishEndOfSessionMetrics());w.contentId=
S};this.updateRankingStrategy=function(S){w.rankingStrategy=S};this.updateAciContentId=function(S){w.aciContentId=S};this.updatePlacementContext=function(S){w.playerPlacementSuffix=S};this.updateOspData=function(S){var X;(X=U["default"].objectIsEmpty(S))||(X=hd(S)||hd(S.vendorTrackingId)||hd(S.videoReferenceId)||hd(S.productAsin));X?((U["default"].objectIsEmpty(S)||U["default"].objectIsEmpty(S.vendorTrackingId)&&U["default"].objectIsEmpty(S.videoReferenceId)&&U["default"].objectIsEmpty(S.productAsin))&&
w.emitOspMetrics("vse:osp:tag:invalid:record"),w.ospAttributionReported=!0):(w.ospTrackingId=S.vendorTrackingId,w.ospReferenceId=S.videoReferenceId,w.ospProductAsin=S.productAsin,w.ospAttributionReported=!1)};this.updateTextTrackMetrics=function(){var S=w.playerInstance.videoJS.remoteTextTracks();if(S)for(var X=function(pa){var xa=S[pa];xa.on("modechange",function(){var Aa="showing"===xa.mode;Aa!==w.closedCaptionsEnabled&&(Aa?(w.closedCaptionsEnabled=!0,Aa=w.buildCsmPlayerEvent("primary.closedCaptionsOn",
"",1),ba.isClosedCaptionsEnabled=!0,!0!==w.enableTextTracksByDefault&&(w.logCSAEvent("CAPTIONS_ON"),Qa(Aa)),w.enableTextTracksByDefault=!1):(w.closedCaptionsEnabled=!1,Aa=w.buildCsmPlayerEvent("primary.closedCaptionsOff","",1),ba.isClosedCaptionsEnabled=!1,w.logCSAEvent("CAPTIONS_OFF"),Qa(Aa)))})},ha=0;ha<S.length;++ha)X(ha)};this.buildOspAttributionTag=function(){var S="/gp/mobile/tag/ref="+w.ospReftag,X="tag="+w.ospTrackingId,ha="creativeASIN="+w.ospProductAsin,pa="linkCode="+w.linkCode,xa="ascsubtag="+
w.ospReferenceId,Aa="";hd(w.aciContentId)||(Aa="&asc_item-id="+w.aciContentId);return S+"?"+X+"&"+pa+"&"+ha+"&"+xa+Aa};this.reportOspAttribution=function(S,X){void 0===S&&(S=0);void 0===X&&(X="");if(!0===w.enableClickBasedAttribution)return w.ospAttributionReported=!0;if(3<=S)X&&X.includes(w.ospReferenceId)&&(w.ospAttributionReported=!0),w.emitOspMetrics("vse:osp:tag:emitted:error");else if(0<S||30<=w.hbWatchTotalDuration||30<w.playerInstance.getMediaDuration()&&w.hbWatchTotalDuration>=w.playerInstance.getMediaDuration()-
1&&w.isEnded){var ha=X||w.buildOspAttributionTag();U["default"].get(ha,{success:function(){ha&&ha.includes(w.ospReferenceId)&&(w.ospAttributionReported=!0);w.emitOspMetrics("vse:osp:tag:emitted:success");Qa(w.buildCsmPlayerEvent("tagEmitted",w.ospTrackingId,1))},error:function(){w.reportOspAttribution(++S,ha)}})}};this.reportVideoViewingMetric=function(){var S=w.buildCsmPlayerEvent("primary.viewedDuration","",Math.round(1E3*w.hbWatchTotalDuration));Qa(S)};this.heartbeatWatchIntervalHandler=function(){var S=
w.playerInstance.getCurrentTime();w.hbWatchTotalDuration+=S-w.hbWatchSegmentStartTime;w.ospAttributionReported||w.reportOspAttribution();w.reportVideoViewingMetric();w.hbWatchSegmentStartTime=S;w.hbSystemStartTime=U["default"].now()};this.heartbeatWatchStop=function(S){var X=w.playerInstance.getCurrentTime()-w.hbWatchSegmentStartTime;w.hbWatchTotalDuration+=X;clearInterval(w.hbWatchInterval);w.hbWatchInterval=null;if(S&&(S=Math.round(1E3*X),X=U["default"].now()-w.hbSystemStartTime,2200<S||-200>S||
S<X-200||S>X+200))return;w.ospAttributionReported||w.reportOspAttribution()};this.waitForPlaybackToBegin=function(S){if(null===w.playheadInterval){var X=w.playerInstance.getCurrentTime();w.playheadInterval=U["default"].interval(function(){try{w.playerInstance.getCurrentTime()>X+.05&&(clearInterval(w.playheadInterval),w.playheadInterval=null,S())}catch(ha){clearInterval(w.playheadInterval),w.playheadInterval=null}},10)}};this.setupRebufferDetection=function(){null===w.rebufferDetectionInterval&&(w.prevPlayHeadTime=
w.playerInstance.getCurrentTime(),clearInterval(w.rebufferDetectionInterval),w.rebufferDetectionInterval=U["default"].interval(w.rebufferDetectionIntervalHandler,250))};this.rebufferDetectionIntervalHandler=function(){var S=w.playerInstance.getCurrentTime();S===w.prevPlayHeadTime&&0!==w.prevPlayHeadTime&&w.playerInstance.videoJS.trigger(ya[ya.rebuffering]);w.prevPlayHeadTime=S};this.playingHandler=function(){if(w.videoPlayLatency){var S=Date.now()-w.videoPlayLatency;pb.__assign({isMuted:w.playerInstance.isMuted(),
eventType:"videoPlay",int_payload:S},w.playerInstance.getActiveAsset());w.videoPlayLatency=null}S=U["default"].now();w.logCSAEvent("PLAYING");w.addCSAEventHandler();if(w.isRebuffering){var X=S-w.rebufferStartTime;w.rebufferDuration+=X;w.isRebuffering=!1;X=w.buildCsmPlayerEvent("primary.rebufferInstance","",X);Qa(X)}w.segmentStart();w.hasSeekedAwaitingPlayback=!1;w.stopMinWatched();w.startMinWatchedInterval();w.startPlayInViewPort(w.contentId);w.playbackStartEmitted||(X=w.buildCsmPlayerEvent("primary.startCount",
"",1),Qa(X),X=w.buildCsmClickstreamEvent("DISCOVERY","IVEVideoView"),Mf(X,ui),w.playbackStartEmitted=!0);w.ptffEmitted||(X=w.buildCsmPlayerEvent("playToFirstFrameDuration","",S-w.ptffStartTimestamp),Qa(X),w.ptffEmitted=!0);w.reportWidgetInViewportWithDelay();w.isEnded=!1};this.pauseHandler=function(){w.isPaused=!0;w.pauseTime=w.playerInstance.getCurrentTime();w.isPausedWhileSeeking=w.playerInstance.isSeeking();w.segmentStop(!0);w.stopMinWatched();w.stopPlayInViewPort();w.clearWidgetInViewportTimeoutId()};
this.loadStartHandler=function(){w.videoPlayLatency=Date.now()};this.invokePlayHandler=function(){if(!w.sessionStartEmitted&&!w.ptffEmitted){w.ptffStartTimestamp=U["default"].now();var S=w.buildCsmPlayerEvent("titleSessionStart","",1);Qa(S);S=w.buildCsmPlayerEvent("titleSessionStartInstant",w.ptffStartTimestamp.toString(),0);Qa(S);w.sessionStartEmitted=!0}};this.pauseRequestHandler=function(){var S=w.buildCsmPlayerEvent("primary.pause","",1);Qa(S);w.logCSAEvent("STOPPED");w.removeCSAEventHandler()};
this.playRequestHandler=function(){if(w.isPaused){w.isPaused=!1;var S=w.buildCsmPlayerEvent("primary.resume","",1);Qa(S)}};this.timeupdateHandler=function(){w.lastUpdatedTime=w.currentTime;w.currentTime=w.playerInstance.getCurrentTime();var S=w.playerInstance.getMediaDuration();if(0!==S){if(w.currentTime>.75*S&&!w.thirdQuartileReached){var X=w.buildCsmPlayerEvent("primary.thirdQuartileCount","",1);Qa(X);w.thirdQuartileReached=!0}w.currentTime>.5*S&&!w.midpointReached&&(X=w.buildCsmPlayerEvent("primary.midpointCount",
"",1),Qa(X),w.midpointReached=!0);w.currentTime>.25*S&&!w.firstQuartileReached&&(X=w.buildCsmPlayerEvent("primary.firstQuartileCount","",1),Qa(X),w.firstQuartileReached=!0)}};this.endedHandler=function(){w.isEnded=!0;w.stopMinWatched();w.stopPlayInViewPort();w.ospAttributionReported||w.reportOspAttribution();var S=w.buildCsmPlayerEvent("primary.complete","",1);Qa(S);w.logCSAEvent("ENDED");w.publishEndOfSessionMetrics()};this.rebufferingHandler=function(){w.segmentStop(!1);w.rebufferStartTime=U["default"].now();
w.isRebuffering=!0;w.rebufferCount+=1};this.seekingHandler=function(){w.seekingTime=w.playerInstance.getCurrentTime();clearInterval(w.playheadInterval);w.playheadInterval=null;clearInterval(w.rebufferDetectionInterval);w.rebufferDetectionInterval=null;w.isPausedWhileSeeking&&(w.totalDuration-=w.pauseTime-w.lastUpdatedTime,w.isPausedWhileSeeking=!1)};this.seekedHandler=function(){w.hasSeekedAwaitingPlayback||(w.hasSeekedAwaitingPlayback=!0)};this.errorHandler=function(){var S=w.playerInstance.videoJS.error().code;
w.stopMinWatched();w.stopPlayInViewPort();if(1===S||2===S)var X="primary.loadError";else 3===S||5===S?(X="primary.interpretError",S=w.buildCsmPlayerEvent(3===S?"primary.interpretDecodeError":"primary.interpretEncryptedError","",1),Qa(S)):X=4===S?"primary.videoUnsupportedError":"primary.undefinedError";X=w.buildCsmPlayerEvent(X,"",1);Qa(X)};this.segmentStart=function(){w.isSegmentStarted=!0;w.segmentStartTime=w.playerInstance.getCurrentTime();null===w.hbWatchInterval&&(w.hbWatchSegmentStartTime=w.playerInstance.getCurrentTime(),
w.hbSystemStartTime=Date.now(),w.hbWatchInterval=U["default"].interval(w.heartbeatWatchIntervalHandler,2E3));w.waitForPlaybackToBegin(w.setupRebufferDetection)};this.segmentStop=function(S){w.isSegmentStarted&&(w.isSegmentStarted=!1,clearInterval(w.playheadInterval),w.playheadInterval=null,clearInterval(w.rebufferDetectionInterval),w.rebufferDetectionInterval=null,null!==w.hbWatchInterval&&w.heartbeatWatchStop(S),S=w.playerInstance.getCurrentTime(),void 0!==w.segmentStartTime&&S!==w.prevSegmentStopTime&&
(w.totalDuration+=S-w.segmentStartTime,w.prevSegmentStopTime=S))};this.muteHandler=function(){var S=w.buildCsmPlayerEvent("primary.mute","",1);Qa(S);w.logCSAEvent("MUTED");pb.__assign({eventType:"mute",eventTriggerType:"userClick",isMuted:w.playerInstance.isMuted()},w.playerInstance.getActiveAsset())};this.unmuteHandler=function(){var S=w.buildCsmPlayerEvent("primary.unmute","",1);Qa(S);w.logCSAEvent("UNMUTED");pb.__assign({eventType:"unmute",eventTriggerType:"userClick",isMuted:w.playerInstance.isMuted()},
w.playerInstance.getActiveAsset())};this.publishEndOfSessionMetrics=function(){if(!(0>=w.totalDuration)){var S=U["default"].now().toString(),X=Math.round(1E3*w.totalDuration),ha=Math.round(1E3*w.playerInstance.getMediaDuration()),pa=Math.round(w.rebufferDuration),xa=(100*w.totalDuration/w.playerInstance.getMediaDuration()).toFixed(2);ha=w.buildCsmPlayerEvent("primary.mediaDuration","",ha);Qa(ha);ha=w.buildCsmPlayerEvent("primary.viewedDuration","",X);Qa(ha);ha=w.buildCsmPlayerEvent("primary.viewedPercentage",
xa,0);Qa(ha);ha=w.buildCsmPlayerEvent("titleSessionEndInstant",S,0);Qa(ha);ha=w.buildCsmPlayerEvent("primary.rebufferDuration","",pa);Qa(ha);ha=w.buildCsmPlayerEvent("primary.rebufferCount","",w.rebufferCount);Qa(ha);ha=w.buildCsmPlayerEvent("primary.rebufferOccurred","",0<w.rebufferCount?1:0);Qa(ha);w.playbackStartEmitted=!1;w.sessionStartEmitted=!1;w.ptffEmitted=!1;w.isSegmentStarted=!1;w.segmentStartTime=0;w.prevSegmentStopTime=0;w.playheadInterval=null;w.rebufferDetectionInterval=null;w.isRebuffering=
!1;w.rebufferStartTime=0;w.rebufferCount=0;w.rebufferDuration=0;w.prevPlayHeadTime=0;w.totalDuration=0;w.currentTime=0;w.lastUpdatedTime=0;w.pauseTime=0;w.isPausedWhileSeeking=!1;w.seekingTime=0;w.hasSeekedAwaitingPlayback=!1;w.firstQuartileReached=!1;w.midpointReached=!1;w.thirdQuartileReached=!1;w.hbWatchSegmentStartTime=0;w.hbWatchInterval=null;w.hbSystemStartTime=0;w.hbWatchTotalDuration=0;w.titleSessionId=w.generateTitleSessionId()}};this.getTitleSessionId=function(){return w.titleSessionId};
this.generateTitleSessionId=function(){return(1E19*Math.random()).toString()};this.emitOspMetrics=function(S){var X=U["default"].objectIsEmpty(w.ospTrackingId)?"InvalidVendorTrackingId":w.ospTrackingId;S=w.buildCsmPlayerEvent(S,X,1);X=w.linkCode;void 0===X&&(X="vgw");if(!hd(S.eventName)){var ha=S.eventName;Sc.count(ha,1);Sc.count(ha+":"+X,1);Qa(S);S.eventName=ha+":"+X;Qa(S)}};this.buildCsmPlayerEvent=function(S,X,ha){var pa,xa,Aa;S=ba.buildCsmPayload({titleSessionId:w.titleSessionId,eventName:S,stringPayload:X,
intPayload:ha,videoAsin:w.contentId,rankingStrategy:null!==(Aa=null===(xa=null===(pa=w.config.playerInstance)||void 0===pa?void 0:pa.getActiveAsset())||void 0===xa?void 0:xa.rankingStrategy)&&void 0!==Aa?Aa:"",refMarkers:w.config.refTag,scrubberPosition:w.playerInstance.getCurrentTime(),pageUrl:null!==window.location.href?window.location.href.substring(0,500):"",customerId:ba.customerId});S.placementContext=w.playerPlacementBase+"."+w.playerPlacementSuffix;return S};this.buildCsmClickstreamEvent=
function(S,X){return{actionType:S,eventOwner:w.config.nexusConfig.producerId,eventType:X,productId:w.ospProductAsin}};this.addCSAEventHandler=function(){w.lastLoggedEventInterval=U["default"].interval(function(){w.secondsFromLastEvent++},1E3);w.initialLoggingDelay=U["default"].delay(function(){w.logCSAEvent("PLAYING");w.loggingInterval=U["default"].interval(function(){w.logCSAEvent("NONE")},3E4)},2E3)};this.removeCSAEventHandler=function(){clearInterval(w.lastLoggedEventInterval);clearInterval(w.loggingInterval);
clearTimeout(w.initialLoggingDelay);w.secondsFromLastEvent=0;w.loggingInterval=0;w.initialLoggingDelay=0};this.resetCSAEventHandler=function(){w.removeCSAEventHandler();w.addCSAEventHandler()};this.updateCSAEventHandler=function(S){switch(S){case "MODE_CHANGED":case "MUTED":case "UNMUTED":case "CAPTIONS_OFF":case "CAPTIONS_ON":w.resetCSAEventHandler();break;case "ENDED":case "STOPPED":w.removeCSAEventHandler()}};this.playerInstance=G.playerInstance;this.setupCSAMetrics();ti={schemaId:G.nexusConfig.playerSchemaId,
producerId:G.nexusConfig.producerId,requiredNumOfFields:13};ui={schemaId:G.nexusConfig.clickstreamSchemaId,producerId:G.nexusConfig.producerId,requiredNumOfFields:9};zi("Player");this.titleSessionId=this.generateTitleSessionId();var Z=ba.metricsPlacement.split(".");Z.pop();this.playerPlacementBase=Z.join(".");this.playerPlacementSuffix=null!==(Y=G.metricsSuffix)&&void 0!==Y?Y:"ingress";this.ospReftag=G.refTag;this.enableClickBasedAttribution=G.enableClickBasedAttribution;this.linkCode=G.linkCode;
this.enableTextTracksByDefault=G.enableTextTracksByDefault;this.playInViewPortMetrics={video2sPlayInViewPort:Wm({emit:this.emit2SecViewMetric.bind(this),durationMs:2E3,contentIdInfoMap:new Map}),video30sPlayInViewPort:Wm({emit:this.emit30SecViewMetric.bind(this),durationMs:3E4,contentIdInfoMap:new Map})};this.playerInstance.getActiveAsset()?(this.contentId=this.playerInstance.getActiveAsset().contentId,this.rankingStrategy=this.playerInstance.getActiveAsset().rankingStrategy,this.aciContentId=this.playerInstance.getActiveAsset().aciContentId,
G={vendorTrackingId:this.playerInstance.getActiveAsset().vendorTrackingId,videoReferenceId:this.playerInstance.getActiveAsset().videoReferenceId,productAsin:this.playerInstance.getActiveAsset().productAsin},this.updateOspData(G)):this.ospProductAsin=this.ospReferenceId=this.ospTrackingId=this.aciContentId=this.contentId=""}z.prototype.calcTimeSinceLastMinWatched=function(){return this.lastMinWatchedTime||this.minWatchedStartTime?Date.now()-(this.lastMinWatchedTime||this.minWatchedStartTime):0};z.prototype.getTimeToNextMinWatched=
function(G){void 0===G&&(G=!1);return this.lastMinWatchedTime?6E4-this.calcTimeSinceLastMinWatched():G?this.minWatchedOffset-=this.timeSinceLastMinWatched:this.minWatchedOffset-this.calcTimeSinceLastMinWatched()};z.prototype.startMinWatchedInterval=function(){var G=this;this.isMetricEmissionActive&&!this.isMinWatchStarted&&(this.minWatchedStartTime=Date.now(),this.minWatchTimeoutId=window.setTimeout(function(){G.minWatchTimeoutId=0;G.emitMinWatched();G.minWatchedIntervalId=window.setInterval(function(){G.emitMinWatched()},
6E4)},this.getTimeToNextMinWatched(!0)),this.isMinWatchStarted=!0)};z.prototype.stopMinWatched=function(){this.clearMinWatchedInterval();this.clearMinWatchedTimeout();this.minWatchedStartTime&&(this.timeSinceLastMinWatched=this.calcTimeSinceLastMinWatched());this.minWatchedStartTime=0;this.isMinWatchStarted=!1};z.prototype.emitMinWatched=function(){this.lastMinWatchedTime=Date.now();this.playerInstance.getActiveAsset();this.playerInstance.isMuted()};z.prototype.emit2SecViewMetric=function(){var G=
this.playerInstance.getActiveAsset(),w=this.playerInstance.isMuted();pb.__assign({isMuted:w},G)};z.prototype.emit30SecViewMetric=function(){var G=this.playerInstance.getActiveAsset(),w=this.playerInstance.isMuted();pb.__assign({isMuted:w},G)};z.prototype.setMetricEmissionActive=function(G){this.isMetricEmissionActive=G};z.prototype.startPlayInViewPort=function(G){this.isMetricEmissionActive&&(this.playInViewPortMetrics.video2sPlayInViewPort.start(G),this.playInViewPortMetrics.video30sPlayInViewPort.start(G))};
z.prototype.clearWidgetInViewportTimeoutId=function(){this.widgetInViewportTimeoutId&&(window.clearTimeout(this.widgetInViewportTimeoutId),this.widgetInViewportTimeoutId=null)};z.prototype.stopPlayInViewPort=function(){this.playInViewPortMetrics.video2sPlayInViewPort.stop();this.playInViewPortMetrics.video30sPlayInViewPort.stop()};z.prototype.reportWidgetInViewportWithDelay=function(){var G=this;!this.isMetricEmissionActive||this.widgetInViewportReported||this.widgetInViewportTimeoutId||(this.widgetInViewportTimeoutId=
window.setTimeout(function(){pb.__assign({isMuted:G.playerInstance.isMuted(),eventType:"widgetInViewport"},G.playerInstance.getActiveAsset());G.widgetInViewportReported=!0},1E3))};z.prototype.clearMinWatchedInterval=function(){this.minWatchedIntervalId&&window.clearInterval(this.minWatchedIntervalId)};z.prototype.clearMinWatchedTimeout=function(){this.minWatchTimeoutId&&window.clearTimeout(this.minWatchTimeoutId)};z.prototype.recordScrubberClickEvent=function(){var G=this.buildCsmPlayerEvent("primary.scrubberClick",
"",1);Qa(G)};z.prototype.getCSAConfig=function(){return{parentElementId:U["default"].$("."+ba.cardId).closest("[data-csa-c-id]").data("csa-c-id"),schemaId:"csa.VideoInteractions.2",producerId:"vsemetrics_csa_instrumentation"}};z.prototype.setupCSAMetrics=function(){var G=this;this.csa=new ps(this.getCSAConfig());U["default"].on(ba.cardId+"PLAYER_METRIC_EMITTED",function(w,Y){G.logCSAEvent(w)})};z.prototype.logCSAEvent=function(G){if(""!==this.aciContentId){var w={contentId:this.aciContentId,viewDuration:this.secondsFromLastEvent.toString(),
playerMode:ba.isIvxOpen?"IMMERSIVE_VIEW":"INLINE",isAutoPlayed:ba.isIvxOpen?"false":"true",isCaptionOn:this.closedCaptionsEnabled.toString(),isAudioOn:(!this.playerInstance.isMuted()).toString(),videoRequestId:this.titleSessionId.toString(),eventName:G};this.csa.log(w)}this.secondsFromLastEvent=0;this.updateCSAEventHandler(G)};return z}(),rs=function(){return function(z){var G=this;this.updateTextTrack=function(w){w.forEach(function(Y){G.videoJS.addRemoteTextTrack({src:Y.url,kind:"subtitles",srclang:Y.locale,
label:"English (Automated)",default:!1},!1)})};this.removeCurrentTextTracks=function(){var w,Y=G.videoJS.remoteTextTracks();if(Y)try{for(var Z=pb.__values(Y),S=Z.next();!S.done;S=Z.next())G.videoJS.removeRemoteTextTrack(S.value)}catch(ha){var X={error:ha}}finally{try{S&&!S.done&&(w=Z.return)&&w.call(Z)}finally{if(X)throw X.error;}}};this.enableCurrentTextTrack=function(w){void 0===w&&(w="en");G.changeTextTrackMode(w,"showing")};this.disableCurrentTextTrack=function(w){void 0===w&&(w="en");G.changeTextTrackMode(w,
"disabled")};this.getTextTrackMode=function(w){var Y,Z=G.videoJS.remoteTextTracks();if(Z)try{for(var S=pb.__values(Z),X=S.next();!X.done;X=S.next()){var ha=X.value;if(G.isTextTrackEligible(ha,w))return ha.mode}}catch(xa){var pa={error:xa}}finally{try{X&&!X.done&&(Y=S.return)&&Y.call(S)}finally{if(pa)throw pa.error;}}return"disabled"};this.changeTextTrackMode=function(w,Y){var Z,S=G.videoJS.remoteTextTracks();if(S)try{for(var X=pb.__values(S),ha=X.next();!ha.done;ha=X.next()){var pa=ha.value;G.isTextTrackEligible(pa,
w)&&(pa.mode=Y)}}catch(Aa){var xa={error:Aa}}finally{try{ha&&!ha.done&&(Z=X.return)&&Z.call(X)}finally{if(xa)throw xa.error;}}};this.isTextTrackEligible=function(w,Y){return"subtitles"===w.kind&&w.language===Y||"captions"===w.kind};this.videoJS=z}}(),ss=function(z,G){var w=z.canvas.width,Y=z.canvas.height,Z=G.videoWidth,S=G.videoHeight;z.canvas.width=w;z.canvas.height=Y;w+=0;var X=w*S/Z;z.filter="blur(30px)";z.drawImage(G,0,0,Z,S,-0,(Y-X)/2,w,X)},ts=function(z){document.querySelectorAll('[class*="mumContainer"]').forEach(function(G){G instanceof
HTMLElement&&(G.style.bottom=z+"px")})},us=function(z){document.querySelectorAll('[class*="videoTitleOverlay"][class*="vseHasProfile"]').forEach(function(G){G instanceof HTMLElement&&(G.style.position="absolute",G.style.bottom=z+"px")})},Xm=function(z,G){null===z||null===G||G.paused||(ss(z,G),window.requestAnimationFrame(function(){Xm(z,G)}))},vs=function(){function z(G){var w=this,Y;this.setActiveAsset=function(ia){w.activeAsset=ia;w.altTextElement&&(ia=(w.clickToExpandText?w.clickToExpandText:"Click to play video")+
", "+w.encodeForHtml(ia.altText||ia.title||""),w.altTextElement.setAttribute("aria-label",ia))};this.setVideoStyles=function(ia){if("C"!==w.pfoWeblabTreatment&&w.verticalVideoBlurEnabled){ia=ia.orientation;var Ca=w.cardId&&document.querySelectorAll('[id*="'+w.cardId+'"].vjs-tech')[0];Ca&&("VERTICAL"===ia?(Ca.style.height=1.2*w.containerHeight+"px",Ca.style.objectFit="contain"):(Ca.style.height=w.containerHeight+"px",Ca.style.minHeight=w.containerHeight+"px",Ca.style.objectFit="cover"))}};this.getActiveAsset=
function(){return w.activeAsset};this.hasActiveAsset=function(){return!!w.activeAsset};this.on=function(ia,Ca){w.videoJS.on(ia,Ca)};this.off=function(ia,Ca){w.videoJS.off(ia,Ca)};this.fluid=function(ia){w.videoJS.fluid(ia)};this.fill=function(ia){w.videoJS.fill(ia)};this.aspectRatio=function(ia){w.videoJS.aspectRatio(ia)};this.resume=function(){w.videoJS.play();w.togglePlayPauseButton()};this.isPaused=function(){return w.videoJS.paused()};this.isEnded=function(){return w.videoJS.ended()};this.isPlaying=
function(){return!w.isPaused()};this.isSeeking=function(){return w.videoJS.seeking()};this.pause=function(ia){w.videoJS.pause(ia);w.togglePlayPauseButton()};this.setCurrentTime=function(ia){w.videoJS.trigger(ya[ya.invokeplay]);w.videoJS.currentTime(ia)};this.getCurrentTime=function(){return w.videoJS.currentTime()};this.getMediaDuration=function(){return isNaN(w.videoJS.duration())?0:w.videoJS.duration()};this.mute=function(){w.videoJS.muted(!0)};this.unMute=function(){w.videoJS.muted(!1)};this.isMuted=
function(){return w.videoJS.muted()};this.seek=function(ia){w.videoJS.currentTime(ia)};this.showPoster=function(ia){w.videoJS.poster(ia.imageUrl);w.wrapper.querySelector(".vjs-poster").style.display="inline-block"};this.hidePoster=function(){w.videoJS.poster("");w.wrapper.querySelector(".vjs-poster").style.display="none"};this.updateSrc=function(ia){w.videoJS.src({src:ia.videoUrl,type:ia.videoMimeType})};this.play=function(){w.videoJS.trigger(ya[ya.invokeplay]);var ia=w.videoJS.play();void 0!==ia&&
ia.then(function(Ca){Ya("insituPlayerStartedAutoplay");w.togglePlayPauseButton()}).catch(function(Ca){-1===Ca.toString().indexOf("AbortError")&&(Xb("Cannot autoplay video on Brila Player. Exception details: "+Ca,"WARN"),Ya("insituPlayerFailedAutoplay"))})};this.initializePlayerClickMetrics=function(){w.initializePlayPauseMetrics();w.initializeMuteUnmuteMetrics()};this.initializePlayPauseMetrics=function(){var ia,Ca,La;null===(La=null===(Ca=null===(ia=w.videoJS.player())||void 0===ia?void 0:ia.controlBar)||
void 0===Ca?void 0:Ca.playToggle)||void 0===La?void 0:La.on("click",function(){w.triggerVideoJSPlayPauseEvents()})};this.triggerVideoJSPlayPauseEvents=function(){w.togglePlayPauseButton();w.isPlaying()?w.videoJS.trigger(ya[ya.requestplay]):w.videoJS.trigger(ya[ya.requestpause])};this.initializeMuteUnmuteMetrics=function(){var ia,Ca,La;null===(La=null===(Ca=null===(ia=w.videoJS.player())||void 0===ia?void 0:ia.controlBar)||void 0===Ca?void 0:Ca.muteToggle)||void 0===La?void 0:La.on("click",function(){w.triggerVideoJSMuteUnmuteEvents()})};
this.makeVideoControlsTabAccessible=function(ia){w.videoJS.player().on("canplay",function(){U["default"].$(ia).attr("tabindex",0)})};this.triggerVideoJSMuteUnmuteEvents=function(){w.isMuted()?w.videoJS.trigger(ya[ya.requestmute]):w.videoJS.trigger(ya[ya.requestunmute])};this.prepareForPlaying=function(ia){w.setInitialData(ia)};this.requestFullscreen=function(){w.videoJS.requestFullscreen()};this.exitFullscreen=function(){w.videoJS.exitFullscreen()};this.isFullscreen=function(){return w.videoJS.isFullscreen()};
this.setPreload=function(ia){w.videoJS.tech_.el_.preload=ia};this.destroy=function(){w.metricsModule&&w.metricsModule.publishBeforeDispose();w.videoJS.dispose()};this.updatePlacementContext=function(ia){w.metricsModule.updatePlacementContext(ia)};this.getTitleSessionId=function(){return w.metricsModule.getTitleSessionId()};this.error=function(){return w.videoJS.error()};this.setInitialData=function(ia){w.metricsModule&&(w.metricsModule.updateContentId(ia.contentId),w.metricsModule.updateRankingStrategy(ia.rankingStrategy),
w.metricsModule.updateAciContentId(ia.aciContentId),w.metricsModule.updateOspData({vendorTrackingId:ia.vendorTrackingId?ia.vendorTrackingId:"",videoReferenceId:ia.videoReferenceId?ia.videoReferenceId:"",productAsin:ia.productAsin?ia.productAsin:""}));w.config.enableAutoPlay&&w.videoJS.autoplay(!ia.isLivestreamEnded);w.setActiveAsset(ia);w.updateSrc(ia);if(w.config.showClosedCaptions){var Ca=w.textTrackHelper.getTextTrackMode("en");w.textTrackHelper.removeCurrentTextTracks();w.textTrackHelper.updateTextTrack(ia.closedCaptions);
w.metricsModule&&w.metricsModule.updateTextTrackMetrics();"showing"===Ca&&w.textTrackHelper.enableCurrentTextTrack()}};this.togglePlayPauseButton=function(){w.customPlayButton&&w.customPlayButton.classList.toggle("aok-hidden",w.isPlaying())};this.encodeForHtml=function(ia){var Ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return ia.replace(/[&<>"']/g,function(La){return Ca[La]||La})};try{this.config=G;this.verticalVideoBlurEnabled=G.verticalVideoBlurEnabled;this.pfoWeblabTreatment=
G.pfoWeblabTreatment;this.cardId=G.cardId;this.wrapper=tb["default"].cardRoot.getElementsByClassName(G.parentCssClass)[0];var Z=this.wrapper.getElementsByClassName(G.videoPlayerClass)[0],S=G.cardId+"-"+G.parentCssClass+"-element";this.altTextElement=this.createAltTextElement(G.cardId);Z.id=S;Z.className="video-js brila-vjs";Z.setAttribute("playsinline","true");Z.setAttribute("disablepictureinpicture","true");this.config.enableControls&&Z.setAttribute("controls","true");this.config.enableAutoPlay&&
(Z.setAttribute("autoplay","true"),Z.setAttribute("muted","true"));this.config.enablePreload||Z.setAttribute("preload","none");var X={techOrder:["html5"],html5:{vhs:{overrideNative:!U["default"].capabilities.isSafari},nativeAudioTracks:!1,nativeVideoTracks:!1,nativeTextTracks:!1}};G.controls&&(X.controlBar={children:G.controls});this.videoJS=os(S,X);Z&&this.verticalVideoBlurEnabled&&this.addCanvasToVideo(this.cardId,this.pfoWeblabTreatment);var ha=this.config.playerModeConfig;ha&&("boolean"===typeof ha.fillMode&&
this.fill(ha.fillMode),"boolean"===typeof ha.fluidMode&&this.fluid(ha.fluidMode));if(this.customPlayButton=tb["default"].cardRoot.querySelector(".ive-custom-play-button")){var pa=function(ia){w.videoJS.trigger(ya[ya.click],ia);w.isMuted()&&w.unMute()};this.customPlayButton.addEventListener("click",function(ia){pa(ia)});this.customPlayButton.addEventListener("keydown",function(ia){pa(ia)})}this.textTrackHelper=new rs(this.videoJS);var xa=this.wrapper.querySelector("#"+S);xa.insertBefore(this.altTextElement,
xa.firstChild);var Aa={playerInstance:this,nexusConfig:{producerId:"vsemetrics_playercards",playerSchemaId:"vse.VSECardsPlayerEvents.9",clickstreamSchemaId:"clickstream.CustomerEvent.4"},refTag:null!==(Y=G.refTag)&&void 0!==Y?Y:"vse_insitu_player",enableClickBasedAttribution:G.enableClickBasedAttribution,linkCode:G.linkCode,metricsSuffix:G.metricsSuffix,enableTextTracksByDefault:G.enableTextTracksByDefault};this.metricsModule=new qs(Aa);this.metricsModule.initialize()}catch(ia){Xb("fatal exception has occurred while creating player. Exception details: "+
ia,"FATAL")}}z.prototype.addCanvasToVideo=function(G,w){if(G=G&&document.querySelectorAll('[id*="'+G+'"].vjs-tech')[0]){var Y=document.createElement("canvas");Y.classList.add(G.className,"custom-canvas");Y.setAttribute("style","filter: blur(30px)");G.parentNode&&G.parentNode.insertBefore(Y,G);if("C"!=w){Y.classList.remove(G.className);var Z=document.querySelectorAll('[data-elementid="vse-cards-insitu-thumbnail-overlay"]');if(0===Z.length)return;this.containerHeight=Z[0].offsetWidth/1.77;w="T1"===
w?162:138;Z=this.containerHeight+w;ts(w);us(w);Y.style.width="100%";Y.style.height=Z+"px"}this.attachPlayEventListener(G,Y)}};z.prototype.createAltTextElement=function(G){var w=this,Y=document.createElement("div");Y.id="altText-"+G;Y.className="iveAltTextCont";Y.setAttribute("tabindex","0");Y.setAttribute("role","description");Y.onclick=function(){w.videoJS.paused()?w.play():w.pause()};Y.onkeydown=function(Z){if("Enter"===Z.key||" "===Z.key)Z.preventDefault(),w.videoJS.paused()?w.play():w.pause()};
return Y};z.prototype.getLocalizedString=function(G){return this.videoJS.localize(G)};z.prototype.attachPlayEventListener=function(G,w){G.addEventListener("play",function(){Xm(w.getContext("2d"),G)},!1)};return z}(),ws=function(z,G,w,Y){void 0===G&&(G="");void 0===w&&(w="vse_cards");void 0===Y&&(Y=!1);var Z=U["default"].capabilities.mobile;return{overrideMetricsPlacement:G,widgetMetricsSuffix:w,carouselItemClassName:Y?z.vsePlc:z.carouselElement,widgetMetricsHandler:function(S,X){var ha=U["default"].throttle(function(){S()},
500,{leading:!1});U["default"].on(U["default"].constants.BROWSER_EVENTS.RESIZE,function(){S()});U["default"].$("."+ba.cardId+" .a-carousel-goto-prevpage").click(function(){X("left");ha()});U["default"].$("."+ba.cardId+" .a-carousel-goto-nextpage").click(function(){X("right");ha()});Z&&(U["default"].off("a:carousel:vse-cards-vw-dp:change:pageNumber"),U["default"].on("a:carousel:vse-cards-vw-dp:change:pageNumber",ha))}}},fd,Ym,Zm,$m,Kf={},Pa,Lf,Id=!1,an=null,Rc=!1,gd,zs=function(z,G){return pb.__awaiter(void 0,
void 0,void 0,function(){var w,Y,Z,S,X,ha,pa,xa,Aa,ia,Ca,La,gc,Ma;return pb.__generator(this,function(qc){w=U["default"].capabilities.mobile;Sc.count(G+":rendered",1);if((Y=tb["default"].cardRoot.getElementsByClassName(z.vseWidgetPageState))&&Y[0]&&Y[0].dataset)fd=Y[0].dataset,yi(fd,w?"mobile":"desktop","ive_vftp_hero_cx"),Rc=Id="true"===fd.clickToPlay,vi("vse.VSECardsEvents.9","vsemetrics_widgetcards");else return Ya("pageStateNotFound"),[2];Ym=tb["default"].cardRoot.querySelector(".video-items-metadata");
$m=JSON.parse(Ym.getAttribute("data-video-items"));Zm=Ei($m,fd);Z=Zm.map(function(Na){return xe(Na,null)});Z.forEach(function(Na){return Kf[Na.contentId]=Na});1==Z.length&&(ba.isSingleVideoPresent=!0);S={showClosedCaptions:!0,enablePreload:!1,enableAutoPlay:!Rc,enableControls:!1,controls:["playToggle","progressControl","remainingTimeDisplay","subsCapsButton","muteToggle"],videoPlayerClass:z.heroPlayer,playerModeConfig:{fillMode:!0},parentCssClass:z.heroPlayerWrapper,styleInput:z,cardId:fd.cardId,
enableClickBasedAttribution:"true"===fd.enableClickBasedAttribution,linkCode:"vfp",refTag:"vse-cards-ingress_hero",metricsSuffix:"ive_vftp_hero_cx",enableTextTracksByDefault:!0,verticalVideoBlurEnabled:!1};Pa=new vs(S);X=function(Na){Pa.prepareForPlaying(Na);Pa.makeVideoControlsTabAccessible("."+z.vseVideoWidgetContainer+" .vjs-subs-caps-button .vjs-menu-item");ba.isClosedCaptionsEnabled&&Pa.textTrackHelper.enableCurrentTextTrack();Rc||Pa.play();xs(z);Lf=Na;ba.playerInstance=Pa};ha=function(Na){U["default"].$("."+
S.cardId+" #vse-placeholder-related-videos").delegate(".a-carousel-card a","click",function(ub){var Za=U["default"].$(ub.currentTarget).closest("li").index(".vse-video-card");Za=Na[Za];Za.contentId===Lf.contentId?ub.preventDefault():(Rc&&(Rc=!1),X(Za),bn(Za,z))})};pa=function(){var Na=Pa.getActiveAsset();if(Na=xa(Na))X(Na),bn(Na,z),U["default"].trigger("vse:ns:partialcomponents:"+ba.clientPrefix+":relatedvideos:rotate",Na)};xa=function(Na){var ub=Object.keys(Kf),Za=ub.findIndex(function(rc){return Kf[rc].contentId===
Na.contentId});return-1!==Za&&Za+1<ub.length?Kf[ub[Za+1]]:null};Aa=function(){gd=U["default"].$("."+S.cardId+" .vse-hero-widget");Rc&&U["default"].onScreen(gd)&&!Pa.hasActiveAsset()&&(Pa.setPreload("auto"),Pa.seek(.5));Rf(gd.find("video"))?Pa.hasActiveAsset()?"true"!==fd.clickToPlay&&Ca():(X(Z[0]),Pa.initializePlayerClickMetrics(),ys(z)):(Pa.mute(),ia())};ia=function(){Pa&&Pa.isPlaying()&&Pa.pause()};Ca=function(){Pa&&Pa.isPaused()&&!Id&&Pa.resume()};tn(function(Na){Na?(null===gd||void 0===gd?0:gd.length)&&
Rf(gd.find("video"))&&Ca():ia()});La=function(){Id=!0};gc=function(){Id=!1};Ma=function(Na){Na=Na.target;1!==Na.className.indexOf("vjs-icon-placeholder")&&1!==U["default"].$(Na).closest(".vjs-control-bar").length&&(Pa.isPlaying()?(Pa.pause(),Id=!0):(Pa.resume(),Pa.isMuted()&&Pa.unMute(),Id=!1,Rc&&(Rc=!1)),Pa.triggerVideoJSPlayPauseEvents())};U["default"].on(U["default"].constants.BROWSER_EVENTS.SCROLL,Aa);Pa.on(ya[ya.ended],pa);Pa.on(ya[ya.requestpause],La);Pa.on(ya[ya.requestplay],gc);Pa.on(ya[ya.click],
Ma);ha(Z);return[2,Pa]})})},bn=function(z,G){var w,Y=tb["default"].cardRoot.querySelector("."+G.vseHeroThumbnailProfile);if(Y){var Z=Y.querySelector("img");Z&&(Z.src=z.profileImageUrl);if(Z=Y.querySelector("."+G.vseProfileName))Z.innerText=z.vendorName;if(Z=Y.querySelector("."+G.vseProfileDescriptor))Z.innerText=z.title;if(Z=Y.querySelector("."+G.vseProfileAvatar))Z.href=z.profileLink,"Seller"===z.creatorType||"Vendor"===z.creatorType?Z.classList.add("aok-hidden"):Z.classList.remove("aok-hidden");
if(Z=Y.querySelector("."+G.vseProfileNameLink))Z.href=z.profileLink,"Seller"!==z.creatorType&&"Vendor"!==z.creatorType||Z.removeAttribute("href");if(Z=Y.querySelector("."+G.vseDisclosureLink))Z.href=z.disclosureLink||"",Z.title=z.disclosureLabel||"",z.disclosureLink?Z.classList.remove("aok-hidden"):Z.classList.add("aok-hidden");if(G=Y.querySelector("."+G.vseProfileDescriptorPrefix))null===(w=G.classList)||void 0===w?void 0:w.toggle("aok-hidden","AOD60"!==z.vendorCode)}},ys=function(z){(z=tb["default"].cardRoot.querySelector("."+
z.vseProfileAvatar))&&z.addEventListener("click",function(){var G=ba.buildCsmPayload({eventName:ba.clientPrefix+":profileClick",intPayload:1,videoAsin:Lf.contentId,stringPayload:Lf.index.toString(),titleSessionId:Of()});Wb(G)})},xs=function(z){clearTimeout(an);U["default"].$("."+z.heroPlayerWrapper).addClass("ppvr-vsbl");an=setTimeout(function(){ba.isHeroPopoverVisible||U["default"].$("."+z.heroPlayerWrapper).removeClass("ppvr-vsbl")},3E3)},Jd={thumbnailUpdates:"_dnNlL_thumbnailUpdates_3sx2a",vseVideoImageWrapper:"_dnNlL_vseVideoImageWrapper_3Sk54",
vseCarouselItem:"_dnNlL_vseCarouselItem_3IvFU",vseCarouselItemHovering:"_dnNlL_vseCarouselItemHovering_3nydI",vseHoverSection:"_dnNlL_vseHoverSection_1n4YC",carouselElement:"_dnNlL_carouselElement_AVBU9",vseMobileVideoWidget:"_dnNlL_vseMobileVideoWidget_17sDD",vseDesktopCarousel:"_dnNlL_vseDesktopCarousel_1UwLK",vseVideoDuration:"_dnNlL_vseVideoDuration_vDK4S",vseVideoTitle:"_dnNlL_vseVideoTitle_sPgV5",vseVideoTitleBlockOverlay:"_dnNlL_vseVideoTitleBlockOverlay_ZyhF4",vseThumbnailSecondaryImg:"_dnNlL_vseThumbnailSecondaryImg_2eoNE",
vseVideoTitleBlock:"_dnNlL_vseVideoTitleBlock_Qp7Od",vseVideoTitleText:"_dnNlL_vseVideoTitleText_1lJWI",vseVideoTitleWithCreator:"_dnNlL_vseVideoTitleWithCreator_1Meqf",vseHasProfile:"_dnNlL_vseHasProfile_28XGY",vseVideoCreatorName:"_dnNlL_vseVideoCreatorName_3M1B_",vseProfilePlaceholder:"_dnNlL_vseProfilePlaceholder_34FkJ",vseVideoThumbnailProfile:"_dnNlL_vseVideoThumbnailProfile_1TFKR",vsePlc:"_dnNlL_vsePlc_MSGp5",heroPlayerWrapper:"_dnNlL_heroPlayerWrapper_3NfkM",clickToPlay:"_dnNlL_clickToPlay_3z8kl",
vseHeroThumbnailProfile:"_dnNlL_vseHeroThumbnailProfile_UThmB",vsePlcR:"_dnNlL_vsePlcR_30suw",vsePlcL:"_dnNlL_vsePlcL_1PgKI",vseRP:"_dnNlL_vseRP_nLfJL",vseRV:"_dnNlL_vseRV_2ei5g",skeletalPFO:"_dnNlL_skeletalPFO_1All6",skeletalVideo:"_dnNlL_skeletalVideo_1BfuK",skeCard:"_dnNlL_skeCard_2uwXM",skeVideoCard:"_dnNlL_skeVideoCard_ljya2",skeImg:"_dnNlL_skeImg_lDBMN",skeVideoImg:"_dnNlL_skeVideoImg_26S_H",skeProduct:"_dnNlL_skeProduct_SSJKm",skeTextGroup:"_dnNlL_skeTextGroup_1PuEZ",skeVideoTextGroup:"_dnNlL_skeVideoTextGroup_wJYsE",
skeTitle:"_dnNlL_skeTitle_1Uu9U",skeVideoTitle:"_dnNlL_skeVideoTitle_3zFEJ",skeVendor:"_dnNlL_skeVendor_2__Ic",skeVideoVendor:"_dnNlL_skeVideoVendor_77OL4",skeDescription:"_dnNlL_skeDescription_1nfDH",skeVideoDescription:"_dnNlL_skeVideoDescription_1OaI9",loadingShimmer:"_dnNlL_loadingShimmer_dg65G",vseFlex:"_dnNlL_vseFlex_DKOUj",heroPlayer:"_dnNlL_heroPlayer_18YHJ",vsePlcPC:"_dnNlL_vsePlcPC_1jYt1",videoTitleOverlay:"_dnNlL_videoTitleOverlay_36k_O",titleWithCreator:"_dnNlL_titleWithCreator_13D5L",
videoTitle:"_dnNlL_videoTitle_3MA5S",vseVideoCreatorContainer:"_dnNlL_vseVideoCreatorContainer_38PNg",videoCreator:"_dnNlL_videoCreator_3g0KQ",vseProfileAvatar:"_dnNlL_vseProfileAvatar_2hzhG",vseProfileContent:"_dnNlL_vseProfileContent_1meBt",vseProfileName:"_dnNlL_vseProfileName_1rA1_",vseProfileDescriptorWrapper:"_dnNlL_vseProfileDescriptorWrapper_2CMkw",vseProfileNameLink:"_dnNlL_vseProfileNameLink_n6oG8",vseProfileDescriptorPrefix:"_dnNlL_vseProfileDescriptorPrefix_1-G8U",vseProfileDescriptor:"_dnNlL_vseProfileDescriptor_1C5j5",
vseProfileNameDisclosure:"_dnNlL_vseProfileNameDisclosure_17gGd",vseVideoDisclosure:"_dnNlL_vseVideoDisclosure_1KRaJ",vseDisclosureLink:"_dnNlL_vseDisclosureLink_3n6SK",vseHeroWidgetHeaderBlock:"_dnNlL_vseHeroWidgetHeaderBlock_25gLA",vseHeroWidgetHeader:"_dnNlL_vseHeroWidgetHeader_3fFur",iveHeroRowGrid:"_dnNlL_iveHeroRowGrid_1Sgt3",iveThemeContainer:"_dnNlL_iveThemeContainer_3_QXu",iveThemeRightFlower:"_dnNlL_iveThemeRightFlower_1-jMa",iveThemeRightFlowerImage:"_dnNlL_iveThemeRightFlowerImage_14PHD",
rotate:"_dnNlL_rotate_2sP4k",fadeIn:"_dnNlL_fadeIn_1YZjv",iveThemeLeftFlower:"_dnNlL_iveThemeLeftFlower_iJE9B",iveThemeLeftFlowerImage:"_dnNlL_iveThemeLeftFlowerImage_G6_zc",vseLazyLoadSpinner:"_dnNlL_vseLazyLoadSpinner_2XtFC",vseVideoWidgetHeader:"_dnNlL_vseVideoWidgetHeader_30B2I",vseVideoSegmentHeader:"_dnNlL_vseVideoSegmentHeader_14ouc",vseFirstItem:"_dnNlL_vseFirstItem_3h4BK",vseVideoWidgetHeaderBlock:"_dnNlL_vseVideoWidgetHeaderBlock_2t4B0",vseWidgetPageState:"_dnNlL_vseWidgetPageState_2eblq",
vseVideoWidgetContainer:"_dnNlL_vseVideoWidgetContainer_3HDIT",vseIngressCarousel:"_dnNlL_vseIngressCarousel_2Knkb",vseThumbnailPreviewImg:"_dnNlL_vseThumbnailPreviewImg_3dlho",vseCardsVideoThumbnail:"_dnNlL_vseCardsVideoThumbnail_3xlzJ",vseWidgetLbVideoBlock:"_dnNlL_vseWidgetLbVideoBlock_VfqBF",vseWidgetLbVideoBlockWrapper:"_dnNlL_vseWidgetLbVideoBlockWrapper_v6yOr",vseWidgetLbAbsolute:"_dnNlL_vseWidgetLbAbsolute_bgBq7",vseWidgetLbSpinner:"_dnNlL_vseWidgetLbSpinner_yjdTV",vseVerticalLightbox:"_dnNlL_vseVerticalLightbox_12YT2",
vseRemoveAbsolute:"_dnNlL_vseRemoveAbsolute_2xmeK",vseUploadButton:"_dnNlL_vseUploadButton_5QCM8",vseUploadButtonIcon:"_dnNlL_vseUploadButtonIcon_2-eZR",vseVideoDataItem:"_dnNlL_vseVideoDataItem_2A7tm",vseVwdpWidgetPageState:"_dnNlL_vseVwdpWidgetPageState_283lp",vseSbVideoDataItem:"_dnNlL_vseSbVideoDataItem_1TmVd",thumbnailPreviewWrap:"_dnNlL_thumbnailPreviewWrap_2sqTc",vseSearchVideosInput:"_dnNlL_vseSearchVideosInput_2CfoS",videoPreviewWrapper:"_dnNlL_videoPreviewWrapper_vvNVU",clearSearchInput:"_dnNlL_clearSearchInput_3ZK67",
sponsoredVideoLabel:"_dnNlL_sponsoredVideoLabel_23SsR"},cn;pi._operationNames=[];pi.card=function(){return pb.__awaiter(void 0,void 0,void 0,function(){var z,G,w,Y,Z,S,X;return pb.__generator(this,function(ha){switch(ha.label){case 0:Sc.count("ive-vwdp-v2-card:rendered",1);z=[".vse-segment-title-G1",".vse-segment-title-RVS_G1",".vse-segment-title-RVS_G2",".vse-segment-title-RVS_G1_T1",".vse-segment-title-RVS_G2_T1"];z.forEach(function(pa){U["default"].$(".vse-video-widget-dp-container ."+Jd.vseVideoDataItem).find(""+
pa).first().addClass(Jd.vseFirstItem)});G=U["default"].capabilities.mobile;if((w=tb["default"].cardRoot.getElementsByClassName(Jd.vseWidgetPageState))&&w[0]&&w[0].dataset)cn=w[0].dataset;else return Ya("pageStateNotFound"),[2];Y="true"===cn.desktopIngressCxUpdated;S="ive_vftp";return Y?[4,zs(Jd,"ive-vwdp-v2-card")]:[3,2];case 1:Z=ha.sent(),S="ive_vftp_hero_cx",ha.label=2;case 2:return X=ws(Jd,"IVE_VFTP",S,Y),[4,Cn(G,Jd,null,X,!0,!0,!1,Z)];case 3:return ha.sent(),[2]}})})}});
