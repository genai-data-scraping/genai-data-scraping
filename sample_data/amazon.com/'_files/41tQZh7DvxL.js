'use strict';mix_d("CSEDietaryShoppingCards__cse-nutritional-info-and-ingredient-card:cse-nutritional-info-and-ingredient-card__xNRJhCnU","require exports tslib @c/scoped-dom @c/aui-feature-detect @c/aui-utils @c/logger @c/remote-operations @c/tracking @p/A @c/metrics @c/browser-operations @c/aui-untrusted-ajax".split(" "),function(G,L,l,la,ma,na,oa,pa,qa,ra,M,sa,ta){function z(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}function H(a){if(a&&a.__esModule)return a;var b=Object.create(null);
a&&Object.keys(a).forEach(function(c){if("default"!==c){var f=Object.getOwnPropertyDescriptor(a,c);Object.defineProperty(b,c,f.get?f:{enumerable:!0,get:function(){return a[c]}})}});b["default"]=a;return b}function N(a,b){return l.__awaiter(this,void 0,void 0,function(){var c,f,d,e,h,m;return l.__generator(this,function(g){switch(g.label){case 0:c={accepts:"text/html, */*",contentType:"application/json; charset=UTF-8"},g.label=1;case 1:return g.trys.push([1,3,,4]),f=performance.now(),[4,ua["default"].post(a,
c,b)];case 2:d=g.sent();e=performance.now();A("DilV3.UntrustedAjaxCallTime",f,e);h=d.responseBody;if(!h||""===h.trim())return n("DilV3.UntrustedAjaxInvalidResponse"),y["default"].log("AJAX call response is undefined or empty.","WARN"),[2,""];n("DilV3.UntrustedAjaxCallSuccess");return[2,h];case 3:return m=g.sent(),n("DilV3.UntrustedAjaxCallFailure"),y["default"].log("AJAX call failed with the error: "+m,"ERROR"),[2,""];case 4:return[2]}})})}function O(a){var b,c="",f="",d="";a&&"asin"in a&&"attributeEnum"in
a&&"attributeValue"in a&&(c=a.asin,f=a.attributeEnum,d=a.attributeValue);return b={},b.asin=c,b.attributeEnum=f,b.attributeValue=d,b}function Q(a){return l.__awaiter(this,void 0,void 0,function(){var b,c,f,d,e,h=this;return l.__generator(this,function(m){switch(m.label){case 0:return b=R["default"].setup().define,[4,new Promise(function(g,k){G(["@c/aui-bottom-sheet"],function(p){g(H(p))},k)})];case 1:return c=m.sent().default,d={},b(C.bottomSheetHandler,"click",function(g){return l.__awaiter(h,void 0,
void 0,function(){var k,p,q,v,w;return l.__generator(this,function(u){switch(u.label){case 0:e&&(e=void 0);e=performance.now();k=g.currentTarget;if(!k)return[3,4];p="dil-v3-bottom-sheet-"+k.dataset.attributeEnum;d[p]?f=d[p]:(q=t["default"].createElement("div"),v=p+"-wrapper",q.classList.add(v,"aok-hidden"),t["default"].cardRoot.appendChild(q),w={height:100},f=c.create(p,"."+v,w),d[p]=f,f.on("afterHide",function(){if(e){var B=performance.now();A("DilV3.BottomSheetDwellTime",e,B)}}));return a?[4,va(k,
f)]:[3,2];case 1:return u.sent(),[3,4];case 2:return[4,wa(k,f)];case 3:u.sent(),u.label=4;case 4:return[2]}})})}),[2]}})})}function xa(){return l.__awaiter(this,void 0,void 0,function(){var a,b,c,f,d,e=this;return l.__generator(this,function(h){a=R["default"].setup().define;b=t["default"].cardRoot.querySelector("#dil-v3-inline-slot-spinner-wrapper");c=t["default"].cardRoot.querySelector("#dil-v3-inline-slot-wrapper");a(C.inlineSlotDisplay,"click",function(m){return l.__awaiter(e,void 0,void 0,function(){var g,
k,p,q,v,w,u,B;return l.__generator(this,function(I){switch(I.label){case 0:g=performance.now();d&&(A("DilV3.InlineSlotDwellTime",d,g),d=void 0);k=m.currentTarget;if(!k)return[3,4];p=k.getAttribute("dil-v3-ajax-content-id");q=c.querySelector("#"+p);if(k!==f||!q)return[3,1];q.classList.contains("aok-hidden")?(E(),F(),k.classList.add(r.dilLogoBorder),S(c),D(q),D(c),n("DilV3.InlineSlotShowSuccess"),d=g):(x(c),T(c),E(),F(),x(b),n("DilV3.LogoCollapseClick"));return[3,4];case 1:D(b);x(c);E();F();q&&q.remove();
v=t["default"].cardRoot.querySelector("#"+p);if(!v)return[3,3];w=O(k.dataset);return[4,N("/ussx/dietary-recs",w)];case 2:return(u=I.sent())&&""!==u.trim()?(c.innerHTML+=v.outerHTML,(B=c.querySelector("#"+p))?(B.innerHTML=u,k.classList.add(r.dilLogoBorder),U(),V(),x(b),S(c),B.classList.remove("aok-hidden"),D(c),n("DilV3.InlineSlotShowSuccess"),f=k,d=g):(x(b),n("DilV3.InlineSlotShowFailure"))):(x(b),n("DilV3.InlineSlotShowFailure")),[3,4];case 3:x(b),n("DilV3.InlineSlotShowFailure"),I.label=4;case 4:return[2]}})})});
a(C.inlineSlotClose,"click",function(m){return l.__awaiter(e,void 0,void 0,function(){var g;return l.__generator(this,function(k){d&&(g=performance.now(),A("DilV3.InlineSlotDwellTime",d,g),d=void 0);x(c);T(c);E();F();x(b);n("DilV3.CloseIconClick");return[2]})})});return[2]})})}function D(a){a.classList.contains("aok-hidden")&&a.classList.remove("aok-hidden")}function x(a){a.classList.contains("aok-hidden")||a.classList.add("aok-hidden")}function S(a){a=a.querySelector("."+r.dilInlineSlotClose);D(a)}
function T(a){a=a.querySelector("."+r.dilInlineSlotClose);x(a)}function E(){var a=t["default"].cardRoot.getElementsByClassName(r.dilAjaxContent);Array.prototype.forEach.call(a,function(b){x(b)})}function F(){var a=t["default"].cardRoot.getElementsByClassName(r.dilV3Logo);Array.prototype.forEach.call(a,function(b){b.classList.contains(r.dilLogoBorder)&&b.classList.remove(r.dilLogoBorder)})}var t=z(la),W=z(ma),y=z(oa),ya=z(pa),X=z(ra),R=z(sa),ua=z(ta),r={nicSection:"_cse-nutritional-info-and-ingredient-card_style_nicSection__1KRrO",
nutritionFactsServingTable:"_cse-nutritional-info-and-ingredient-card_style_nutritionFactsServingTable__1w1yY",nutritionSeeDetailsContent:"_cse-nutritional-info-and-ingredient-card_style_nutritionSeeDetailsContent__3m6DG",nutritionFactsRow:"_cse-nutritional-info-and-ingredient-card_style_nutritionFactsRow__2iC1I",nutritionFactsEndRow:"_cse-nutritional-info-and-ingredient-card_style_nutritionFactsEndRow__2Tj8Y",boldNutritionFactsRow:"_cse-nutritional-info-and-ingredient-card_style_boldNutritionFactsRow__3uJs-",
nutritionFactsCol:"_cse-nutritional-info-and-ingredient-card_style_nutritionFactsCol__YIxcj",nutrientTextLevel1:"_cse-nutritional-info-and-ingredient-card_style_nutrientTextLevel1__3LewN",nutrientTextLevel2:"_cse-nutritional-info-and-ingredient-card_style_nutrientTextLevel2__PMewO",nutrientAmountText:"_cse-nutritional-info-and-ingredient-card_style_nutrientAmountText__X0ICd",nutrientOfWhichRow:"_cse-nutritional-info-and-ingredient-card_style_nutrientOfWhichRow__2u6GY",nutrientOfWhichPrefix:"_cse-nutritional-info-and-ingredient-card_style_nutrientOfWhichPrefix__1XAUl",
boldNutritionFactsRowEU:"_cse-nutritional-info-and-ingredient-card_style_boldNutritionFactsRowEU__2_NJr",boldNutritionFactsEndRowEU:"_cse-nutritional-info-and-ingredient-card_style_boldNutritionFactsEndRowEU__Uo7tE",nicCardDeck:"_cse-nutritional-info-and-ingredient-card_style_nicCardDeck__XYGLl",dilDesktop:"_cse-nutritional-info-and-ingredient-card_style_dilDesktop__zrWDe",dilMobile:"_cse-nutritional-info-and-ingredient-card_style_dilMobile__3Gp-u",dilCardDeck:"_cse-nutritional-info-and-ingredient-card_style_dilCardDeck__1f58H",
dilDivider:"_cse-nutritional-info-and-ingredient-card_style_dilDivider__UD7J6",dilLogo:"_cse-nutritional-info-and-ingredient-card_style_dilLogo__1n1Ur",dilLogoRounded:"_cse-nutritional-info-and-ingredient-card_style_dilLogoRounded__1gOms",dilV3Logo:"_cse-nutritional-info-and-ingredient-card_style_dilV3Logo__1Sd61",dilLogoBorder:"_cse-nutritional-info-and-ingredient-card_style_dilLogoBorder__1ia00",dilCheckmark:"_cse-nutritional-info-and-ingredient-card_style_dilCheckmark__sVQes",dilText:"_cse-nutritional-info-and-ingredient-card_style_dilText__1iIqY",
dilTextSmall:"_cse-nutritional-info-and-ingredient-card_style_dilTextSmall__2lo_3",dilLinkCursor:"_cse-nutritional-info-and-ingredient-card_style_dilLinkCursor__2AnPT",dilAjaxContent:"_cse-nutritional-info-and-ingredient-card_style_dilAjaxContent__1UazS",dilContent:"_cse-nutritional-info-and-ingredient-card_style_dilContent__26pZU",dilATCSpinner:"_cse-nutritional-info-and-ingredient-card_style_dilATCSpinner__LXHAi",dilInlineSlotClose:"_cse-nutritional-info-and-ingredient-card_style_dilInlineSlotClose__37JVO",
dilCloseIcon:"_cse-nutritional-info-and-ingredient-card_style_dilCloseIcon__I38mP",dilBadgeDesktop:"_cse-nutritional-info-and-ingredient-card_style_dilBadgeDesktop__3q_OJ",dilBadgeMobile:"_cse-nutritional-info-and-ingredient-card_style_dilBadgeMobile__36p3H",dilV2Text:"_cse-nutritional-info-and-ingredient-card_style_dilV2Text__ZYKId",nicPoExpanderSection:"_cse-nutritional-info-and-ingredient-card_style_nicPoExpanderSection__1vhZE",nicSectionn:"_cse-nutritional-info-and-ingredient-card_style_nicSectionn__1iTbd"},
Y;(function(a){a.DESKTOP="desktop";a.MOBILE="mobile";a.TABLET="tablet"})(Y||(Y={}));var Z;(function(a){a.ABOVE_PO="abovePO";a.BELOW_PO="belowPO";a.NOT_DISPLAYED="notDisplayed";a.DISPLAY_NIC_DIL_FEATURE="displayFeature"})(Z||(Z={}));var aa;(function(a){a.LOGO="logo";a.TAPPABLE_LOGO="tappableLogo";a.TAPPABLE_LOGO_NO_AJAX="tappableLogoNoAjax";a.BLACK_BADGE="blackBadge";a.WHITE_BADGE="whiteBadge";a.HIGHLIGHTS="highlights";a.HIGHLIGHTS_BULLETS="highlightsBullets"})(aa||(aa={}));var ba;(function(a){a.DISPLAY_SUMMARY=
"nutritionSummary";a.DISPLAY_INFO="nutritionInfo"})(ba||(ba={}));var ca;(function(a){a.US="ATVPDKIKX0DER";a.IN="A21TJRUUN4KGV";a.CA="A2EUQ1WTGCTBG2";a.MX="A1AM78C64UM0Y8";a.DE="A1PA6795UKMFR9";a.ES="A1RKKUPIHCS9HS";a.IT="APJ6JRA9NG5V4";a.FR="A13V1IB3VIYZZH";a.UK="A1F83G8C2ARO7P"})(ca||(ca={}));var da;(function(a){a.DEFAULT="default";a.EU_VIEW="EUView";a.IN_VIEW="INView"})(da||(da={}));var J;(function(a){a.USDA_ORGANIC="usda_organic";a.EU_ORGANIC="eu_organic";a.GLUTEN_FREE="gluten_free";a.HALAL="halal";
a.KETO="keto";a.KOSHER="kosher";a.PALEO="paleo";a.PLANT_BASED="plant_based";a.VEGAN="vegan";a.VEGETARIAN="vegetarian"})(J||(J={}));var n=function(a){M.count(a.replace(" ","_"),1)},ea=function(a,b){n("CseNicImpression"+b);a.on("a:expander:nic-nutrition-facts-expander:toggle:expand",function(c){n("CseNicNutritionFactsExpanded"+b)});a.on("a:expander:nic-ingredients-expander:toggle:expand",function(c){n("CseNicIngredientsExpanded"+b)});a.on("a:expander:nic-po-expander:toggle:expand",function(c){n("CseNicProductOverviewExpanded"+
b)});a.on("a:expander:nic-see-details-expander:toggle:expand",function(c){n("CseNicSeeDetailsExpanded"+b)})},A=function(a,b,c){M.count(a.replace(" ","_"),c-b)},fa=function(a){return l.__awaiter(void 0,void 0,void 0,function(){return l.__generator(this,function(b){za();Aa(a);return[2]})})},za=function(){return l.__awaiter(void 0,void 0,void 0,function(){var a;return l.__generator(this,function(b){a=ya["default"].setup();X["default"].declarative("cse-dietary-recs-retail-atc","click",function(c){var f=
performance.now(),d=c.data;if(d&&d.reftag&&d.asin&&d.offerListingID&&d.quantity){var e=d.reftag,h=d.asin,m=c.$target.closest("#"+e+"-"+h),g=m.find("."+e+"-button");Ba(g,h);c={asin:h,offerListingId:d.offerListingID,quantity:Number(d.quantity)};qa.addTracking(a.addToCart,{ref_:e})(c).then(function(k){Ca(k.count).catch(function(p){n("DilV3.ATCCartUpdateFailure");y["default"].log("Failed to update cart count: "+p,"ERROR")});ha(g,h);k.success?(ia(),Da(e,m),k=performance.now(),A("DilV3.ATCTime",f,k),n("DilV3.ATCCallSuccess")):
(ja(e,m),n("DilV3.ATCCallFailure"),y["default"].log("ATC call failed","ERROR"))}).catch(function(k){ha(g,h);ja(e,m);n("DilV3.ATCRemoteOperationFailure");y["default"].log("ATC remote operation failed with error: "+k,"ERROR")})}else n("DilV3.ATCInvalidData"),y["default"].log("Invalid ATC action data","ERROR")});return[2]})})},Aa=function(a){return l.__awaiter(void 0,void 0,void 0,function(){var b;return l.__generator(this,function(c){b=performance.now();P.when("fresh-add-to-cart").execute("cse-dietary-recs-alm-atc-callback",
function(f){f.addToFreshCart({success:function(d,e){ka(d,"success");d=performance.now();A("DilV3.AlmATCTime",b,d);n("DilV3.AlmATCCallSuccess")},error:function(d,e,h,m){ka(d,"failure");n("DilV3.AlmATCCallFailure");y["default"].log("ALM ATC failed with error: "+m,"ERROR")},clientID:a?"dietary-recs-alm-dp-mobile":"dietary-recs-alm-dp-desktop"})});return[2]})})},ka=function(a,b){ia();var c=a.data,f=c.reftag;c=a.$target.closest("#"+f+"-"+c.asin);a=c.find("."+f+"-button");b=c.find("."+f+"-"+b);K(a,b)},
Ba=function(a,b){a&&(b="dil-v3-atc-spinner-"+b,a.wrap('<div id="'+b+'" class="'+r.dilATCSpinner+'"></div>'),b=a.closest("#"+b),b.css({width:a.outerWidth()+"px"}),b.css({height:a.outerHeight()+"px"}),a.addClass("aok-hidden"))},ha=function(a,b){b=a.closest("#dil-v3-atc-spinner-"+b);a&&b&&a.unwrap()},Ca=function(a){return l.__awaiter(void 0,void 0,void 0,function(){var b,c;return l.__generator(this,function(f){switch(f.label){case 0:return a?W["default"].isSupported("isAmazonApp")?[4,new Promise(function(d,
e){G(["@m/mash"],function(h){d(H(h))},e)})]:[3,2]:(y["default"].log("Cart count is missing in ATC"),[2]);case 1:return b=f.sent(),b.cart.didUpdate({newCartQuantity:a}),[3,4];case 2:return[4,new Promise(function(d,e){G(["@p/nav.setCartCount"],function(h){d(H(h))},e)})];case 3:c=f.sent(),c.default(a),f.label=4;case 4:return[2]}})})},Da=function(a,b){var c=b.find("."+a+"-button");a=b.find("."+a+"-success");K(c,a)},ja=function(a,b){var c=b.find("."+a+"-button");a=b.find("."+a+"-failure");K(c,a)},K=function(a,
b){a&&b&&(a.hasClass("aok-hidden")||a.addClass("aok-hidden"),b.hasClass("aok-hidden")&&b.removeClass("aok-hidden"),na.delay(function(){b.addClass("aok-hidden");a.removeClass("aok-hidden")},6E3))},ia=function(){W["default"].isSupported("isAmazonApp")&&X["default"].trigger("dilAtcVibrate:trigger")},U=function(){P.when("a-carousel-framework").execute(function(a){a.createAll();a.initializeAll()})},Ea=function(){P.when("a-expander").execute(function(a){a.initializeExpanders()})},V=function(){P.when("A",
"a-truncate").execute(function(a,b){b.refreshAutoTruncate()})},C;(function(a){a.bottomSheetHandler="dil-v3-bottom-sheet-click-logo";a.inlineSlotDisplay="dil-v3-inline-slot-display-click-logo";a.inlineSlotClose="dil-v3-inline-slot-close-click-icon"})(C||(C={}));var va=function(a,b){return l.__awaiter(void 0,void 0,void 0,function(){var c,f,d;return l.__generator(this,function(e){switch(e.label){case 0:return c=O(a.dataset),[4,N("/ussx/dietary-recs",c)];case 1:return(f=e.sent())&&""!==f.trim()?[4,b.render(function(h){var m=
a.getAttribute("dil-v3-ajax-content-id"),g=t["default"].cardRoot.querySelector("#"+m);h.innerHTML=(null===g||void 0===g?void 0:g.outerHTML)||"";if(m=h.querySelector("#"+m))m.innerHTML=f,m.classList.remove("aok-hidden"),d=h})]:[3,7];case 2:return e.sent(),d?[4,b.show()]:[3,4];case 3:return e.sent(),Ea(),V(),U(),b.changeHeight(d.scrollHeight),n("DilV3.BottomSheetShowSuccess"),[3,6];case 4:return[4,b.hide()];case 5:e.sent(),n("DilV3.BottomSheetShowFailure"),e.label=6;case 6:return[3,9];case 7:return[4,
b.hide()];case 8:e.sent(),n("DilV3.BottomSheetShowFailure"),e.label=9;case 9:return[2]}})})},wa=function(a,b){return l.__awaiter(void 0,void 0,void 0,function(){var c;return l.__generator(this,function(f){switch(f.label){case 0:return[4,b.render(function(d){var e=a.getAttribute("dil-v3-content-id"),h=t["default"].cardRoot.querySelector("#"+e);d.innerHTML=(null===h||void 0===h?void 0:h.outerHTML)||"";if(e=d.querySelector("#"+e))e.classList.remove("aok-hidden"),c=d})];case 1:return f.sent(),c?[4,b.show()]:
[3,3];case 2:return f.sent(),b.changeHeight(c.scrollHeight),n("DilV3.BottomSheetNoAjaxShowSuccess"),[3,5];case 3:return[4,b.hide()];case 4:f.sent(),n("DilV3.BottomSheetNoAjaxShowFailure"),f.label=5;case 5:return[2]}})})},Fa=function(){return l.__awaiter(void 0,void 0,void 0,function(){return l.__generator(this,function(a){P.when("A").execute("dil-v3-popover-setup",function(b){var c,f;try{for(var d=l.__values(Object.values(J)),e=d.next();!e.done;e=d.next()){var h="dil-v3-popover-"+e.value;b.on("a:popover:beforeShow:"+
h,function(g){f=performance.now();g&&g.popover&&g.popover.originalFocus.classList.add(r.dilLogoBorder)});b.on("a:popover:afterShow:"+h,function(g){n("DilV3.PopoverShowSuccess")});b.on("a:popover:afterHide:"+h,function(g){g&&g.popover&&g.popover.originalFocus.classList.remove(r.dilLogoBorder);f&&(A("DilV3.PopoverDwellTime",f,performance.now()),f=void 0)})}}catch(g){var m={error:g}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(m)throw m.error;}}});return[2]})})},Ga=function(a,b,c){void 0!==
a&&void 0!==b&&a.find(c)&&(a=a.find(c),a.length&&(b.text(a.text()),a.hide()))};L._operationNames=["addToCart"];L.card=function(){return l.__awaiter(void 0,void 0,void 0,function(){var a,b,c,f;return l.__generator(this,function(d){switch(d.label){case 0:return a=t["default"].cardRoot.getElementsByClassName(r.dilV3Logo)[0],b=t["default"].cardRoot.getElementsByClassName("nicDesktop")[0],b?a?(c=t["default"].cardRoot.getElementsByClassName(r.dilAjaxContent)[0])?[4,xa()]:[3,3]:[3,5]:[3,6];case 1:return d.sent(),
[4,fa(!1)];case 2:return d.sent(),[3,5];case 3:return[4,Fa()];case 4:d.sent(),d.label=5;case 5:P.when("A").execute("collapse-po-fb-nic-desktop",function(e){var h=e.$("."+r.nicPoExpanderSection),m=e.$("#nic-po-expander-heading-text"),g=e.$("#nic-po-expander-content"),k=e.$("#productOverview_feature_div"),p=k.children(),q=e.$("#featurebullets_feature_div"),v=q.find("#feature-bullets").children(),w=e.$("#nic-nutrition-summary-nutrient-content");h&&(p.length&&(k=k.find("h3"),k.length&&k.hide(),h.show(),
p.appendTo(g)),v.length&&(Ga(q,m,"h1"),h.show(),q.children().appendTo(g)));e.on("a:expander:nic-see-details-expander:toggle:collapse",function(u){w.show()});e.on("a:expander:nic-see-details-expander:toggle:expand",function(u){w.hide()});ea(e,b.dataset.metricssuffix)}),d.label=6;case 6:return f=t["default"].cardRoot.getElementsByClassName("nicMobile")[0],f?a?(c=t["default"].cardRoot.getElementsByClassName(r.dilAjaxContent)[0])?[4,Q(!0)]:[3,9]:[3,11]:[3,12];case 7:return d.sent(),[4,fa(!0)];case 8:return d.sent(),
[3,11];case 9:return[4,Q(!1)];case 10:d.sent(),d.label=11;case 11:P.when("A").execute("collapse-po-fb-nic-mobile",function(e){var h=e.$("."+r.nicPoExpanderSection),m=e.$("#nic-po-expander-heading-text-mobile"),g=e.$("#nic-po-expander-content-mobile"),k=e.$("#productOverview_feature_div"),p=k.find(".a-cardui-header").find(".a-truncate-full"),q=k.find(".a-cardui-body"),v=e.$("#aboutThisItem_atf_hardlines_feature_div"),w=v.find("#feature-bullets"),u=e.$("#nic-nutrition-summary-nutrient-content");h&&
(q.length&&(h.show(),q.detach().appendTo(g),w.length&&g.append('<hr aria-hidden="true" class="a-spacing-base a-spacing-top-base a-divider-normal">'),p.length&&(m.text(p.text()),p.hide()),k.empty()),w.length&&(w.detach().appendTo(g),h.show(),v.empty()));e.on("a:expander:nic-see-details-expander:toggle:collapse",function(B){u.show()});e.on("a:expander:nic-see-details-expander:toggle:expand",function(B){u.hide()});ea(e,f.dataset.metricssuffix)}),d.label=12;case 12:return[2]}})})}});
