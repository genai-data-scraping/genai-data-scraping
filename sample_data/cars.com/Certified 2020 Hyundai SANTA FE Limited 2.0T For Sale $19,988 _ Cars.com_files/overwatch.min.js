/*!
 * ActivEngage - Pageview JS
 * Version: 1.7.790
 */
__ae([9],{43:function(e,t,s){"use strict";function i(e){this.dispose=this.dispose.bind(this),this.loadProviders=this.loadProviders.bind(this),r.loadDependencies([r.modules.wsp]).done(function(){this.loadProviders(e)}.bind(this)),a.unload.subscribe(this.dispose)}var n=s(556),a=s(1).commands,o=(s(1).events,s(3)),r=s(31);i.prototype={providers:[],loadProviders:function(e){this.providers=o.map(n,function(t){if("function"==typeof t.initialize&&t.initialize(e))return t});var t={};a.startTracking.trigger(t)},dispose:function(){o.foreach(this.providers,function(e){"function"==typeof e.dispose&&e.dispose()}),a.unload.unsubscribe(this.dispose)}},e.exports=i},545:function(e,t,s){"use strict";e.exports={knownPageGroups:{home:"home",vdp:"vdp",ddp:"ddp",ddpSearch:"ddp-search",vdpSearch:"vdp-search",service:"service",parts:"parts",specials:"specials",finance:"finance",retailing:"retailing",tradeIn:"trade-in",other:"other"}}},546:function(e,t,s){"use strict";e.exports={trackingData:{pageGroup:"",shopperName:{first:"",last:""},department:"",chatId:"",activTarget:{department:"",description:""},vehicle:{status:"",make:"",model:"",year:"",vin:""}},provider:"activengage",defaults:{shopperName:"Visitor",activTargetDescription:"Special Offer",department:"sales"},eventNames:{chatLaunch:"Shopper opened Chat",smsLaunch:"Shopper opened SMS Chat",chatStart:"{SHOPPER} started a Chat",smsStart:"{SHOPPER} started an SMS Chat",shopperMessage:"{SHOPPER} sent a message",activTargetImpression:"ActivTarget Offer Displayed",activTargetSubmit:"ActivTarget Offer Submitted",pushPage:"Page pushed to {SHOPPER}",carfax:"Carfax sent to {SHOPPER}",testDrive:"MyDrive Video sent to {SHOPPER}",leaveMessage:"{SHOPPER} submitted a Form",shopperNameDetected:"Shopper Name Detected",appointmentScheduled:"{SHOPPER} scheduled an Appointment"},eventIds:{chatStarted:"activengage_chat_started",chatOpened:"activengage_chat_opened",activTargetImpression:"activengage_activtarget_impression",activTargetSubmit:"activengage_activtarget_submit",chatEngagement:"activengage_chat_engagement",pushPage:"activengage_push_page",testDrive:"activengage_test_drive_sent",carfax:"activengage_carfax_sent",leaveMessage:"activengage_form_submission",shopperNameDetected:"activengage_shopper_name_detected",appointmentScheduled:"activengage_appointment_scheduled"},channels:{chat:"chat",sms:"sms"},departments:{sales:"sales",service:"service",parts:"parts",cs:"customer_service",ins:"Insurance",realestate:"real_estate"},pageGroupStrings:{home:"the Home Page",vdp:"a VDP",ddp:"a DDP","ddp-search":"a DDP Search Page","vdp-search":"a VDP Search Page",service:"a Service Page",parts:"a Parts Page",specials:"a Specials Page",finance:"a Finance Page",retailing:"a Digital Retailing Page","trade-in":"a Trade-In Page"}}},547:function(e,t,s){"use strict";function i(e){e||(e={}),this.application=e.application,this.target=e.target,this.action=e.action,this.event=e.event,this.experiment=e.experiment,this.pagegroup=e.pagegroup}e.exports=i},548:function(e,t,s){"use strict";function i(e,t){this.key=e,this.value=t}function n(){this.startTracking=this.startTracking.bind(this),this.stopTracking=this.stopTracking.bind(this),this.restartTracking=this.restartTracking.bind(this),this.recordPageView=this.recordPageView.bind(this),this.logPageViewError=this.logPageViewError.bind(this),this.dispose=this.dispose.bind(this),this.onVehiclesAvailable=this.onVehiclesAvailable.bind(this),this.onWspDetected=this.onWspDetected.bind(this),this.onPageGroupDetected=this.onPageGroupDetected.bind(this),this.onLaunchChat=this.onLaunchChat.bind(this),this.onLaunchSms=this.onLaunchSms.bind(this),this.onLaunchDeal=this.onLaunchDeal.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),h.onVehicleDataAvailable.subscribe(this.onVehiclesAvailable)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=s(26),r=s(4),c=s(1).commands,h=s(1).events,d=s(76),u=s(2),m=s(3),l=s(33),p=s(13),g=s(561),b=s(547),v=s(8),f=s(545),C={application:"pageview",events:{openChat:"openchat",openSms:"opensms",startChat:"startchat",startSms:"startsms"},cookies:{clientIp:"ae-clientIp",sessionId:"ae-sessionId",visitorId:"ae-visitorId",legacyVId:"aeSess",pageHidden:"ae-hidden",lastSeen:"ae-lastseen"},pollStatus:{unknown:"Unknown",error:"Error",success:"Poll"},trackStatus:{tracking:"tracking",inactive:"inactive",stopped:"stopped"},chatStatus:{notInChat:"NotInChat",chatting:"Chatting",preChatSurvey:"PreChatSurvey",postChatSurvey:"PostChatSurvey"},commands:{pushPage:"PushPage"},returnMinutes:1};n.prototype={status:C.trackStatus.inactive,visit:null,clientIp:null,pollHistory:[],pendingUpdates:[],pollHistoryMaxLength:5,errorRetryInterval:3e4,initialize:function(e){if(v.isBot)return this.status=C.trackStatus.inactive,!1;var t=e&&e.activengage?e.activengage:e;if(!t||"object"!=(void 0===t?"undefined":a(t)))return u.error("Overwatch module config missing or invalid.",t);if(this.session=r.getSession(),this.account=r.getAccount(),!this.session||"object"!=a(this.session))return u.error("Session config is missing or invalid.",this.session);if(!this.account||"object"!=a(this.account))return u.error("Account config is missing or invalid.",this.account);g.setBaseUrl(t.pageActionUrl),this.pollUrl=t.pollUrl,this.recordUrl=t.recordUrl,this.restoreUrl=t.restoreUrl,this.geoUrl=t.geoUrl,this.analytics=t.analytics,this.logUrl=t.logUrl,this.errorRetryInterval=t.defaultErrorRetryInterval,this.pollHistoryMaxLength=t.pollHistoryMaxLength,c.startTracking.subscribe(this.startTracking),c.stopTracking.subscribe(this.stopTracking),c.recordPageView.subscribe(this.recordPageView),c.logPageViewError.subscribe(this.logPageViewError),h.onChatLaunched.subscribe(this.onLaunchChat),h.onSmsLaunched.subscribe(this.onLaunchSms),h.onDigitalRetailingLaunched.subscribe(this.onLaunchDeal),h.onWspDetected.subscribe(this.onWspDetected),h.onPageGroupDetected.subscribe(this.onPageGroupDetected),h.onVisibilityChange.subscribe(this.onVisibilityChange);return u.debug("Overwatch starting"),!0},dispose:function(){c.startTracking.unsubscribe(this.startTracking),c.stopTracking.unsubscribe(this.stopTracking),c.recordPageView.unsubscribe(this.recordPageView),h.onChatLaunched.unsubscribe(this.onLaunchChat),h.onSmsLaunched.unsubscribe(this.onLaunchSms),h.onDigitalRetailingLaunched.unsubscribe(this.onLaunchDeal),h.onWspDetected.unsubscribe(this.onWspDetected),h.onPageGroupDetected.unsubscribe(this.onPageGroupDetected),h.onVisibilityChange.unsubscribe(this.onVisibilityChange)},restartTracking:function(){this.status===C.trackStatus.tracking&&(clearTimeout(this.pollTimeout),this.poll())},startTracking:function(e){if(this.status!==C.trackStatus.tracking){e=e||{},e.wsp&&!this.wsp&&(this.wsp=e.wsp),e.wspSessionId&&!this.wspSessionId&&(this.wspSessionId=e.wspSessionId);var t=null;this.session.sessionId?this.setSessionId(this.session.sessionId):(t=m.getCookie(C.cookies.sessionId)||"",this.setSessionId(t||this.generateUniqueId())),this.session.visitorId||this.setVisitorId(m.getCookie(C.cookies.legacyVId)||m.getCookie(C.cookies.visitorId)||this.generateUniqueId()),h.onTrackingDataAvailable.trigger(),this.setVisitId("Visit/"+r.getAccount().accountId+"_"+this.session.visitorId),this.record(t,this.wspSessionId)&&(this.status=C.trackStatus.tracking)}},stopTracking:function(){this.status===C.trackStatus.tracking&&(clearTimeout(this.pollTimeout),this.status=C.trackStatus.stopped)},onWspDetected:function(e){this.wsp||(this.wsp=e,this.pendingUpdates.push(new i("wsp",e.displayName)))},onPageGroupDetected:function(e){this.pagegroup||(this.pagegroup=e,this.pendingUpdates.push(new i("pagegroup",e)))},onVehiclesAvailable:function(e){"object"===(void 0===e?"undefined":a(e))&&null!==e&&(this.vehicleFormatted=(e[0].year||"")+" "+(e[0].make||"")+" "+(e[0].model||""))},detectVisitorReturning:function(){var e=parseInt(m.getCookie(C.cookies.lastSeen));if(!e)return void m.setCookie(C.cookies.lastSeen,new Date-0,(new Date).addYears(3));if((new Date).addMinutes(-C.returnMinutes)-0>e){var t=(new Date-e)/1e3/60;h.onVisitorReturn.trigger(t)}m.setCookie(C.cookies.lastSeen,new Date-0,(new Date).addYears(3))},recordPageView:function(e){if(this.status===C.trackStatus.tracking){var t=window.location.href;e&&e.href&&(t=e.href),this.record(null,null,t)}},logPageViewError:function(e){return this.logUrl?e?void this.logError(e):void u.error("Params not provided to recordError"):void u.error("Overwatch log url not set")},logError:function(e){var t;e.errorDetail&&e.errorDetail.length>100&&(t=e.errorDetail.slice(0,99));var s={accountId:this.account.accountId,visitorId:this.session.visitorId,errorMessage:e.errorMessage,errorDetail:encodeURI(t),pageUrl:e.pageUrl,browser:navigator.userAgent.toLowerCase(),PV2Version:r.constants.version},i={encodedLogErrorRequest:m.base64(s)};return l.get(this.logUrl+"/error",i).done(function(e){u.debug("Recorded PV2 error: ",e)}.bind(this)).fail(function(e){u.error("Could not log error to overwatch:",e)}.bind(this))},record:function(e,t,s){if(!this.recordUrl||!e&&!t&&!this.session.sessionId)return!1;s=s||window.location.href,e=e||t?e:this.session.sessionId;var i={sessionId:e,siteId:this.account.siteId,accountId:this.account.accountId,visitorId:this.session.visitorId,referrerUrl:document.referrer,pageUrl:s};return t&&(i.wspSessionId=t),this.wsp&&(i.wsp=this.wsp.displayName),this.pagegroup&&(i.pagegroup=this.pagegroup),this.vehicleFormatted&&this.pagegroup===f.knownPageGroups.vdp&&(i.pageDescription=this.vehicleFormatted.trim()),this.pagegroup===f.knownPageGroups.vdpSearch&&(i.pagedEscription=this.getSearchTerm()),l.get(this.recordUrl,i).done(function(t){switch(u.debug("Record response success received.",t),t.status){case C.pollStatus.success:this.visit=t.visit,this.setVisitId(this.visit.id),this.logPollResponse(C.pollStatus.success),this.schedule(t.nextPollInterval+this.generateRandomDelay(),this.poll),d.saveVisitData(t.visit),t.visit.sessionId!=e&&this.restoreSessionFromServer(t.visit),t.visit.chatStatus==C.chatStatus.chatting&&t.visit.chatId&&(u.info("Restoring chat "+t.visit.chatId),!o.isChatActive()&&t.visit.chatId&&c.restoreChat.trigger(t.visit.chatId)),this.detectVisitorReturning();break;default:u.debug("Stopping tracking."),this.status=C.trackStatus.stopped}}.bind(this)).fail(function(e){u.debug("Record response error received.",e),this.logPollResponse(C.pollStatus.error),this.schedule(this.determineNextTimeout(),this.record)}.bind(this)),!0},poll:function(){if(!this.pollUrl)return!1;var e={sessionId:this.session.sessionId,accountId:this.account.accountId};if(this.pendingUpdates.length>0){for(var t={};this.pendingUpdates.length;){var s=this.pendingUpdates.pop();this.visit&&this.visit[s.key]==s.value||(t[s.key]=s.value)}e.updates=JSON.stringify(t).replace(/"/g,"'")}return l.get(this.pollUrl,e).done(function(e){if(u.debug("Poll response success received.",e),"object"===(void 0===e?"undefined":a(e)))switch(this.processServerCommands(e.commands),e.status){case C.pollStatus.success:this.logPollResponse(C.pollStatus.success),this.schedule(e.nextPollInterval+this.generateRandomDelay(),this.poll);break;case C.pollStatus.unknown:this.logPollResponse(C.pollStatus.unknown),this.schedule(this.generateRandomDelay(),this.restore)}}.bind(this)).fail(function(e){u.debug("Poll response error received.",e),this.logPollResponse(C.pollStatus.error),this.schedule(this.determineNextTimeout(),this.poll)}.bind(this)),!0},restore:function(){if(!this.restoreUrl)return!1;var e=m.clone(this.visit);e.clickPath.length>5&&e.clickPath.splice(0,e.clickPath.length-5);var t={encodedVisitData:m.base64(JSON.stringify(e))};return l.get(this.restoreUrl,t).done(function(e){switch(u.debug("Restore response success received.",e),e.status){case C.pollStatus.success:this.logPollResponse(C.pollStatus.success),this.schedule(e.nextPollInterval+this.generateRandomDelay(),this.poll);break;default:u.debug("Stopping tracking."),this.status=C.trackStatus.stopped}}.bind(this)).fail(function(e){u.debug("Restore response error received.",e),this.logPollResponse(C.pollStatus.error),this.schedule(this.determineNextTimeout(),this.record)}.bind(this)),!0},loadAnalytics:function(){this.analytics&&this.analytics.trackingTagTypes&&analytics.load(this.analytics.trackingTagTypes)},logPollResponse:function(e){this.pollHistory.push(e);var t=Math.max(this.pollHistory.length-this.pollHistoryMaxLength,0);t&&this.pollHistory.splice(0,t)},generateUniqueId:function(){var e=new Date,t=e.getYear().toString(),s=(e.getMonth()+1).toString(),i=e.getDate().toString(),n=m.generateRandomId(15);return s<10&&(s="0"+s),i<10&&(i="0"+i),t+s+i+n},generateRandomDelay:function(){return m.getRandomInt(0,1e3)},determineIpAddress:function(){var e=new p,t=m.getCookie(C.cookies.clientIp)||"";return!t&&this.geoUrl?l.get(this.geoUrl).done(function(s){u.debug("Geo response.",s),t="object"===(void 0===s?"undefined":a(s))?s.Ip||"":"",t&&m.setCookie(C.cookies.clientIp,t,(new Date).addMinutes(10)),e.resolve(t)}).fail(function(t){u.debug("Geo response error received.",t),e.resolve("")}):e.resolve(t),e.promise},determineNextTimeout:function(){for(var e=-1,t=0;t<this.pollHistory.length;t++)this.pollHistory[t]==C.pollStatus.error&&this.numRecentErrors++;return 0<this.pollHistoryMaxLength&&(e=this.errorRetryInterval*Math.pow(2,0)),e},restoreSessionFromServer:function(e){u.debug("Restoring session from server",e),this.setSessionId(e.sessionId),this.setVisitorId(e.visitorId)},setSessionId:function(e){this.session.sessionId=e,m.setCookie(C.cookies.sessionId,this.session.sessionId,(new Date).addMinutes(60)),r.setSession(this.session)},setVisitorId:function(e){this.session.visitorId=e,m.setCookie(C.cookies.visitorId,this.session.visitorId,(new Date).addYears(3)),r.setSession(this.session)},setVisitId:function(e){this.session.visitId=e,r.setSession(this.session)},processServerCommands:function(e){if(e){var t;if(e instanceof Array)for(var s=0;s<e.length;s++)switch(t=e[s],t.key){case C.commands.pushPage:return window.location=t.value}}},schedule:function(e,t){clearTimeout(this.pollTimeout),e>0&&(this.pollTimeout=setTimeout(t.bind(this),e))},onLaunchChat:function(e){this.restartTracking(e),g.add(new b({application:C.application,target:e.source,action:e.action,event:C.events.openChat,pagegroup:this.pagegroup||""}))},onLaunchSms:function(e){g.add(new b({application:C.application,target:e.source,action:e.action,event:C.events.openSms,pagegroup:this.pagegroup||""}))},onLaunchDeal:function(e){g.add(new b({application:C.application,target:e.source,action:e.action,event:C.events.openSms,pagegroup:this.pagegroup||""}))},onVisibilityChange:function(e){"visible"===e&&h.onTabChangeReturn.trigger()},getSearchTerm:function(){for(var e=m.getQueryStringObj(decodeURIComponent(window.location.href)),t=["search","make","model","year","type"],s="",i=0;i>t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(s+=" "+e[n])}return s.trim()}},e.exports=new n},549:function(e,t,s){"use strict";function i(){this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.getOnFormSubmittedParams=this.getOnFormSubmittedParams.bind(this),this.dispose=this.dispose.bind(this)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(2),o=(s(8),s(3),s(1).callbacks);i.prototype={initialize:function(){if(window.utag&&window.utag.id&&window.utag.id.indexOf("autonation")>-1){a.debug("AutoNation tag detected.");var e=this.getWTK();e&&a.debug("WTK detected : "+e);var t=this.getAID();return t&&a.debug("AID detected : "+t),o.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),o.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),o.getOnFormSubmittedParams.subscribe(this.getOnFormSubmittedParams),!0}},getAID:function(){return this.getAutonationDataProperty("aid")},getWTK:function(){return this.getAutonationDataProperty("wtk_clean")},getAutonationDataProperty:function(e){return window.utag&&window.utag.data?window.utag.data[e]:""},getOnChatLaunchedParams:function(e){this.processParams(e)},getOnSmsLaunchedParams:function(e){this.processParams(e)},getOnFormSubmittedParams:function(e){this.processParams(e)},processParams:function(e){if(!e||"object"!=(void 0===e?"undefined":n(e)))return a.error('Expected argument "params" to be an object',e);e.data=e.data||{};var t=this.getWTK();t&&(e.data.wtk=t);var s=this.getAID();s&&(e.data.autonationaid=s)},dispose:function(){o.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),o.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams),o.getOnFormSubmittedParams.unsubscribe(this.getOnFormSubmittedParams)}},e.exports=new i},550:function(e,t,s){"use strict";function i(){this.onStartTracking=this.onStartTracking.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.dispose=this.dispose.bind(this)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(2),o=(s(3),s(1).commands),r=(s(1).events,s(1).callbacks);i.prototype={context:null,initialize:function(){if(window.CDK_AE||window.cdkGTM)return this.context=window._dt,this.context?(o.startTracking.subscribe(this.onStartTracking,this,10),r.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),!0):a.warn("CDK Overwatch : Analytics Data Not Found.")},onStartTracking:function(e){e=e||{},e.wsp||(e.wsp="cdk"),e.wspSessionId||(e.wspSessionId=this.context.sessionId)},dispose:function(){o.startTracking.unsubscribe(this.onStartTracking),r.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams)},getOnChatLaunchedParams:function(e){this.processParams(e)},getOnSmsLaunchedParams:function(e){this.processParams(e)},processParams:function(e){if(!e||"object"!=(void 0===e?"undefined":n(e)))return a.error('Expected argument "params" to be an object',e);e.data=e.data||{};var t,s,i;if(void 0!==this.context)try{t=this.context.data.dtuid,s=this.context.data.parms.webid,i=this.context.data.profile.type}catch(e){a.error("Could not retrieve CDK tracking parameters.")}e.data.analytics_cdk_id=t+"_"+s+"_"+i}},e.exports=new i},551:function(e,t,s){"use strict";function i(){this.dispose=this.dispose.bind(this)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(2),o=s(1).events,r=s(1).callbacks;i.prototype={providerName:"ActivEngage",timestamp:void 0,initialize:function(){return window._satellite&&_satellite.company&&_satellite.company.orgId&&"3ECF483F53AB366E0A490D44@AdobeOrg"==_satellite.company.orgId?(this.onChatLaunched=this.onChatLaunched.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onInviteClose=this.onInviteClose.bind(this),this.onChatAnswered=this.onChatAnswered.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),o.onChatLaunched.subscribe(this.onChatLaunched),o.onSmsLaunched.subscribe(this.onSmsLaunched),o.onInviteClose.subscribe(this.onInviteClose),o.onChatAnswered.subscribe(this.onChatAnswered),r.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),a.info("Detected FCA - Merkle Analytics."),!0):a.debug("FCA - Merkle Analytics was not detected.")},dispose:function(){o.onChatAnswered.unsubscribe(this.onChatAnswered),o.onInviteClose.unsubscribe(this.onInviteClose),o.onSmsLaunched.unsubscribe(this.onSmsLaunched),o.onChatLaunched.unsubscribe(this.onChatLaunched)},getOnChatLaunchedParams:function(e){this.processParams(e)},processParams:function(e){if(!e||"object"!=(void 0===e?"undefined":n(e)))return a.error('Expected argument "params" to be an object',e);this.timestamp=new Date,e.data=e.data||{},e.data.merkle_timestamp=this.timestamp},onChatLaunched:function(){var e={type:"CustomTagEvent",eventName:"initiation",eventAction:"chat",attributes:{chatType:"passive",location:"floating",provider:this.providerName}};try{window.digitalData.newEvent(e),a.debug("MerkleAnalytics Event",e)}catch(e){a.error("Merkle Analytics Error",e)}},onSmsLaunched:function(){var e={type:"CustomTagEvent",eventName:"sms",eventAction:"chat"};try{window.digitalData.newEvent(e),a.debug("MerkleAnalytics Event",e)}catch(e){a.error("Merkle Analytics Error",e)}},onInviteClose:function(e){if(e&&e.explicitClose){var t={type:"CustomTagEvent",eventName:"declined",eventAction:"chat"};try{window.digitalData.newEvent(t),a.debug("MerkleAnalytics Event",t)}catch(e){a.error("Merkle Analytics Error",e)}}},onChatAnswered:function(e,t){var s=this.timestamp.toISOString(),i=s.substr(0,s.length-5);window.digitalData.chatID=t+":"+i;var n={type:"CustomTagEvent",eventName:"acceptance",eventAction:"chat"};try{window.digitalData.newEvent(n),a.debug("MerkleAnalytics Event",n)}catch(e){a.error("Merkle Analytics Error",e)}}},e.exports=new i},552:function(e,t,s){"use strict";function i(){this.dispose=this.dispose.bind(this)}var n=s(2),a=s(4),o=s(1).events;s(1).callbacks;i.prototype={providerName:"activengage",operatorLineCount:0,visitorLineCount:0,startTime:null,engagedInChat:!1,endedFired:!1,missedFired:!1,initialize:function(){return window._satellite&&_satellite.company&&_satellite.company.orgId&&"757A02BE532B22BA0A490D4C@AdobeOrg"==_satellite.company.orgId&&"tier3"==_satellite.getVar("Site Name")?(this.onChatLaunched=this.onChatLaunched.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatAnswered=this.onChatAnswered.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatMissed=this.onChatMissed.bind(this),this.onBeforeUnload=this.onBeforeUnload.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),o.onChatLaunched.subscribe(this.onChatLaunched),o.onSmsLaunched.subscribe(this.onSmsLaunched),o.onChatStarted.subscribe(this.onChatStarted),o.onChatAnswered.subscribe(this.onChatAnswered),o.onChatEnded.subscribe(this.onChatEnded),o.onChatMissed.subscribe(this.onChatMissed),o.onBeforeUnload.subscribe(this.onBeforeUnload),o.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),n.info("Detected GM Adobe Analytics."),!0):n.debug("Gm Adobe Analytics was not detected.")},dispose:function(){o.onChatLaunched.unsubscribe(this.onChatLaunched),o.onChatAnswered.unsubscribe(this.onChatAnswered),o.onChatStarted.unsubscribe(this.onChatStarted),o.onChatMissed.unsubscribe(this.onChatMissed),o.onBeforeUnload.unsubscribe(this.onBeforeUnload),o.onSmsLaunched.unsubscribe(this.onSmsLaunched),events.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured)},onChatLaunched:function(){this.engagedInChat=!0,this._sendToAdobe("chat-init")},onChatStarted:function(){this.startTime=new Date,o.onChatLineReceived.subscribe(this.onChatLineReceived)},onSmsLaunched:function(){this._sendToAdobe("click-text")},onChatMissed:function(){this.missedFired||(this._sendToAdobe("missed-chat"),this.missedFired=!0)},onChatAnswered:function(e,t){},onChatEnded:function(){this.endedFired=!0,this.engagedInChat&&0===this.visitorLineCount&&this._sendToAdobe("abandoned-chat");var e=this._getTimeSinceStart();this._sendToAdobe("chat-end",{duration:e})},onChatVisitorNameCaptured:function(e){e=e||{},this.onChatLineReceived({sender:"visitor",message:e.name})},onChatLineReceived:function(e){if("operator"==e.sender&&0===this.operatorLineCount){this.operatorLineCount+=1;var t=this._getTimeSinceStart();this._sendToAdobe("response-time",{response:t})}else"operator"!=e.sender&&"system"!=e.sender&&(this.visitorLineCount+=1)},onBeforeUnload:function(){this.engagedInChat?this.endedFired||this.onChatEnded():this._sendToAdobe("chat-shows")},_sendToAdobe:function(e,t){t||(t={}),t.visitorID=a.getSession().visitorId,t.toolProvider=this.providerName;try{_satellite.track(e,t),n.debug("GmAdobeAnalytics Event: "+e,t)}catch(e){n.error("GmAdobeAnalyticsError",e)}},_getTimeSinceStart:function(){if(null===this.startTime)return null;var e=new Date-this.startTime;return Math.floor(e/1e3/60)+":"+Math.floor(e/1e3%60)}},e.exports=new i},553:function(e,t,s){"use strict";function i(){this.onChatLaunched=this.onChatLaunched.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnClickActionParams=this.getOnClickActionParams.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatMissed=this.onChatMissed.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onActivTargetLaunched=this.onActivTargetLaunched.bind(this),this.onActivTargetInteraction=this.onActivTargetInteraction.bind(this),this.onActivTargetSubmitSuccess=this.onActivTargetSubmitSuccess.bind(this),this.onActivTargetSubmitError=this.onActivTargetSubmitError.bind(this),this.onMediaClicked=this.onMediaClicked.bind(this),this.onPanelMinimized=this.onPanelMinimized.bind(this),this.onPanelMaximized=this.onPanelMaximized.bind(this),this.onPanelHidden=this.onPanelHidden.bind(this),this.onPageGroupDetected=this.onPageGroupDetected.bind(this),this.onVideoAssistStart=this.onVideoAssistStart.bind(this),this.onVideoAssistEnd=this.onVideoAssistEnd.bind(this),this.onLauncherLaunching=this.onLauncherLaunching.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatRestored=this.onChatRestored.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.onFormLaunched=this.onFormLaunched.bind(this),this.onFormFieldCompleted=this.onFormFieldCompleted.bind(this),this.onFormSubmitSuccess=this.onFormSubmitSuccess.bind(this),this.onFormSubmitError=this.onFormSubmitError.bind(this),this.onActivTargetClosed=this.onActivTargetClosed.bind(this),this.getOnFormSubmittedParams=this.getOnFormSubmittedParams.bind(this),this.onAscEnabled=this.onAscEnabled.bind(this),this.onCloseMenuDisplayed=this.onCloseMenuDisplayed.bind(this),this.onCloseMenuCleared=this.onCloseMenuCleared.bind(this),this.dispose=this.dispose.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this)}var n=function(){function e(e,t){var s=[],i=!0,n=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(i=(o=r.next()).done)&&(s.push(o.value),!t||s.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}return s}return function(t,s){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=s(2),r=s(3),c=s(1).events,h=(s(1).commands,s(1).callbacks),d=s(68).eventNames,u=s(68).commTypes,m=s(68).elementTypes,l=s(68).actions,p=s(68).pageTypes,g=s(68).surveyTypes.preChatSurveys,b=s(68).surveyTypes.postChatSurveys,v=s(68).itemProperties;i.prototype={analyticsClients:[],ascEnabled:!1,ascDataLayerItem:null,launcherLoaded:!1,provider:null,currentPageGroup:null,currentChatPosition:null,currentChatId:null,currentChatDepartment:null,registeredForms:{},initialize:function(){if(window.gtag)this.onInitGA4();else{if(!window.ga||!window.ga.getAll)return o.debug("Google Analytics was not detected.");this.onInitUA()}return h.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),h.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),h.getOnFormSubmittedParams.subscribe(this.getOnFormSubmittedParams),h.getOnClickActionParams.subscribe(this.getOnClickActionParams),c.onAscEnabled.subscribe(this.onAscEnabled),c.onChatLaunched.subscribe(this.onChatLaunched),c.onSmsLaunched.subscribe(this.onSmsLaunched),c.onChatStarted.subscribe(this.onChatStarted),c.onChatMissed.subscribe(this.onChatMissed),c.onChatEnded.subscribe(this.onChatEnded),c.onSmsStarted.subscribe(this.onSmsStarted),c.onActivTargetLaunched.subscribe(this.onActivTargetLaunched),c.onActivTargetInteraction.subscribe(this.onActivTargetInteraction),c.onActivTargetSubmitSuccess.subscribe(this.onActivTargetSubmitSuccess),c.onActivTargetSubmitError.subscribe(this.onActivTargetSubmitError),c.onMediaClicked.subscribe(this.onMediaClicked),c.onPanelMaximized.subscribe(this.onPanelMaximized),c.onPanelMinimized.subscribe(this.onPanelMinimized),c.onPanelHidden.subscribe(this.onPanelHidden),c.onPageGroupDetected.subscribe(this.onPageGroupDetected),c.onVideoAssistStart.subscribe(this.onVideoAssistStart),c.onVideoAssistEnd.subscribe(this.onVideoAssistEnd),c.onLauncherLaunching.subscribe(this.onLauncherLaunching),c.onChatLineReceived.subscribe(this.onChatLineReceived),c.onChatRestored.subscribe(this.onChatRestored),c.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),c.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),c.onFormFieldCompleted.subscribe(this.onFormFieldCompleted),c.onFormSubmitSuccess.subscribe(this.onFormSubmitSuccess),c.onFormSubmitError.subscribe(this.onFormSubmitError),c.onActivTargetClosed.subscribe(this.onActivTargetClosed),c.onCloseMenuDisplayed.subscribe(this.onCloseMenuDisplayed),c.onCloseMenuCleared.subscribe(this.onCloseMenuCleared),c.onFormLaunched.subscribe(this.onFormLaunched),!0},onInitUA:function(){this.provider=window.ga;var e=[];if(this.analyticsClients=r.map(this.provider.getAll(),function(t){var s={clientId:t.get("clientId"),trackingId:t.get("trackingId"),name:t.get("name")};return e.indexOf(s.trackingId)>-1?(o.debug("Skipping duplicate trackingId: "+s.trackingId),null):(e.push(s.trackingId),o.debug("Found Google Analytics client (name: "+s.name+", trackingId: "+s.trackingId+", clientId: "+s.clientId+")"),s)}),!this.analyticsClients.length)return o.debug("No Google Analytics client(s) were detected.");o.info("Detected the following Google Analytics client(s).",this.analyticsClients)},onInitGA4:function(){var e=[];if(window.dataLayer)for(var t=0;t<window.dataLayer.length;t++)for(var s=0;s<window.dataLayer[t].length;s++)if("string"==typeof window.dataLayer[t][s]&&window.dataLayer[t][s].startsWith("G-")){var i={trackingId:window.dataLayer[t][s],name:window.dataLayer[t][s]};if(this.assignTrackingData(i),e.indexOf(i.trackingId)>-1)return o.debug("Skipping duplicate measurementId: "+i.trackingId),null;e.push(i.trackingId),this.analyticsClients.push(i),o.debug("Found Google Analytics client (name: "+i.name+", measurementId: "+i.trackingId+")")}if(!this.analyticsClients.length)return o.debug("No Google Analytics client(s) were detected.");o.info("Detected the following Google Analytics client(s).",this.analyticsClients)},assignTrackingData:function(e){var t=new Promise(function(t){window.gtag("get",e.trackingId,"session_id",t)}),s=new Promise(function(t){window.gtag("get",e.trackingId,"client_id",t)});Promise.all([t,s]).then(function(t){e.sessionId=t[0],e.clientId=t[1],o.debug("GA4 Tracking Data found. (SessionId: "+t[0]+", ClientId: "+t[1]+")")})},onAscEnabled:function(){this.ascEnabled=!0,this.onInitAsc()},onInitAsc:function(){var e=window.asc_datalayer;if(e){for(var t=0;t<e.measurement_ids.length;t++){var s=e.measurement_ids[t],i={trackingId:s,name:s};this.analyticsClients.some(function(e){return e.trackingId===i.trackingId})||(this.assignTrackingData(i),this.analyticsClients.push(i))}if(Array.isArray(e.items)&&1===e.items.length){var n=e.items[0];this.ascDataLayerItem={},r.foreach(v,function(e){n[e]&&(this.ascDataLayerItem[e]=n[e])}.bind(this)),c.onVehicleDataAvailable.trigger([this.getInternalMappedVehicle(this.ascDataLayerItem)])}e.page_type&&(this.currentPageGroup=e.page_type)}},getInternalMappedVehicle:function(e){return Object.keys(e).reduce(function(t,s){return t[s.replace("item_","")]=e[s],t}.bind(this),{})},processEvent:function(e,t,s,i){window.ga&&r.foreach(this.analyticsClients,function(n){if(n.trackingId.startsWith("UA-")){var a=n.name+".send";window.ga(a,"event",e,t,s,i),o.debug("Google Analytics Event",a,e,t,s,i)}}),window.gtag&&(window.gtag("event",t,{event_category:e,event_label:s,value:i}),o.debug("Google Analytics 4 Event",e,t,s,i))},dispose:function(){h.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),h.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams),h.getOnFormSubmittedParams.unsubscribe(this.getOnFormSubmittedParams),h.getOnClickActionParams.unsubscribe(this.getOnClickActionParams),c.onAscEnabled.unsubscribe(this.onAscEnabled),c.onChatLaunched.unsubscribe(this.onChatLaunched),c.onSmsLaunched.unsubscribe(this.onSmsLaunched),c.onChatStarted.unsubscribe(this.onChatStarted),c.onChatMissed.unsubscribe(this.onChatMissed),c.onChatEnded.unsubscribe(this.onChatEnded),c.onSmsStarted.unsubscribe(this.onSmsStarted),c.onActivTargetLaunched.unsubscribe(this.onActivTargetLaunched),c.onActivTargetInteraction.unsubscribe(this.onActivTargetInteraction),c.onActivTargetSubmitSuccess.unsubscribe(this.onActivTargetSubmitSuccess),c.onActivTargetSubmitError.unsubscribe(this.onActivTargetSubmitError),c.onPageGroupDetected.unsubscribe(this.onPageGroupDetected),c.onMediaClicked.unsubscribe(this.onMediaClicked),c.onPanelMaximized.unsubscribe(this.onPanelMaximized),c.onPanelMinimized.unsubscribe(this.onPanelMinimized),c.onPanelHidden.unsubscribe(this.onPanelHidden),c.onVideoAssistStart.unsubscribe(this.onVideoAssistStart),c.onVideoAssistEnd.unsubscribe(this.onVideoAssistEnd),c.onLauncherLaunching.unsubscribe(this.onLauncherLaunching),c.onChatRestored.unsubscribe(this.onChatRestored),c.onChatLineReceived.unsubscribe(this.onChatLineReceived),c.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured),c.onChatFormTypeSelected.unsubscribe(this.onChatFormTypeSelected),c.onFormFieldCompleted.unsubscribe(this.onFormFieldCompleted),c.onFormSubmitSuccess.unsubscribe(this.onFormSubmitSuccess),c.onFormSubmitError.unsubscribe(this.onFormSubmitError),c.onActivTargetClosed.unsubscribe(this.onActivTargetClosed),c.onCloseMenuDisplayed.unsubscribe(this.onCloseMenuDisplayed),c.onCloseMenuCleared.unsubscribe(this.onCloseMenuCleared),c.onFormLaunched.unsubscribe(this.onFormLaunched)},onPageGroupDetected:function(e){this.currentPageGroup||(this.currentPageGroup=p[e])},onChatEnded:function(){this.currentChatId=""},onChatFormTypeSelected:function(e){this.currentChatDepartment=this.mapChatDepartment(e.formType)},getOnChatLaunchedParams:function(e){this.processChatParams(e)},getOnSmsLaunchedParams:function(e){this.processChatParams(e)},getOnFormSubmittedParams:function(e){this.processFormParams(e)},getOnClickActionParams:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{},!e.data.event instanceof PointerEvent||(e.data.target=this.buildButtonTargetFromEvent(e.data.event))},onChatRestored:function(e){this.currentChatId=e.chatId},onChatLaunched:function(e){this.processEvent("ActivEngage","OpenChat","click",1),this.processCtaInteraction(e,l.open,m.chatTool),this.processCommEngagement(e,l.open,u.chat),e.skipPreChatSurvey||this.onFormLaunched({formName:g.preChatSurvey.name,commType:u.chat})},onSmsLaunched:function(e){this.processEvent("ActivEngage","OpenSms","click",1),this.processCtaInteraction(e,l.open,m.chatTool),this.processCommEngagement(e,l.open,u.sms),this.onFormLaunched({formName:g.preSmsSurvey.name,commType:u.sms})},onPanelMaximized:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{},e.fromClick&&this.processCtaInteraction(e,l.open,m.chatTool)},onPanelMinimized:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{},e.fromClick&&this.processCtaInteraction(e,l.close,m.chatTool)},onPanelHidden:function(e){var t=this;if("object"===(void 0===e?"undefined":a(e))){e.data=e.data||{},this.processCtaInteraction(e,l.exit,m.chatTool);Object.keys(this.registeredForms).filter(function(e){return t.registeredForms[e].isPanelForm}).forEach(function(s){var i=t.registeredForms[s];i.isPreChatSurvey&&(t.processCommEngagement(e,l.close,i.commType),t.currentChatId=""),delete t.registeredForms[i.name]})}},onCloseMenuDisplayed:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),this.processCtaInteraction(e,l.close,m.chatTool)},onCloseMenuCleared:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),this.processCtaInteraction(e,l.open,m.chatTool)},onChatStarted:function(e){this.processEvent("ActivEngage","StartChat","click",1),this.currentChatId=e.chatId||"",this.processCommEngagement(e,l.start,u.chat)},onChatMissed:function(e){"object"===(void 0===e?"undefined":a(e))&&this.processCtaInteraction(e,l.open,m.chatTool)},onSmsStarted:function(e){this.processEvent("ActivEngage","StartSms","click",1),this.currentChatId=e.chatId||"",this.processCommEngagement({},l.start,u.sms)},onActivTargetLaunched:function(e){this.processEvent("ActivEngage","ActivTargetImpression","impression",1),this.onFormLaunched(e),this.processSpecialOffer(e,l.start)},onActivTargetInteraction:function(e){this.processSpecialOffer(e,l.engage)},onActivTargetSubmitSuccess:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{},this.processEvent("ActivEngage","ActivTargetSubmit","submit",1),this.onFormSubmitSuccess(e),this.processSpecialOffer(e,l.success)},onActivTargetSubmitError:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{},this.onFormSubmitError(e),this.processSpecialOffer(e,l.error)},onActivTargetClosed:function(e){this.processSpecialOffer(e,l.close),delete this.registeredForms[e.formName]},onFormLaunched:function(e){if("object"!==(void 0===e?"undefined":a(e))&&(e={}),!Object.hasOwn(e,"formName"))return void o.warn("Unable to determine GA4 form name. GA4 events for this form will not be recorded.");this.registerForm(e),this.processFormEngagement(e,l.start)},onFormFieldCompleted:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={});var t=this.registeredForms[e.formName];t&&t.completedFields.indexOf(e.fieldName)<0&&(t.completedFields.push(e.fieldName),e.data=e.data||{},e.data.target={displayText:e.fieldName},this.processFormEngagement(e,l.engage)),t.isPreChatSurvey&&this.processCommEngagement(e,l.engage,t.commType)},onFormSubmitSuccess:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{};var t=this.registeredForms[e.formName];if(t){if(t.isPreChatSurvey)return void this.processCtaInteraction(e,l.start,t.elementType);this.processCtaInteraction(e,l.complete,t.elementType),this.processFormEngagement(e,t.submitAction)}},onFormSubmitError:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),e.data=e.data||{};var t=this.registeredForms[e.formName];t&&(this.processCtaInteraction(e,l.error,t.elementType),this.processFormEngagement(e,l.failed))},onMediaClicked:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),this.processMediaInteraction(e)},onVideoAssistStart:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),this.processVideoCallEngagement(e,l.videoStart)},onVideoAssistEnd:function(e){"object"!==(void 0===e?"undefined":a(e))&&(e={}),this.processVideoCallEngagement(e,l.videoEnd)},onLauncherLaunching:function(e){this.currentChatPosition||this.setCurrentChatPosition(e),this.launcherLoaded||(this.launcherLoaded=!0,this.processCommEngagement(e,l.load,u.chat))},onChatVisitorNameCaptured:function(e){e=e||{},this.onChatLineReceived({sender:"visitor",message:e.name})},onChatLineReceived:function(e){switch(e.data=e.data||{},e.sender){case"visitor":this.processCommEngagement(e,l.engage,u.chat);break;case"operator":switch(e.source){case"PushDigitalRetailing":case"OperatorSendRevolveApplication":this.processCommEngagement(e,l.sendDeal,u.chat)}}},processSpecialOffer:function(e,t){if(!e)return void o.warn("Unable to process GA4 event: "+d.specialOffer+". Parameter data not found.");var s=this.registeredForms[e.formName];if(!s)return void o.warn("Unable to process GA4 event: "+d.specialOffer+". Offer has not been registered.");e.data=e.data||{},e.data.department=this.mapFormDepartment(s.department),e.data.description=s.description,e.data.formName=s.name,e.data.action=t,this.processAscEvent(d.specialOffer,e)},processFormEngagement:function(e,t){if(!e)return void o.warn("Unable to process GA4 event: "+d.formEngagement+". Parameter data not found.");var s=this.registeredForms[e.formName];if(!s)return void o.warn("Unable to process GA4 event: "+d.formEngagement+". Form has not been registered.");e.data=e.data||{},e.data.target&&(s.submitText=this.processElementText(e.data.target)),e.data.formName=s.name,e.data.department=this.mapFormDepartment(s.department),e.data.submitText=s.submitText,e.data.action=t,this.processAscEvent(d.formEngagement,e)},processCommEngagement:function(e,t,s){if(!e)return void o.warn("Unable to process GA4 event: "+d.commEngagement+". Parameter data not found.");e.data=e.data||{},e.data.commType=s,e.data.action=t,this.processAscEvent(d.commEngagement,e)},processCtaInteraction:function(e,t,s){if(!e)return void o.warn("Unable to process GA4 event: "+d.ctaInteraction+". Parameter data not found.");e.data=e.data||{},e.data.action=t,e.data.elementType=s,this.processAscEvent(d.ctaInteraction,e)},processVideoCallEngagement:function(e,t){if(!e)return void o.warn("Unable to process GA4 event: "+d.videoCallEngagement+". Parameter data not found");e.data=e.data||{},e.data.action=t,this.processAscEvent(d.videoCallEngagement,e)},processMediaInteraction:function(e){if(!e)return void o.warn("Unable to process GA4 event: "+d.mediaInteraction+". Parameter data not found");e.data=e.data||{},this.processAscEvent(d.mediaInteraction,e)},processAscEvent:function(e,t){if(window.gtag&&this.ascEnabled){var s={event_owner:"activengage",page_type:this.getCurrentPageGroup()},i=t.data,n=!0;switch(e){case d.commEngagement:s=this.buildCommEngagementParams(i,s);break;case d.ctaInteraction:s=this.buildCtaParams(i,s);break;case d.specialOffer:s=this.buildSpecialOfferParams(i,s),n=!1;break;case d.mediaInteraction:s=this.buildMediaInteractionParams(i,s);break;case d.formEngagement:s=this.buildFormEngagementParams(i,s);break;case d.videoCallEngagement:s=this.buildVideoCallParams(i,s)}n&&this.ascDataLayerItem&&Object.assign(s,this.ascDataLayerItem),o.info("Firing GA4 ASC Event: "+e),window.gtag("event",e,s)}},buildCommEngagementParams:function(e,t){return t.element_position=this.getCurrentChatPosition(),t.affiliation_id=this.getChatId(),t.department=this.getCurrentChatDepartment(),t.comm_status=e.action,t.comm_type=e.commType,t.affiliation="activengage",t},buildVideoCallParams:function(e,t){return t.affiliation_id=this.getChatId(),t.element_position=this.getCurrentChatPosition(),t.department=this.getCurrentChatDepartment(),t.comm_type=u.video,t.comm_status=e.action,t.affiliation="activengage",t},buildFormEngagementParams:function(e,t){return t.department=e.department||"sales",t.form_name=e.formName,t.comm_status=e.action,t.element_text=e.submitText,t.comm_type=u.form,t.form_type="consumer_contact",t},buildMediaInteractionParams:function(e,t){return t.link_url=e.linkUrl,t.event_action_result=e.action,t.media_type=e.mediaType,t.creative_name=e.name,t.affiliation="activengage",t},buildSpecialOfferParams:function(e,t){return t.department=e.department||"sales",t.promotion_name=e.description,t.flow_outcome=e.action,t.product_name=e.formName,t.element_position="popup",t},buildCtaParams:function(e,t){return t.element_text=this.processElementText(e.target),t.element_color=this.processTargetColor(e.target),t.element_type=e.elementType,t.event_action_result=e.action,t.event_action="click",t.element_order=0,t.link_url="",t},getChatId:function(){return this.currentChatId||"N/A"},getCurrentChatDepartment:function(){return this.currentChatDepartment||"sales"},getCurrentChatPosition:function(){return this.currentChatPosition||"bottom_right"},getCurrentPageGroup:function(){return this.currentPageGroup||"custom"},setCurrentChatPosition:function(e){e&&e.position?this.currentChatPosition=e.position.replace(" ","_"):(o.warn("Unable to set GA4 Chat Position. Defaulting to 'bottom_right'"),this.currentChatPosition="bottom_right")},mapFormDepartment:function(e){switch(e){case"serviceAppointment":return"service";case"cs":return"contact";default:return e}},processElementText:function(e){return e&&e.displayText&&"undefined"!==e.displayText?e.displayText:"N/A"},processTargetColor:function(e){return e&&"string"==typeof e.color?e.color:"#ffffff"},mapChatDepartment:function(e){switch(e){case"cs":return"unknown";default:return e}},registerForm:function(e){var t=this.registeredForms[e.formName];if(t)return void o.debug("Form: "+t.name+"already exists.");var s=[b.postChatSurvey.name],i=[g.preChatSurvey.name,g.preSmsSurvey.name];this.registeredForms[e.formName]={name:e.formName,description:e.description,department:e.department,completedFields:[],submitText:"N/A",commType:e.commType,isPreChatSurvey:i.includes(e.formName),isPanelForm:"ActivTarget"!==e.formName,submitAction:e.submitAction||s.includes(e.formName)?l.send:l.crmUpdate,elementType:e.elementType||i.includes(e.formName)?m.chatTool:m.form}},processChatParams:function(e){if(!e||"object"!=(void 0===e?"undefined":a(e)))return o.error('Expected argument "params" to be an object',e);this.processParams(e),e.data.CHAT_ELEMENT_POSITION=this.getCurrentChatPosition()},processFormParams:function(e){if(!e||"object"!=(void 0===e?"undefined":a(e)))return o.error('Expected argument "params" to be an object',e);if(this.processParams(e),e.formName){var t=this.registeredForms[e.formName];t&&(e.data.FORM_NAME=t.name,e.data.CTA_ELEMENT_TEXT=t.submitText,e.data.FORM_DEPARTMENT=t.department,this.checkAddDataLayerItem(e))}},processParams:function(e){e.data=e.data||{};for(var t,s,i=0;i<this.analyticsClients.length;i++){var n=this.analyticsClients[i],a="ANALYTICS_GOOGLE_ID_"+i;e.data[a]=n.trackingId,t||(t=n.clientId),s||(s=n.sessionId)}t&&(e.data.ANALYTICS_GOOGLE_CLIENTID=t),s&&(e.data.ANALYTICS_GOOGLE_SESSIONID=s),e.data.ANALYTICS_ASC_ENABLED=this.ascEnabled.toString(),e.data.ANALYTICS_ASC_PAGE_TYPE=this.getCurrentPageGroup(),this.checkAddDataLayerItem(e)},checkAddDataLayerItem:function(e){if(this.ascDataLayerItem){var t=!0,s=!1,i=void 0;try{for(var a,o=Object.entries(this.ascDataLayerItem)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var r=n(a.value,2),c=r[0],h=r[1],d="asc_"+c;e.data[d]=h}}catch(e){s=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(s)throw i}}}},getHexColorFromElement:function(e){var t=getComputedStyle(e),s=t.getPropertyValue("background-color").match(/\d+/g);if(s){return"#"+s.map(function(e){var t=parseInt(e).toString(16);return 1===t.length?"0"+t:t}).join("").toUpperCase()}return null},buildButtonTargetFromEvent:function(e){var t,s,i=e.target;if(i&&i instanceof EventTarget){var n=i.closest("button");n&&(s=this.getHexColorFromElement(n)),t=i.innerText||(n?n.ariaLabel:"")}return{displayText:t,color:s}}},e.exports=new i},554:function(e,t,s){"use strict";function i(){this.onChatStarted=this.onChatStarted.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.collectParams=this.collectParams.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.dispose=this.dispose.bind(this)}var n=s(2),a=s(4),o=s(1).events,r=s(7).events,c=s(1).callbacks,h=s(8),d=s(3),u=s(26);i.prototype={_account:a.getAccount(),_chatId:null,_firstResponse:null,_chatEnded:!1,_formType:"",_formTypeMap:{sales:"sales",service:"service",parts:"parts",cs:"other"},initialize:function(){return!!(this._account&&this._account.externalAccountIds&&this._account.externalAccountIds.hondadealercode&&Array.isArray(window.dataLayer))&&(n.info("Detected Honda Analytics."),o.onChatStarted.subscribe(this.onChatStarted),o.onChatEnded.subscribe(this.onChatEnded),r.onOperatorEndedChat.subscribe(this.onChatEnded),o.onChatLineReceived.subscribe(this.onChatLineReceived),o.onSmsStarted.subscribe(this.onSmsStarted),o.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),c.getOnChatLaunchedParams.subscribe(this.collectParams),c.getOnSmsLaunchedParams.subscribe(this.collectParams),!0)},dispose:function(){o.onChatStarted.unsubscribe(this.onChatStarted),o.onChatEnded.unsubscribe(this.onChatEnded),r.onOperatorEndedChat.unsubscribe(this.onChatEnded),o.onChatLineReceived.unsubscribe(this.onChatLineReceived),o.onSmsStarted.unsubscribe(this.onSmsStarted),o.onChatFormTypeSelected.unsubscribe(this.onChatFormTypeSelected),c.getOnChatLaunchedParams.unsubscribe(this.collectParams),c.getOnSmsLaunchedParams.unsubscribe(this.collectParams)},collectParams:function(e){var t=d.getQueryStringObj();e.data.ReferrerSite=t.utm_source,e.data.ReferrerType=t.utm_medium,e.data.CampaignID=t.utm_campaign,e.data.AdGroupID=t.ads_adgroup,e.data.AdID=t.ads_adid,e.data.DigitalAdProvider=t.ads_digadprovider,e.data.HondaDealerCode=this._account.externalAccountIds.hondadealercode},getHondaDefaultParams:function(){return{event:"mps_chat","jdpa.honda.dealerid":this._account.externalAccountIds.hondadealercode,"jdpa.honda.providerid":"ActivEngage","jdpa.honda.chat_category":this.getFormType(),"jdpa.honda.content_group":"mps_chat","jdpa.honda.chat_device":this.getDevice(),"jdpa.honda.chat_type":"human","jdpa.honda.chat_source":"Dealer Website"}},processEvent:function(e){e&&(n.info("Pushing Honda Event: ",e),window.dataLayer.push(e))},getFormType:function(){return this._formType&&this._formTypeMap[this._formType]?this._formTypeMap[this._formType]:"sales"},getDevice:function(){return h.getEnvironment().mobile?h.isScreenSizeAtMost(768)?"mobile":"tablet":"desktop"},onChatFormTypeSelected:function(e){e&&e.formType&&(this._formType=e.formType)},onChatLineReceived:function(){this._firstResponse||(this._firstResponse=this.getCurrentDateTime())},onChatStarted:function(){var e=this.getHondaDefaultParams();e["jdpa.honda.chat_action"]="start",e["jdpa.honda.chat_start"]=this.getCurrentDateTime(),e["jdpa.honda.chat_format"]="web",e["jdpa.honda.chat_id"]=u.getChatId(),this.processEvent(e)},onSmsStarted:function(e){var t=this.getHondaDefaultParams();t["jdpa.honda.chat_action"]="start",t["jdpa.honda.chat_start"]=this.getCurrentDateTime(),t["jdpa.honda.chat_format"]="sms",t["jdpa.honda.chat_id"]=e.chatId,this.processEvent(t)},onChatEnded:function(){if(!this._chatEnded){var e=this.getHondaDefaultParams();e["jdpa.honda.chat_action"]="end",e["jdpa.honda.chat_first_response"]=this._firstResponse,e["jdpa.honda.chat_chat_end"]=this.getCurrentDateTime(),e["jdpa.honda.chat_format"]="web",this.processEvent(e),this._chatEnded=!0}},getCurrentDateTime:function(){return d.formatDate(new Date)}},e.exports=new i},555:function(e,t,s){"use strict";function i(){this.onChatStarted=this.onChatStarted.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatEnded=this.onChatEnded.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onVisitorLeftChat=this.onVisitorLeftChat.bind(this),this.onChatAnswered=this.onChatAnswered.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.pushGlobalVariables=this.pushGlobalVariables.bind(this)}var n=s(2),a=s(4),o=s(1).events,r=s(7).events;i.prototype={_account:a.getAccount(),_chatId:null,_firstResponseDatetime:null,_chatEnded:!1,_formType:"",_visitorLines:0,_operatorResponses:0,_lastVisitorResponseTimestamp:null,_responseTimes:[],initialize:function(){return!!(this._account&&this._account.externalAccountIds&&this._account.externalAccountIds.hyundaidealercode&&Array.isArray(window.dataLayer))&&(n.info("Detected Hyundai Analytics."),o.onChatStarted.subscribe(this.onChatStarted),o.onChatEnded.subscribe(this.onChatEnded),r.onOperatorEndedChat.subscribe(this.onChatEnded),o.onChatLineReceived.subscribe(this.onChatLineReceived),o.onSmsStarted.subscribe(this.onSmsStarted),o.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),r.onVisitorLeftChat.subscribe(this.onVisitorLeftChat),o.onChatAnswered.subscribe(this.onChatAnswered),this.pushGlobalVariables(),!0)},dispose:function(){o.onChatStarted.unsubscribe(this.onChatStarted),o.onChatEnded.unsubscribe(this.onChatEnded),r.onOperatorEndedChat.unsubscribe(this.onChatEnded),o.onChatLineReceived.unsubscribe(this.onChatLineReceived),o.onSmsStarted.unsubscribe(this.onSmsStarted),o.onChatFormTypeSelected.unsubscribe(this.onChatFormTypeSelected),r.onVisitorLeftChat.unsubscribe(this.onVisitorLeftChat),o.onChatAnswered.unsubscribe(this.onChatAnswered)},pushGlobalVariables:function(){var e={chat_provider:"ActivEngage"};this.processEvent(e)},processEvent:function(e){e&&(n.info("Pushing Hyundai Event: ",e),window.dataLayer.push(e))},getFormType:function(){return this._formType&&this._formType&&"sales"!=this._formType?"support":"sales"},onChatFormTypeSelected:function(e){e&&e.formType&&(this._formType=e.formType)},onChatLineReceived:function(e){var t=new Date;e.timestamp&&(t=Date.parse(e.timestamp)),"operator"==e.sender?(this._operatorResponses+=1,this._lastVisitorResponseTimestamp&&(this._responseTimes.push(Math.abs(t-this._lastVisitorResponseTimestamp)),this._lastVisitorResponseTimestamp=null)):"visitor"==e.sender&&(this._visitorLines+=1,this._lastVisitorResponseTimestamp=t)},onChatStarted:function(){var e={event:"chat_start",custom_timestamp:this.getUnixEpochDateTime()};this.processEvent(e)},onSmsStarted:function(e){var t={event:"chat_start",custom_timestamp:this.getUnixEpochDateTime()};this.processEvent(t)},onChatEnded:function(){if(this.processEvent(e),!this._chatEnded){if(this._visitorLines<=1){var e={event:"user_abandonment"};this.processEvent(e)}else{var e={event:"chat_end",custom_timestamp:this.getUnixEpochDateTime(),chat_duration:this.getChatDuration(),chat_turns_questions:this._visitorLines,chat_turns_responses:this._operatorResponses,average_responsetime:this.getAverageResponseTime(),chat_topics:this.getFormType(),chat_type:"standard"};this.processEvent(e)}this._chatEnded=!0}},onVisitorLeftChat:function(){if(this._visitorLines<=1){var e={event:"user_abandonment"};this.processEvent(e)}},onChatAnswered:function(){this._firstResponseDatetime=new Date;var e={event:"chat_connected_to_agent"};this.processEvent(e)},getUnixEpochDateTime:function(){var e=new Date,t=e.getTime();return Math.floor(t/1e3)},getChatDuration:function(){if(this._firstResponseDatetime){var e=new Date-this._firstResponseDatetime;return Math.floor(e/1e3)}return 0},getAverageResponseTime:function(){for(var e=0,t=this._responseTimes,s=0;s<t.length;s++)e+=t[s];var i=e/t.length;return 0!=i?Math.floor(i/1e3):0}},e.exports=new i},556:function(e,t,s){"use strict";e.exports={activEngage:s(548),googleAnalytics:s(553),fcaMerkleAnalytics:s(551),gmAdobeAnalytics:s(552),cdkAnalytics:s(550),autonationAnalytics:s(549),tealiumAnalytics:s(560),shiftDigitalAnalytics:s(559),pixallCoxAnalytics:s(558),hondaAnalytics:s(554),orbeeAnalytics:s(557),hyundaiAnalytics:s(555)}},557:function(e,t,s){"use strict";function i(){this.collectOrbeeTokens=this.collectOrbeeTokens.bind(this),this.setDefaultTrackingValues=this.setDefaultTrackingValues.bind(this),this.onPageGroupDetected=this.onPageGroupDetected.bind(this),this.onChatFormTypeSelected=this.onChatFormTypeSelected.bind(this),this.onChatLaunched=this.onChatLaunched.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatRestored=this.onChatRestored.bind(this),this.onActivTargetLaunched=this.onActivTargetLaunched.bind(this),this.onActivTargetSubmitSuccess=this.onActivTargetSubmitSuccess.bind(this),this.onFormSubmitSuccess=this.onFormSubmitSuccess.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onTestDriveReceived=this.onTestDriveReceived.bind(this),this.processTestDriveEvent=this.processTestDriveEvent.bind(this),this.processCarfaxEvent=this.processCarfaxEvent.bind(this),this.processPushPageEvent=this.processPushPageEvent.bind(this),this.processStartEvent=this.processStartEvent.bind(this),this.processLaunchEvent=this.processLaunchEvent.bind(this),this.processActivTargetLaunchEvent=this.processActivTargetLaunchEvent.bind(this),this.processParams=this.processParams.bind(this),this.processUpdatedFormField=this.processUpdatedFormField.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),this.processShopperNameDetectedEvent=this.processShopperNameDetectedEvent.bind(this),this.onFormFieldUpdated=this.onFormFieldUpdated.bind(this),this.onFormFieldsUpdated=this.onFormFieldsUpdated.bind(this)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(2),o=s(3),r=s(1).events,c=s(1).callbacks,h=s(546),d=h.eventNames;i.prototype={trackingTokens:[],trackingData:h.trackingData,voiEventTracked:!1,initialize:function(){return window.orb?(this.collectOrbeeTokens(),this.trackingTokens.length?(this.setDefaultTrackingValues(),a.info("Orbee Analytics Detected: "+this.trackingTokens.join(", ")),c.getOnChatLaunchedParams.subscribe(this.processParams),c.getOnSmsLaunchedParams.subscribe(this.processParams),r.onChatLaunched.subscribe(this.onChatLaunched),r.onSmsLaunched.subscribe(this.onSmsLaunched),r.onChatStarted.subscribe(this.onChatStarted),r.onSmsStarted.subscribe(this.onSmsStarted),r.onChatRestored.subscribe(this.onChatRestored),r.onActivTargetLaunched.subscribe(this.onActivTargetLaunched),r.onActivTargetSubmitSuccess.subscribe(this.onActivTargetSubmitSuccess),r.onFormSubmitSuccess.subscribe(this.onFormSubmitSuccess),r.onChatLineReceived.subscribe(this.onChatLineReceived),r.onTestDriveReceived.subscribe(this.onTestDriveReceived),r.onFormFieldUpdated.subscribe(this.onFormFieldUpdated),r.onFormFieldsUpdated.subscribe(this.onFormFieldsUpdated),r.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),r.onPageGroupDetected.subscribe(this.onPageGroupDetected),r.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),!0):a.debug("Orbee Analytics detected, but no available tokens. Events will not be tracked.")):a.debug("Orbee Analytics not detected")},collectOrbeeTokens:function(){var e=window.orb.bootloader;if(e&&e.tokens)for(var t=Object.keys(e.tokens),s=0;s<t.length;s++)this.trackingTokens.indexOf(t[s])>-1||this.trackingTokens.push(t[s])},setDefaultTrackingValues:function(){this.trackingData.department=h.defaults.department},onChatLaunched:function(){this.processLaunchEvent(h.channels.chat)},onSmsLaunched:function(){this.processLaunchEvent(h.channels.sms)},onChatRestored:function(e){e.chatId&&(this.trackingData.chatId=e.chatId),e.visitorName&&this.setShopperName(e.visitorName)},onChatStarted:function(e){"object"!==(void 0===e?"undefined":n(e))&&(e={}),e.chatId&&(this.trackingData.chatId=e.chatId),e.visitorName&&"Unknown"!==e.visitorName&&(this.setShopperName(e.visitorName),this.processShopperNameDetectedEvent()),this.processStartEvent(h.channels.chat)},onSmsStarted:function(e){"object"!==(void 0===e?"undefined":n(e))&&(e={}),e.chatId&&(this.trackingData.chatId=e.chatId),e.visitorName&&"Unknown"!==e.visitorName&&(this.setShopperName(e.visitorName),this.processShopperNameDetectedEvent()),this.processStartEvent(h.channels.sms)},onActivTargetLaunched:function(e){var t=e.department||h.defaults.department,s=e.description||h.defaults.activTargetDescription;this.trackingData.activTarget.department=t,this.trackingData.activTarget.description=s,this.processActivTargetLaunchEvent()},onActivTargetSubmitSuccess:function(e){"object"!==(void 0===e?"undefined":n(e))&&(e={}),this.processActivTargetSubmitEvent(e.formData)},onFormSubmitSuccess:function(e){"object"!==(void 0===e?"undefined":n(e))&&(e={}),"LeaveMessage"===e.formName&&(e.formData.name&&this.setShopperName(e.formData.name),this.processLeaveMessageEvent(e.formData))},onChatVisitorNameCaptured:function(e){e=e||{},this.onChatLineReceived({sender:"visitor",message:e.name})},onChatLineReceived:function(e){switch("object"!==(void 0===e?"undefined":n(e))&&(e={}),e.sender){case"visitor":return void this.processVisitorMessageEvent(e.message);case"operator":switch(e.source){case"OperatorPushPage":this.processPushPageEvent(e.message);break;case"OperatorCarfax":this.processCarfaxEvent(e.message)}}},onTestDriveReceived:function(){this.processTestDriveEvent()},onFormFieldUpdated:function(e){"object"!==(void 0===e?"undefined":n(e))&&(e={}),this.processUpdatedFormField(e),!this.voiEventTracked&&this.hasFullVehicle()&&(this.trackVehicleOfInterestEvent(),this.voiEventTracked=!0),this.isUpdatingShopperName(e)&&this.hasFullShopperName()&&this.processShopperNameDetectedEvent()},onFormFieldsUpdated:function(e){var t=this;"object"!==(void 0===e?"undefined":n(e))&&(e={}),o.foreach(e.fields,function(e){t.onFormFieldUpdated(e)})},processUpdatedFormField:function(e){var t=e.fieldValue;switch(e.fieldName){case"firstName":this.trackingData.shopperName.first=t;break;case"lastName":this.trackingData.shopperName.last=t;break;case"appointment":this.processAppointmentScheduledEvent(t);break;case"vehicleStatus":this.trackingData.vehicle.status=t;break;case"vehicleMake":this.trackingData.vehicle.make=t;break;case"vehicleModel":this.trackingData.vehicle.model=t;break;case"vehicleYear":this.trackingData.vehicle.year=t;break;case"vin":this.trackingData.vehicle.vin=t}},processAppointmentScheduledEvent:function(e){var t=this.getFormattedEventName(d.appointmentScheduled),s=this.getDefaultEventProperties();s.correlationId=this.trackingData.chatId,s.id=h.eventIds.appointmentScheduled,s.dateTime=e,this.trackingData.vehicle&&(s.vehicleData=this.trackingData.vehicle),this.trackEvent(t,s)},processLeaveMessageEvent:function(e){var t=this.getFormattedEventName(h.eventNames.leaveMessage,!0),s=this.getDefaultEventProperties();switch(s.id=h.eventIds.leaveMessage,s.formData={},e.contactMethod){case"Email":s.formData.emailAddress=e.contactInfo;break;case"Phone Number":s.formData.phoneNumber=e.contactInfo}this.trackEvent(t,s)},processCarfaxEvent:function(e){var t=this.getFormattedEventName(d.carfax),s=this.getDefaultEventProperties();s.correlationId=this.trackingData.chatId,s.department=this.trackingData.department,s.vehicleData=this.trackingData.vehicle,s.carfaxUrl=e,s.id=h.eventIds.carfax,this.trackEvent(t,s)},processTestDriveEvent:function(){var e=this.getFormattedEventName(d.testDrive),t=this.getDefaultEventProperties();t.correlationId=this.trackingData.chatId,t.department=this.trackingData.department,t.vehicleData=this.trackingData.vehicle,t.id=h.eventIds.testDrive,this.trackEvent(e,t)},processPushPageEvent:function(e){var t=this.getFormattedEventName(d.pushPage),s=this.getDefaultEventProperties();s.correlationId=this.trackingData.chatId,s.pushUrl=e,s.department=this.trackingData.department,s.id=h.eventIds.pushPage,this.trackEvent(t,s)},processShopperNameDetectedEvent:function(){var e=d.shopperNameDetected,t=this.getDefaultEventProperties();t.correlationId=this.trackingData.chatId,t.shopperName=this.getShopperName(),t.id=h.eventIds.shopperNameDetected,this.trackEvent(e,t)},processStartEvent:function(e){var t;switch(e){case h.channels.chat:t=d.chatStart;break;case h.channels.sms:t=d.smsStart;break;default:return a.debug("Orbee: Unknown channel type: "+e+". Event will not be tracked.")}t=this.getFormattedEventName(t,!0);var s=this.getDefaultEventProperties();s.channel=e,s.department=this.trackingData.department,s.correlationId=this.trackingData.chatId,s.id=h.eventIds.chatStarted,this.trackEvent(t,s)},processLaunchEvent:function(e){var t;switch(e){case h.channels.chat:t=d.chatLaunch;break;case h.channels.sms:t=d.smsLaunch;break;default:return a.debug("Orbee: Unknown channel type: "+e+". Event will not be tracked.")}t=this.getFormattedEventName(t,!0);var s=this.getDefaultEventProperties();s.channel=e,s.id=h.eventIds.chatOpened,this.trackEvent(t,s)},processActivTargetLaunchEvent:function(){var e=this.getFormattedEventName(d.activTargetImpression),t=this.getDefaultEventProperties();t.department=this.trackingData.activTarget.department,t.description=this.trackingData.activTarget.description,t.id=h.eventIds.activTargetImpression,this.trackEvent(e,t)},processActivTargetSubmitEvent:function(e){if(e){var t=d.activTargetSubmit,s=this.getDefaultEventProperties();s.department=this.trackingData.activTarget.department,s.description=this.trackingData.activTarget.description,s.id=h.eventIds.activTargetSubmit,s.formData={shopperName:e.firstName+" "+e.lastName,emailAddress:e.emailAddress,phoneNumber:e.phoneNumber},this.trackEvent(t,s)}},processVisitorMessageEvent:function(e){if(e){var t=this.getFormattedEventName(d.shopperMessage),s=this.getDefaultEventProperties();s.messageText=e,s.department=this.trackingData.department,s.correlationId=this.trackingData.chatId,s.channel=h.channels.chat,s.id=h.eventIds.chatEngagement,this.trackEvent(t,s)}},trackEvent:function(e,t){this.trackingTokens.length&&o.foreach(this.trackingTokens,function(s){t.token=s,window.orb("track",e,t),a.info("Orbee Event Tracked: "+t.id)})},trackVehicleOfInterestEvent:function(){if(this.trackingTokens.length){var e={object:"page",vendor:"ActivEngage Chat",label:"vehicle of interest viewed",vehicleData:{year:this.trackingData.vehicle.year,make:this.trackingData.vehicle.make,model:this.trackingData.vehicle.model,vin:this.trackingData.vehicle.vin,condition:this.trackingData.vehicle.status}};o.foreach(this.trackingTokens,function(t){e.token=t,window.orb("track","view",e)}),a.info("Orbee VOI Tracked")}},processParams:function(e){if(!e||"object"!=(void 0===e?"undefined":n(e)))return a.error('Expected argument "params" to be an object',e);e.data=e.data||{};for(var t=0;t<this.trackingTokens.length;t++){var s=this.trackingTokens[t],i="ANALYTICS_ORBEE_TOKEN_"+t;e.data[i]=s}},getDefaultEventProperties:function(){return{provider:h.provider}},hasFullVehicle:function(){var e=this.trackingData.vehicle;return e.status&&e.make&&e.model&&e.year},hasFullShopperName:function(){var e=this.trackingData.shopperName;return e.first&&e.last},getFormattedEventName:function(e,t){return e=e.replace(/{SHOPPER}/,this.getShopperName()),t&&this.trackingData.pageGroup&&"other"!==this.trackingData.pageGroup&&(e+=" on "+h.pageGroupStrings[this.trackingData.pageGroup]),e},setShopperName:function(e){var t=e.trim().split(" ");this.trackingData.shopperName={first:t[0],last:t.slice(1).join(" ")}},getShopperName:function(){var e=this.trackingData.shopperName;return this.trackingData.shopperName.first?(e.first+" "+e.last).trim():h.defaults.shopperName},isUpdatingShopperName:function(e){return"firstName"===e.fieldName||"lastName"===e.fieldName},onPageGroupDetected:function(e){this.trackingData.pageGroup=e},onChatFormTypeSelected:function(e){this.trackingData.department=h.departments[e.formType]||h.defaults.department},dispose:function(){c.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams),r.onChatLaunched.unsubscribe(this.onChatLaunched),r.onSmsLaunched.unsubscribe(this.onSmsLaunched),r.onChatStarted.unsubscribe(this.onChatStarted),r.onSmsStarted.unsubscribe(this.onSmsStarted),r.onChatRestored.unsubscribe(this.onChatRestored),r.onActivTargetLaunched.unsubscribe(this.onActivTargetLaunched),r.onActivTargetSubmitSuccess.unsubscribe(this.onActivTargetSubmitSuccess),r.onFormSubmitSuccess.unsubscribe(this.onFormSubmitSuccess),r.onChatLineReceived.unsubscribe(this.onChatLineReceived),r.onTestDriveReceived.unsubscribe(this.onTestDriveReceived),r.onPageGroupDetected.unsubscribe(this.onPageGroupDetected),r.onChatFormTypeSelected.subscribe(this.onChatFormTypeSelected),r.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured),r.onFormFieldUpdated.unsubscribe(this.onFormFieldUpdated),r.onFormFieldsUpdated.unsubscribe(this.onFormFieldsUpdated)}},e.exports=new i},558:function(e,t,s){"use strict";function i(){this.onChatLaunched=this.onChatLaunched.bind(this),this.onChatStarted=this.onChatStarted.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),this.dispose=this.dispose.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this)}var n=s(2),a=s(3),o=s(1).events,r={events:{launch:"launch",start:"start"},channels:{chat:"chat",sms:"text"},coxElements:["plainbutton"]},c={push:function(e,t,s,i){void 0!==window.chatTextEventCallback?e!=r.events.launch||r.coxElements.includes(s)||window.chatTextEventCallback(t):window._pxam.push(i)}};i.prototype={consumerLineCount:0,provider:null,initialize:function(){return void 0===window._pxam?n.debug("Pixall Analytics was not detected"):(this.provider=c,o.onChatLaunched.subscribe(this.onChatLaunched),o.onSmsLaunched.subscribe(this.onSmsLaunched),o.onChatStarted.subscribe(this.onChatStarted),o.onSmsStarted.subscribe(this.onSmsStarted),o.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),n.info("Detected Pixall Analytics."),!0)},dispose:function(){o.onChatLaunched.unsubscribe(this.onChatLaunched),o.onSmsLaunched.unsubscribe(this.onSmsLaunched),o.onChatStarted.unsubscribe(this.onChatStarted),o.onSmsStarted.unsubscribe(this.onSmsStarted),o.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured)},processAssistEvent:function(e,t){this.provider.push(r.events.launch,e,t,{type:"event",eventType:"assist",eventSource:"sale",assistChannel:"Website",assistProduct:"Chat",assistSubchannel:"ActivEngage"})},processGoalEvent:function(e,t){this.provider.push(r.events.start,e,"window",{type:"event",eventType:"goal",eventSource:"sale",formEventId:a.guid(),feature:"ActivEngage Chat",goal:t})},onChatLaunched:function(e){this.processAssistEvent(r.channels.chat,e.source)},onSmsLaunched:function(e){this.processAssistEvent(r.channels.sms,e.source)},onChatStarted:function(){o.onChatLineReceived.subscribe(this.onChatLineReceived)},onChatVisitorNameCaptured:function(e){e=e||{},this.onChatLineReceived({sender:"visitor",message:e.name})},onChatLineReceived:function(e){"operator"!=e.sender&&(this.consumerLineCount+=1,this.consumerLineCount>=3&&(this.processGoalEvent(r.channels.chat,"ChatStarted"),o.onChatLineReceived.unsubscribe(this.onChatLineReceived)))},onSmsStarted:function(){this.processGoalEvent(r.channels.sms,"StartSms")}},e.exports=new i},559:function(e,t,s){"use strict";function i(){this.onChatLaunched=this.onChatLaunched.bind(this),this.onSmsLaunched=this.onSmsLaunched.bind(this),this.onChatClosed=this.onChatClosed.bind(this),this.onSessionIdAvailable=this.onSessionIdAvailable.bind(this),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),this.onChatLineReceived=this.onChatLineReceived.bind(this),this.onChatVisitorNameCaptured=this.onChatVisitorNameCaptured.bind(this),this.onSmsStarted=this.onSmsStarted.bind(this),this.onShiftSessionIdAvailable=this.onShiftSessionIdAvailable.bind(this),this.dispose=this.dispose.bind(this)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(2),o=(s(3),s(4)),r=s(1).events,c=(s(1).commands,s(1).callbacks);i.prototype={providerId:"ActivEngage",context:{},initialize:function(){if(!window.sd||"function"===!n(window.sd))return void a.debug("Shift Digital Analytics was not detected.");a.debug("Successfully detected Shift Digital Analytics."),r.onChatLaunched.subscribe(this.onChatLaunched),r.onSmsLaunched.subscribe(this.onSmsLaunched),r.onSessionIdAvailable.subscribe(this.onSessionIdAvailable),r.onChatEnded.subscribe(this.onChatClosed),r.onChatLineReceived.subscribe(this.onChatLineReceived),r.onChatVisitorNameCaptured.subscribe(this.onChatVisitorNameCaptured),r.onSmsStarted.subscribe(this.onSmsStarted),c.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),sd("getSessionId",this.onShiftSessionIdAvailable);var e=o.getAccount()||{};return this.providerId="gm"===e.tenant?"DealerChatbyAE":"ActivEngage",!0},processEvent:function(e,t){if(!this.context.sessionId)return a.error("ActivEngage overwatch provider Error. SessionId is not available for Shift Digital event delivery.");sd("dataLayer",{chatProfitCenter:"sales",chatType:t,chatSessionId:this.context.sessionId,chatProvider:this.providerId,events:e}),sd("send")},dispose:function(){r.onChatLaunched.unsubscribe(this.onChatLaunched),r.onSmsLaunched.unsubscribe(this.onSmsLaunched),r.onSessionIdAvailable.unsubscribe(this.onSessionIdAvailable),r.onChatEnded.unsubscribe(this.onChatClosed),r.onChatLineReceived.unsubscribe(this.onChatLineReceived),r.onChatVisitorNameCaptured.unsubscribe(this.onChatVisitorNameCaptured),r.onSmsStarted.unsubscribe(this.onSmsStarted),c.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),c.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams)},onSessionIdAvailable:function(e){this.context.sessionId=e.sessionId,this.processEvent("chatImpression","chat")},onShiftSessionIdAvailable:function(e){this.context.shiftSessionId=e},onChatLaunched:function(){this.processEvent("chatClick","chat")},onSmsLaunched:function(){this.processEvent("chatClick","text")},onSmsStarted:function(){if(!this.context.sessionId)return a.error("ActivEngage overwatch provider Error. SessionId is not available for Shift Digital event delivery.");sd("dataLayer",{chatProfitCenter:"sales",chatType:"text",chatSessionId:this.context.sessionId,chatProvider:this.providerId,chatMessageType:"user",chatMessageContent:"",events:"chatUserMessage"}),sd("send")},onChatClosed:function(){this.processEvent("chatClosed","chat")},onChatVisitorNameCaptured:function(e){e=e||{},this.onChatLineReceived({sender:"visitor",message:e.name})},onChatLineReceived:function(e){if(!this.context.sessionId)return a.error("ActivEngage overwatch provider Error. SessionId is not available for Shift Digital event delivery.");sd("dataLayer",{chatProfitCenter:"sales",chatType:"chat",chatSessionId:this.context.sessionId,chatProvider:this.providerId,chatMessageType:"operator"==e.sender?"agent":"user",chatMessageContent:"",events:"chatUserMessage"}),sd("send")},getOnChatLaunchedParams:function(e){this.processParams(e)},getOnSmsLaunchedParams:function(e){this.processParams(e)},processParams:function(e){e.data=e.data||{},e.data.analytics_shiftdigital_id=this.context.sessionId,e.data.analytics_shiftdigital_sessionid=this.context.shiftSessionId}},e.exports=new i},560:function(e,t,s){"use strict";function i(){this.dispose=this.dispose.bind(this)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(2),o=s(3),r=s(1).callbacks,c={cookies:{kenshooid:"kenshooid"}};i.prototype={kenshooId:"",queryObject:"",initialize:function(){if(window.utag&&window.utag.data)return a.debug("Tealium tag detected."),this.queryObject=o.getQueryStringObj(),this.setKenshooId(),this.kenshooId&&a.debug("KenshooID detected : "+this.kenshooId),this.getOnChatLaunchedParams=this.getOnChatLaunchedParams.bind(this),this.getOnSmsLaunchedParams=this.getOnSmsLaunchedParams.bind(this),r.getOnChatLaunchedParams.subscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.subscribe(this.getOnSmsLaunchedParams),!0},setKenshooId:function(){var e="";this.queryObject.hasOwnProperty("k_clickid")&&this.queryObject.k_clickid&&(e=this.queryObject.k_clickid),e?o.setCookie(c.cookies.kenshooid,e,(new Date).addHours(1)):e=o.getCookie(c.cookies.kenshooid)||"",this.kenshooId=e},getOnChatLaunchedParams:function(e){this.processParams(e)},getOnSmsLaunchedParams:function(e){this.processParams(e)},processParams:function(e){if(!e||"object"!=(void 0===e?"undefined":n(e)))return a.error('Expected argument "params" to be an object',e);e.data=e.data||{},this.kenshooId&&(e.data.kenshooclickid=this.kenshooId)},dispose:function(){r.getOnChatLaunchedParams.unsubscribe(this.getOnChatLaunchedParams),r.getOnSmsLaunchedParams.unsubscribe(this.getOnSmsLaunchedParams)}},e.exports=new i},561:function(e,t,s){"use strict";function i(){this._baseUrl=""}var n=s(2),a=s(33),o=s(4),r={application:"pageview",target:"notavailable",action:"notavailable",event:"notavailable"};i.prototype={setBaseUrl:function(e){if(!e)return void n.error("PageAction BaseUrl not set to valid value",e);this._baseUrl=e,this._baseUrl.match(/\/$/)||(this._baseUrl=this._baseUrl+"/")},add:function(e){return this._processAction(e),this._get("add",e)},_get:function(e,t){return this._baseUrl?(n.debug("New POST request:",e,t),a.get(this._baseUrl+e,t).fail(function(s){n.error("POST request error:",e,s,t)})):void n.error("PageActionError: Attempting to call page action service prior to baseUrl being set.",this._baseUrl)},_processAction:function(e){String.isNullOrEmpty(e.application)&&(e.application=r.application),String.isNullOrEmpty(e.target)&&(n.warn('ActionEvent "target" is missing.'),e.target=r.target),String.isNullOrEmpty(e.action)&&(n.warn('ActionEvent "action" is missing.'),e.action=r.action),String.isNullOrEmpty(e.event)&&(n.warn('ActionEvent "event" is missing.'),e.event=r.event);var t=o.getAccount(),s=o.getSession();e.siteId=t.siteId,e.accountId=t.accountId,e.visitorId=s.visitorId,e.sessionId=s.sessionId,e.appVersion=o.constants.version}},e.exports=new i},68:function(e,t,s){"use strict";e.exports={eventNames:{ctaInteraction:"asc_cta_interaction",mediaInteraction:"asc_media_interaction",specialOffer:"asc_special_offer",formEngagement:"asc_form_engagement",videoCallEngagement:"asc_video_call_engagement",commEngagement:"asc_comm_engagement"},elementTypes:{chatTool:"chat_tool",popup:"pop-up",form:"form"},commTypes:{chat:"chat",sms:"sms",video:"video",form:"form"},pageTypes:{home:"home",vdp:"item",ddp:"item","ddp-search":"itemlist","vdp-search":"itemlist",service:"service",parts:"parts",specials:"commercial",finance:"finance",retailing:"finance","trade-in":"trade",other:"custom"},actions:{start:"start",open:"open",close:"close",load:"load",success:"success",error:"error",failed:"failed",crmUpdate:"crm_update",engage:"engage",videoStart:"video_start",videoEnd:"video_end",sendDeal:"send_deal",complete:"complete",exit:"exit",send:"send"},surveyTypes:{preChatSurveys:{preChatSurvey:{name:"PreChatSurvey",commType:"chat"},preSmsSurvey:{name:"PreSmsSurvey",commType:"sms"}},postChatSurveys:{postChatSurvey:{name:"PostChatSurvey",commType:null}}},itemProperties:["item_id","item_number","item_price","item_condition","item_year","item_make","item_model","item_variant","item_color","item_type","item_category","item_fuel_type","item_inventory_date"]}},7:function(e,t,s){"use strict";var i=s(66),n=s(36);e.exports={commands:{launchChat:new i,endChat:new i,redirect:new i,showOfflineMessage:new i,minimizePanel:new i,maximizePanel:new i,closePanel:new i,clearPanelMenu:new i,updatePanelNotifications:new i,showInventoryView:new i,showAutoPartsKitView:new i,showAcceleRaterView:new i,showMyDriveSlideOut:new i,showDigitalRetailingSlideOut:new i,showVideoAssistSettings:new i,hideVideoAssistSettings:new i,showVideoAssist:new i,updateVideoAssistDevices:new i,reloadVideoAssistDevices:new i,leaveVideoAssistVisitor:new i,operatorVideoAssistEnded:new i,registerVideoAssistData:new i,pauseVideoAssistVisitor:new i,resumeVideoAssistVisitor:new i},events:{onPageChanged:new n,onRoutesAvailable:new n({storageType:n.storageType.storePermanently}),onChatLaunched:new n,onChatInitialLinesAdded:new n,onChatPendingLineAddded:new n,onChatLineAdded:new n,onChatLineUpdated:new n,onChatAnswered:new n,onChatClosed:new n,onChatStageChanged:new n,operatorStarred:new n,onRevolveSent:new n,onLineFromMessageComponent:new n,onPanelMinimized:new n,onPanelMaximized:new n,onLanguageChange:new n,onOperatorJoined:new n,onOperatorStartedTyping:new n,onOperatorStoppedTyping:new n,onOperatorLeftChat:new n,onOperatorEndedChat:new n,onVisitorBlocked:new n,onVisitorLeftChat:new n,onVisitorNamedChanged:new n,onStillTherePing:new n,onIntentRequested:new n,onIntentPrepared:new n,operatorVideoAssistPause:new n,operatorVideoAssistResume:new n,onHubConnected:new n,onHubReconnecting:new n,onHubReconnected:new n,onHubDisconnected:new n,onHubError:new n}}}});